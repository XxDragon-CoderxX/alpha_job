/*! For license information please see main.38739550.js.LICENSE.txt */
(()=>{var t={973:(t,e)=>{var n=Object.prototype.hasOwnProperty;function i(t,e,n){for(n of t.keys())if(s(n,e))return n}function s(t,e){var r,a,o;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((a=t.length)===e.length)for(;a--&&s(t[a],e[a]););return-1===a}if(r===Set){if(t.size!==e.size)return!1;for(a of t){if((o=a)&&"object"===typeof o&&!(o=i(e,o)))return!1;if(!e.has(o))return!1}return!0}if(r===Map){if(t.size!==e.size)return!1;for(a of t){if((o=a[0])&&"object"===typeof o&&!(o=i(e,o)))return!1;if(!s(a[1],e.get(o)))return!1}return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((a=t.byteLength)===e.byteLength)for(;a--&&t.getInt8(a)===e.getInt8(a););return-1===a}if(ArrayBuffer.isView(t)){if((a=t.byteLength)===e.byteLength)for(;a--&&t[a]===e[a];);return-1===a}if(!r||"object"===typeof t){for(r in a=0,t){if(n.call(t,r)&&++a&&!n.call(e,r))return!1;if(!(r in e)||!s(t[r],e[r]))return!1}return Object.keys(e).length===a}}return t!==t&&e!==e}e.dequal=s},730:(t,e,n)=>{"use strict";var i=n(43),s=n(853);function r(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(o[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,i,s,r,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,i){var s=m.hasOwnProperty(e)?m[e]:null;(null!==s?0!==s.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,s,i)&&(n=null),i||null===s?function(t){return!!u.call(p,t)||!u.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=null===n?3!==s.type&&"":n:(e=s.attributeName,i=s.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=N&&t[N]||t["@@iterator"])?t:null}var O,F=Object.assign;function j(t){if(void 0===O)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);O=e&&e[1]||""}return"\n"+O+t}var B=!1;function z(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),r=i.stack.split("\n"),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==r[o]){var l="\n"+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?j(t):""}function V(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 1:return t=z(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case A:return"Fragment";case _:return"Portal";case k:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case R:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case P:e=t._payload,t=t._init;try{return U(t(e))}catch(n){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function G(t){t._valueTracker||(t._valueTracker=function(t){var e=q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(t){i=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=q(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function X(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Q(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function $(t,e){J(t,e);var n=H(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,s=0;s<t.length;s++){if(t[s].value===n)return t[s].selected=!0,void(i&&(t[s].defaultSelected=!0));null!==e||t[s].disabled||(e=t[s])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(r(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function st(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(r(92));if(et(n)){if(1<n.length)throw Error(r(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:H(n)}}function rt(t,e){var n=H(e.value),i=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ht,ut=(ht=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ht(t,e)}))}:ht);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(r(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(r(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(r(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var _t=null,At=null,Et=null;function kt(t){if(t=bs(t)){if("function"!==typeof _t)throw Error(r(280));var e=t.stateNode;e&&(e=xs(e),_t(t.stateNode,t.type,e))}}function St(t){At?Et?Et.push(t):Et=[t]:At=t}function Ct(){if(At){var t=At,e=Et;if(Et=At=null,kt(t),e)for(t=0;t<e.length;t++)kt(e[t])}}function Tt(t,e){return t(e)}function Mt(){}var It=!1;function Rt(t,e,n){if(It)return t(e,n);It=!0;try{return Tt(t,e,n)}finally{It=!1,(null!==At||null!==Et)&&(Mt(),Ct())}}function Pt(t,e){var n=t.stateNode;if(null===n)return null;var i=xs(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(r(231,e,typeof n));return n}var Dt=!1;if(h)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch(ht){Dt=!1}function Lt(t,e,n,i,s,r,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ot=!1,Ft=null,jt=!1,Bt=null,zt={onError:function(t){Ot=!0,Ft=t}};function Vt(t,e,n,i,s,r,a,o,l){Ot=!1,Ft=null,Lt.apply(zt,arguments)}function Ut(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Ht(t){if(Ut(t)!==t)throw Error(r(188))}function qt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ut(t)))throw Error(r(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ht(s),t;if(a===i)return Ht(s),e;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,i=a;break}if(l===i){o=!0,i=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=s;break}if(l===i){o=!0,i=a,n=s;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?t:e}(t))?Gt(t):null}function Gt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Gt(t);if(null!==e)return e;t=t.sibling}return null}var Kt=s.unstable_scheduleCallback,Yt=s.unstable_cancelCallback,Xt=s.unstable_shouldYield,Qt=s.unstable_requestPaint,Jt=s.unstable_now,$t=s.unstable_getCurrentPriorityLevel,Zt=s.unstable_ImmediatePriority,te=s.unstable_UserBlockingPriority,ee=s.unstable_NormalPriority,ne=s.unstable_LowPriority,ie=s.unstable_IdlePriority,se=null,re=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(oe(t)/le|0)|0},oe=Math.log,le=Math.LN2;var ce=64,he=4194304;function ue(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?i=ue(o):0!==(r&=a)&&(i=ue(r))}else 0!==(a=n&~s)?i=ue(a):0!==r&&(i=ue(r));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&s)&&((s=i&-i)>=(r=e&-e)||16===s&&0!==(4194240&r)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)s=1<<(n=31-ae(e)),i|=t[n],e&=~s;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ae(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var be=0;function we(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,_e,Ae,Ee,ke,Se=!1,Ce=[],Te=null,Me=null,Ie=null,Re=new Map,Pe=new Map,De=[],Ne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":Me=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":Re.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(e.pointerId)}}function Oe(t,e,n,i,s,r){return null===t||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==e&&(null!==(e=bs(e))&&_e(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==s&&-1===e.indexOf(s)&&e.push(s),t)}function Fe(t){var e=ys(t.target);if(null!==e){var n=Ut(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void ke(t.priority,(function(){Ae(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function je(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bs(n))&&_e(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);wt=i,n.target.dispatchEvent(i),wt=null,e.shift()}return!0}function Be(t,e,n){je(t)&&n.delete(e)}function ze(){Se=!1,null!==Te&&je(Te)&&(Te=null),null!==Me&&je(Me)&&(Me=null),null!==Ie&&je(Ie)&&(Ie=null),Re.forEach(Be),Pe.forEach(Be)}function Ve(t,e){t.blockedOn===e&&(t.blockedOn=null,Se||(Se=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ze)))}function Ue(t){function e(e){return Ve(e,t)}if(0<Ce.length){Ve(Ce[0],t);for(var n=1;n<Ce.length;n++){var i=Ce[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Te&&Ve(Te,t),null!==Me&&Ve(Me,t),null!==Ie&&Ve(Ie,t),Re.forEach(e),Pe.forEach(e),n=0;n<De.length;n++)(i=De[n]).blockedOn===t&&(i.blockedOn=null);for(;0<De.length&&null===(n=De[0]).blockedOn;)Fe(n),null===n.blockedOn&&De.shift()}var We=w.ReactCurrentBatchConfig,He=!0;function qe(t,e,n,i){var s=be,r=We.transition;We.transition=null;try{be=1,Ke(t,e,n,i)}finally{be=s,We.transition=r}}function Ge(t,e,n,i){var s=be,r=We.transition;We.transition=null;try{be=4,Ke(t,e,n,i)}finally{be=s,We.transition=r}}function Ke(t,e,n,i){if(He){var s=Xe(t,e,n,i);if(null===s)Hi(t,e,i,Ye,n),Le(t,i);else if(function(t,e,n,i,s){switch(e){case"focusin":return Te=Oe(Te,t,e,n,i,s),!0;case"dragenter":return Me=Oe(Me,t,e,n,i,s),!0;case"mouseover":return Ie=Oe(Ie,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Re.set(r,Oe(Re.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Pe.set(r,Oe(Pe.get(r)||null,t,e,n,i,s)),!0}return!1}(s,t,e,n,i))i.stopPropagation();else if(Le(t,i),4&e&&-1<Ne.indexOf(t)){for(;null!==s;){var r=bs(s);if(null!==r&&xe(r),null===(r=Xe(t,e,n,i))&&Hi(t,e,i,Ye,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else Hi(t,e,i,null,n)}}var Ye=null;function Xe(t,e,n,i){if(Ye=null,null!==(t=ys(t=xt(i))))if(null===(e=Ut(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Qe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($t()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Je=null,$e=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=$e,i=n.length,s="value"in Je?Je.value:Je.textContent,r=s.length;for(t=0;t<i&&n[t]===s[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===s[r-e];e++);return Ze=s.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function sn(){return!1}function rn(t){function e(e,n,i,s,r){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=rn(cn),un=F({},cn,{view:0,detail:0}),dn=rn(un),fn=F({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,on=t.screenY-ln.screenY):on=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:on}}),pn=rn(fn),gn=rn(F({},fn,{dataTransfer:0})),mn=rn(F({},un,{relatedTarget:0})),vn=rn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=rn(yn),wn=rn(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=An[t])&&!!e[t]}function kn(){return En}var Sn=F({},un,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?_n[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Cn=rn(Sn),Tn=rn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=rn(F({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),In=rn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=rn(Rn),Dn=[9,13,27,32],Nn=h&&"CompositionEvent"in window,Ln=null;h&&"documentMode"in document&&(Ln=document.documentMode);var On=h&&"TextEvent"in window&&!Ln,Fn=h&&(!Nn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Bn=!1;function zn(t,e){switch(t){case"keyup":return-1!==Dn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function qn(t,e,n,i){St(i),0<(e=Gi(e,"onChange")).length&&(n=new hn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Gn=null,Kn=null;function Yn(t){ji(t,0)}function Xn(t){if(K(ws(t)))return t}function Qn(t,e){if("change"===t)return e}var Jn=!1;if(h){var $n;if(h){var Zn="oninput"in document;if(!Zn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Zn="function"===typeof ti.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function ei(){Gn&&(Gn.detachEvent("onpropertychange",ni),Kn=Gn=null)}function ni(t){if("value"===t.propertyName&&Xn(Kn)){var e=[];qn(e,Kn,t,xt(t)),Rt(Yn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Kn=n,(Gn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function si(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xn(Kn)}function ri(t,e){if("click"===t)return Xn(e)}function ai(t,e){if("input"===t||"change"===t)return Xn(e)}var oi="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(oi(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!u.call(e,s)||!oi(t[s],e[s]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hi(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function ui(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ui(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=hi(n,r);var a=hi(n,i);s&&a&&(1!==t.rangeCount||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=h&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,bi=!1;function wi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Gi(vi,"onSelect")).length&&(e=new hn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function xi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _i={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},Ai={},Ei={};function ki(t){if(Ai[t])return Ai[t];if(!_i[t])return t;var e,n=_i[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ei)return Ai[t]=n[e];return t}h&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Si=ki("animationend"),Ci=ki("animationiteration"),Ti=ki("animationstart"),Mi=ki("transitionend"),Ii=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(t,e){Ii.set(t,e),l(e,[t])}for(var Di=0;Di<Ri.length;Di++){var Ni=Ri[Di];Pi(Ni.toLowerCase(),"on"+(Ni[0].toUpperCase()+Ni.slice(1)))}Pi(Si,"onAnimationEnd"),Pi(Ci,"onAnimationIteration"),Pi(Ti,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Mi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Fi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,s,a,o,l,c){if(Vt.apply(this,arguments),Ot){if(!Ot)throw Error(r(198));var h=Ft;Ot=!1,Ft=null,jt||(jt=!0,Bt=h)}}(i,e,void 0,t),t.currentTarget=null}function ji(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;t:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break t;Fi(s,o,c),r=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break t;Fi(s,o,c),r=l}}}if(jt)throw t=Bt,jt=!1,Bt=null,t}function Bi(t,e){var n=e[gs];void 0===n&&(n=e[gs]=new Set);var i=t+"__bubble";n.has(i)||(Wi(e,t,2,!1),n.add(i))}function zi(t,e,n){var i=0;e&&(i|=4),Wi(n,t,i,e)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[Vi]){t[Vi]=!0,a.forEach((function(e){"selectionchange"!==e&&(Oi.has(e)||zi(e,!1,t),zi(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Vi]||(e[Vi]=!0,zi("selectionchange",!1,e))}}function Wi(t,e,n,i){switch(Qe(e)){case 1:var s=qe;break;case 4:s=Ge;break;default:s=Ke}n=s.bind(null,e,n,t),s=void 0,!Dt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(s=!0),i?void 0!==s?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):void 0!==s?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hi(t,e,n,i,s){var r=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ys(o)))return;if(5===(l=a.tag)||6===l){i=r=a;continue t}o=o.parentNode}}i=i.return}Rt((function(){var i=r,s=xt(n),a=[];t:{var o=Ii.get(t);if(void 0!==o){var l=hn,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Si:case Ci:case Ti:l=vn;break;case Mi:l=In;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var h=0!==(4&e),u=!h&&"scroll"===t,d=h?null!==o?o+"Capture":null:o;h=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Pt(p,d))&&h.push(qi(p,g,f)))),u)break;p=p.return}0<h.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:h}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===wt||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(u=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(h=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(h=Tn,g="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?o:ws(l),f=null==c?o:ws(c),(o=new h(g,p+"leave",l,n,s)).target=u,o.relatedTarget=f,g=null,ys(s)===i&&((h=new h(d,p+"enter",c,n,s)).target=f,h.relatedTarget=u,g=h),u=g,l&&c)t:{for(d=c,p=0,f=h=l;f;f=Ki(f))p++;for(f=0,g=d;g;g=Ki(g))f++;for(;0<p-f;)h=Ki(h),p--;for(;0<f-p;)d=Ki(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break t;h=Ki(h),d=Ki(d)}h=null}else h=null;null!==l&&Yi(a,o,l,h,!1),null!==c&&null!==u&&Yi(a,u,c,h,!0)}if("select"===(l=(o=i?ws(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Qn;else if(Hn(o))if(Jn)m=ai;else{m=si;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ri);switch(m&&(m=m(t,i))?qn(a,m,n,s):(v&&v(t,o,i),"focusout"===t&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&tt(o,"number",o.value)),v=i?ws(i):window,t){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(a,n,s);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(a,n,s)}var y;if(Nn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Un?zn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=tn()):($e="value"in(Je=s)?Je.value:Je.textContent,Un=!0)),0<(v=Gi(i,b)).length&&(b=new wn(b,t,null,n,s),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=On?function(t,e){switch(t){case"compositionend":return Vn(e);case"keypress":return 32!==e.which?null:(Bn=!0,jn);case"textInput":return(t=e.data)===jn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!Nn&&zn(t,e)?(t=tn(),Ze=$e=Je=null,Un=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:i}),s.data=y))}ji(a,e)}))}function qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gi(t,e){for(var n=e+"Capture",i=[];null!==t;){var s=t,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Pt(t,n))&&i.unshift(qi(t,r,s)),null!=(r=Pt(t,e))&&i.push(qi(t,r,s))),t=t.return}return i}function Ki(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yi(t,e,n,i,s){for(var r=e._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Pt(n,r))&&a.unshift(qi(n,l,o)):s||null!=(l=Pt(n,r))&&a.push(qi(n,l,o))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Xi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Ji(t){return("string"===typeof t?t:""+t).replace(Xi,"\n").replace(Qi,"")}function $i(t,e,n){if(e=Ji(e),Ji(t)!==e&&n)throw Error(r(425))}function Zi(){}var ts=null,es=null;function ns(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(t){return rs.resolve(null).then(t).catch(os)}:is;function os(t){setTimeout((function(){throw t}))}function ls(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return t.removeChild(s),void Ue(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);Ue(e)}function cs(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function hs(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var us=Math.random().toString(36).slice(2),ds="__reactFiber$"+us,fs="__reactProps$"+us,ps="__reactContainer$"+us,gs="__reactEvents$"+us,ms="__reactListeners$"+us,vs="__reactHandles$"+us;function ys(t){var e=t[ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ps]||n[ds]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=hs(t);null!==t;){if(n=t[ds])return n;t=hs(t)}return e}n=(t=n).parentNode}return null}function bs(t){return!(t=t[ds]||t[ps])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ws(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(r(33))}function xs(t){return t[fs]||null}var _s=[],As=-1;function Es(t){return{current:t}}function ks(t){0>As||(t.current=_s[As],_s[As]=null,As--)}function Ss(t,e){As++,_s[As]=t.current,t.current=e}var Cs={},Ts=Es(Cs),Ms=Es(!1),Is=Cs;function Rs(t,e){var n=t.type.contextTypes;if(!n)return Cs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=e[s];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ps(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ds(){ks(Ms),ks(Ts)}function Ns(t,e,n){if(Ts.current!==Cs)throw Error(r(168));Ss(Ts,e),Ss(Ms,n)}function Ls(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in e))throw Error(r(108,W(t)||"Unknown",s));return F({},n,i)}function Os(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cs,Is=Ts.current,Ss(Ts,t),Ss(Ms,Ms.current),!0}function Fs(t,e,n){var i=t.stateNode;if(!i)throw Error(r(169));n?(t=Ls(t,e,Is),i.__reactInternalMemoizedMergedChildContext=t,ks(Ms),ks(Ts),Ss(Ts,t)):ks(Ms),Ss(Ms,n)}var js=null,Bs=!1,zs=!1;function Vs(t){null===js?js=[t]:js.push(t)}function Us(){if(!zs&&null!==js){zs=!0;var t=0,e=be;try{var n=js;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}js=null,Bs=!1}catch(s){throw null!==js&&(js=js.slice(t+1)),Kt(Zt,Us),s}finally{be=e,zs=!1}}return null}var Ws=[],Hs=0,qs=null,Gs=0,Ks=[],Ys=0,Xs=null,Qs=1,Js="";function $s(t,e){Ws[Hs++]=Gs,Ws[Hs++]=qs,qs=t,Gs=e}function Zs(t,e,n){Ks[Ys++]=Qs,Ks[Ys++]=Js,Ks[Ys++]=Xs,Xs=t;var i=Qs;t=Js;var s=32-ae(i)-1;i&=~(1<<s),n+=1;var r=32-ae(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Qs=1<<32-ae(e)+s|n<<s|i,Js=r+t}else Qs=1<<r|n<<s|i,Js=t}function tr(t){null!==t.return&&($s(t,1),Zs(t,1,0))}function er(t){for(;t===qs;)qs=Ws[--Hs],Ws[Hs]=null,Gs=Ws[--Hs],Ws[Hs]=null;for(;t===Xs;)Xs=Ks[--Ys],Ks[Ys]=null,Js=Ks[--Ys],Ks[Ys]=null,Qs=Ks[--Ys],Ks[Ys]=null}var nr=null,ir=null,sr=!1,rr=null;function ar(t,e){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function or(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,nr=t,ir=cs(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,nr=t,ir=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Xs?{id:Qs,overflow:Js}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,nr=t,ir=null,!0);default:return!1}}function lr(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function cr(t){if(sr){var e=ir;if(e){var n=e;if(!or(t,e)){if(lr(t))throw Error(r(418));e=cs(n.nextSibling);var i=nr;e&&or(t,e)?ar(i,n):(t.flags=-4097&t.flags|2,sr=!1,nr=t)}}else{if(lr(t))throw Error(r(418));t.flags=-4097&t.flags|2,sr=!1,nr=t}}}function hr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;nr=t}function ur(t){if(t!==nr)return!1;if(!sr)return hr(t),sr=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ns(t.type,t.memoizedProps)),e&&(e=ir)){if(lr(t))throw dr(),Error(r(418));for(;e;)ar(t,e),e=cs(e.nextSibling)}if(hr(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(r(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ir=cs(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ir=null}}else ir=nr?cs(t.stateNode.nextSibling):null;return!0}function dr(){for(var t=ir;t;)t=cs(t.nextSibling)}function fr(){ir=nr=null,sr=!1}function pr(t){null===rr?rr=[t]:rr.push(t)}var gr=w.ReactCurrentBatchConfig;function mr(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,t));var s=i,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=s.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(r(284));if(!n._owner)throw Error(r(290,t))}return t}function vr(t,e){throw t=Object.prototype.toString.call(e),Error(r(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yr(t){return(0,t._init)(t._payload)}function br(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(t,e){return(t=Dc(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Fc(n,t.mode,i)).return=t,e):((e=s(e,n)).return=t,e)}function c(t,e,n,i){var r=n.type;return r===A?u(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===P&&yr(r)===e.type)?((i=s(e,n.props)).ref=mr(t,e,n),i.return=t,i):((i=Nc(n.type,n.key,n.props,null,t.mode,i)).ref=mr(t,e,n),i.return=t,i)}function h(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=jc(n,t.mode,i)).return=t,e):((e=s(e,n.children||[])).return=t,e)}function u(t,e,n,i,r){return null===e||7!==e.tag?((e=Lc(n,t.mode,i,r)).return=t,e):((e=s(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Nc(e.type,e.key,e.props,null,t.mode,n)).ref=mr(t,null,e),n.return=t,n;case _:return(e=jc(e,t.mode,n)).return=t,e;case P:return d(t,(0,e._init)(e._payload),n)}if(et(e)||L(e))return(e=Lc(e,t.mode,n,null)).return=t,e;vr(t,e)}return null}function f(t,e,n,i){var s=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(t,e,n,i):null;case _:return n.key===s?h(t,e,n,i):null;case P:return f(t,e,(s=n._init)(n._payload),i)}if(et(n)||L(n))return null!==s?null:u(t,e,n,i,null);vr(t,n)}return null}function p(t,e,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,s);case _:return h(e,t=t.get(null===i.key?n:i.key)||null,i,s);case P:return p(t,e,n,(0,i._init)(i._payload),s)}if(et(i)||L(i))return u(e,t=t.get(n)||null,i,s,null);vr(e,i)}return null}function g(s,r,o,l){for(var c=null,h=null,u=r,g=r=0,m=null;null!==u&&g<o.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var v=f(s,u,o[g],l);if(null===v){null===u&&(u=m);break}t&&u&&null===v.alternate&&e(s,u),r=a(v,r,g),null===h?c=v:h.sibling=v,h=v,u=m}if(g===o.length)return n(s,u),sr&&$s(s,g),c;if(null===u){for(;g<o.length;g++)null!==(u=d(s,o[g],l))&&(r=a(u,r,g),null===h?c=u:h.sibling=u,h=u);return sr&&$s(s,g),c}for(u=i(s,u);g<o.length;g++)null!==(m=p(u,s,g,o[g],l))&&(t&&null!==m.alternate&&u.delete(null===m.key?g:m.key),r=a(m,r,g),null===h?c=m:h.sibling=m,h=m);return t&&u.forEach((function(t){return e(s,t)})),sr&&$s(s,g),c}function m(s,o,l,c){var h=L(l);if("function"!==typeof h)throw Error(r(150));if(null==(l=h.call(l)))throw Error(r(151));for(var u=h=null,g=o,m=o=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(s,g,y.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(s,g),o=a(b,o,m),null===u?h=b:u.sibling=b,u=b,g=v}if(y.done)return n(s,g),sr&&$s(s,m),h;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(s,y.value,c))&&(o=a(y,o,m),null===u?h=y:u.sibling=y,u=y);return sr&&$s(s,m),h}for(g=i(s,g);!y.done;m++,y=l.next())null!==(y=p(g,s,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),o=a(y,o,m),null===u?h=y:u.sibling=y,u=y);return t&&g.forEach((function(t){return e(s,t)})),sr&&$s(s,m),h}return function t(i,r,a,l){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:t:{for(var c=a.key,h=r;null!==h;){if(h.key===c){if((c=a.type)===A){if(7===h.tag){n(i,h.sibling),(r=s(h,a.props.children)).return=i,i=r;break t}}else if(h.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&yr(c)===h.type){n(i,h.sibling),(r=s(h,a.props)).ref=mr(i,h,a),r.return=i,i=r;break t}n(i,h);break}e(i,h),h=h.sibling}a.type===A?((r=Lc(a.props.children,i.mode,l,a.key)).return=i,i=r):((l=Nc(a.type,a.key,a.props,null,i.mode,l)).ref=mr(i,r,a),l.return=i,i=l)}return o(i);case _:t:{for(h=a.key;null!==r;){if(r.key===h){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(i,r.sibling),(r=s(r,a.children||[])).return=i,i=r;break t}n(i,r);break}e(i,r),r=r.sibling}(r=jc(a,i.mode,l)).return=i,i=r}return o(i);case P:return t(i,r,(h=a._init)(a._payload),l)}if(et(a))return g(i,r,a,l);if(L(a))return m(i,r,a,l);vr(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==r&&6===r.tag?(n(i,r.sibling),(r=s(r,a)).return=i,i=r):(n(i,r),(r=Fc(a,i.mode,l)).return=i,i=r),o(i)):n(i,r)}}var wr=br(!0),xr=br(!1),_r=Es(null),Ar=null,Er=null,kr=null;function Sr(){kr=Er=Ar=null}function Cr(t){var e=_r.current;ks(_r),t._currentValue=e}function Tr(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Mr(t,e){Ar=t,kr=Er=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bo=!0),t.firstContext=null)}function Ir(t){var e=t._currentValue;if(kr!==t)if(t={context:t,memoizedValue:e,next:null},null===Er){if(null===Ar)throw Error(r(308));Er=t,Ar.dependencies={lanes:0,firstContext:t}}else Er=Er.next=t;return e}var Rr=null;function Pr(t){null===Rr?Rr=[t]:Rr.push(t)}function Dr(t,e,n,i){var s=e.interleaved;return null===s?(n.next=n,Pr(e)):(n.next=s.next,s.next=n),e.interleaved=n,Nr(t,i)}function Nr(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Lr=!1;function Or(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fr(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Br(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Tl)){var s=i.pending;return null===s?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Nr(t,n)}return null===(s=i.interleaved)?(e.next=e,Pr(i)):(e.next=s.next,s.next=e),i.interleaved=e,Nr(t,n)}function zr(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Vr(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=a:r=r.next=a,n=n.next}while(null!==n);null===r?s=r=e:r=r.next=e}else s=r=e;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ur(t,e,n,i){var s=t.updateQueue;Lr=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?r=c:a.next=c,a=l;var h=t.alternate;null!==h&&((o=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(a=0,h=c=l=null,o=r;;){var d=o.lane,f=o.eventTime;if((i&d)===d){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=t,g=o;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(f,u,d);break t}u=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,u,d):p)||void 0===d)break t;u=F({},u,d);break t;case 2:Lr=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,l=u):h=h.next=f,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===h&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,null!==(e=s.shared.interleaved)){s=e;do{a|=s.lane,s=s.next}while(s!==e)}else null===r&&(s.shared.lanes=0);Ol|=a,t.lanes=a,t.memoizedState=u}}function Wr(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!==typeof s)throw Error(r(191,s));s.call(i)}}}var Hr={},qr=Es(Hr),Gr=Es(Hr),Kr=Es(Hr);function Yr(t){if(t===Hr)throw Error(r(174));return t}function Xr(t,e){switch(Ss(Kr,e),Ss(Gr,t),Ss(qr,Hr),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ks(qr),Ss(qr,e)}function Qr(){ks(qr),ks(Gr),ks(Kr)}function Jr(t){Yr(Kr.current);var e=Yr(qr.current),n=lt(e,t.type);e!==n&&(Ss(Gr,t),Ss(qr,n))}function $r(t){Gr.current===t&&(ks(qr),ks(Gr))}var Zr=Es(0);function ta(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ea=[];function na(){for(var t=0;t<ea.length;t++)ea[t]._workInProgressVersionPrimary=null;ea.length=0}var ia=w.ReactCurrentDispatcher,sa=w.ReactCurrentBatchConfig,ra=0,aa=null,oa=null,la=null,ca=!1,ha=!1,ua=0,da=0;function fa(){throw Error(r(321))}function pa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!oi(t[n],e[n]))return!1;return!0}function ga(t,e,n,i,s,a){if(ra=a,aa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=null===t||null===t.memoizedState?$a:Za,t=n(i,s),ha){a=0;do{if(ha=!1,ua=0,25<=a)throw Error(r(301));a+=1,la=oa=null,e.updateQueue=null,ia.current=to,t=n(i,s)}while(ha)}if(ia.current=Ja,e=null!==oa&&null!==oa.next,ra=0,la=oa=aa=null,ca=!1,e)throw Error(r(300));return t}function ma(){var t=0!==ua;return ua=0,t}function va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=t:la=la.next=t,la}function ya(){if(null===oa){var t=aa.alternate;t=null!==t?t.memoizedState:null}else t=oa.next;var e=null===la?aa.memoizedState:la.next;if(null!==e)la=e,oa=t;else{if(null===t)throw Error(r(310));t={memoizedState:(oa=t).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=t:la=la.next=t}return la}function ba(t,e){return"function"===typeof e?e(t):e}function wa(t){var e=ya(),n=e.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=t;var i=oa,s=i.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=o=null,c=null,h=a;do{var u=h.lane;if((ra&u)===u)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var d={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,aa.lanes|=u,Ol|=u}h=h.next}while(null!==h&&h!==a);null===c?o=i:c.next=l,oi(i,e.memoizedState)||(bo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){s=t;do{a=s.lane,aa.lanes|=a,Ol|=a,s=s.next}while(s!==t)}else null===s&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xa(t){var e=ya(),n=e.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,a=e.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=t(a,o.action),o=o.next}while(o!==s);oi(a,e.memoizedState)||(bo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function _a(){}function Aa(t,e){var n=aa,i=ya(),s=e(),a=!oi(i.memoizedState,s);if(a&&(i.memoizedState=s,bo=!0),i=i.queue,La(Sa.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,ka.bind(null,n,i,s,e),void 0,null),null===Ml)throw Error(r(349));0!==(30&ra)||Ea(n,e,s)}return s}function Ea(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=aa.updateQueue)?(e={lastEffect:null,stores:null},aa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function ka(t,e,n,i){e.value=n,e.getSnapshot=i,Ca(e)&&Ta(t)}function Sa(t,e,n){return n((function(){Ca(e)&&Ta(t)}))}function Ca(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oi(t,n)}catch(i){return!0}}function Ta(t){var e=Nr(t,1);null!==e&&nc(e,t,1,-1)}function Ma(t){var e=va();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},e.queue=t,t=t.dispatch=Ka.bind(null,aa,t),[e.memoizedState,t]}function Ia(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=aa.updateQueue)?(e={lastEffect:null,stores:null},aa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Ra(){return ya().memoizedState}function Pa(t,e,n,i){var s=va();aa.flags|=t,s.memoizedState=Ia(1|e,n,void 0,void 0===i?null:i)}function Da(t,e,n,i){var s=ya();i=void 0===i?null:i;var r=void 0;if(null!==oa){var a=oa.memoizedState;if(r=a.destroy,null!==i&&pa(i,a.deps))return void(s.memoizedState=Ia(e,n,r,i))}aa.flags|=t,s.memoizedState=Ia(1|e,n,r,i)}function Na(t,e){return Pa(8390656,8,t,e)}function La(t,e){return Da(2048,8,t,e)}function Oa(t,e){return Da(4,2,t,e)}function Fa(t,e){return Da(4,4,t,e)}function ja(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ba(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Da(4,4,ja.bind(null,e,t),n)}function za(){}function Va(t,e){var n=ya();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&pa(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ua(t,e){var n=ya();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&pa(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Wa(t,e,n){return 0===(21&ra)?(t.baseState&&(t.baseState=!1,bo=!0),t.memoizedState=n):(oi(n,e)||(n=ge(),aa.lanes|=n,Ol|=n,t.baseState=!0),e)}function Ha(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=sa.transition;sa.transition={};try{t(!1),e()}finally{be=n,sa.transition=i}}function qa(){return ya().memoizedState}function Ga(t,e,n){var i=ec(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(t))Xa(e,n);else if(null!==(n=Dr(t,e,n,i))){nc(n,t,i,tc()),Qa(n,e,i)}}function Ka(t,e,n){var i=ec(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(t))Xa(e,s);else{var r=t.alternate;if(0===t.lanes&&(null===r||0===r.lanes)&&null!==(r=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,oi(o,a)){var l=e.interleaved;return null===l?(s.next=s,Pr(e)):(s.next=l.next,l.next=s),void(e.interleaved=s)}}catch(c){}null!==(n=Dr(t,e,s,i))&&(nc(n,t,i,s=tc()),Qa(n,e,i))}}function Ya(t){var e=t.alternate;return t===aa||null!==e&&e===aa}function Xa(t,e){ha=ca=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}var Ja={readContext:Ir,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:Ir,useCallback:function(t,e){return va().memoizedState=[t,void 0===e?null:e],t},useContext:Ir,useEffect:Na,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Pa(4194308,4,ja.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pa(4,2,t,e)},useMemo:function(t,e){var n=va();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=va();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ga.bind(null,aa,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},va().memoizedState=t},useState:Ma,useDebugValue:za,useDeferredValue:function(t){return va().memoizedState=t},useTransition:function(){var t=Ma(!1),e=t[0];return t=Ha.bind(null,t[1]),va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=aa,s=va();if(sr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=e(),null===Ml)throw Error(r(349));0!==(30&ra)||Ea(i,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,Na(Sa.bind(null,i,a,t),[t]),i.flags|=2048,Ia(9,ka.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=va(),e=Ml.identifierPrefix;if(sr){var n=Js;e=":"+e+"R"+(n=(Qs&~(1<<32-ae(Qs)-1)).toString(32)+n),0<(n=ua++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=da++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Za={readContext:Ir,useCallback:Va,useContext:Ir,useEffect:La,useImperativeHandle:Ba,useInsertionEffect:Oa,useLayoutEffect:Fa,useMemo:Ua,useReducer:wa,useRef:Ra,useState:function(){return wa(ba)},useDebugValue:za,useDeferredValue:function(t){return Wa(ya(),oa.memoizedState,t)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:_a,useSyncExternalStore:Aa,useId:qa,unstable_isNewReconciler:!1},to={readContext:Ir,useCallback:Va,useContext:Ir,useEffect:La,useImperativeHandle:Ba,useInsertionEffect:Oa,useLayoutEffect:Fa,useMemo:Ua,useReducer:xa,useRef:Ra,useState:function(){return xa(ba)},useDebugValue:za,useDeferredValue:function(t){var e=ya();return null===oa?e.memoizedState=t:Wa(e,oa.memoizedState,t)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:_a,useSyncExternalStore:Aa,useId:qa,unstable_isNewReconciler:!1};function eo(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function no(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var io={isMounted:function(t){return!!(t=t._reactInternals)&&Ut(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tc(),s=ec(t),r=jr(i,s);r.payload=e,void 0!==n&&null!==n&&(r.callback=n),null!==(e=Br(t,r,s))&&(nc(e,t,s,i),zr(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tc(),s=ec(t),r=jr(i,s);r.tag=1,r.payload=e,void 0!==n&&null!==n&&(r.callback=n),null!==(e=Br(t,r,s))&&(nc(e,t,s,i),zr(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),i=ec(t),s=jr(n,i);s.tag=2,void 0!==e&&null!==e&&(s.callback=e),null!==(e=Br(t,s,i))&&(nc(e,t,i,n),zr(e,t,i))}};function so(t,e,n,i,s,r,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,r,a):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(s,r))}function ro(t,e,n){var i=!1,s=Cs,r=e.contextType;return"object"===typeof r&&null!==r?r=Ir(r):(s=Ps(e)?Is:Ts.current,r=(i=null!==(i=e.contextTypes)&&void 0!==i)?Rs(t,s):Cs),e=new e(n,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=io,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function ao(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&io.enqueueReplaceState(e,e.state,null)}function oo(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Or(t);var r=e.contextType;"object"===typeof r&&null!==r?s.context=Ir(r):(r=Ps(e)?Is:Ts.current,s.context=Rs(t,r)),s.state=t.memoizedState,"function"===typeof(r=e.getDerivedStateFromProps)&&(no(t,e,r,n),s.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(e=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),e!==s.state&&io.enqueueReplaceState(s,s.state,null),Ur(t,n,s,i),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308)}function lo(t,e){try{var n="",i=e;do{n+=V(i),i=i.return}while(i);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:t,source:e,stack:s,digest:null}}function co(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ho(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var uo="function"===typeof WeakMap?WeakMap:Map;function fo(t,e,n){(n=jr(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Hl||(Hl=!0,ql=i),ho(0,e)},n}function po(t,e,n){(n=jr(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){ho(0,e)}}var r=t.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){ho(0,e),"function"!==typeof i&&(null===Gl?Gl=new Set([this]):Gl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function go(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new uo;var s=new Set;i.set(e,s)}else void 0===(s=i.get(e))&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=kc.bind(null,t,e,n),e.then(t,t))}function mo(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vo(t,e,n,i,s){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=jr(-1,1)).tag=2,Br(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var yo=w.ReactCurrentOwner,bo=!1;function wo(t,e,n,i){e.child=null===t?xr(e,null,n,i):wr(e,t.child,n,i)}function xo(t,e,n,i,s){n=n.render;var r=e.ref;return Mr(e,s),i=ga(t,e,n,i,r,s),n=ma(),null===t||bo?(sr&&n&&tr(e),e.flags|=1,wo(t,e,i,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ho(t,e,s))}function _o(t,e,n,i,s){if(null===t){var r=n.type;return"function"!==typeof r||Pc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Nc(n.type,null,i,e,e.mode,s)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=r,Ao(t,e,r,i,s))}if(r=t.child,0===(t.lanes&s)){var a=r.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&t.ref===e.ref)return Ho(t,e,s)}return e.flags|=1,(t=Dc(r,i)).ref=e.ref,t.return=e,e.child=t}function Ao(t,e,n,i,s){if(null!==t){var r=t.memoizedProps;if(li(r,i)&&t.ref===e.ref){if(bo=!1,e.pendingProps=i=r,0===(t.lanes&s))return e.lanes=t.lanes,Ho(t,e,s);0!==(131072&t.flags)&&(bo=!0)}}return So(t,e,n,i,s)}function Eo(t,e,n){var i=e.pendingProps,s=i.children,r=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Dl,Pl),Pl|=n;else{if(0===(1073741824&n))return t=null!==r?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ss(Dl,Pl),Pl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==r?r.baseLanes:n,Ss(Dl,Pl),Pl|=i}else null!==r?(i=r.baseLanes|n,e.memoizedState=null):i=n,Ss(Dl,Pl),Pl|=i;return wo(t,e,s,n),e.child}function ko(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function So(t,e,n,i,s){var r=Ps(n)?Is:Ts.current;return r=Rs(e,r),Mr(e,s),n=ga(t,e,n,i,r,s),i=ma(),null===t||bo?(sr&&i&&tr(e),e.flags|=1,wo(t,e,n,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ho(t,e,s))}function Co(t,e,n,i,s){if(Ps(n)){var r=!0;Os(e)}else r=!1;if(Mr(e,s),null===e.stateNode)Wo(t,e),ro(e,n,i),oo(e,n,i,s),i=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ir(c):c=Rs(e,c=Ps(n)?Is:Ts.current);var h=n.getDerivedStateFromProps,u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(e,a,i,c),Lr=!1;var d=e.memoizedState;a.state=d,Ur(e,i,a,s),l=e.memoizedState,o!==i||d!==l||Ms.current||Lr?("function"===typeof h&&(no(e,n,h,i),l=e.memoizedState),(o=Lr||so(e,n,o,i,d,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Fr(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:eo(e.type,o),a.props=c,u=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ir(l):l=Rs(e,l=Ps(n)?Is:Ts.current);var f=n.getDerivedStateFromProps;(h="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||d!==l)&&ao(e,a,i,l),Lr=!1,d=e.memoizedState,a.state=d,Ur(e,i,a,s);var p=e.memoizedState;o!==u||d!==p||Ms.current||Lr?("function"===typeof f&&(no(e,n,f,i),p=e.memoizedState),(c=Lr||so(e,n,c,i,d,p,l)||!1)?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return To(t,e,n,i,r,s)}function To(t,e,n,i,s,r){ko(t,e);var a=0!==(128&e.flags);if(!i&&!a)return s&&Fs(e,n,!1),Ho(t,e,r);i=e.stateNode,yo.current=e;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=wr(e,t.child,null,r),e.child=wr(e,null,o,r)):wo(t,e,o,r),e.memoizedState=i.state,s&&Fs(e,n,!0),e.child}function Mo(t){var e=t.stateNode;e.pendingContext?Ns(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ns(0,e.context,!1),Xr(t,e.containerInfo)}function Io(t,e,n,i,s){return fr(),pr(s),e.flags|=256,wo(t,e,n,i),e.child}var Ro,Po,Do,No,Lo={dehydrated:null,treeContext:null,retryLane:0};function Oo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fo(t,e,n){var i,s=e.pendingProps,a=Zr.current,o=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&a)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ss(Zr,1&a),null===t)return cr(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=s.children,t=s.fallback,o?(s=e.mode,o=e.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,s,0,null),t=Lc(t,s,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Oo(n),e.memoizedState=Lo,t):jo(e,l));if(null!==(a=t.memoizedState)&&null!==(i=a.dehydrated))return function(t,e,n,i,s,a,o){if(n)return 256&e.flags?(e.flags&=-257,Bo(t,e,o,i=co(Error(r(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=Oc({mode:"visible",children:i.children},s,0,null),(a=Lc(a,s,o,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,0!==(1&e.mode)&&wr(e,t.child,null,o),e.child.memoizedState=Oo(o),e.memoizedState=Lo,a);if(0===(1&e.mode))return Bo(t,e,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Bo(t,e,o,i=co(a=Error(r(419)),i,void 0))}if(l=0!==(o&t.childLanes),bo||l){if(null!==(i=Ml)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Nr(t,s),nc(i,t,s,-1))}return gc(),Bo(t,e,o,i=co(Error(r(421))))}return"$?"===s.data?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,ir=cs(s.nextSibling),nr=e,sr=!0,rr=null,null!==t&&(Ks[Ys++]=Qs,Ks[Ys++]=Js,Ks[Ys++]=Xs,Qs=t.id,Js=t.overflow,Xs=e),e=jo(e,i.children),e.flags|=4096,e)}(t,e,l,s,i,a,n);if(o){o=s.fallback,l=e.mode,i=(a=t.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&e.child!==a?((s=e.child).childLanes=0,s.pendingProps=c,e.deletions=null):(s=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Dc(i,o):(o=Lc(o,l,n,null)).flags|=2,o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,l=null===(l=t.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Lo,s}return t=(o=t.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),0===(1&e.mode)&&(s.lanes=n),s.return=e,s.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function jo(t,e){return(e=Oc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Bo(t,e,n,i){return null!==i&&pr(i),wr(e,t.child,null,n),(t=jo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function zo(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Tr(t.return,e,n)}function Vo(t,e,n,i,s){var r=t.memoizedState;null===r?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function Uo(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(wo(t,e,i.children,n),0!==(2&(i=Zr.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&zo(t,n,e);else if(19===t.tag)zo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ss(Zr,i),0===(1&e.mode))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;null!==n;)null!==(t=n.alternate)&&null===ta(t)&&(s=n),n=n.sibling;null===(n=s)?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vo(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;null!==s;){if(null!==(t=s.alternate)&&null===ta(t)){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vo(e,!0,n,null,r);break;case"together":Vo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wo(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ho(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ol|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(r(153));if(null!==e.child){for(n=Dc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Dc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qo(t,e){if(!sr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Go(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=t,s=s.sibling;else for(s=t.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ko(t,e,n){var i=e.pendingProps;switch(er(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(e),null;case 1:case 17:return Ps(e.type)&&Ds(),Go(e),null;case 3:return i=e.stateNode,Qr(),ks(Ms),ks(Ts),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ur(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==rr&&(ac(rr),rr=null))),Po(t,e),Go(e),null;case 5:$r(e);var s=Yr(Kr.current);if(n=e.type,null!==t&&null!=e.stateNode)Do(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(r(166));return Go(e),null}if(t=Yr(qr.current),ur(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[ds]=e,i[fs]=a,t=0!==(1&e.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(s=0;s<Li.length;s++)Bi(Li[s],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":Q(i,a),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Bi("invalid",i);break;case"textarea":st(i,a),Bi("invalid",i)}for(var l in yt(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&$i(i.textContent,c,t),s=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$i(i.textContent,c,t),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":G(i),Z(i,a,!0);break;case"textarea":G(i),at(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=s,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ds]=e,t[fs]=i,Ro(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Bi("cancel",t),Bi("close",t),s=i;break;case"iframe":case"object":case"embed":Bi("load",t),s=i;break;case"video":case"audio":for(s=0;s<Li.length;s++)Bi(Li[s],t);s=i;break;case"source":Bi("error",t),s=i;break;case"img":case"image":case"link":Bi("error",t),Bi("load",t),s=i;break;case"details":Bi("toggle",t),s=i;break;case"input":Q(t,i),s=X(t,i),Bi("invalid",t);break;case"option":default:s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=F({},i,{value:void 0}),Bi("invalid",t);break;case"textarea":st(t,i),s=it(t,i),Bi("invalid",t)}for(a in yt(n,s),c=s)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?mt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ut(t,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&dt(t,h):"number"===typeof h&&dt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Bi("scroll",t):null!=h&&b(t,a,h,l))}switch(n){case"input":G(t),Z(t,i,!1);break;case"textarea":G(t),at(t);break;case"option":null!=i.value&&t.setAttribute("value",""+H(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?nt(t,!!i.multiple,a,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(t.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Go(e),null;case 6:if(t&&null!=e.stateNode)No(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(r(166));if(n=Yr(Kr.current),Yr(qr.current),ur(e)){if(i=e.stateNode,n=e.memoizedProps,i[ds]=e,(a=i.nodeValue!==n)&&null!==(t=nr))switch(t.tag){case 3:$i(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&$i(i.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[ds]=e,e.stateNode=i}return Go(e),null;case 13:if(ks(Zr),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(sr&&null!==ir&&0!==(1&e.mode)&&0===(128&e.flags))dr(),fr(),e.flags|=98560,a=!1;else if(a=ur(e),null!==i&&null!==i.dehydrated){if(null===t){if(!a)throw Error(r(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(r(317));a[ds]=e}else fr(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Go(e),a=!1}else null!==rr&&(ac(rr),rr=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&Zr.current)?0===Nl&&(Nl=3):gc())),null!==e.updateQueue&&(e.flags|=4),Go(e),null);case 4:return Qr(),Po(t,e),null===t&&Ui(e.stateNode.containerInfo),Go(e),null;case 10:return Cr(e.type._context),Go(e),null;case 19:if(ks(Zr),null===(a=e.memoizedState))return Go(e),null;if(i=0!==(128&e.flags),null===(l=a.rendering))if(i)qo(a,!1);else{if(0!==Nl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ta(t))){for(e.flags|=128,qo(a,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ss(Zr,1&Zr.current|2),e.child}t=t.sibling}null!==a.tail&&Jt()>Ul&&(e.flags|=128,i=!0,qo(a,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ta(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!sr)return Go(e),null}else 2*Jt()-a.renderingStartTime>Ul&&1073741824!==n&&(e.flags|=128,i=!0,qo(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,n=Zr.current,Ss(Zr,i?1&n|2:1&n),e):(Go(e),null);case 22:case 23:return uc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Pl)&&(Go(e),6&e.subtreeFlags&&(e.flags|=8192)):Go(e),null;case 24:case 25:return null}throw Error(r(156,e.tag))}function Yo(t,e){switch(er(e),e.tag){case 1:return Ps(e.type)&&Ds(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Qr(),ks(Ms),ks(Ts),na(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return $r(e),null;case 13:if(ks(Zr),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(r(340));fr()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return ks(Zr),null;case 4:return Qr(),null;case 10:return Cr(e.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ro=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Do=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Yr(qr.current);var r,a=null;switch(n){case"input":s=X(t,s),i=X(t,i),a=[];break;case"select":s=F({},s,{value:void 0}),i=F({},i,{value:void 0}),a=[];break;case"textarea":s=it(t,s),i=it(t,i),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(t.onclick=Zi)}for(h in yt(n,i),n=null,s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var l=s[h];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(o.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in i){var c=i[h];if(l=null!=s?s[h]:void 0,i.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(o.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Bi("scroll",t),a||l===c||(a=[])):(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},No=function(t,e,n,i){n!==i&&(e.flags|=4)};var Xo=!1,Qo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Zo(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(t,e,i)}else n.current=null}function tl(t,e,n){try{n()}catch(i){Ec(t,e,i)}}var el=!1;function nl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,void 0!==r&&tl(e,n,r)}s=s.next}while(s!==i)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function rl(t){var e=t.alternate;null!==e&&(t.alternate=null,rl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[ds],delete e[fs],delete e[gs],delete e[ms],delete e[vs])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ol(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zi));else if(4!==i&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var hl=null,ul=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(re&&"function"===typeof re.onCommitFiberUnmount)try{re.onCommitFiberUnmount(se,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,e);case 6:var i=hl,s=ul;hl=null,dl(t,e,n),ul=s,null!==(hl=i)&&(ul?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(ul?(t=hl,n=n.stateNode,8===t.nodeType?ls(t.parentNode,n):1===t.nodeType&&ls(t,n),Ue(t)):ls(hl,n.stateNode));break;case 4:i=hl,s=ul,hl=n.stateNode.containerInfo,ul=!0,dl(t,e,n),hl=i,ul=s;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&tl(n,e,a),s=s.next}while(s!==i)}dl(t,e,n);break;case 1:if(!Qo&&(Zo(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Ec(n,e,o)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Qo=(i=Qo)||null!==n.memoizedState,dl(t,e,n),Qo=i):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Jo),e.forEach((function(e){var i=Tc.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var a=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,ul=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,ul=!0;break t}l=l.return}if(null===hl)throw Error(r(160));fl(a,o,s),hl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(h){Ec(s,e,h)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&i){try{nl(3,t,t.return),il(3,t)}catch(m){Ec(t,t.return,m)}try{nl(5,t,t.return)}catch(m){Ec(t,t.return,m)}}break;case 1:gl(e,t),vl(t),512&i&&null!==n&&Zo(n,n.return);break;case 5:if(gl(e,t),vl(t),512&i&&null!==n&&Zo(n,n.return),32&t.flags){var s=t.stateNode;try{dt(s,"")}catch(m){Ec(t,t.return,m)}}if(4&i&&null!=(s=t.stateNode)){var a=t.memoizedProps,o=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),bt(l,o);var h=bt(l,a);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];"style"===u?mt(s,d):"dangerouslySetInnerHTML"===u?ut(s,d):"children"===u?dt(s,d):b(s,u,d,h)}switch(l){case"input":$(s,a);break;case"textarea":rt(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?nt(s,!!a.multiple,a.defaultValue,!0):nt(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(m){Ec(t,t.return,m)}}break;case 6:if(gl(e,t),vl(t),4&i){if(null===t.stateNode)throw Error(r(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(m){Ec(t,t.return,m)}}break;case 3:if(gl(e,t),vl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ue(e.containerInfo)}catch(m){Ec(t,t.return,m)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(s=t.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Vl=Jt())),4&i&&pl(t);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&t.mode?(Qo=(h=Qo)||u,gl(e,t),Qo=h):gl(e,t),vl(t),8192&i){if(h=null!==t.memoizedState,(t.stateNode.isHidden=h)&&!u&&0!==(1&t.mode))for($o=t,u=t.child;null!==u;){for(d=$o=u;null!==$o;){switch(p=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ec(i,n,m)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,$o=p):xl(d)}u=u.sibling}t:for(u=null,d=t;;){if(5===d.tag){if(null===u){u=d;try{s=d.stateNode,h?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",o))}catch(m){Ec(t,t.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(m){Ec(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(e,t),vl(t),4&i&&pl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var i=n;break t}n=n.return}throw Error(r(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(dt(s,""),i.flags&=-33),cl(t,ol(t),s);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(t,ol(t),a);break;default:throw Error(r(161))}}catch(o){Ec(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){$o=t,bl(t,e,n)}function bl(t,e,n){for(var i=0!==(1&t.mode);null!==$o;){var s=$o,r=s.child;if(22===s.tag&&i){var a=null!==s.memoizedState||Xo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Xo;var c=Qo;if(Xo=a,(Qo=l)&&!c)for($o=s;null!==$o;)l=(a=$o).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,$o=l):_l(s);for(;null!==r;)$o=r,bl(r,e,n),r=r.sibling;$o=s,Xo=o,Qo=c}wl(t)}else 0!==(8772&s.subtreeFlags)&&null!==r?(r.return=s,$o=r):wl(t)}}function wl(t){for(;null!==$o;){var e=$o;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qo||il(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Qo)if(null===n)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:eo(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Wr(e,a,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Wr(e,o,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var h=e.alternate;if(null!==h){var u=h.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ue(d)}}}break;default:throw Error(r(163))}Qo||512&e.flags&&sl(e)}catch(f){Ec(e,e.return,f)}}if(e===t){$o=null;break}if(null!==(n=e.sibling)){n.return=e.return,$o=n;break}$o=e.return}}function xl(t){for(;null!==$o;){var e=$o;if(e===t){$o=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$o=n;break}$o=e.return}}function _l(t){for(;null!==$o;){var e=$o;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Ec(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var s=e.return;try{i.componentDidMount()}catch(l){Ec(e,s,l)}}var r=e.return;try{sl(e)}catch(l){Ec(e,r,l)}break;case 5:var a=e.return;try{sl(e)}catch(l){Ec(e,a,l)}}}catch(l){Ec(e,e.return,l)}if(e===t){$o=null;break}var o=e.sibling;if(null!==o){o.return=e.return,$o=o;break}$o=e.return}}var Al,El=Math.ceil,kl=w.ReactCurrentDispatcher,Sl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Tl=0,Ml=null,Il=null,Rl=0,Pl=0,Dl=Es(0),Nl=0,Ll=null,Ol=0,Fl=0,jl=0,Bl=null,zl=null,Vl=0,Ul=1/0,Wl=null,Hl=!1,ql=null,Gl=null,Kl=!1,Yl=null,Xl=0,Ql=0,Jl=null,$l=-1,Zl=0;function tc(){return 0!==(6&Tl)?Jt():-1!==$l?$l:$l=Jt()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==gr.transition?(0===Zl&&(Zl=ge()),Zl):0!==(t=be)?t:t=void 0===(t=window.event)?16:Qe(t.type)}function nc(t,e,n,i){if(50<Ql)throw Ql=0,Jl=null,Error(r(185));ve(t,n,i),0!==(2&Tl)&&t===Ml||(t===Ml&&(0===(2&Tl)&&(Fl|=n),4===Nl&&oc(t,Rl)),ic(t,i),1===n&&0===Tl&&0===(1&e.mode)&&(Ul=Jt()+500,Bs&&Us()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var a=31-ae(r),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&i)||(s[a]=fe(o,e)):l<=e&&(t.expiredLanes|=o),r&=~o}}(t,e);var i=de(t,t===Ml?Rl:0);if(0===i)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Bs=!0,Vs(t)}(lc.bind(null,t)):Vs(lc.bind(null,t)),as((function(){0===(6&Tl)&&Us()})),n=null;else{switch(we(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Mc(n,sc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sc(t,e){if($l=-1,Zl=0,0!==(6&Tl))throw Error(r(327));var n=t.callbackNode;if(_c()&&t.callbackNode!==n)return null;var i=de(t,t===Ml?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=mc(t,i);else{e=i;var s=Tl;Tl|=2;var a=pc();for(Ml===t&&Rl===e||(Wl=null,Ul=Jt()+500,dc(t,e));;)try{yc();break}catch(l){fc(t,l)}Sr(),kl.current=a,Tl=s,null!==Il?e=0:(Ml=null,Rl=0,e=Nl)}if(0!==e){if(2===e&&(0!==(s=pe(t))&&(i=s,e=rc(t,s))),1===e)throw n=Ll,dc(t,0),oc(t,i),ic(t,Jt()),n;if(6===e)oc(t,i);else{if(s=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!oi(r(),s))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(s)&&(2===(e=mc(t,i))&&(0!==(a=pe(t))&&(i=a,e=rc(t,a))),1===e))throw n=Ll,dc(t,0),oc(t,i),ic(t,Jt()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(r(345));case 2:case 5:xc(t,zl,Wl);break;case 3:if(oc(t,i),(130023424&i)===i&&10<(e=Vl+500-Jt())){if(0!==de(t,0))break;if(((s=t.suspendedLanes)&i)!==i){tc(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=is(xc.bind(null,t,zl,Wl),e);break}xc(t,zl,Wl);break;case 4:if(oc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-ae(i);a=1<<o,(o=e[o])>s&&(s=o),i&=~a}if(i=s,10<(i=(120>(i=Jt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){t.timeoutHandle=is(xc.bind(null,t,zl,Wl),i);break}xc(t,zl,Wl);break;default:throw Error(r(329))}}}return ic(t,Jt()),t.callbackNode===n?sc.bind(null,t):null}function rc(t,e){var n=Bl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=mc(t,e))&&(e=zl,zl=n,null!==e&&ac(e)),t}function ac(t){null===zl?zl=t:zl.push.apply(zl,t)}function oc(t,e){for(e&=~jl,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),i=1<<n;t[n]=-1,e&=~i}}function lc(t){if(0!==(6&Tl))throw Error(r(327));_c();var e=de(t,0);if(0===(1&e))return ic(t,Jt()),null;var n=mc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=rc(t,i))}if(1===n)throw n=Ll,dc(t,0),oc(t,e),ic(t,Jt()),n;if(6===n)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,zl,Wl),ic(t,Jt()),null}function cc(t,e){var n=Tl;Tl|=1;try{return t(e)}finally{0===(Tl=n)&&(Ul=Jt()+500,Bs&&Us())}}function hc(t){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&_c();var e=Tl;Tl|=1;var n=Cl.transition,i=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=i,Cl.transition=n,0===(6&(Tl=e))&&Us()}}function uc(){Pl=Dl.current,ks(Dl)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var i=n;switch(er(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ds();break;case 3:Qr(),ks(Ms),ks(Ts),na();break;case 5:$r(i);break;case 4:Qr();break;case 13:case 19:ks(Zr);break;case 10:Cr(i.type._context);break;case 22:case 23:uc()}n=n.return}if(Ml=t,Il=t=Dc(t.current,null),Rl=Pl=e,Nl=0,Ll=null,jl=Fl=Ol=0,zl=Bl=null,null!==Rr){for(e=0;e<Rr.length;e++)if(null!==(i=(n=Rr[e]).interleaved)){n.interleaved=null;var s=i.next,r=n.pending;if(null!==r){var a=r.next;r.next=s,i.next=a}n.pending=i}Rr=null}return t}function fc(t,e){for(;;){var n=Il;try{if(Sr(),ia.current=Ja,ca){for(var i=aa.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ca=!1}if(ra=0,la=oa=aa=null,ha=!1,ua=0,Sl.current=null,null===n||null===n.return){Nl=1,Ll=e,Il=null;break}t:{var a=t,o=n.return,l=n,c=e;if(e=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var h=c,u=l,d=u.tag;if(0===(1&u.mode)&&(0===d||11===d||15===d)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,e),1&p.mode&&go(a,h,e),c=h;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){go(a,h,e),gc();break t}c=Error(r(426))}else if(sr&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,e),pr(lo(c,l));break t}}a=c=lo(c,l),4!==Nl&&(Nl=2),null===Bl?Bl=[a]:Bl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Vr(a,fo(0,c,e));break t;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,Vr(a,po(a,l,e));break t}}a=a.return}while(null!==a)}wc(n)}catch(w){e=w,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pc(){var t=kl.current;return kl.current=Ja,null===t?Ja:t}function gc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Ml||0===(268435455&Ol)&&0===(268435455&Fl)||oc(Ml,Rl)}function mc(t,e){var n=Tl;Tl|=2;var i=pc();for(Ml===t&&Rl===e||(Wl=null,dc(t,e));;)try{vc();break}catch(s){fc(t,s)}if(Sr(),Tl=n,kl.current=i,null!==Il)throw Error(r(261));return Ml=null,Rl=0,Nl}function vc(){for(;null!==Il;)bc(Il)}function yc(){for(;null!==Il&&!Xt();)bc(Il)}function bc(t){var e=Al(t.alternate,t,Pl);t.memoizedProps=t.pendingProps,null===e?wc(t):Il=e,Sl.current=null}function wc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ko(n,e,Pl)))return void(Il=n)}else{if(null!==(n=Yo(n,e)))return n.flags&=32767,void(Il=n);if(null===t)return Nl=6,void(Il=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Il=e);Il=e=t}while(null!==e);0===Nl&&(Nl=5)}function xc(t,e,n){var i=be,s=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,i){do{_c()}while(null!==Yl);if(0!==(6&Tl))throw Error(r(327));n=t.finishedWork;var s=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ae(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}(t,a),t===Ml&&(Il=Ml=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Mc(ee,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=be;be=1;var l=Tl;Tl|=4,Sl.current=null,function(t,e){if(ts=He,fi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break t}var o=0,l=-1,c=-1,h=0,u=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++h===s&&(l=o),f===a&&++u===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(es={focusedElem:t,selectionRange:n},He=!1,$o=e;null!==$o;)if(t=(e=$o).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$o=t;else for(;null!==$o;){e=$o;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:eo(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(r(163))}}catch(x){Ec(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,$o=t;break}$o=e.return}g=el,el=!1}(t,n),ml(n,t),pi(es),He=!!ts,es=ts=null,t.current=n,yl(n,t,s),Qt(),Tl=l,be=o,Cl.transition=a}else t.current=n;if(Kl&&(Kl=!1,Yl=t,Xl=s),a=t.pendingLanes,0===a&&(Gl=null),function(t){if(re&&"function"===typeof re.onCommitFiberRoot)try{re.onCommitFiberRoot(se,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,Jt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=ql,ql=null,t;0!==(1&Xl)&&0!==t.tag&&_c(),a=t.pendingLanes,0!==(1&a)?t===Jl?Ql++:(Ql=0,Jl=t):Ql=0,Us()}(t,e,n,i)}finally{Cl.transition=s,be=i}return null}function _c(){if(null!==Yl){var t=we(Xl),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Yl)var i=!1;else{if(t=Yl,Yl=null,Xl=0,0!==(6&Tl))throw Error(r(331));var s=Tl;for(Tl|=4,$o=t.current;null!==$o;){var a=$o,o=a.child;if(0!==(16&$o.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for($o=h;null!==$o;){var u=$o;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var d=u.child;if(null!==d)d.return=u,$o=d;else for(;null!==$o;){var f=(u=$o).sibling,p=u.return;if(rl(u),u===h){$o=null;break}if(null!==f){f.return=p,$o=f;break}$o=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$o=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,$o=o;else t:for(;null!==$o;){if(0!==(2048&(a=$o).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$o=y;break t}$o=a.return}}var b=t.current;for($o=b;null!==$o;){var w=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,$o=w;else t:for(o=b;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Ec(l,l.return,_)}if(l===o){$o=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,$o=x;break t}$o=l.return}}if(Tl=s,Us(),re&&"function"===typeof re.onPostCommitFiberRoot)try{re.onPostCommitFiberRoot(se,t)}catch(_){}i=!0}return i}finally{be=n,Cl.transition=e}}return!1}function Ac(t,e,n){t=Br(t,e=fo(0,e=lo(n,e),1),1),e=tc(),null!==t&&(ve(t,1,e),ic(t,e))}function Ec(t,e,n){if(3===t.tag)Ac(t,t,n);else for(;null!==e;){if(3===e.tag){Ac(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gl||!Gl.has(i))){e=Br(e,t=po(e,t=lo(n,t),1),1),t=tc(),null!==e&&(ve(e,1,t),ic(e,t));break}}e=e.return}}function kc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Ml===t&&(Rl&n)===n&&(4===Nl||3===Nl&&(130023424&Rl)===Rl&&500>Jt()-Vl?dc(t,0):jl|=n),ic(t,e)}function Sc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=he,0===(130023424&(he<<=1))&&(he=4194304)));var n=tc();null!==(t=Nr(t,e))&&(ve(t,e,n),ic(t,n))}function Cc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Sc(t,n)}function Tc(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(e),Sc(t,n)}function Mc(t,e){return Kt(t,e)}function Ic(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(t,e,n,i){return new Ic(t,e,n,i)}function Pc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Dc(t,e){var n=t.alternate;return null===n?((n=Rc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nc(t,e,n,i,s,a){var o=2;if(i=t,"function"===typeof t)Pc(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case A:return Lc(n.children,s,a,e);case E:o=8,s|=8;break;case k:return(t=Rc(12,n,e,2|s)).elementType=k,t.lanes=a,t;case M:return(t=Rc(13,n,e,s)).elementType=M,t.lanes=a,t;case I:return(t=Rc(19,n,e,s)).elementType=I,t.lanes=a,t;case D:return Oc(n,s,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case S:o=10;break t;case C:o=9;break t;case T:o=11;break t;case R:o=14;break t;case P:o=16,i=null;break t}throw Error(r(130,null==t?t:typeof t,""))}return(e=Rc(o,n,e,s)).elementType=t,e.type=i,e.lanes=a,e}function Lc(t,e,n,i){return(t=Rc(7,t,i,e)).lanes=n,t}function Oc(t,e,n,i){return(t=Rc(22,t,i,e)).elementType=D,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Rc(6,t,null,e)).lanes=n,t}function jc(t,e,n){return(e=Rc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bc(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zc(t,e,n,i,s,r,a,o,l){return t=new Bc(t,e,n,o,l),1===e?(e=1,!0===r&&(e|=8)):e=0,r=Rc(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Or(r),t}function Vc(t){if(!t)return Cs;t:{if(Ut(t=t._reactInternals)!==t||1!==t.tag)throw Error(r(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ps(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(r(171))}if(1===t.tag){var n=t.type;if(Ps(n))return Ls(t,n,e)}return e}function Uc(t,e,n,i,s,r,a,o,l){return(t=zc(n,i,!0,t,0,r,0,o,l)).context=Vc(null),n=t.current,(r=jr(i=tc(),s=ec(n))).callback=void 0!==e&&null!==e?e:null,Br(n,r,s),t.current.lanes=s,ve(t,s,i),ic(t,i),t}function Wc(t,e,n,i){var s=e.current,r=tc(),a=ec(s);return n=Vc(n),null===e.context?e.context=n:e.pendingContext=n,(e=jr(r,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Br(s,e,a))&&(nc(t,s,a,r),zr(t,s,a)),a}function Hc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Gc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}Al=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ms.current)bo=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bo=!1,function(t,e,n){switch(e.tag){case 3:Mo(e),fr();break;case 5:Jr(e);break;case 1:Ps(e.type)&&Os(e);break;case 4:Xr(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ss(_r,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Ss(Zr,1&Zr.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fo(t,e,n):(Ss(Zr,1&Zr.current),null!==(t=Ho(t,e,n))?t.sibling:null);Ss(Zr,1&Zr.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Uo(t,e,n);e.flags|=128}if(null!==(s=e.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss(Zr,Zr.current),i)break;return null;case 22:case 23:return e.lanes=0,Eo(t,e,n)}return Ho(t,e,n)}(t,e,n);bo=0!==(131072&t.flags)}else bo=!1,sr&&0!==(1048576&e.flags)&&Zs(e,Gs,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Wo(t,e),t=e.pendingProps;var s=Rs(e,Ts.current);Mr(e,n),s=ga(null,e,i,t,s,n);var a=ma();return e.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ps(i)?(a=!0,Os(e)):a=!1,e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Or(e),s.updater=io,e.stateNode=s,s._reactInternals=e,oo(e,i,t,n),e=To(null,e,i,!0,a,n)):(e.tag=0,sr&&a&&tr(e),wo(null,e,s,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Wo(t,e),t=e.pendingProps,i=(s=i._init)(i._payload),e.type=i,s=e.tag=function(t){if("function"===typeof t)return Pc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===T)return 11;if(t===R)return 14}return 2}(i),t=eo(i,t),s){case 0:e=So(null,e,i,t,n);break t;case 1:e=Co(null,e,i,t,n);break t;case 11:e=xo(null,e,i,t,n);break t;case 14:e=_o(null,e,i,eo(i.type,t),n);break t}throw Error(r(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,So(t,e,i,s=e.elementType===i?s:eo(i,s),n);case 1:return i=e.type,s=e.pendingProps,Co(t,e,i,s=e.elementType===i?s:eo(i,s),n);case 3:t:{if(Mo(e),null===t)throw Error(r(387));i=e.pendingProps,s=(a=e.memoizedState).element,Fr(t,e),Ur(e,i,null,n);var o=e.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Io(t,e,i,n,s=lo(Error(r(423)),e));break t}if(i!==s){e=Io(t,e,i,n,s=lo(Error(r(424)),e));break t}for(ir=cs(e.stateNode.containerInfo.firstChild),nr=e,sr=!0,rr=null,n=xr(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fr(),i===s){e=Ho(t,e,n);break t}wo(t,e,i,n)}e=e.child}return e;case 5:return Jr(e),null===t&&cr(e),i=e.type,s=e.pendingProps,a=null!==t?t.memoizedProps:null,o=s.children,ns(i,s)?o=null:null!==a&&ns(i,a)&&(e.flags|=32),ko(t,e),wo(t,e,o,n),e.child;case 6:return null===t&&cr(e),null;case 13:return Fo(t,e,n);case 4:return Xr(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=wr(e,null,i,n):wo(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,xo(t,e,i,s=e.elementType===i?s:eo(i,s),n);case 7:return wo(t,e,e.pendingProps,n),e.child;case 8:case 12:return wo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Ss(_r,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===s.children&&!Ms.current){e=Ho(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=jr(-1,n&-n)).tag=2;var h=a.updateQueue;if(null!==h){var u=(h=h.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),h.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Tr(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Tr(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Mr(e,n),i=i(s=Ir(s)),e.flags|=1,wo(t,e,i,n),e.child;case 14:return s=eo(i=e.type,e.pendingProps),_o(t,e,i,s=eo(i.type,s),n);case 15:return Ao(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:eo(i,s),Wo(t,e),e.tag=1,Ps(i)?(t=!0,Os(e)):t=!1,Mr(e,n),ro(e,i,s),oo(e,i,s,n),To(null,e,i,!0,t,n);case 19:return Uo(t,e,n);case 22:return Eo(t,e,n)}throw Error(r(156,e.tag))};var Kc="function"===typeof reportError?reportError:function(t){console.error(t)};function Yc(t){this._internalRoot=t}function Xc(t){this._internalRoot=t}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $c(){}function Zc(t,e,n,i,s){var r=n._reactRootContainer;if(r){var a=r;if("function"===typeof s){var o=s;s=function(){var t=Hc(a);o.call(t)}}Wc(e,a,t,s)}else a=function(t,e,n,i,s){if(s){if("function"===typeof i){var r=i;i=function(){var t=Hc(a);r.call(t)}}var a=Uc(e,i,t,0,null,!1,0,"",$c);return t._reactRootContainer=a,t[ps]=a.current,Ui(8===t.nodeType?t.parentNode:t),hc(),a}for(;s=t.lastChild;)t.removeChild(s);if("function"===typeof i){var o=i;i=function(){var t=Hc(l);o.call(t)}}var l=zc(t,0,!1,null,0,!1,0,"",$c);return t._reactRootContainer=l,t[ps]=l.current,Ui(8===t.nodeType?t.parentNode:t),hc((function(){Wc(e,l,n,i)})),l}(n,e,t,s,i);return Hc(a)}Xc.prototype.render=Yc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(r(409));Wc(t,e,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hc((function(){Wc(null,t,null,null)})),e[ps]=null}},Xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<De.length&&0!==e&&e<De[n].priority;n++);De.splice(n,0,t),0===n&&Fe(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ue(e.pendingLanes);0!==n&&(ye(e,1|n),ic(e,Jt()),0===(6&Tl)&&(Ul=Jt()+500,Us()))}break;case 13:hc((function(){var e=Nr(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}})),Gc(t,1)}},_e=function(t){if(13===t.tag){var e=Nr(t,134217728);if(null!==e)nc(e,t,134217728,tc());Gc(t,134217728)}},Ae=function(t){if(13===t.tag){var e=ec(t),n=Nr(t,e);if(null!==n)nc(n,t,e,tc());Gc(t,e)}},Ee=function(){return be},ke=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},_t=function(t,e,n){switch(e){case"input":if($(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=xs(i);if(!s)throw Error(r(90));K(i),$(i,s)}}}break;case"textarea":rt(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Tt=cc,Mt=hc;var th={usingClientEntryPoint:!1,Events:[bs,ws,xs,St,Ct,cc]},eh={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nh={bundleType:eh.bundleType,version:eh.version,rendererPackageName:eh.rendererPackageName,rendererConfig:eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=qt(t))?null:t.stateNode},findFiberByHostInstance:eh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{se=ih.inject(nh),re=ih}catch(ht){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(e))throw Error(r(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Qc(t))throw Error(r(299));var n=!1,i="",s=Kc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(s=e.onRecoverableError)),e=zc(t,1,!1,null,0,n,0,i,s),t[ps]=e.current,Ui(8===t.nodeType?t.parentNode:t),new Yc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(r(188));throw t=Object.keys(t).join(","),Error(r(268,t))}return t=null===(t=qt(e))?null:t.stateNode},e.flushSync=function(t){return hc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(r(200));return Zc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qc(t))throw Error(r(405));var i=null!=n&&n.hydratedSources||null,s=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=Uc(e,null,t,1,null!=n?n:null,s,0,a,o),t[ps]=e.current,Ui(t),i)for(t=0;t<i.length;t++)s=(s=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(r(200));return Zc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(r(40));return!!t._reactRootContainer&&(hc((function(){Zc(null,null,t,!1,(function(){t._reactRootContainer=null,t[ps]=null}))})),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jc(n))throw Error(r(200));if(null==t||void 0===t._reactInternals)throw Error(r(38));return Zc(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},391:(t,e,n)=>{"use strict";var i=n(950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)},5:t=>{function e(t){var n,i,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(n=0;n<r;n++)t[n]&&(i=e(t[n]))&&(s&&(s+=" "),s+=i)}else for(i in t)t[i]&&(s&&(s+=" "),s+=i);return s}function n(){for(var t,n,i=0,s="",r=arguments.length;i<r;i++)(t=arguments[i])&&(n=e(t))&&(s&&(s+=" "),s+=n);return s}t.exports=n,t.exports.clsx=n},343:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function o(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=n(851);s.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(s.pdfjs.version,"/pdf.worker.mjs");e.default=t=>i(void 0,void 0,void 0,(function*(){const e=URL.createObjectURL(t),n=s.pdfjs.getDocument(e);let i="";try{const t=yield n.promise,e=t.numPages;for(let n=1;n<=e;n++){const e=yield t.getPage(n),s=yield e.getTextContent();i+=s.items.map((t=>"str"in t?t.str:"")).join(" ")}}catch(r){throw new Error("Failed to extract text from PDF: ".concat(r))}finally{URL.revokeObjectURL(e),n.destroy()}return i}))},153:(t,e,n)=>{"use strict";var i=n(43),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,r={},c=null,h=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)a.call(e,i)&&!l.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===r[i]&&(r[i]=e[i]);return{$$typeof:s,type:t,key:c,ref:h,props:r,_owner:o.current}}e.Fragment=r,e.jsx=c,e.jsxs=c},202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,A={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,i){var s,r={},a=null,o=null;if(null!=e)for(s in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)_.call(e,s)&&!E.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];r.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:n,type:t,key:a,ref:o,props:r,_owner:A.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function T(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function M(t,e,s,r,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=t),t=""===r?"."+T(l,0):r,x(a)?(s="",null!=t&&(s=t.replace(C,"$&/")+"/"),M(a,e,s,"",(function(t){return t}))):null!=a&&(S(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+t)),e.push(a)),1;if(l=0,r=""===r?".":r+":",x(t))for(var c=0;c<t.length;c++){var h=r+T(o=t[c],c);l+=M(o,e,s,h,a)}else if(h=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof h)for(t=h.call(t),c=0;!(o=t.next()).done;)l+=M(o=o.value,e,s,h=r+T(o,c++),a);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function I(t,e,n){if(null==t)return t;var i=[],s=0;return M(t,i,"","",(function(t){return e.call(n,t,s++)})),i}function R(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var P={current:null},D={transition:null},N={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:A};function L(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:I,forEach:function(t,e,n){I(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=s,e.Profiler=a,e.PureComponent=b,e.StrictMode=r,e.Suspense=h,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,e.act=L,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=g({},t.props),r=t.key,a=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=A.current),void 0!==e.key&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)_.call(e,c)&&!E.hasOwnProperty(c)&&(s[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];s.children=l}return{$$typeof:n,type:t.type,key:r,ref:a,props:s,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:R}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=D.transition;D.transition={};try{t()}finally{D.transition=e}},e.unstable_act=L,e.useCallback=function(t,e){return P.current.useCallback(t,e)},e.useContext=function(t){return P.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return P.current.useDeferredValue(t)},e.useEffect=function(t,e){return P.current.useEffect(t,e)},e.useId=function(){return P.current.useId()},e.useImperativeHandle=function(t,e,n){return P.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return P.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return P.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return P.current.useMemo(t,e)},e.useReducer=function(t,e,n){return P.current.useReducer(t,e,n)},e.useRef=function(t){return P.current.useRef(t)},e.useState=function(t){return P.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return P.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return P.current.useTransition()},e.version="18.3.1"},43:(t,e,n)=>{"use strict";t.exports=n(202)},579:(t,e,n)=>{"use strict";t.exports=n(153)},234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,s=t[i];if(!(0<r(s,e)))break t;t[i]=e,t[n]=s,n=i}}function i(t){return 0===t.length?null:t[0]}function s(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,s=t.length,a=s>>>1;i<a;){var o=2*(i+1)-1,l=t[o],c=o+1,h=t[c];if(0>r(l,n))c<s&&0>r(h,l)?(t[i]=h,t[c]=n,i=c):(t[i]=l,t[o]=n,i=o);else{if(!(c<s&&0>r(h,n)))break t;t[i]=h,t[c]=n,i=c}}}return e}function r(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],h=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(t){for(var e=i(h);null!==e;){if(null===e.callback)s(h);else{if(!(e.startTime<=t))break;s(h),e.sortIndex=e.expirationTime,n(c,e)}e=i(h)}}function x(t){if(m=!1,w(t),!g)if(null!==i(c))g=!0,D(_);else{var e=i(h);null!==e&&N(x,e.startTime-t)}}function _(t,n){g=!1,m&&(m=!1,y(S),S=-1),p=!0;var r=f;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!M());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&s(c),w(n)}else s(c);d=i(c)}if(null!==d)var l=!0;else{var u=i(h);null!==u&&N(x,u.startTime-n),l=!1}return l}finally{d=null,f=r,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,E=!1,k=null,S=-1,C=5,T=-1;function M(){return!(e.unstable_now()-T<C)}function I(){if(null!==k){var t=e.unstable_now();T=t;var n=!0;try{n=k(!0,t)}finally{n?A():(E=!1,k=null)}}else E=!1}if("function"===typeof b)A=function(){b(I)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=I,A=function(){P.postMessage(null)}}else A=function(){v(I,0)};function D(t){k=t,E||(E=!0,A())}function N(t,n){S=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,D(_))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,s,r){var a=e.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?a+r:a:r=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:u++,callback:s,priorityLevel:t,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>a?(t.sortIndex=r,n(h,t),null===i(c)&&t===i(h)&&(m?(y(S),S=-1):m=!0,N(x,r-a))):(t.sortIndex=o,n(c,t),g||p||(g=!0,D(_))),t},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},853:(t,e,n)=>{"use strict";t.exports=n(234)},213:t=>{"use strict";var e="Invariant failed";t.exports=function(t,n){if(!t)throw new Error(e)}},440:t=>{"use strict";var e=function(){};t.exports=e},570:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=!1;return{promise:new Promise((function(n,i){t.then((function(t){return!e&&n(t)})).catch((function(t){return!e&&i(t)}))})),cancel:function(){e=!0}}}},873:function(t,e){"use strict";var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,s=0,r=e.length;s<r;s++)!i&&s in e||(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.allEvents=e.changeEvents=e.otherEvents=e.transitionEvents=e.animationEvents=e.wheelEvents=e.uiEvents=e.pointerEvents=e.touchEvents=e.selectionEvents=e.dragEvents=e.mouseEvents=e.mediaEvents=e.keyboardEvents=e.imageEvents=e.formEvents=e.focusEvents=e.compositionEvents=e.clipboardEvents=void 0,e.clipboardEvents=["onCopy","onCut","onPaste"],e.compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],e.focusEvents=["onFocus","onBlur"],e.formEvents=["onInput","onInvalid","onReset","onSubmit"],e.imageEvents=["onLoad","onError"],e.keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],e.mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],e.mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],e.dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],e.selectionEvents=["onSelect"],e.touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],e.pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],e.uiEvents=["onScroll"],e.wheelEvents=["onWheel"],e.animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],e.transitionEvents=["onTransitionEnd"],e.otherEvents=["onToggle"],e.changeEvents=["onChange"],e.allEvents=n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n([],e.clipboardEvents,!0),e.compositionEvents,!0),e.focusEvents,!0),e.formEvents,!0),e.imageEvents,!0),e.keyboardEvents,!0),e.mediaEvents,!0),e.mouseEvents,!0),e.dragEvents,!0),e.selectionEvents,!0),e.touchEvents,!0),e.pointerEvents,!0),e.uiEvents,!0),e.wheelEvents,!0),e.animationEvents,!0),e.transitionEvents,!0),e.changeEvents,!0),e.otherEvents,!0),e.default=function(t,n){var i={};return e.allEvents.forEach((function(e){var s=t[e];s&&(i[e]=n?function(t){return s(t,n(e))}:s)})),i}},614:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(Boolean);return n.length<=1?n[0]||null:function(t){n.forEach((function(e){"function"===typeof e?e(t):e&&(e.current=t)}))}}},282:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function o(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((i=i.apply(t,e||[])).next())}))},o=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=n(579),h=n(43),u=l(n(873)),d=l(n(570)),f=l(n(5)),p=l(n(213)),g=l(n(440)),m=n(973),v=r(n(51)),y=l(n(695)),b=l(n(468)),w=l(n(352)),x=l(n(960)),_=n(632),A=l(n(807)),{PDFDataRangeTransport:E}=v,k=(t,e)=>{switch(e){case x.default.NEED_PASSWORD:t(prompt("Enter the password to open this PDF file."));break;case x.default.INCORRECT_PASSWORD:t(prompt("Invalid password. Please try again."));break}};function S(t){return"object"===typeof t&&null!==t&&("data"in t||"range"in t||"url"in t)}const C=(0,h.forwardRef)((function(t,e){var{children:n,className:i,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:l,file:x,inputRef:C,imageResourcesPath:T,loading:M="Loading PDF\u2026",noData:I="No PDF file specified.",onItemClick:R,onLoadError:P,onLoadProgress:D,onLoadSuccess:N,onPassword:L=k,onSourceError:O,onSourceSuccess:F,options:j,renderMode:B,rotate:z}=t,V=o(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[U,W]=(0,A.default)(),{value:H,error:q}=U,[G,K]=(0,A.default)(),{value:Y,error:X}=G,Q=(0,h.useRef)(new w.default),J=(0,h.useRef)([]),$=(0,h.useRef)(void 0),Z=(0,h.useRef)(void 0);x&&x!==$.current&&S(x)&&((0,g.default)(!(0,m.dequal)(x,$.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),$.current=x),j&&j!==Z.current&&((0,g.default)(!(0,m.dequal)(j,Z.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),Z.current=j);const tt=(0,h.useRef)({scrollPageIntoView:t=>{const{dest:e,pageNumber:n,pageIndex:i=n-1}=t;if(R)return void R({dest:e,pageIndex:i,pageNumber:n});const s=J.current[i];s?s.scrollIntoView():(0,g.default)(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,h.useImperativeHandle)(e,(()=>({linkService:Q,pages:J,viewer:tt})),[]),(0,h.useEffect)((function(){W({type:"RESET"})}),[x,W]);const et=(0,h.useCallback)((()=>a(this,void 0,void 0,(function*(){if(!x)return null;if("string"===typeof x){if((0,_.isDataURI)(x)){return{data:(0,_.dataURItoByteString)(x)}}return(0,_.displayCORSWarning)(),{url:x}}if(x instanceof E)return{range:x};if((0,_.isArrayBuffer)(x))return{data:x};if(_.isBrowser&&(0,_.isBlob)(x)){return{data:yield(0,_.loadFromFile)(x)}}if((0,p.default)("object"===typeof x,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),(0,p.default)(S(x),"Invalid parameter object: need either .data, .range or .url"),"url"in x&&"string"===typeof x.url){if((0,_.isDataURI)(x.url)){const{url:t}=x,e=o(x,["url"]),n=(0,_.dataURItoByteString)(t);return Object.assign({data:n},e)}(0,_.displayCORSWarning)()}return x}))),[x]);(0,h.useEffect)((()=>{const t=(0,d.default)(et());return t.promise.then((t=>{W({type:"RESOLVE",value:t})})).catch((t=>{W({type:"REJECT",error:t})})),()=>{(0,_.cancelRunningTask)(t)}}),[et,W]),(0,h.useEffect)((()=>{"undefined"!==typeof H&&(!1!==H?F&&F():q&&((0,g.default)(!1,q.toString()),O&&O(q)))}),[H]),(0,h.useEffect)((function(){K({type:"RESET"})}),[K,H]),(0,h.useEffect)((function(){if(!H)return;const t=j?Object.assign(Object.assign({},H),j):H,e=v.getDocument(t);D&&(e.onProgress=D),L&&(e.onPassword=L);const n=e,i=n.promise.then((t=>{K({type:"RESOLVE",value:t})})).catch((t=>{n.destroyed||K({type:"REJECT",error:t})}));return()=>{i.finally((()=>n.destroy()))}}),[j,K,H]),(0,h.useEffect)((()=>{"undefined"!==typeof Y&&(!1!==Y?Y&&(N&&N(Y),J.current=new Array(Y.numPages),Q.current.setDocument(Y)):X&&((0,g.default)(!1,X.toString()),P&&P(X)))}),[Y]),(0,h.useEffect)((function(){Q.current.setViewer(tt.current),Q.current.setExternalLinkRel(r),Q.current.setExternalLinkTarget(l)}),[r,l]);const nt=(0,h.useCallback)(((t,e)=>{J.current[t]=e}),[]),it=(0,h.useCallback)((t=>{delete J.current[t]}),[]),st=(0,h.useMemo)((()=>({imageResourcesPath:T,linkService:Q.current,onItemClick:R,pdf:Y,registerPage:nt,renderMode:B,rotate:z,unregisterPage:it})),[T,R,Y,nt,B,z,it]),rt=(0,h.useMemo)((()=>(0,u.default)(V,(()=>Y))),[V,Y]);return(0,c.jsx)("div",Object.assign({className:(0,f.default)("react-pdf__Document",i),ref:C,style:{"--scale-factor":"1"}},rt,{children:x?void 0===Y||null===Y?(0,c.jsx)(b.default,{type:"loading",children:"function"===typeof M?M():M}):!1===Y?(0,c.jsx)(b.default,{type:"error",children:"function"===typeof s?s():s}):(0,c.jsx)(y.default.Provider,{value:st,children:n}):(0,c.jsx)(b.default,{type:"no-data",children:"function"===typeof I?I():I})}))}));e.default=C},695:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=(0,n(43).createContext)(null);e.default=i},352:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(213));e.default=class{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return(0,s.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){(0,s.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise((e=>{(0,s.default)(this.pdfDocument,"PDF document not loaded."),(0,s.default)(t,"Destination is not specified."),"string"===typeof t?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)})).then((t=>{(0,s.default)(Array.isArray(t),'"'.concat(t,'" is not a valid destination array.'));const e=t[0];new Promise((t=>{(0,s.default)(this.pdfDocument,"PDF document not loaded."),e instanceof Object?this.pdfDocument.getPageIndex(e).then((e=>{t(e)})).catch((()=>{(0,s.default)(!1,'"'.concat(e,'" is not a valid page reference.'))})):"number"===typeof e?t(e):(0,s.default)(!1,'"'.concat(e,'" is not a valid destination reference.'))})).then((e=>{const n=e+1;(0,s.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,s.default)(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:e,pageNumber:n})}))}))}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;(0,s.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,s.default)(t>=1&&t<=this.pagesCount,'"'.concat(t,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||"noopener noreferrer nofollow",t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}},468:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){let{children:e,type:n}=t;return(0,i.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:e})};const i=n(579)},57:function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=(0,g.default)(),n=Object.assign(Object.assign({},e),t),{className:s,inputRef:v,onItemClick:y,onLoadError:b,onLoadSuccess:w,pdf:x}=n,_=i(n,["className","inputRef","onItemClick","onLoadError","onLoadSuccess","pdf"]);(0,h.default)(x,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const[A,E]=(0,m.default)(),{value:k,error:S}=A;(0,a.useEffect)((function(){E({type:"RESET"})}),[E,x]),(0,a.useEffect)((function(){if(!x)return;const t=(0,o.default)(x.getOutline()),e=t;return t.promise.then((t=>{E({type:"RESOLVE",value:t})})).catch((t=>{E({type:"REJECT",error:t})})),()=>(0,p.cancelRunningTask)(e)}),[E,x]),(0,a.useEffect)((()=>{void 0!==k&&(!1!==k?"undefined"!==typeof k&&!1!==k&&w&&w(k):S&&((0,u.default)(!1,S.toString()),b&&b(S)))}),[k]);const C=(0,a.useMemo)((()=>({onItemClick:y})),[y]),T=(0,a.useMemo)((()=>(0,l.default)(_,(()=>k))),[_,k]);if(!k)return null;return(0,r.jsx)("div",Object.assign({className:(0,c.default)("react-pdf__Outline",s),ref:v},T,{children:(0,r.jsx)(d.default.Provider,{value:C,children:k?(0,r.jsx)("ul",{children:k.map(((t,e)=>(0,r.jsx)(f.default,{item:t,pdf:x},"string"===typeof t.dest?t.dest:e)))}):null})}))};const r=n(579),a=n(43),o=s(n(570)),l=s(n(873)),c=s(n(5)),h=s(n(213)),u=s(n(440)),d=s(n(2)),f=s(n(470)),p=n(632),g=s(n(857)),m=s(n(807))},2:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=(0,n(43).createContext)(null);e.default=i},470:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function o(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((i=i.apply(t,e||[])).next())}))},s=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){const n=(0,h.default)(),r=(0,u.default)();(0,o.default)(r,"Unable to find Outline context.");const d=Object.assign(Object.assign(Object.assign({},n),r),e),{item:f,linkService:p,onItemClick:g,pdf:m}=d,v=s(d,["item","linkService","onItemClick","pdf"]);(0,o.default)(m,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const y=(0,c.default)((()=>"string"===typeof f.dest?m.getDestination(f.dest):f.dest)),b=(0,c.default)((()=>i(this,void 0,void 0,(function*(){const t=yield y();if(!t)throw new Error("Destination not found.");const[e]=t;return m.getPageIndex(new l.default(e))})))),w=(0,c.default)((()=>i(this,void 0,void 0,(function*(){return(yield b())+1}))));function x(){if(!f.items||!f.items.length)return null;const{items:e}=f;return(0,a.jsx)("ul",{children:e.map(((e,n)=>(0,a.jsx)(t,Object.assign({item:e,pdf:m},v),"string"===typeof e.dest?e.dest:n)))})}return(0,a.jsxs)("li",{children:[(0,a.jsx)("a",{href:"#",onClick:function(t){t.preventDefault(),(0,o.default)(g||p,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),g?Promise.all([y(),b(),w()]).then((t=>{let[e,n,i]=t;g({dest:e,pageIndex:n,pageNumber:i})})):p&&p.goToDestination(f.dest)},children:f.title}),x()]})};const a=n(579),o=r(n(213)),l=r(n(390)),c=r(n(926)),h=r(n(857)),u=r(n(660))},59:function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=(0,b.default)(),n=Object.assign(Object.assign({},e),t),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:_=!0,canvasBackground:A,canvasRef:E,children:k,className:S,customRenderer:C,customTextRenderer:T,devicePixelRatio:M,error:I="Failed to load the page.",height:R,inputRef:P,loading:D="Loading page\u2026",noData:N="No page specified.",onGetAnnotationsError:L,onGetAnnotationsSuccess:O,onGetStructTreeError:F,onGetStructTreeSuccess:j,onGetTextError:B,onGetTextSuccess:z,onLoadError:V,onLoadSuccess:U,onRenderAnnotationLayerError:W,onRenderAnnotationLayerSuccess:H,onRenderError:q,onRenderSuccess:G,onRenderTextLayerError:K,onRenderTextLayerSuccess:Y,pageIndex:X,pageNumber:Q,pdf:J,registerPage:$,renderAnnotationLayer:Z=!0,renderForms:tt=!1,renderMode:et="canvas",renderTextLayer:nt=!0,rotate:it,scale:st=x,unregisterPage:rt,width:at}=n,ot=i(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[lt,ct]=(0,w.default)(),{value:ht,error:ut}=lt,dt=(0,a.useRef)(null);(0,u.default)(J,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const ft=(0,y.isProvided)(Q)?Q-1:null!==X&&void 0!==X?X:null,pt=null!==Q&&void 0!==Q?Q:(0,y.isProvided)(X)?X+1:null,gt=null!==it&&void 0!==it?it:ht?ht.rotate:null,mt=(0,a.useMemo)((()=>{if(!ht)return null;let t=1;const e=null!==st&&void 0!==st?st:x;if(at||R){const e=ht.getViewport({scale:1,rotation:gt});at?t=at/e.width:R&&(t=R/e.height)}return e*t}),[R,ht,gt,st,at]);(0,a.useEffect)((function(){return()=>{(0,y.isProvided)(ft)&&_&&rt&&rt(ft)}}),[_,J,ft,rt]),(0,a.useEffect)((function(){ct({type:"RESET"})}),[ct,J,ft]),(0,a.useEffect)((function(){if(!J||!pt)return;const t=(0,o.default)(J.getPage(pt)),e=t;return t.promise.then((t=>{ct({type:"RESOLVE",value:t})})).catch((t=>{ct({type:"REJECT",error:t})})),()=>(0,y.cancelRunningTask)(e)}),[ct,J,pt]),(0,a.useEffect)((()=>{void 0!==ht&&(!1!==ht?function(){if(U){if(!ht||!mt)return;U((0,y.makePageCallback)(ht,mt))}if(_&&$){if(!(0,y.isProvided)(ft)||!dt.current)return;$(ft,dt.current)}}():ut&&((0,d.default)(!1,ut.toString()),V&&V(ut)))}),[ht,mt]);const vt=(0,a.useMemo)((()=>ht&&(0,y.isProvided)(ft)&&pt&&(0,y.isProvided)(gt)&&(0,y.isProvided)(mt)?{_className:s,canvasBackground:A,customTextRenderer:T,devicePixelRatio:M,onGetAnnotationsError:L,onGetAnnotationsSuccess:O,onGetStructTreeError:F,onGetStructTreeSuccess:j,onGetTextError:B,onGetTextSuccess:z,onRenderAnnotationLayerError:W,onRenderAnnotationLayerSuccess:H,onRenderError:q,onRenderSuccess:G,onRenderTextLayerError:K,onRenderTextLayerSuccess:Y,page:ht,pageIndex:ft,pageNumber:pt,renderForms:tt,renderTextLayer:nt,rotate:gt,scale:mt}:null),[s,A,T,M,L,O,F,j,B,z,W,H,q,G,K,Y,ht,ft,pt,tt,nt,gt,mt]),yt=(0,a.useMemo)((()=>(0,l.default)(ot,(()=>ht?mt?(0,y.makePageCallback)(ht,mt):void 0:ht))),[ot,ht,mt]),bt="".concat(ft,"@").concat(mt,"/").concat(gt);function wt(){switch(et){case"custom":return(0,u.default)(C,'renderMode was set to "custom", but no customRenderer was passed.'),(0,r.jsx)(C,{},"".concat(bt,"_custom"));case"none":return null;default:return(0,r.jsx)(g.default,{canvasRef:E},"".concat(bt,"_canvas"))}}return(0,r.jsx)("div",Object.assign({className:(0,c.default)(s,S),"data-page-number":pt,ref:(0,h.default)(P,dt),style:{"--scale-factor":"".concat(mt),backgroundColor:A||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},yt,{children:pt?null===J||void 0===ht||null===ht?(0,r.jsx)(p.default,{type:"loading",children:"function"===typeof D?D():D}):!1===J||!1===ht?(0,r.jsx)(p.default,{type:"error",children:"function"===typeof I?I():I}):(0,r.jsxs)(f.default.Provider,{value:vt,children:[wt(),nt?(0,r.jsx)(m.default,{},"".concat(bt,"_text")):null,Z?(0,r.jsx)(v.default,{},"".concat(bt,"_annotations")):null,k]}):(0,r.jsx)(p.default,{type:"no-data",children:"function"===typeof N?N():N})}))};const r=n(579),a=n(43),o=s(n(570)),l=s(n(873)),c=s(n(5)),h=s(n(614)),u=s(n(213)),d=s(n(440)),f=s(n(477)),p=s(n(468)),g=s(n(772)),m=s(n(379)),v=s(n(645)),y=n(632),b=s(n(857)),w=s(n(807)),x=1},645:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){const t=(0,p.default)(),e=(0,g.default)();(0,u.default)(e,"Unable to find Page context.");const n=Object.assign(Object.assign({},t),e),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:y,onRenderAnnotationLayerSuccess:b,page:w,pdf:x,renderForms:_,rotate:A,scale:E=1}=n;(0,u.default)(x,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),(0,u.default)(w,"Attempted to load page annotations, but no page was specified."),(0,u.default)(s,"Attempted to load page annotations, but no linkService was specified.");const[k,S]=(0,m.default)(),{value:C,error:T}=k,M=(0,l.useRef)(null);(0,d.default)(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,l.useEffect)((function(){S({type:"RESET"})}),[S,w]),(0,l.useEffect)((function(){if(!w)return;const t=(0,c.default)(w.getAnnotations()),e=t;return t.promise.then((t=>{S({type:"RESOLVE",value:t})})).catch((t=>{S({type:"REJECT",error:t})})),()=>{(0,v.cancelRunningTask)(e)}}),[S,w]),(0,l.useEffect)((()=>{void 0!==C&&(!1!==C?C&&a&&a(C):T&&((0,d.default)(!1,T.toString()),r&&r(T)))}),[C]);const I=(0,l.useMemo)((()=>w.getViewport({scale:E,rotation:A})),[w,A,E]);return(0,l.useEffect)((function(){if(!x||!w||!s||!C)return;const{current:t}=M;if(!t)return;const e=I.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:t,l10n:null,page:w,structTreeLayer:null,viewport:e},r={annotations:C,annotationStorage:x.annotationStorage,div:t,imageResourcesPath:i,linkService:s,page:w,renderForms:_,viewport:e};t.innerHTML="";try{new f.AnnotationLayer(n).render(r),b&&b()}catch(a){!function(t){(0,d.default)(!1,"".concat(t)),y&&y(t)}(a)}return()=>{}}),[C,i,s,w,x,_,I]),(0,o.jsx)("div",{className:(0,h.default)("react-pdf__Page__annotations","annotationLayer"),ref:M})};const o=n(579),l=n(43),c=a(n(570)),h=a(n(5)),u=a(n(213)),d=a(n(440)),f=r(n(51)),p=a(n(857)),g=a(n(111)),m=a(n(807)),v=n(632)},772:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=(0,p.default)();(0,h.default)(e,"Unable to find Page context.");const n=Object.assign(Object.assign({},e),t),{_className:i,canvasBackground:s,devicePixelRatio:r=(0,g.getDevicePixelRatio)(),onRenderError:a,onRenderSuccess:d,page:v,renderForms:y,renderTextLayer:b,rotate:w,scale:x}=n,{canvasRef:_}=t;(0,h.default)(v,"Attempted to render page canvas, but no page was specified.");const A=(0,l.useRef)(null);function E(t){(0,g.isCancelException)(t)||((0,u.default)(!1,t.toString()),a&&a(t))}const k=(0,l.useMemo)((()=>v.getViewport({scale:x*r,rotation:w})),[r,v,w,x]),S=(0,l.useMemo)((()=>v.getViewport({scale:x,rotation:w})),[v,w,x]);(0,l.useEffect)((function(){if(!v)return;v.cleanup();const{current:t}=A;if(!t)return;t.width=k.width,t.height=k.height,t.style.width="".concat(Math.floor(S.width),"px"),t.style.height="".concat(Math.floor(S.height),"px"),t.style.visibility="hidden";const e={annotationMode:y?m.ENABLE_FORMS:m.ENABLE,canvasContext:t.getContext("2d",{alpha:!1}),viewport:k};s&&(e.background=s);const n=v.render(e),i=n;return n.promise.then((()=>{t.style.visibility="",v&&d&&d((0,g.makePageCallback)(v,x))})).catch(E),()=>(0,g.cancelRunningTask)(i)}),[s,v,y,k,S]);const C=(0,l.useCallback)((()=>{const{current:t}=A;t&&(t.width=0,t.height=0)}),[]);return(0,l.useEffect)((()=>C),[C]),(0,o.jsx)("canvas",{className:"".concat(i,"__canvas"),dir:"ltr",ref:(0,c.default)(_,A),style:{display:"block",userSelect:"none"},children:b?(0,o.jsx)(f.default,{}):null})};const o=n(579),l=n(43),c=a(n(614)),h=a(n(213)),u=a(n(440)),d=r(n(51)),f=a(n(690)),p=a(n(111)),g=n(632),m=d.AnnotationMode},379:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){const t=(0,p.default)();(0,u.default)(t,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:n,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:v,pageNumber:y,rotate:b,scale:w}=t;(0,u.default)(a,"Attempted to load page text content, but no page was specified.");const[x,_]=(0,g.default)(),{value:A,error:E}=x,k=(0,l.useRef)(null);(0,d.default)(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,l.useEffect)((function(){_({type:"RESET"})}),[a,_]),(0,l.useEffect)((function(){if(!a)return;const t=(0,c.default)(a.getTextContent()),e=t;return t.promise.then((t=>{_({type:"RESOLVE",value:t})})).catch((t=>{_({type:"REJECT",error:t})})),()=>(0,m.cancelRunningTask)(e)}),[a,_]),(0,l.useEffect)((()=>{void 0!==A&&(!1!==A?A&&i&&i(A):E&&((0,d.default)(!1,E.toString()),n&&n(E)))}),[A]);const S=(0,l.useCallback)((()=>{r&&r()}),[r]),C=(0,l.useCallback)((t=>{(0,d.default)(!1,t.toString()),s&&s(t)}),[s]);const T=(0,l.useMemo)((()=>a.getViewport({scale:w,rotation:b})),[a,b,w]);return(0,l.useLayoutEffect)((function(){if(!a||!A)return;const{current:t}=k;if(!t)return;t.innerHTML="";const n=a.streamTextContent({includeMarkedContent:!0}),i={container:t,textContentSource:n,viewport:T},s=new f.TextLayer(i),r=s;return s.render().then((()=>{const n=document.createElement("div");n.className="endOfContent",t.append(n);const i=t.querySelectorAll('[role="presentation"]');if(e){let t=0;A.items.forEach(((n,s)=>{if(!function(t){return"str"in t}(n))return;const r=i[t];if(!r)return;const a=e(Object.assign({pageIndex:v,pageNumber:y,itemIndex:s},n));r.innerHTML=a,t+=n.str&&n.hasEOL?2:1}))}S()})).catch(C),()=>(0,m.cancelRunningTask)(r)}),[e,C,S,a,v,y,A,T]),(0,o.jsx)("div",{className:(0,h.default)("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const t=k.current;if(!t)return;t.classList.remove("selecting")},onMouseDown:function(){const t=k.current;if(!t)return;t.classList.add("selecting")},ref:k})};const o=n(579),l=n(43),c=a(n(570)),h=a(n(5)),u=a(n(213)),d=a(n(440)),f=r(n(51)),p=a(n(111)),g=a(n(807)),m=n(632)},477:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=(0,n(43).createContext)(null);e.default=i},960:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={NEED_PASSWORD:1,INCORRECT_PASSWORD:2}},390:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){let{num:e,gen:n}=t;this.num=e,this.gen=n}toString(){let t="".concat(this.num,"R");return 0!==this.gen&&(t+=this.gen),t}}},690:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){const t=(0,h.default)();(0,o.default)(t,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:n}=t,[i,f]=(0,u.default)(),{value:p,error:g}=i,{customTextRenderer:m,page:v}=t;if((0,r.useEffect)((function(){f({type:"RESET"})}),[f,v]),(0,r.useEffect)((function(){if(m)return;if(!v)return;const t=(0,a.default)(v.getStructTree()),e=t;return t.promise.then((t=>{f({type:"RESOLVE",value:t})})).catch((t=>{f({type:"REJECT",error:t})})),()=>(0,d.cancelRunningTask)(e)}),[m,v,f]),(0,r.useEffect)((()=>{void 0!==p&&(!1!==p?function(){if(!p)return;n&&n(p)}():function(){if(!g)return;(0,l.default)(!1,g.toString()),e&&e(g)}())}),[p]),!p)return null;return(0,s.jsx)(c.default,{className:"react-pdf__Page__structTree structTree",node:p})};const s=n(579),r=n(43),a=i(n(570)),o=i(n(213)),l=i(n(440)),c=i(n(797)),h=i(n(111)),u=i(n(807)),d=n(632)},797:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){let{className:n,node:a}=e;const o=(0,s.useMemo)((()=>(0,r.getAttributes)(a)),[a]),l=(0,s.useMemo)((()=>(0,r.isStructTreeNode)(a)?(0,r.isStructTreeNodeWithOnlyContentChild)(a)?null:a.children.map(((e,n)=>(0,i.jsx)(t,{node:e},n))):null),[a]);return(0,i.jsx)("span",Object.assign({className:n},o,{children:l}))};const i=n(579),s=n(43),r=n(935)},179:function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=(0,h.default)(),n=Object.assign(Object.assign({},e),t),{className:s,linkService:u,onItemClick:d,pageIndex:f,pageNumber:p,pdf:g}=n;(0,o.default)(g,"Attempted to load a thumbnail, but no document was specified. Wrap <Thumbnail /> in a <Document /> or pass explicit `pdf` prop.");const m=(0,c.isProvided)(p)?p-1:null!==f&&void 0!==f?f:null,v=null!==p&&void 0!==p?p:(0,c.isProvided)(f)?f+1:null;const{className:y,onItemClick:b}=t,w=i(t,["className","onItemClick"]);return(0,r.jsx)("a",{className:(0,a.default)("react-pdf__Thumbnail",s),href:v?"#":void 0,onClick:function(t){t.preventDefault(),(0,c.isProvided)(m)&&v&&((0,o.default)(d||u,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),d?d({pageIndex:m,pageNumber:v}):u&&u.goToPage(v))},children:(0,r.jsx)(l.default,Object.assign({},w,{_className:"react-pdf__Thumbnail__page",_enableRegisterUnregisterPage:!1,renderAnnotationLayer:!1,renderTextLayer:!1}))})};const r=n(579),a=s(n(5)),o=s(n(213)),l=s(n(59)),c=n(632),h=s(n(857))},851:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PasswordResponses=e.usePageContext=e.useOutlineContext=e.useDocumentContext=e.Thumbnail=e.Page=e.Outline=e.Document=e.pdfjs=void 0;const o=r(n(51));e.pdfjs=o;const l=a(n(282));e.Document=l.default;const c=a(n(57));e.Outline=c.default;const h=a(n(59));e.Page=h.default;const u=a(n(179));e.Thumbnail=u.default;const d=a(n(857));e.useDocumentContext=d.default;const f=a(n(660));e.useOutlineContext=f.default;const p=a(n(111));e.usePageContext=p.default;const g=a(n(960));e.PasswordResponses=g.default;(0,n(632).displayWorkerWarning)(),o.GlobalWorkerOptions.workerSrc="pdf.worker.mjs"},279:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HEADING_PATTERN=e.PDF_ROLE_TO_HTML_ROLE=void 0,e.PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},e.HEADING_PATTERN=/^H(\d+)$/},926:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=(0,i.useRef)(void 0),n=e.current;if((0,s.isDefined)(n))return()=>n;return()=>{const n=t();return e.current=n,n}};const i=n(43),s=n(632)},857:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,s.useContext)(r.default)};const s=n(43),r=i(n(695))},660:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,s.useContext)(r.default)};const s=n(43),r=i(n(2))},111:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,s.useContext)(r.default)};const s=n(43),r=i(n(477))},807:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,i.useReducer)(s,{value:void 0,error:void 0})};const i=n(43);function s(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}},935:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPdfRole=s,e.isStructTreeNode=r,e.isStructTreeNodeWithOnlyContentChild=a,e.getRoleAttributes=o,e.getBaseAttributes=l,e.getAttributes=function(t){if(!t)return null;return Object.assign(Object.assign({},o(t)),l(t))};const i=n(279);function s(t){return t in i.PDF_ROLE_TO_HTML_ROLE}function r(t){return"children"in t}function a(t){return!!r(t)&&(1===t.children.length&&0 in t.children&&"id"in t.children[0])}function o(t){const e={};if(r(t)){const{role:n}=t,r=n.match(i.HEADING_PATTERN);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(s(n)){const t=i.PDF_ROLE_TO_HTML_ROLE[n];t&&(e.role=t)}}return e}function l(t){const e={};if(r(t)){if(void 0!==t.alt&&(e["aria-label"]=t.alt),void 0!==t.lang&&(e.lang=t.lang),a(t)){const[n]=t.children;if(n){const t=l(n);return Object.assign(Object.assign({},e),t)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}},632:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isLocalFileSystem=e.isBrowser=void 0,e.isDefined=a,e.isProvided=function(t){return a(t)&&null!==t},e.isString=o,e.isArrayBuffer=function(t){return t instanceof ArrayBuffer},e.isBlob=function(t){return(0,s.default)(e.isBrowser,"isBlob can only be used in a browser environment"),t instanceof Blob},e.isDataURI=l,e.dataURItoByteString=function(t){(0,s.default)(l(t),"Invalid data URI.");const[e="",n=""]=t.split(",");if(-1!==e.split(";").indexOf("base64"))return atob(n);return unescape(n)},e.getDevicePixelRatio=function(){return e.isBrowser&&window.devicePixelRatio||1},e.displayCORSWarning=function(){(0,r.default)(!e.isLocalFileSystem,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(c))},e.displayWorkerWarning=function(){(0,r.default)(!e.isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(c))},e.cancelRunningTask=function(t){(null===t||void 0===t?void 0:t.cancel)&&t.cancel()},e.makePageCallback=function(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t},e.isCancelException=function(t){return"RenderingCancelledException"===t.name},e.loadFromFile=function(t){return new Promise(((e,n)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return n(new Error("Error while reading a file."));e(i.result)},i.onerror=t=>{if(!t.target)return n(new Error("Error while reading a file."));const{error:e}=t.target;if(!e)return n(new Error("Error while reading a file."));switch(e.code){case e.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case e.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case e.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},i.readAsArrayBuffer(t)}))};const s=i(n(213)),r=i(n(440));function a(t){return"undefined"!==typeof t}function o(t){return"string"===typeof t}function l(t){return o(t)&&/^data:/.test(t)}e.isBrowser="undefined"!==typeof window,e.isLocalFileSystem=e.isBrowser&&"file:"===window.location.protocol;const c="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes."},705:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function r(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{A:()=>r})},51:(t,e,n)=>{"use strict";function i(t,e,n){e||(e=[]);var i=e.length++;return Object.defineProperty({},"_",{set:function(s){e[i]=s,t.apply(n,e)}})}function s(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(t,e){s(t,e),e.add(t)}function a(t,e,n){s(t,e),e.set(t,n)}function o(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function l(t,e,n){return n(o(t,e))}function c(t,e){return t.get(o(t,e))}function h(t,e,n){return t.set(o(t,e),n),n}n.r(e),n.d(e,{AbortException:()=>dp,AnnotationEditorLayer:()=>fp,AnnotationEditorParamsType:()=>pp,AnnotationEditorType:()=>gp,AnnotationEditorUIManager:()=>mp,AnnotationLayer:()=>vp,AnnotationMode:()=>yp,ColorPicker:()=>bp,DOMSVGFactory:()=>wp,DrawLayer:()=>xp,FeatureTest:()=>_p,GlobalWorkerOptions:()=>Ap,ImageKind:()=>Ep,InvalidPDFException:()=>kp,MissingPDFException:()=>Sp,OPS:()=>Cp,OutputScale:()=>Tp,PDFDataRangeTransport:()=>Mp,PDFDateString:()=>Ip,PDFWorker:()=>Rp,PasswordResponses:()=>Pp,PermissionFlag:()=>Dp,PixelsPerInch:()=>Np,RenderingCancelledException:()=>Lp,TextLayer:()=>Op,UnexpectedResponseException:()=>Fp,Util:()=>jp,VerbosityLevel:()=>Bp,XfaLayer:()=>zp,build:()=>Vp,createValidAbsoluteUrl:()=>Up,fetchData:()=>Wp,getDocument:()=>Hp,getFilenameFromUrl:()=>qp,getPdfFilenameFromUrl:()=>Gp,getXfaPageViewport:()=>Kp,isDataScheme:()=>Yp,isPdfFile:()=>Xp,noContextMenu:()=>Qp,normalizeUnicode:()=>Jp,setLayerDimensions:()=>$p,shadow:()=>Zp,version:()=>tg});var u,d,f,p,g,m,v,y,b,w,x,_,A=n(705),E={d:(t,e)=>{for(var n in e)E.o(e,n)&&!E.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},k=globalThis.pdfjsLib={};E.d(k,{AbortException:()=>Ft,AnnotationEditorLayer:()=>Qf,AnnotationEditorParamsType:()=>z,AnnotationEditorType:()=>B,AnnotationEditorUIManager:()=>ei,AnnotationLayer:()=>sh,AnnotationMode:()=>j,ColorPicker:()=>Nu,DOMSVGFactory:()=>Ml,DrawLayer:()=>lp,FeatureTest:()=>Vt,GlobalWorkerOptions:()=>Yr,ImageKind:()=>Y,InvalidPDFException:()=>Dt,MissingPDFException:()=>Nt,OPS:()=>bt,OutputScale:()=>ke,PDFDataRangeTransport:()=>Vo,PDFDateString:()=>ye,PDFWorker:()=>Zo,PasswordResponses:()=>wt,PermissionFlag:()=>V,PixelsPerInch:()=>ae,RenderingCancelledException:()=>ce,TextLayer:()=>yo,UnexpectedResponseException:()=>Lt,Util:()=>Wt,VerbosityLevel:()=>yt,XfaLayer:()=>Il,build:()=>El,createValidAbsoluteUrl:()=>Tt,fetchData:()=>oe,getDocument:()=>Fo,getFilenameFromUrl:()=>de,getPdfFilenameFromUrl:()=>fe,getXfaPageViewport:()=>we,isDataScheme:()=>he,isPdfFile:()=>ue,noContextMenu:()=>me,normalizeUnicode:()=>Yt,setLayerDimensions:()=>Ee,shadow:()=>Mt,version:()=>Al});const S="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),C=[1,0,0,1,0,0],T=[.001,0,0,.001,0,0],M=1.35,I=1,R=2,P=4,D=16,N=32,L=64,O=128,F=256,j={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},B={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},z={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},V={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},U=0,W=1,H=2,q=3,G=3,K=4,Y={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},X=1,Q=2,J=3,$=4,Z=5,tt=6,et=7,nt=8,it=9,st=10,rt=11,at=12,ot=13,lt=14,ct=15,ht=16,ut=17,dt=20,ft=1,pt=2,gt=3,mt=4,vt=5,yt={ERRORS:0,WARNINGS:1,INFOS:5},bt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},wt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let xt=yt.WARNINGS;function _t(t){Number.isInteger(t)&&(xt=t)}function At(){return xt}function Et(t){xt>=yt.INFOS&&console.log("Info: ".concat(t))}function kt(t){xt>=yt.WARNINGS&&console.log("Warning: ".concat(t))}function St(t){throw new Error(t)}function Ct(t,e){t||St(e)}function Tt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(n&&"string"===typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);(null===e||void 0===e?void 0:e.length)>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch{}}const i=e?new URL(t,e):new URL(t);if(function(t){switch(null===t||void 0===t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null}function Mt(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const It=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class Rt extends It{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Pt extends It{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Dt extends It{constructor(t){super(t,"InvalidPDFException")}}class Nt extends It{constructor(t){super(t,"MissingPDFException")}}class Lt extends It{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Ot extends It{constructor(t){super(t,"FormatError")}}class Ft extends It{constructor(t){super(t,"AbortException")}}function jt(t){"object"===typeof t&&void 0!==(null===t||void 0===t?void 0:t.length)||St("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let s=0;s<e;s+=n){const r=Math.min(s+n,e),a=t.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Bt(t){"string"!==typeof t&&St("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}function zt(t){const e=Object.create(null);for(const[n,i]of t)e[n]=i;return e}class Vt{static get isLittleEndian(){return Mt(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return Mt(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return Mt(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){var t,e;return"undefined"!==typeof navigator&&"string"===typeof(null===(t=navigator)||void 0===t?void 0:t.platform)?Mt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.userAgent)&&navigator.userAgent.includes("Firefox")}):Mt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Mt(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Ut=Array.from(Array(256).keys(),(t=>t.toString(16).padStart(2,"0")));class Wt{static makeHexColor(t,e,n){return"#".concat(Ut[t]).concat(Ut[e]).concat(Ut[n])}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),s=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],s[0],r[0]),Math.min(n[1],i[1],s[1],r[1]),Math.max(n[0],i[0],s[0],r[0]),Math.max(n[1],i[1],s[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],s=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(n+r)/2,o=Math.sqrt((n+r)**2-4*(n*r-s*i))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>r?null:[n,s,i,r]}static bezierBoundingBox(t,e,n,i,s,r,a,l,c){return c?(c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,a),Math.min(e,l),Math.max(t,a),Math.max(e,l)],o(Wt,this,qt).call(this,t,n,s,a,e,i,r,l,3*(3*(n-s)-t+a),6*(t-2*n+s),3*(n-t),c),o(Wt,this,qt).call(this,t,n,s,a,e,i,r,l,3*(3*(i-r)-e+l),6*(e-2*i+r),3*(i-e),c),c}}function Ht(t,e,n,i,s,r,a,o,l,c){if(l<=0||l>=1)return;const h=1-l,u=l*l,d=u*l,f=h*(h*(h*t+3*l*e)+3*u*n)+d*i,p=h*(h*(h*s+3*l*r)+3*u*a)+d*o;c[0]=Math.min(c[0],f),c[1]=Math.min(c[1],p),c[2]=Math.max(c[2],f),c[3]=Math.max(c[3],p)}function qt(t,e,n,i,s,r,a,l,c,h,d,f){if(Math.abs(c)<1e-12)return void(Math.abs(h)>=1e-12&&o(u,this,Ht).call(this,t,e,n,i,s,r,a,l,-d/h,f));const p=h**2-4*d*c;if(p<0)return;const g=Math.sqrt(p),m=2*c;o(u,this,Ht).call(this,t,e,n,i,s,r,a,l,(-h+g)/m,f),o(u,this,Ht).call(this,t,e,n,i,s,r,a,l,(-h-g)/m,f)}u=Wt;let Gt=null,Kt=null;function Yt(t){return Gt||(Gt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Kt=new Map([["\ufb05","\u017ft"]])),t.replaceAll(Gt,((t,e,n)=>e?e.normalize("NFKC"):Kt.get(n)))}const Xt="pdfjs_internal_id_",Qt=0,Jt=1,$t=2,Zt=3,te=4,ee=5,ne=6,ie=7,se=8;const re="http://www.w3.org/2000/svg";class ae{}async function oe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(ge(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise(((n,i)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)i(new Error(s.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)}))}d=ae,(0,A.A)(ae,"CSS",96),(0,A.A)(ae,"PDF",72),(0,A.A)(ae,"PDF_TO_CSS_UNITS",d.CSS/d.PDF);class le{constructor(t){let{viewBox:e,scale:n,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}=t;this.viewBox=e,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=r;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,h,u,d,f,p,g,m;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,u=0,d=1;break;case 90:c=0,h=1,u=1,d=0;break;case 270:c=0,h=-1,u=-1,d=0;break;case 0:c=1,h=0,u=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,d=-d),0===c?(f=Math.abs(l-e[1])*n+s,p=Math.abs(o-e[0])*n+r,g=(e[3]-e[1])*n,m=(e[2]-e[0])*n):(f=Math.abs(o-e[0])*n+s,p=Math.abs(l-e[1])*n+r,g=(e[2]-e[0])*n,m=(e[3]-e[1])*n),this.transform=[c*n,h*n,u*n,d*n,f-c*n*o-u*n*l,p-h*n*o-d*n*l],this.width=g,this.height=m}get rawDims(){const{viewBox:t}=this;return Mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new le({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(t,e){return Wt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Wt.applyTransform([t[0],t[1]],this.transform),n=Wt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Wt.applyInverseTransform([t,e],this.transform)}}class ce extends It{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t,"RenderingCancelledException"),this.extraDelay=e}}function he(t){const e=t.length;let n=0;for(;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function ue(t){return"string"===typeof t&&/\.pdf$/i.test(t)}function de(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function fe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof t)return e;if(he(t))return kt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let s=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||e}class pe{constructor(){(0,A.A)(this,"started",Object.create(null)),(0,A.A)(this,"times",[])}time(t){t in this.started&&kt("Timer is already running for ".concat(t)),this.started[t]=Date.now()}timeEnd(t){t in this.started||kt("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:s}of this.times)t.push("".concat(n.padEnd(e)," ").concat(s-i,"ms\n"));return t.join("")}}function ge(t,e){try{const{protocol:n}=e?new URL(t,e):new URL(t);return"http:"===n||"https:"===n}catch{return!1}}function me(t){t.preventDefault()}function ve(t){console.log("Deprecated API usage: "+t)}class ye{static toDateObject(t){if(!t||"string"!==typeof t)return null;o(ye,this,be)._||(be._=o(ye,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const e=o(ye,this,be)._.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===c?(r+=h,a+=u):"+"===c&&(r-=h,a-=u),new Date(Date.UTC(n,i,s,r,a,l))}}var be={_:void 0};function we(t,e){let{scale:n=1,rotation:i=0}=e;const{width:s,height:r}=t.attributes.style,a=[0,0,parseInt(s),parseInt(r)];return new le({viewBox:a,scale:n,rotation:i})}function xe(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):(kt('Not a valid color format: "'.concat(t,'"')),[0,0,0])}function _e(t){const{a:e,b:n,c:i,d:s,e:r,f:a}=t.getTransform();return[e,n,i,s,r,a]}function Ae(t){const{a:e,b:n,c:i,d:s,e:r,f:a}=t.getTransform().invertSelf();return[e,n,i,s,r,a]}function Ee(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof le){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:r}=t,a=Vt.isCSSRoundSupported,o="var(--scale-factor) * ".concat(i,"px"),l="var(--scale-factor) * ".concat(s,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x, 1px))"):"calc(".concat(o,")"),h=a?"round(down, ".concat(l,", var(--scale-round-y, 1px))"):"calc(".concat(l,")");n&&e.rotation%180!==0?(r.width=h,r.height=c):(r.width=c,r.height=h)}i&&t.setAttribute("data-main-rotation",e.rotation)}class ke{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}var Se=new WeakMap,Ce=new WeakMap,Te=new WeakMap,Me=new WeakMap,Ie=new WeakMap,Re=new WeakSet;class Pe{constructor(t){r(this,Re),a(this,Se,null),a(this,Ce,null),a(this,Te,void 0),a(this,Me,null),a(this,Ie,null),h(Te,this,t),Be._||(Be._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=h(Se,this,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(Te,this)._uiManager._signal;t.addEventListener("contextmenu",me,{signal:e}),t.addEventListener("pointerdown",De,{signal:e});const n=h(Me,this,document.createElement("div"));n.className="buttons",t.append(n);const i=c(Te,this).toolbarPosition;if(i){const{style:e}=t,n="ltr"===c(Te,this)._uiManager.direction?1-i[0]:i[0];e.insetInlineEnd="".concat(100*n,"%"),e.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return o(Re,this,Fe).call(this),t}get div(){return c(Se,this)}hide(){var t;c(Se,this).classList.add("hidden"),null===(t=c(Ce,this))||void 0===t||t.hideDropdown()}show(){var t;c(Se,this).classList.remove("hidden"),null===(t=c(Ie,this))||void 0===t||t.shown()}async addAltText(t){const e=await t.render();o(Re,this,Oe).call(this,e),c(Me,this).prepend(e,l(Re,this,je)),h(Ie,this,t)}addColorPicker(t){h(Ce,this,t);const e=t.renderButton();o(Re,this,Oe).call(this,e),c(Me,this).prepend(e,l(Re,this,je))}remove(){var t;c(Se,this).remove(),null===(t=c(Ce,this))||void 0===t||t.destroy(),h(Ce,this,null)}}function De(t){t.stopPropagation()}function Ne(t){c(Te,this)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}function Le(t){c(Te,this)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}function Oe(t){const e=c(Te,this)._uiManager._signal;t.addEventListener("focusin",o(Re,this,Ne).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",o(Re,this,Le).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",me,{signal:e})}function Fe(){const{editorType:t,_uiManager:e}=c(Te,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Be._[t]),o(Re,this,Oe).call(this,n),n.addEventListener("click",(t=>{e.delete()}),{signal:e._signal}),c(Me,this).append(n)}function je(t){const e=document.createElement("div");return e.className="divider",e}var Be={_:null},ze=new WeakMap,Ve=new WeakMap,Ue=new WeakMap,We=new WeakSet;class He{constructor(t){r(this,We),a(this,ze,null),a(this,Ve,null),a(this,Ue,void 0),h(Ue,this,t)}show(t,e,n){const[i,s]=o(We,this,Ge).call(this,e,n),{style:r}=c(Ve,this)||h(Ve,this,o(We,this,qe).call(this));t.append(c(Ve,this)),r.insetInlineEnd="".concat(100*i,"%"),r.top="calc(".concat(100*s,"% + var(--editor-toolbar-vert-offset))")}hide(){c(Ve,this).remove()}}function qe(){const t=h(Ve,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",me,{signal:c(Ue,this)._signal});const e=h(ze,this,document.createElement("div"));return e.className="buttons",t.append(e),o(We,this,Ke).call(this),t}function Ge(t,e){let n=0,i=0;for(const s of t){const t=s.y+s.height;if(t<n)continue;const r=s.x+(e?s.width:0);t>n?(i=r,n=t):e?r>i&&(i=r):r<i&&(i=r)}return[e?1-i:i,n]}function Ke(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(Ue,this)._signal;t.addEventListener("contextmenu",me,{signal:n}),t.addEventListener("click",(()=>{c(Ue,this).highlightSelection("floating_button")}),{signal:n}),c(ze,this).append(t)}function Ye(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}var Xe=new WeakMap;class Qe{constructor(){a(this,Xe,0)}get id(){var t,e;return"".concat("pdfjs_internal_editor_").concat((h(Xe,this,(t=c(Xe,this),e=t++,t)),e))}}var Je=new WeakMap,$e=new WeakMap,Ze=new WeakMap,tn=new WeakSet;class en{constructor(){r(this,tn),a(this,Je,function(){var t,e;if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.randomUUID))return crypto.randomUUID();const n=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.getRandomValues))crypto.getRandomValues(n);else for(let i=0;i<32;i++)n[i]=Math.floor(255*Math.random());return jt(n)}()),a(this,$e,0),a(this,Ze,null)}static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Mt(this,"_isSVGFittingCanvas",e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]))))}async getFromFile(t){const{lastModified:e,name:n,size:i,type:s}=t;return o(tn,this,nn).call(this,"".concat(e,"_").concat(n,"_").concat(i,"_").concat(s),t)}async getFromUrl(t){return o(tn,this,nn).call(this,t,t)}async getFromBlob(t,e){const n=await e;return o(tn,this,nn).call(this,t,n)}async getFromId(t){c(Ze,this)||h(Ze,this,new Map);const e=c(Ze,this).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:t}=e;return delete e.blobPromise,this.getFromBlob(e.id,t)}return this.getFromUrl(e.url)}getFromCanvas(t,e){var n,i,s;c(Ze,this)||h(Ze,this,new Map);let r=c(Ze,this).get(t);if(null!==(s=r)&&void 0!==s&&s.bitmap)return r.refCounter+=1,r;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),r={bitmap:a.transferToImageBitmap(),id:"image_".concat(c(Je,this),"_").concat((h($e,this,(n=c($e,this),i=n++,n)),i)),refCounter:1,isSvg:!1},c(Ze,this).set(t,r),c(Ze,this).set(r.id,r),r}getSvgUrl(t){const e=c(Ze,this).get(t);return null!==e&&void 0!==e&&e.isSvg?e.svgUrl:null}deleteId(t){var e;c(Ze,this)||h(Ze,this,new Map);const n=c(Ze,this).get(t);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const t=new OffscreenCanvas(i.width,i.height);t.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=t.convertToBlob()}null===(e=i.close)||void 0===e||e.call(i),n.bitmap=null}isValidId(t){return t.startsWith("image_".concat(c(Je,this),"_"))}}async function nn(t,e){var n;c(Ze,this)||h(Ze,this,new Map);let i=c(Ze,this).get(t);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var s,r;let t;if(i||(i={bitmap:null,id:"image_".concat(c(Je,this),"_").concat((h($e,this,(s=c($e,this),r=s++,s)),r)),refCounter:0,isSvg:!1}),"string"===typeof e?(i.url=e,t=await oe(e,"blob")):e instanceof File?t=i.file=e:e instanceof Blob&&(t=e),"image/svg+xml"===t.type){const e=f._isSVGFittingCanvas,n=new FileReader,s=new Image,r=new Promise(((t,r)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,t()},n.onload=async()=>{const t=i.svgUrl=n.result;s.src=await e?"".concat(t,"#svgView(preserveAspectRatio(none))"):t},s.onerror=n.onerror=r}));n.readAsDataURL(t),await r}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(a){console.error(a),i=null}return c(Ze,this).set(t,i),i&&c(Ze,this).set(i.id,i),i}f=en;var sn=new WeakMap,rn=new WeakMap,an=new WeakMap,on=new WeakMap;class ln{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;a(this,sn,[]),a(this,rn,!1),a(this,an,void 0),a(this,on,-1),h(an,this,t)}add(t){let{cmd:e,undo:n,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=t;if(s&&e(),c(rn,this))return;const l={cmd:e,undo:n,post:i,type:r};if(-1===c(on,this))return c(sn,this).length>0&&(c(sn,this).length=0),h(on,this,0),void c(sn,this).push(l);if(a&&c(sn,this)[c(on,this)].type===r)return o&&(l.undo=c(sn,this)[c(on,this)].undo),void(c(sn,this)[c(on,this)]=l);const u=c(on,this)+1;u===c(an,this)?c(sn,this).splice(0,1):(h(on,this,u),u<c(sn,this).length&&c(sn,this).splice(u)),c(sn,this).push(l)}undo(){if(-1===c(on,this))return;h(rn,this,!0);const{undo:t,post:e}=c(sn,this)[c(on,this)];t(),null===e||void 0===e||e(),h(rn,this,!1),h(on,this,c(on,this)-1)}redo(){if(c(on,this)<c(sn,this).length-1){h(on,this,c(on,this)+1),h(rn,this,!0);const{cmd:t,post:e}=c(sn,this)[c(on,this)];t(),null===e||void 0===e||e(),h(rn,this,!1)}}hasSomethingToUndo(){return-1!==c(on,this)}hasSomethingToRedo(){return c(on,this)<c(sn,this).length-1}destroy(){h(sn,this,null)}}var cn=new WeakSet;class hn{constructor(t){r(this,cn),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Vt.platform;for(const[n,i,s={}]of t)for(const t of n){const n=t.startsWith("mac+");e&&n?(this.callbacks.set(t.slice(4),{callback:i,options:s}),this.allKeys.add(t.split("+").at(-1))):e||n||(this.callbacks.set(t,{callback:i,options:s}),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(o(cn,this,un).call(this,e));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:r=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...r,e)(),s||(e.stopPropagation(),e.preventDefault()))}}function un(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}class dn{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,xe(i))}e.remove()}(t),Mt(this,"_colors",t)}convert(t){const e=xe(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every(((t,n)=>t===e[n])))return dn._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Wt.makeHexColor(...e):t}}(0,A.A)(dn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var fn=new WeakMap,pn=new WeakMap,gn=new WeakMap,mn=new WeakMap,vn=new WeakMap,yn=new WeakMap,bn=new WeakMap,wn=new WeakMap,xn=new WeakMap,_n=new WeakMap,An=new WeakMap,En=new WeakMap,kn=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Mn=new WeakMap,In=new WeakMap,Rn=new WeakMap,Pn=new WeakMap,Dn=new WeakMap,Nn=new WeakMap,Ln=new WeakMap,On=new WeakMap,Fn=new WeakMap,jn=new WeakMap,Bn=new WeakMap,zn=new WeakMap,Vn=new WeakMap,Un=new WeakMap,Wn=new WeakMap,Hn=new WeakMap,qn=new WeakMap,Gn=new WeakMap,Kn=new WeakMap,Yn=new WeakMap,Xn=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,$n=new WeakMap,Zn=new WeakMap,ti=new WeakSet;class ei{static get _keyboardManager(){const t=ei.prototype,e=t=>c(Jn,t).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),n=(t,e)=>{let{target:n}=e;if(n instanceof HTMLInputElement){const{type:t}=n;return"text"!==t&&"number"!==t}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new hn([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&c(Jn,t).contains(n)&&!t.isEnterHandled}}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&c(Jn,t).contains(document.activeElement)}}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}constructor(t,e,n,i,s,l,u,d,f,p,g){r(this,ti),a(this,fn,new AbortController),a(this,pn,null),a(this,gn,new Map),a(this,mn,new Map),a(this,vn,null),a(this,yn,null),a(this,bn,null),a(this,wn,new ln),a(this,xn,null),a(this,_n,0),a(this,An,new Set),a(this,En,null),a(this,kn,null),a(this,Sn,new Set),a(this,Cn,!1),a(this,Tn,!1),a(this,Mn,!1),a(this,In,null),a(this,Rn,null),a(this,Pn,null),a(this,Dn,null),a(this,Nn,!1),a(this,Ln,null),a(this,On,new Qe),a(this,Fn,!1),a(this,jn,!1),a(this,Bn,null),a(this,zn,null),a(this,Vn,null),a(this,Un,null),a(this,Wn,B.NONE),a(this,Hn,new Set),a(this,qn,null),a(this,Gn,null),a(this,Kn,null),a(this,Yn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),a(this,Xn,[0,0]),a(this,Qn,null),a(this,Jn,null),a(this,$n,null),a(this,Zn,null);const m=this._signal=c(fn,this).signal;h(Jn,this,t),h($n,this,e),h(vn,this,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:m}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),i._on("setpreference",this.onSetPreference.bind(this),{signal:m}),i._on("switchannotationeditorparams",(t=>this.updateParams(t.type,t.value)),{signal:m}),o(ti,this,oi).call(this),o(ti,this,pi).call(this),o(ti,this,hi).call(this),h(yn,this,s.annotationStorage),h(In,this,s.filterFactory),h(Gn,this,l),h(Dn,this,u||null),h(Cn,this,d),h(Tn,this,f),h(Mn,this,p),h(Un,this,g||null),this.viewParameters={realScale:ae.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){var t,e,n,i;null===(t=c(Zn,this))||void 0===t||t.resolve(),h(Zn,this,null),null===(e=c(fn,this))||void 0===e||e.abort(),h(fn,this,null),this._signal=null;for(const s of c(mn,this).values())s.destroy();c(mn,this).clear(),c(gn,this).clear(),c(Sn,this).clear(),h(pn,this,null),c(Hn,this).clear(),c(wn,this).destroy(),null===(n=c(vn,this))||void 0===n||n.destroy(),null===(i=c(Ln,this))||void 0===i||i.hide(),h(Ln,this,null),c(Rn,this)&&(clearTimeout(c(Rn,this)),h(Rn,this,null)),c(Qn,this)&&(clearTimeout(c(Qn,this)),h(Qn,this,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(Un,this)}get useNewAltTextFlow(){return c(Tn,this)}get useNewAltTextWhenAddingImage(){return c(Mn,this)}get hcmFilter(){return Mt(this,"hcmFilter",c(Gn,this)?c(In,this).addHCMFilter(c(Gn,this).foreground,c(Gn,this).background):"none")}get direction(){return Mt(this,"direction",getComputedStyle(c(Jn,this)).direction)}get highlightColors(){return Mt(this,"highlightColors",c(Dn,this)?new Map(c(Dn,this).split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}get highlightColorNames(){return Mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(t=>t.reverse()))):null)}setMainHighlightColorPicker(t){h(Vn,this,t)}editAltText(t){var e;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=c(vn,this))||void 0===e||e.editAltText(this,t,n)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference(t){let{name:e,value:n}=t;if("enableNewAltTextWhenAddingImage"===e)h(Mn,this,n)}onPageChanging(t){let{pageNumber:e}=t;h(_n,this,e-1)}focusMainContainer(){c(Jn,this).focus()}findParent(t,e){for(const n of c(mn,this).values()){const{x:i,y:s,width:r,height:a}=n.div.getBoundingClientRect();if(t>=i&&t<=i+r&&e>=s&&e<=s+a)return n}return null}disableUserSelect(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c($n,this).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(Sn,this).add(t)}removeShouldRescale(t){c(Sn,this).delete(t)}onScaleChanging(t){let{scale:e}=t;this.commitOrRemove(),this.viewParameters.realScale=e*ae.PDF_TO_CSS_UNITS;for(const n of c(Sn,this))n.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}=e,a=e.toString(),l=o(ti,this,ni).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(l);if(!h)return;e.empty();const u=o(ti,this,ii).call(this,l),d=c(Wn,this)===B.NONE,f=()=>{null===u||void 0===u||u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r,text:a}),d&&this.showAllEditors("highlight",!0,!0)};d?this.switchToMode(B.HIGHLIGHT,f):f()}addToAnnotationStorage(t){t.isEmpty()||!c(yn,this)||c(yn,this).has(t.id)||c(yn,this).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(Nn,this)&&(h(Nn,this,!1),o(ti,this,ai).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(Hn,this))if(e.div.contains(t)){h(zn,this,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(zn,this))return;const[t,e]=c(zn,this);h(zn,this,null),e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),e.focus()}addEditListeners(){o(ti,this,hi).call(this),o(ti,this,di).call(this)}removeEditListeners(){o(ti,this,ui).call(this),o(ti,this,fi).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of c(kn,this))if(n.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const n of c(kn,this))if(n.isHandlingMimeForPasting(e.type))return n.paste(e,this.currentLayer),void t.preventDefault()}copy(t){var e;if(t.preventDefault(),null===(e=c(pn,this))||void 0===e||e.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of c(Hn,this)){const t=i.serialize(!0);t&&n.push(t)}0!==n.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const t of c(kn,this))if(t.isHandlingMimeForPasting(r.type))return void t.paste(r,this.currentLayer);let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void kt('paste: "'.concat(s.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const t=[];for(const r of n){const e=await i.deserialize(r);if(!e)return;t.push(e)}const e=()=>{for(const e of t)o(ti,this,bi).call(this,e);o(ti,this,_i).call(this,t)},s=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:s,mustExec:!0})}catch(s){kt('paste: "'.concat(s.message,'".'))}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),c(Wn,this)===B.NONE||this.isEditorHandlingKeyboard||ei._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,c(Nn,this)&&(h(Nn,this,!1),o(ti,this,ai).call(this,"main_toolbar")))}onEditingAction(t){let{name:e}=t;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(t){t?(o(ti,this,li).call(this),o(ti,this,di).call(this),o(ti,this,gi).call(this,{isEditing:c(Wn,this)!==B.NONE,isEmpty:o(ti,this,xi).call(this),hasSomethingToUndo:c(wn,this).hasSomethingToUndo(),hasSomethingToRedo:c(wn,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(o(ti,this,ci).call(this),o(ti,this,fi).call(this),o(ti,this,gi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(kn,this)){h(kn,this,t);for(const t of c(kn,this))o(ti,this,mi).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(On,this).id}get currentLayer(){return c(mn,this).get(c(_n,this))}getLayer(t){return c(mn,this).get(t)}get currentPageIndex(){return c(_n,this)}addLayer(t){c(mn,this).set(t.pageIndex,t),c(Fn,this)?t.enable():t.disable()}removeLayer(t){c(mn,this).delete(t.pageIndex)}async updateMode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(c(Wn,this)!==t&&(!c(Zn,this)||(await c(Zn,this).promise,c(Zn,this)))){if(h(Zn,this,Promise.withResolvers()),h(Wn,this,t),t===B.NONE)return this.setEditingState(!1),o(ti,this,yi).call(this),void c(Zn,this).resolve();this.setEditingState(!0),await o(ti,this,vi).call(this),this.unselectAll();for(const e of c(mn,this).values())e.updateMode(t);if(!e)return n&&this.addNewEditorFromKeyboard(),void c(Zn,this).resolve();for(const t of c(gn,this).values())t.annotationElementId===e?(this.setSelected(t),t.enterInEditMode()):t.unselect();c(Zn,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(Wn,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(c(kn,this)){switch(t){case z.CREATE:return void this.currentLayer.addNewEditor();case z.HIGHLIGHT_DEFAULT_COLOR:null===(n=c(Vn,this))||void 0===n||n.updateColor(e);break;case z.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(Kn,this)||h(Kn,this,new Map)).set(t,e),this.showAllEditors("highlight",e)}for(const n of c(Hn,this))n.updateParams(t,e);for(const n of c(kn,this))n.updateDefaultParams(t,e)}}showAllEditors(t,e){var n,i;for(const s of c(gn,this).values())s.editorType===t&&s.show(e);(null===(n=null===(i=c(Kn,this))||void 0===i?void 0:i.get(z.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==e&&o(ti,this,mi).call(this,[[z.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(c(jn,this)!==t){h(jn,this,t);for(const e of c(mn,this).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of c(gn,this).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return c(gn,this).get(t)}addEditor(t){c(gn,this).set(t.id,t)}removeEditor(t){var e;(t.div.contains(document.activeElement)&&(c(Rn,this)&&clearTimeout(c(Rn,this)),h(Rn,this,setTimeout((()=>{this.focusMainContainer(),h(Rn,this,null)}),0))),c(gn,this).delete(t.id),this.unselect(t),t.annotationElementId&&c(An,this).has(t.annotationElementId))||(null===(e=c(yn,this))||void 0===e||e.remove(t.id))}addDeletedAnnotationElement(t){c(An,this).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(An,this).has(t)}removeDeletedAnnotationElement(t){c(An,this).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(pn,this)!==t&&(h(pn,this,t),t&&o(ti,this,mi).call(this,t.propertiesToUpdate))}updateUI(t){l(ti,this,wi)===t&&o(ti,this,mi).call(this,t.propertiesToUpdate)}toggleSelected(t){if(c(Hn,this).has(t))return c(Hn,this).delete(t),t.unselect(),void o(ti,this,gi).call(this,{hasSelectedEditor:this.hasSelection});c(Hn,this).add(t),t.select(),o(ti,this,mi).call(this,t.propertiesToUpdate),o(ti,this,gi).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of c(Hn,this))e!==t&&e.unselect();c(Hn,this).clear(),c(Hn,this).add(t),t.select(),o(ti,this,mi).call(this,t.propertiesToUpdate),o(ti,this,gi).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(Hn,this).has(t)}get firstSelectedEditor(){return c(Hn,this).values().next().value}unselect(t){t.unselect(),c(Hn,this).delete(t),o(ti,this,gi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==c(Hn,this).size}get isEnterHandled(){return 1===c(Hn,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){c(wn,this).undo(),o(ti,this,gi).call(this,{hasSomethingToUndo:c(wn,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:o(ti,this,xi).call(this)})}redo(){c(wn,this).redo(),o(ti,this,gi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(wn,this).hasSomethingToRedo(),isEmpty:o(ti,this,xi).call(this)})}addCommands(t){c(wn,this).add(t),o(ti,this,gi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:o(ti,this,xi).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...c(Hn,this)];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)o(ti,this,bi).call(this,e)},mustExec:!0})}commitOrRemove(){var t;null===(t=c(pn,this))||void 0===t||t.commitOrRemove()}hasSomethingToControl(){return c(pn,this)||this.hasSelection}selectAll(){for(const t of c(Hn,this))t.commit();o(ti,this,_i).call(this,c(gn,this).values())}unselectAll(){if((!c(pn,this)||(c(pn,this).commitOrRemove(),c(Wn,this)===B.NONE))&&this.hasSelection){for(const t of c(Hn,this))t.unselect();c(Hn,this).clear(),o(ti,this,gi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;c(Xn,this)[0]+=t,c(Xn,this)[1]+=e;const[n,i]=c(Xn,this),s=[...c(Hn,this)];c(Qn,this)&&clearTimeout(c(Qn,this)),h(Qn,this,setTimeout((()=>{h(Qn,this,null),c(Xn,this)[0]=c(Xn,this)[1]=0,this.addCommands({cmd:()=>{for(const t of s)c(gn,this).has(t.id)&&t.translateInPage(n,i)},undo:()=>{for(const t of s)c(gn,this).has(t.id)&&t.translateInPage(-n,-i)},mustExec:!1})}),1e3));for(const r of s)r.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),h(En,this,new Map);for(const t of c(Hn,this))c(En,this).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(En,this))return!1;this.disableUserSelect(!1);const t=c(En,this);h(En,this,null);let e=!1;for(const[{x:i,y:s,pageIndex:r},a]of t)a.newX=i,a.newY=s,a.newPageIndex=r,e||(e=i!==a.savedX||s!==a.savedY||r!==a.savedPageIndex);if(!e)return!1;const n=(t,e,n,i)=>{if(c(gn,this).has(t.id)){const s=c(mn,this).get(i);s?t._setParentAndPosition(s,e,n):(t.pageIndex=i,t.x=e,t.y=n)}};return this.addCommands({cmd:()=>{for(const[e,{newX:i,newY:s,newPageIndex:r}]of t)n(e,i,s,r)},undo:()=>{for(const[e,{savedX:i,savedY:s,savedPageIndex:r}]of t)n(e,i,s,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(En,this))for(const n of c(En,this).keys())n.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===c(Hn,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(pn,this)===t}getActive(){return c(pn,this)}getMode(){return c(Wn,this)}get imageManager(){return Mt(this,"imageManager",new en)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,c=e.rangeCount;l<c;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-i)/r,y:1-(t+a-n)/s,width:o/r,height:a/s});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-n)/s,y:1-(e+o-i)/r,width:a/s,height:o/r});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-i)/r,y:(t-n)/s,width:o/r,height:a/s});break;default:a=(t,e,a,o)=>({x:(t-n)/s,y:(e-i)/r,width:a/s,height:o/r})}const o=[];for(let l=0,c=e.rangeCount;l<c;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:n,width:i,height:s}of t.getClientRects())0!==i&&0!==s&&o.push(a(e,n,i,s))}return 0===o.length?null:o}addChangedExistingAnnotation(t){let{annotationElementId:e,id:n}=t;(c(bn,this)||h(bn,this,new Map)).set(e,n)}removeChangedExistingAnnotation(t){var e;let{annotationElementId:n}=t;null===(e=c(bn,this))||void 0===e||e.delete(n)}renderAnnotationElement(t){var e;const n=null===(e=c(bn,this))||void 0===e?void 0:e.get(t.data.id);if(!n)return;const i=c(yn,this).getRawValue(n);i&&(c(Wn,this)!==B.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}function ni(t){let{anchorNode:e}=t;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}function ii(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of c(mn,this).values())if(n.hasTextLayer(t))return n;return null}function si(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=o(ti,this,ni).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(c(Ln,this)||h(Ln,this,new He(this)),c(Ln,this).show(e,n,"ltr"===this.direction))}function ri(){var t;const e=document.getSelection();if(!e||e.isCollapsed){var n;if(c(qn,this))null===(n=c(Ln,this))||void 0===n||n.hide(),h(qn,this,null),o(ti,this,gi).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=e;if(i===c(qn,this))return;const s=o(ti,this,ni).call(this,e).closest(".textLayer");var r;if(s){if(null===(t=c(Ln,this))||void 0===t||t.hide(),h(qn,this,i),o(ti,this,gi).call(this,{hasSelectedText:!0}),(c(Wn,this)===B.HIGHLIGHT||c(Wn,this)===B.NONE)&&(c(Wn,this)===B.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),h(Nn,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const t=c(Wn,this)===B.HIGHLIGHT?o(ti,this,ii).call(this,s):null;null===t||void 0===t||t.toggleDrawing();const e=new AbortController,n=this.combinedSignal(e),i=n=>{"pointerup"===n.type&&0!==n.button||(e.abort(),null===t||void 0===t||t.toggleDrawing(!0),"pointerup"===n.type&&o(ti,this,ai).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}}else c(qn,this)&&(null===(r=c(Ln,this))||void 0===r||r.hide(),h(qn,this,null),o(ti,this,gi).call(this,{hasSelectedText:!1}))}function ai(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(Wn,this)===B.HIGHLIGHT?this.highlightSelection(t):c(Cn,this)&&o(ti,this,si).call(this)}function oi(){document.addEventListener("selectionchange",o(ti,this,ri).bind(this),{signal:this._signal})}function li(){if(c(Pn,this))return;h(Pn,this,new AbortController);const t=this.combinedSignal(c(Pn,this));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}function ci(){var t;null===(t=c(Pn,this))||void 0===t||t.abort(),h(Pn,this,null)}function hi(){if(c(Bn,this))return;h(Bn,this,new AbortController);const t=this.combinedSignal(c(Bn,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}function ui(){var t;null===(t=c(Bn,this))||void 0===t||t.abort(),h(Bn,this,null)}function di(){if(c(xn,this))return;h(xn,this,new AbortController);const t=this.combinedSignal(c(xn,this));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}function fi(){var t;null===(t=c(xn,this))||void 0===t||t.abort(),h(xn,this,null)}function pi(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}function gi(t){Object.entries(t).some((t=>{let[e,n]=t;return c(Yn,this)[e]!==n}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(Yn,this),t)}),c(Wn,this)===B.HIGHLIGHT&&!1===t.hasSelectedEditor&&o(ti,this,mi).call(this,[[z.HIGHLIGHT_FREE,!0]]))}function mi(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}async function vi(){if(!c(Fn,this)){h(Fn,this,!0);const t=[];for(const e of c(mn,this).values())t.push(e.enable());await Promise.all(t);for(const e of c(gn,this).values())e.enable()}}function yi(){if(this.unselectAll(),c(Fn,this)){h(Fn,this,!1);for(const t of c(mn,this).values())t.disable();for(const t of c(gn,this).values())t.disable()}}function bi(t){const e=c(mn,this).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}function wi(t){let e=null;for(e of c(Hn,t));return e}function xi(){if(0===c(gn,this).size)return!0;if(1===c(gn,this).size)for(const t of c(gn,this).values())return t.isEmpty();return!1}function _i(t){for(const e of c(Hn,this))e.unselect();c(Hn,this).clear();for(const e of t)e.isEmpty()||(c(Hn,this).add(e),e.select());o(ti,this,gi).call(this,{hasSelectedEditor:this.hasSelection})}(0,A.A)(ei,"TRANSLATE_SMALL",1),(0,A.A)(ei,"TRANSLATE_BIG",10);var Ai=new WeakMap,Ei=new WeakMap,ki=new WeakMap,Si=new WeakMap,Ci=new WeakMap,Ti=new WeakMap,Mi=new WeakMap,Ii=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,Di=new WeakMap,Ni=new WeakMap,Li=new WeakSet;class Oi{constructor(t){r(this,Li),a(this,Ai,null),a(this,Ei,!1),a(this,ki,null),a(this,Si,null),a(this,Ci,null),a(this,Ti,null),a(this,Mi,!1),a(this,Ii,null),a(this,Ri,null),a(this,Pi,null),a(this,Di,null),a(this,Ni,!1),h(Ri,this,t),h(Ni,this,t._uiManager.useNewAltTextFlow),Bi._||(Bi._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){var e;null!==(e=Oi._l10n)&&void 0!==e||(Oi._l10n=t)}async render(){const t=h(ki,this,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=h(Si,this,document.createElement("span"));t.append(e),c(Ni,this)?(t.classList.add("new"),t.setAttribute("data-l10n-id",Bi._.missing),e.setAttribute("data-l10n-id",Bi._["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(Ri,this)._uiManager._signal;t.addEventListener("contextmenu",me,{signal:n}),t.addEventListener("pointerdown",(t=>t.stopPropagation()),{signal:n});const i=t=>{t.preventDefault(),c(Ri,this)._uiManager.editAltText(c(Ri,this)),c(Ni,this)&&c(Ri,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(Li,this,Fi)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(h(Mi,this,!0),i(e))}),{signal:n}),await o(Li,this,ji).call(this),t}finish(){c(ki,this)&&(c(ki,this).focus({focusVisible:c(Mi,this)}),h(Mi,this,!1))}isEmpty(){return c(Ni,this)?null===c(Ai,this):!c(Ai,this)&&!c(Ei,this)}hasData(){return c(Ni,this)?null!==c(Ai,this)||!!c(Pi,this):this.isEmpty()}get guessedText(){return c(Pi,this)}async setGuessedText(t){null===c(Ai,this)&&(h(Pi,this,t),h(Di,this,await Oi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),o(Li,this,ji).call(this))}toggleAltTextBadge(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;if(!c(Ni,this)||c(Ai,this))return null===(e=c(Ii,this))||void 0===e||e.remove(),void h(Ii,this,null);if(!c(Ii,this)){const t=h(Ii,this,document.createElement("div"));t.className="noAltTextBadge",c(Ri,this).div.append(t)}c(Ii,this).classList.toggle("hidden",!t)}serialize(t){let e=c(Ai,this);return t||c(Pi,this)!==e||(e=c(Di,this)),{altText:e,decorative:c(Ei,this),guessedText:c(Pi,this),textWithDisclaimer:c(Di,this)}}get data(){return{altText:c(Ai,this),decorative:c(Ei,this)}}set data(t){let{altText:e,decorative:n,guessedText:i,textWithDisclaimer:s,cancel:r=!1}=t;i&&(h(Pi,this,i),h(Di,this,s)),c(Ai,this)===e&&c(Ei,this)===n||(r||(h(Ai,this,e),h(Ei,this,n)),o(Li,this,ji).call(this))}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(ki,this)&&(!t&&c(Ti,this)&&(clearTimeout(c(Ti,this)),h(Ti,this,null)),c(ki,this).disabled=!t)}shown(){c(Ri,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(Li,this,Fi)}})}destroy(){var t,e;null===(t=c(ki,this))||void 0===t||t.remove(),h(ki,this,null),h(Si,this,null),h(Ci,this,null),null===(e=c(Ii,this))||void 0===e||e.remove(),h(Ii,this,null)}}function Fi(t){return(c(Ai,t)?"added":null===c(Ai,t)&&t.guessedText&&"review")||"missing"}async function ji(){const t=c(ki,this);if(!t)return;if(c(Ni,this)){var e,n;if(t.classList.toggle("done",!!c(Ai,this)),t.setAttribute("data-l10n-id",Bi._[l(Li,this,Fi)]),null===(e=c(Si,this))||void 0===e||e.setAttribute("data-l10n-id",Bi._["".concat(l(Li,this,Fi),"-label")]),!c(Ai,this))return void(null===(n=c(Ci,this))||void 0===n||n.remove())}else{var i;if(!c(Ai,this)&&!c(Ei,this))return t.classList.remove("done"),void(null===(i=c(Ci,this))||void 0===i||i.remove());t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=c(Ci,this);if(!s){h(Ci,this,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip"),s.id="alt-text-tooltip-".concat(c(Ri,this).id);const e=100,n=c(Ri,this)._uiManager._signal;n.addEventListener("abort",(()=>{clearTimeout(c(Ti,this)),h(Ti,this,null)}),{once:!0}),t.addEventListener("mouseenter",(()=>{h(Ti,this,setTimeout((()=>{h(Ti,this,null),c(Ci,this).classList.add("show"),c(Ri,this)._reportTelemetry({action:"alt_text_tooltip"})}),e))}),{signal:n}),t.addEventListener("mouseleave",(()=>{var t;c(Ti,this)&&(clearTimeout(c(Ti,this)),h(Ti,this,null)),null===(t=c(Ci,this))||void 0===t||t.classList.remove("show")}),{signal:n})}c(Ei,this)?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=c(Ai,this)),s.parentNode||t.append(s);const r=c(Ri,this).getImageForAltText();null===r||void 0===r||r.setAttribute("aria-describedby",s.id)}var Bi={_:null};(0,A.A)(Oi,"_l10n",null);var zi=new WeakMap,Vi=new WeakMap,Ui=new WeakMap,Wi=new WeakMap,Hi=new WeakMap,qi=new WeakMap,Gi=new WeakMap,Ki=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,$i=new WeakMap,Zi=new WeakMap,ts=new WeakMap,es=new WeakMap,ns=new WeakMap,is=new WeakMap,ss=new WeakMap,rs=new WeakMap,as=new WeakSet;class os{static get _resizerKeyboardManager(){const t=os.prototype._resizeWithKeyboard,e=ei.TRANSLATE_SMALL,n=ei.TRANSLATE_BIG;return Mt(this,"_resizerKeyboardManager",new hn([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],os.prototype._stopResizingWithKeyboard]]))}constructor(t){r(this,as),a(this,zi,null),a(this,Vi,null),a(this,Ui,null),a(this,Wi,!1),a(this,Hi,!1),a(this,qi,null),a(this,Gi,null),a(this,Ki,null),a(this,Yi,""),a(this,Xi,!1),a(this,Qi,null),a(this,Ji,!1),a(this,$i,!1),a(this,Zi,!1),a(this,ts,null),a(this,es,0),a(this,ns,0),a(this,is,null),(0,A.A)(this,"_editToolbar",null),(0,A.A)(this,"_initialOptions",Object.create(null)),(0,A.A)(this,"_initialData",null),(0,A.A)(this,"_isVisible",!0),(0,A.A)(this,"_uiManager",null),(0,A.A)(this,"_focusEventsAllowed",!0),a(this,ss,!1),a(this,rs,os._zIndex++),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new As({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){var n;if(null!==(n=os._l10n)&&void 0!==n||(os._l10n=t),os._l10nResizer||(os._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==os._borderLineWidth)return;const i=getComputedStyle(document.documentElement);os._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){St("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(ss,this)}set _isDraggable(t){var e;h(ss,this,t),null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(rs,this)}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):o(as,this,_s).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(Xi,this)?h(Xi,this,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=t.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[s,r]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/s,this.y=(e+i)/r,this.fixAndSetPosition()}translate(t,e){o(as,this,ls).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(Qi,this)||h(Qi,this,[this.x,this.y]),o(as,this,ls).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){c(Qi,this)||h(Qi,this,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=t/n,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:r}=this;const[a,o]=this.getBaseTranslation();s+=a,r+=o,this.div.style.left="".concat((100*s).toFixed(2),"%"),this.div.style.top="".concat((100*r).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(Qi,this)&&(c(Qi,this)[0]!==this.x||c(Qi,this)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=os,i=n/t,s=n/e;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[e,n]=this.pageDimensions;let{x:i,y:s,width:r,height:a}=this;if(r*=e,a*=n,i*=e,s*=n,this._mustFixPosition)switch(t){case 0:i=Math.max(0,Math.min(e-r,i)),s=Math.max(0,Math.min(n-a,s));break;case 90:i=Math.max(0,Math.min(e-a,i)),s=Math.min(n,Math.max(r,s));break;case 180:i=Math.min(e,Math.max(r,i)),s=Math.min(n,Math.max(a,s));break;case 270:i=Math.min(e,Math.max(a,i)),s=Math.max(0,Math.min(n-r,s))}this.x=i/=e,this.y=s/=n;const[o,l]=this.getBaseTranslation();i+=o,s+=l;const{style:c}=this.div;c.left="".concat((100*i).toFixed(2),"%"),c.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(t,e){return cs.call(os,t,e,this.parentRotation)}pageTranslationToScreen(t,e){return cs.call(os,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions;this.div.style.width="".concat((100*t/n).toFixed(2),"%"),c(Hi,this)||(this.div.style.height="".concat((100*e/i).toFixed(2),"%"))}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),s=!c(Hi,this)&&e.endsWith("%");if(i&&s)return;const[r,a]=this.parentDimensions;i||(t.width="".concat((100*parseFloat(n)/r).toFixed(2),"%")),c(Hi,this)||s||(t.height="".concat((100*parseFloat(e)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}altTextFinish(){var t;null===(t=c(Ui,this))||void 0===t||t.finish()}async addEditToolbar(){return this._editToolbar||c($i,this)||(this._editToolbar=new Pe(this),this.div.append(this._editToolbar.render()),c(Ui,this)&&await this._editToolbar.addAltText(c(Ui,this))),this._editToolbar}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(t=c(Ui,this))||void 0===t||t.destroy())}addContainer(t){var e;const n=null===(e=this._editToolbar)||void 0===e?void 0:e.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(Ui,this)||(Oi.initialize(os._l10n),h(Ui,this,new Oi(this)),c(zi,this)&&(c(Ui,this).data=c(zi,this),h(zi,this,null)),await this.addEditToolbar())}get altTextData(){var t;return null===(t=c(Ui,this))||void 0===t?void 0:t.data}set altTextData(t){c(Ui,this)&&(c(Ui,this).data=t)}get guessedAltText(){var t;return null===(t=c(Ui,this))||void 0===t?void 0:t.guessedText}async setGuessedAltText(t){var e;await(null===(e=c(Ui,this))||void 0===e?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return null===(e=c(Ui,this))||void 0===e?void 0:e.serialize(t)}hasAltText(){return!!c(Ui,this)&&!c(Ui,this).isEmpty()}hasAltTextData(){var t,e;return null!==(t=null===(e=c(Ui,this))||void 0===e?void 0:e.hasData())&&void 0!==t&&t}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(Wi,this)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),o(as,this,vs).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*e/t).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*t/e).toFixed(2),"%"));const[n,i]=this.getInitialTranslation();return this.translate(n,i),Ye(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Vt.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(h(Xi,this,!0),this._isDraggable?o(as,this,ms).call(this,t):o(as,this,gs).call(this,t))}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){c(ts,this)&&clearTimeout(c(ts,this)),h(ts,this,setTimeout((()=>{var t;h(ts,this,null),null===(t=this.parent)||void 0===t||t.moveEditorInDOM(this)}),0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/i,c=e/i,h=this.x*s,u=this.y*r,d=this.width*s,f=this.height*r;switch(n){case 0:return[h+l+a,r-u-c-f+o,h+l+d+a,r-u-c+o];case 90:return[h+c+a,r-u+l+o,h+c+f+a,r-u+l+d+o];case 180:return[h-l-d+a,r-u+c+o,h-l+a,r-u+c+f+o];case 270:return[h-c-f+a,r-u-l-d+o,h-c+a,r-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,s,r]=t,a=s-n,o=r-i;switch(this.rotation){case 0:return[n,e-r,a,o];case 90:return[n,e-i,o,a];case 180:return[s,e-i,a,o];case 270:return[s,e-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){h($i,this,!0)}disableEditMode(){h($i,this,!1)}isInEditMode(){return c($i,this)}shouldGetKeyboardEvents(){return c(Zi,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){o(as,this,vs).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(t=this._initialData)||void 0===t?void 0:t.popupRef)||""}}serialize(){St("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,h(zi,i,t.accessibilityData);const[s,r]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(t.rect,r);return i.x=a/s,i.y=o/r,i.width=l/s,i.height=c/r,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var t;if(null===(t=c(Ki,this))||void 0===t||t.abort(),h(Ki,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(ts,this)&&(clearTimeout(c(ts,this)),h(ts,this,null)),o(as,this,_s).call(this),this.removeEditToolbar(),c(is,this)){for(const t of c(is,this).values())clearTimeout(t);h(is,this,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(o(as,this,us).call(this),c(qi,this).classList.remove("hidden"),Ye(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),h(Gi,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(qi,this).children;if(!c(Vi,this)){h(Vi,this,Array.from(e));const t=o(as,this,ys).bind(this),n=o(as,this,bs).bind(this),i=this._uiManager._signal;for(const e of c(Vi,this)){const s=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t,{signal:i}),e.addEventListener("blur",n,{signal:i}),e.addEventListener("focus",o(as,this,ws).bind(this,s),{signal:i}),e.setAttribute("data-l10n-id",os._l10nResizer[s])}}const n=c(Vi,this)[0];let i=0;for(const r of e){if(r===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(c(Vi,this).length/4);if(s!==i){if(s<i)for(let e=0;e<i-s;e++)c(qi,this).append(c(qi,this).firstChild);else if(s>i)for(let e=0;e<s-i;e++)c(qi,this).firstChild.before(c(qi,this).lastChild);let t=0;for(const n of e){const e=c(Vi,this)[t++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",os._l10nResizer[e])}}o(as,this,xs).call(this,0),h(Zi,this,!0),c(qi,this).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(Zi,this)&&o(as,this,ps).call(this,c(Yi,this),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){o(as,this,_s).call(this),this.div.focus()}select(){var t,e,n;this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),this._editToolbar?(null===(e=this._editToolbar)||void 0===e||e.show(),null===(n=c(Ui,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then((()=>{var t,e;null!==(t=this.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=this._editToolbar)||void 0===e||e.show())}))}unselect(){var t,e,n,i,s;null===(t=c(qi,this))||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(s=c(Ui,this))||void 0===s||s.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(Ji,this)}set isEditing(t){h(Ji,this,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){h(Hi,this,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){c(is,this)||h(is,this,new Map);const{action:e}=t;let n=c(is,this).get(e);return n&&clearTimeout(n),n=setTimeout((()=>{this._reportTelemetry(t),c(is,this).delete(e),0===c(is,this).size&&h(is,this,null)}),os._telemetryTimeout),void c(is,this).set(e,n)}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),h(Wi,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),h(Wi,this,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===(null===e||void 0===e?void 0:e.nodeName)&&e.classList.contains("annotationContent")&&e.remove()}}function ls(t,e,n){let[i,s]=t;[e,n]=this.screenToPageTranslation(e,n),this.x+=e/i,this.y+=n/s,this.fixAndSetPosition()}function cs(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}function hs(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}function us(){if(c(qi,this))return;h(qi,this,document.createElement("div")),c(qi,this).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const t=document.createElement("div");c(qi,this).append(t),t.classList.add("resizer",n),t.setAttribute("data-resizer-name",n),t.addEventListener("pointerdown",o(as,this,ds).bind(this,n),{signal:e}),t.addEventListener("contextmenu",me,{signal:e}),t.tabIndex=-1}this.div.prepend(c(qi,this))}function ds(t,e){var n;e.preventDefault();const{isMac:i}=Vt.platform;if(0!==e.button||e.ctrlKey&&i)return;null===(n=c(Ui,this))||void 0===n||n.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",o(as,this,ps).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",me,{signal:a});const l=this.x,h=this.y,u=this.width,d=this.height,f=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const g=()=>{var t;r.abort(),this.parent.togglePointerEvents(!0),null===(t=c(Ui,this))||void 0===t||t.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=f,this.div.style.cursor=p,o(as,this,fs).call(this,l,h,u,d)};window.addEventListener("pointerup",g,{signal:a}),window.addEventListener("blur",g,{signal:a})}function fs(t,e,n,i){const s=this.x,r=this.y,a=this.width,o=this.height;s===t&&r===e&&a===n&&o===i||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=s,this.y=r;const[t,e]=this.parentDimensions;this.setDims(t*a,e*o),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=t,this.y=e;const[s,r]=this.parentDimensions;this.setDims(s*n,r*i),this.fixAndSetPosition()},mustExec:!0})}function ps(t,e){const[n,i]=this.parentDimensions,s=this.x,r=this.y,a=this.width,l=this.height,c=p.MIN_SIZE/n,h=p.MIN_SIZE/i,u=t=>Math.round(1e4*t)/1e4,d=o(as,this,hs).call(this,this.rotation),f=(t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e],g=o(as,this,hs).call(this,360-this.rotation);let m,v,y=!1,b=!1;switch(t){case"topLeft":y=!0,m=(t,e)=>[0,0],v=(t,e)=>[t,e];break;case"topMiddle":m=(t,e)=>[t/2,0],v=(t,e)=>[t/2,e];break;case"topRight":y=!0,m=(t,e)=>[t,0],v=(t,e)=>[0,e];break;case"middleRight":b=!0,m=(t,e)=>[t,e/2],v=(t,e)=>[0,e/2];break;case"bottomRight":y=!0,m=(t,e)=>[t,e],v=(t,e)=>[0,0];break;case"bottomMiddle":m=(t,e)=>[t/2,e],v=(t,e)=>[t/2,0];break;case"bottomLeft":y=!0,m=(t,e)=>[0,e],v=(t,e)=>[t,0];break;case"middleLeft":b=!0,m=(t,e)=>[0,e/2],v=(t,e)=>[t,e/2]}const w=m(a,l),x=v(a,l);let _=f(...x);const A=u(s+_[0]),E=u(r+_[1]);let k=1,S=1,[C,T]=this.screenToPageTranslation(e.movementX,e.movementY);var M,I;if([C,T]=(M=C/n,I=T/i,[g[0]*M+g[2]*I,g[1]*M+g[3]*I]),y){const t=Math.hypot(a,l);k=S=Math.max(Math.min(Math.hypot(x[0]-w[0]-C,x[1]-w[1]-T)/t,1/a,1/l),c/a,h/l)}else b?k=Math.max(c,Math.min(1,Math.abs(x[0]-w[0]-C)))/a:S=Math.max(h,Math.min(1,Math.abs(x[1]-w[1]-T)))/l;const R=u(a*k),P=u(l*S);_=f(...v(R,P));const D=A-_[0],N=E-_[1];this.width=R,this.height=P,this.x=D,this.y=N,this.setDims(n*R,i*P),this.fixAndSetPosition()}function gs(t){const{isMac:e}=Vt.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}function ms(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const n=new AbortController,i=this._uiManager.combinedSignal(n);if(e){this.div.classList.add("moving"),h(es,this,t.clientX),h(ns,this,t.clientY);const e=t=>{const{clientX:e,clientY:n}=t,[i,s]=this.screenToPageTranslation(e-c(es,this),n-c(ns,this));h(es,this,e),h(ns,this,n),this._uiManager.dragSelectedEditors(i,s)};window.addEventListener("pointermove",e,{passive:!0,capture:!0,signal:i})}const s=()=>{n.abort(),e&&this.div.classList.remove("moving"),h(Xi,this,!1),this._uiManager.endDragSession()||o(as,this,gs).call(this,t)};window.addEventListener("pointerup",s,{signal:i}),window.addEventListener("blur",s,{signal:i})}function vs(){if(c(Ki,this)||!this.div)return;h(Ki,this,new AbortController);const t=this._uiManager.combinedSignal(c(Ki,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}function ys(t){p._resizerKeyboardManager.exec(this,t)}function bs(t){var e;c(Zi,this)&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==c(qi,this)&&o(as,this,_s).call(this)}function ws(t){h(Yi,this,c(Zi,this)?t:"")}function xs(t){if(c(Vi,this))for(const e of c(Vi,this))e.tabIndex=t}function _s(){if(h(Zi,this,!1),o(as,this,xs).call(this,-1),c(Gi,this)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=c(Gi,this);o(as,this,fs).call(this,t,e,n,i),h(Gi,this,null)}}p=os,(0,A.A)(os,"_l10n",null),(0,A.A)(os,"_l10nResizer",null),(0,A.A)(os,"_borderLineWidth",-1),(0,A.A)(os,"_colorManager",new dn),(0,A.A)(os,"_zIndex",1),(0,A.A)(os,"_telemetryTimeout",1e3);class As extends os{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Es=3285377520,ks=4294901760,Ss=65535;class Cs{constructor(t){this.h1=t?4294967295&t:Es,this.h2=t?4294967295&t:Es}update(t){let e,n;if("string"===typeof t){e=new Uint8Array(2*t.length),n=0;for(let i=0,s=t.length;i<s;i++){const s=t.charCodeAt(i);s<=255?e[n++]=s:(e[n++]=s>>>8,e[n++]=255&s)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),n=e.byteLength}const i=n>>2,s=n-4*i,r=new Uint32Array(e.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const h=3432918353,u=461845907,d=11601,f=13715;for(let p=0;p<i;p++)1&p?(a=r[p],a=a*h&ks|a*d&Ss,a=a<<15|a>>>17,a=a*u&ks|a*f&Ss,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[p],o=o*h&ks|o*d&Ss,o=o<<15|o>>>17,o=o*u&ks|o*f&Ss,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,s){case 3:a^=e[4*i+2]<<16;case 2:a^=e[4*i+1]<<8;case 1:a^=e[4*i],a=a*h&ks|a*d&Ss,a=a<<15|a>>>17,a=a*u&ks|a*f&Ss,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&ks|36045*t&Ss,e=4283543511*e&ks|(2950163797*(e<<16|t>>>16)&ks)>>>16,t^=e>>>1,t=444984403*t&ks|60499*t&Ss,e=3301882366*e&ks|(3120437893*(e<<16|t>>>16)&ks)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ts=Object.freeze({map:null,hash:"",transfer:void 0});var Ms=new WeakMap,Is=new WeakMap,Rs=new WeakMap,Ps=new WeakSet;class Ds{constructor(){r(this,Ps),a(this,Ms,!1),a(this,Is,null),a(this,Rs,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=c(Rs,this).get(t);return void 0===n?e:Object.assign(e,n)}getRawValue(t){return c(Rs,this).get(t)}remove(t){if(c(Rs,this).delete(t),0===c(Rs,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const t of c(Rs,this).values())if(t instanceof os)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=c(Rs,this).get(t);let i=!1;if(void 0!==n)for(const[s,r]of Object.entries(e))n[s]!==r&&(i=!0,n[s]=r);else i=!0,c(Rs,this).set(t,e);i&&o(Ps,this,Ns).call(this),e instanceof os&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(Rs,this).has(t)}getAll(){return c(Rs,this).size>0?zt(c(Rs,this)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return c(Rs,this).size}resetModified(){c(Ms,this)&&(h(Ms,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Os(this)}get serializable(){if(0===c(Rs,this).size)return Ts;const t=new Map,e=new Cs,n=[],i=Object.create(null);let s=!1;for(const[r,a]of c(Rs,this)){const n=a instanceof os?a.serialize(!1,i):a;n&&(t.set(r,n),e.update("".concat(r,":").concat(JSON.stringify(n))),s||(s=!!n.bitmap))}if(s)for(const r of t.values())r.bitmap&&n.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Ts}get editorStats(){let t=null;const e=new Map;for(const s of c(Rs,this).values()){var n;if(!(s instanceof os))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:a}=r;e.has(a)||e.set(a,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=(n=t)[a]||(n[a]=new Map);for(const[t,e]of Object.entries(r)){var i;if("type"===t)continue;let n=o.get(t);n||(n=new Map,o.set(t,n));const s=null!==(i=n.get(e))&&void 0!==i?i:0;n.set(e,s+1)}}for(const[s,r]of e)t[s]=r.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){h(Is,this,null)}get modifiedIds(){if(c(Is,this))return c(Is,this);const t=[];for(const e of c(Rs,this).values())e instanceof os&&e.annotationElementId&&e.serialize()&&t.push(e.annotationElementId);return h(Is,this,{ids:new Set(t),hash:t.join(",")})}}function Ns(){c(Ms,this)||(h(Ms,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Ls=new WeakMap;class Os extends Ds{constructor(t){super(),a(this,Ls,void 0);const{map:e,hash:n,transfer:i}=t.serializable,s=structuredClone(e,i?{transfer:i}:null);h(Ls,this,{map:s,hash:n,transfer:i})}get print(){St("Should not call PrintAnnotationStorage.print")}get serializable(){return c(Ls,this)}get modifiedIds(){return Mt(this,"modifiedIds",{ids:new Set,hash:""})}}var Fs=new WeakMap;class js{constructor(t){let{ownerDocument:e=globalThis.document,styleElement:n=null}=t;a(this,Fs,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(Fs,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){let{systemFontInfo:e,_inspectFont:n}=t;if(e&&!c(Fs,this).has(e.loadedName))if(Ct(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:i,style:s}=e,r=new FontFace(t,i,s);this.addNativeFontFace(r);try{await r.load(),c(Fs,this).add(t),null===n||void 0===n||n(e)}catch{kt("Cannot load system font: ".concat(e.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(r)}}else St("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw kt("Failed to load font '".concat(e.family,"': '").concat(n,"'.")),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const n=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,n)}))}}get isFontLoadingAPISupported(){var t;return Mt(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}get isSyncFontLoadingSupported(){var t;let e=!1;return(S||"undefined"!==typeof navigator&&"string"===typeof(null===(t=navigator)||void 0===t?void 0:t.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Mt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(t){const{loadingRequests:e}=this,n={done:!1,complete:function(){for(Ct(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}get _loadTestFont(){return Mt(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let h=this._loadTestFont;h=i(h,976,c.length,c);const u=1482184792;let d=n(h,16);for(s=0,r=c.length-3;s<r;s+=4)d=d-u+n(c,s)|0;var f;s<c.length&&(d=d-u+n(c+"XXX",s)|0),h=i(h,16,4,(f=d,String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,255&f)));const p="url(data:font/opentype;base64,".concat(btoa(h),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[t.loadedName,c]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=v,m.append(t)}this._document.body.append(m),function t(e,n){if(++l>30)return kt("Load test font never loaded."),void n();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(c,(()=>{m.remove(),e.complete()}))}}class Bs{constructor(t,e){let{disableFontFace:n=!1,inspectFont:i=null}=e;this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=!0===n,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e="url(data:".concat(this.mimetype,";base64,").concat((n=this.data,Uint8Array.prototype.toBase64?n.toBase64():btoa(jt(n))),");");var n;let i;if(this.cssFontInfo){let t="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(t+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(t,"src:").concat(e,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(e,"}");return null===(t=this._inspectFont)||void 0===t||t.call(this,this,e),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(s){kt('getPathGenerator - ignoring character: "'.concat(s,'".'))}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[e]=function(t,e){};const i=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case Qt:{const[t,e,s,a,o,l]=n.slice(r,r+6);i.push((n=>n.bezierCurveTo(t,e,s,a,o,l))),r+=6}break;case Jt:{const[t,e]=n.slice(r,r+2);i.push((n=>n.moveTo(t,e))),r+=2}break;case $t:{const[t,e]=n.slice(r,r+2);i.push((n=>n.lineTo(t,e))),r+=2}break;case Zt:{const[t,e,s,a]=n.slice(r,r+4);i.push((n=>n.quadraticCurveTo(t,e,s,a))),r+=4}break;case te:i.push((t=>t.restore()));break;case ee:i.push((t=>t.save()));break;case ne:Ct(2===i.length,"Scale command is only valid at the third position.");break;case ie:{const[t,e,s,a,o,l]=n.slice(r,r+6);i.push((n=>n.transform(t,e,s,a,o,l))),r+=6}break;case se:{const[t,e]=n.slice(r,r+2);i.push((n=>n.translate(t,e))),r+=2}}return this.compiledGlyphs[e]=function(t,e){i[0](t),i[1](t),t.scale(e,-e);for(let n=2,s=i.length;n<s;n++)i[n](t)}}}var zs=new WeakMap;class Vs{constructor(t){let{enableHWA:e=!1}=t;a(this,zs,!1),h(zs,this,e)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(zs,this)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){St("Abstract method `_createCanvas` called.")}}class Us{constructor(t){let{baseUrl:e=null,isCompressed:n=!0}=t;this.baseUrl=e,this.isCompressed=n}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then((t=>({cMapData:t,isCompressed:this.isCompressed}))).catch((t=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}async _fetch(t){St("Abstract method `_fetch` called.")}}class Ws extends Us{async _fetch(t){const e=await oe(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Bt(e)}}class Hs{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,s){return"none"}destroy(){}}var qs=new WeakMap,Gs=new WeakMap,Ks=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Qs=new WeakMap,Js=new WeakMap,$s=new WeakSet;function Zs(t){return c(Gs,t)||h(Gs,t,new Map)}function tr(t){return c(Qs,t)||h(Qs,t,new Map)}function er(t){if(!c(Ks,t)){const e=c(Xs,t).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=c(Xs,t).createElementNS(re,"svg");i.setAttribute("width",0),i.setAttribute("height",0),h(Ks,t,c(Xs,t).createElementNS(re,"defs")),e.append(i),i.append(c(Ks,t)),c(Xs,t).body.append(e)}return c(Ks,t)}function nr(t){if(1===t.length){const e=t[0],n=new Array(256);for(let t=0;t<256;t++)n[t]=e[t]/255;const i=n.join(",");return[i,i,i]}const[e,n,i]=t,s=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)s[o]=e[o]/255,r[o]=n[o]/255,a[o]=i[o]/255;return[s.join(","),r.join(","),a.join(",")]}function ir(t){if(void 0===c(qs,this)){h(qs,this,"");const t=c(Xs,this).URL;t!==c(Xs,this).baseURI&&(he(t)?kt('#createUrl: ignore "data:"-URL for performance reasons.'):h(qs,this,t.split("#",1)[0]))}return"url(".concat(c(qs,this),"#").concat(t,")")}function sr(t){const e=c(Xs,this).createElementNS(re,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}function rr(t){const e=c(Xs,this).createElementNS(re,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}function ar(t){const e=c(Xs,this).createElementNS(re,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),l($s,this,er).append(e),e}function or(t,e,n){const i=c(Xs,this).createElementNS(re,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}function lr(t,e,n,i){const s=c(Xs,this).createElementNS(re,"feComponentTransfer");i.append(s),o($s,this,or).call(this,s,"feFuncR",t),o($s,this,or).call(this,s,"feFuncG",e),o($s,this,or).call(this,s,"feFuncB",n)}function cr(t,e){const n=c(Xs,this).createElementNS(re,"feComponentTransfer");e.append(n),o($s,this,or).call(this,n,"feFuncA",t)}function hr(t){return l($s,this,er).style.color=t,xe(getComputedStyle(l($s,this,er)).getPropertyValue("color"))}class ur{constructor(t){let{baseUrl:e=null}=t;this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(e);return this._fetch(n).catch((t=>{throw new Error("Unable to load font data at: ".concat(n))}))}async _fetch(t){St("Abstract method `_fetch` called.")}}class dr extends ur{async _fetch(t){const e=await oe(t,"arraybuffer");return new Uint8Array(e)}}if(S){var fr=Promise.withResolvers(),pr=null;(async()=>{const t=await import("fs"),e=await import("http"),n=await import("https"),i=await import("url");return new Map(Object.entries({fs:t,http:e,https:n,url:i,canvas:undefined,path2d:undefined}))})().then((t=>{pr=t,fr.resolve()}),(t=>{kt("loadPackages: ".concat(t)),pr=new Map,fr.resolve()}))}class gr{static get promise(){return fr.promise}static get(t){var e;return null===(e=pr)||void 0===e?void 0:e.get(t)}}async function mr(t){const e=gr.get("fs"),n=await e.promises.readFile(t);return new Uint8Array(n)}const vr="Fill",yr="Stroke",br="Shading";function wr(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],n,i),t.clip(s)}class xr{getPattern(){St("Abstract method `getPattern` called.")}}class _r extends xr{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let s;if(i===yr||i===vr){const r=e.current.getClippedPathBoundingBox(i,_e(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-r[0],-r[1]),n=Wt.transform(n,[1,0,0,1,r[0],r[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),wr(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=t.createPattern(l.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else wr(t,this._bbox),s=this._createGradient(t);return s}}function Ar(t,e,n,i,s,r,a,o){const l=e.coords,c=e.colors,h=t.data,u=4*t.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=r,r=a,a=d),l[i+1]>l[s+1]&&(d=i,i=s,s=d,d=a,a=o,o=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=r,r=a,a=d);const f=(l[n]+e.offsetX)*e.scaleX,p=(l[n+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,m=(l[i+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,y=(l[s+1]+e.offsetY)*e.scaleY;if(p>=y)return;const b=c[r],w=c[r+1],x=c[r+2],_=c[a],A=c[a+1],E=c[a+2],k=c[o],S=c[o+1],C=c[o+2],T=Math.round(p),M=Math.round(y);let I,R,P,D,N,L,O,F;for(let j=T;j<=M;j++){if(j<m){const t=j<p?0:(p-j)/(p-m);I=f-(f-g)*t,R=b-(b-_)*t,P=w-(w-A)*t,D=x-(x-E)*t}else{let t;t=j>y?1:m===y?0:(m-j)/(m-y),I=g-(g-v)*t,R=_-(_-k)*t,P=A-(A-S)*t,D=E-(E-C)*t}let t;t=j<p?0:j>y?1:(p-j)/(p-y),N=f-(f-v)*t,L=b-(b-k)*t,O=w-(w-S)*t,F=x-(x-C)*t;const e=Math.round(Math.min(I,N)),n=Math.round(Math.max(I,N));let i=u*j+4*e;for(let s=e;s<=n;s++)t=(I-s)/(I-N),t<0?t=0:t>1&&(t=1),h[i++]=R-(R-L)*t|0,h[i++]=P-(P-O)*t|0,h[i++]=D-(D-F)*t|0,h[i++]=255}}function Er(t,e,n){const i=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<c;r++,e++)Ar(t,n,i[e],i[e+1],i[e+o],s[e],s[e+1],s[e+o]),Ar(t,n,i[e+o+1],i[e+1],i[e+o],s[e+o+1],s[e+1],s[e+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)Ar(t,n,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class kr extends xr{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const i=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=r/o,h=a/l,u={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-s,scaleX:1/c,scaleY:1/h},d=o+4,f=l+4,p=n.getCanvas("mesh",d,f),g=p.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let n=0,i=t.length;n<i;n+=4)t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=255}for(const v of this._figures)Er(m,v,u);g.putImageData(m,2,2);return{canvas:p.canvas,offsetX:i-2*c,offsetY:s-2*h,scaleX:c,scaleY:h}}getPattern(t,e,n,i){let s;if(wr(t,this._bbox),i===br)s=Wt.singularValueDecompose2dScale(_e(t));else if(s=Wt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=Wt.singularValueDecompose2dScale(this.matrix);s=[s[0]*t[0],s[1]*t[1]]}const r=this._createMeshCanvas(s,i===br?null:this._background,e.cachedCanvases);return i!==br&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class Sr extends xr{getPattern(){return"hotpink"}}const Cr=1,Tr=2;class Mr{constructor(t,e,n,i,s){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:s,color:r,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),Et("TilingType: "+s);const c=e[0],h=e[1],u=e[2],d=e[3],f=u-c,p=d-h,g=Wt.singularValueDecompose2dScale(this.matrix),m=Wt.singularValueDecompose2dScale(this.baseTransform),v=g[0]*m[0],y=g[1]*m[1];let b=f,w=p,x=!1,_=!1;const A=Math.ceil(o*v),E=Math.ceil(l*y);A>=Math.ceil(f*v)?b=o:x=!0,E>=Math.ceil(p*y)?w=l:_=!0;const k=this.getSizeAndScale(b,this.ctx.canvas.width,v),S=this.getSizeAndScale(w,this.ctx.canvas.height,y),C=t.cachedCanvases.getCanvas("pattern",k.size,S.size),T=C.context,M=a.createCanvasGraphics(T);if(M.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(M,i,r),T.translate(-k.scale*c,-S.scale*h),M.transform(k.scale,0,0,S.scale,0,0),T.save(),this.clipBbox(M,c,h,u,d),M.baseTransform=_e(M.ctx),M.executeOperatorList(n),M.endDrawing(),T.restore(),x||_){const e=C.canvas;x&&(b=o),_&&(w=l);const n=this.getSizeAndScale(b,this.ctx.canvas.width,v),i=this.getSizeAndScale(w,this.ctx.canvas.height,y),s=n.size,r=i.size,a=t.cachedCanvases.getCanvas("pattern-workaround",s,r),u=a.context,d=x?Math.floor(f/o):0,g=_?Math.floor(p/l):0;for(let t=0;t<=d;t++)for(let n=0;n<=g;n++)u.drawImage(e,s*t,r*n,s,r,0,0,s,r);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:c,offsetY:h}}return{canvas:C.canvas,scaleX:k.scale,scaleY:S.scale,offsetX:c,offsetY:h}}getSizeAndScale(t,e,n){const i=Math.max(Mr.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*n);return s>=i?s=i:n=s/t,{scale:n,size:s}}clipBbox(t,e,n,i,s){const r=i-e,a=s-n;t.ctx.rect(e,n,r,a),t.current.updateRectMinMax(_e(t.ctx),[e,n,i,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,s=t.current;switch(e){case Cr:const t=this.ctx;i.fillStyle=t.fillStyle,i.strokeStyle=t.strokeStyle,s.fillColor=t.fillStyle,s.strokeColor=t.strokeStyle;break;case Tr:const r=Wt.makeHexColor(n[0],n[1],n[2]);i.fillStyle=r,i.strokeStyle=r,s.fillColor=r,s.strokeColor=r;break;default:throw new Ot("Unsupported paint type: ".concat(e))}}getPattern(t,e,n,i){let s=n;i!==br&&(s=Wt.transform(s,e.baseTransform),this.matrix&&(s=Wt.transform(s,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=t.createPattern(r.canvas,"repeat");return o.setTransform(a),o}}function Ir(t){let{src:e,srcPos:n=0,dest:i,width:s,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=t;const l=Vt.isLittleEndian?4278190080:255,[c,h]=o?[a,l]:[l,a],u=s>>3,d=7&s,f=e.length;i=new Uint32Array(i.buffer);let p=0;for(let g=0;g<r;g++){for(const s=n+u;n<s;n++){const t=n<f?e[n]:255;i[p++]=128&t?h:c,i[p++]=64&t?h:c,i[p++]=32&t?h:c,i[p++]=16&t?h:c,i[p++]=8&t?h:c,i[p++]=4&t?h:c,i[p++]=2&t?h:c,i[p++]=1&t?h:c}if(0===d)continue;const t=n<f?e[n++]:255;for(let e=0;e<d;e++)i[p++]=t&1<<7-e?h:c}return{srcPos:n,destPos:p}}(0,A.A)(Mr,"MAX_PATTERN_SIZE",3e3);const Rr=16;class Pr{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Dr(t,e,n,i,s,r,a,o,l,c){const[h,u,d,f,p,g]=_e(t);if(0===u&&0===d){const m=a*h+p,v=Math.round(m),y=o*f+g,b=Math.round(y),w=(a+l)*h+p,x=Math.abs(Math.round(w)-v)||1,_=(o+c)*f+g,A=Math.abs(Math.round(_)-b)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(f),v,b),t.drawImage(e,n,i,s,r,0,0,x,A),t.setTransform(h,u,d,f,p,g),[x,A]}if(0===h&&0===f){const m=o*d+p,v=Math.round(m),y=a*u+g,b=Math.round(y),w=(o+c)*d+p,x=Math.abs(Math.round(w)-v)||1,_=(a+l)*u+g,A=Math.abs(Math.round(_)-b)||1;return t.setTransform(0,Math.sign(u),Math.sign(d),0,v,b),t.drawImage(e,n,i,s,r,0,0,A,x),t.setTransform(h,u,d,f,p,g),[A,x]}t.drawImage(e,n,i,s,r,a,o,l,c);return[Math.hypot(h,u)*l,Math.hypot(d,f)*c]}class Nr{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=C,this.textMatrixScale=1,this.fontMatrix=T,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=U,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Wt.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Wt.applyTransform(e,t),i=Wt.applyTransform(e.slice(2),t),s=Wt.applyTransform([e[0],e[3]],t),r=Wt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],s[0],r[0]),this.minY=Math.min(this.minY,n[1],i[1],s[1],r[1]),this.maxX=Math.max(this.maxX,n[0],i[0],s[0],r[0]),this.maxY=Math.max(this.maxY,n[1],i[1],s[1],r[1])}updateScalingPathMinMax(t,e){Wt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,s,r,a,o,l,c){const h=Wt.bezierBoundingBox(e,n,i,s,r,a,o,l,c);c||this.updateRectMinMax(t,h)}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===yr){e||St("Stroke bounding box must include transform.");const t=Wt.singularValueDecompose2dScale(e),i=t[0]*this.lineWidth/2,s=t[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const t=Wt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Wt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Lr(t,e){if("undefined"!==typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,i=e.width,s=n%Rr,r=(n-s)/Rr,a=0===s?r:r+1,o=t.createImageData(i,Rr);let l,c=0;const h=e.data,u=o.data;let d,f,p,g;if(e.kind===Y.GRAYSCALE_1BPP){const e=h.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,y=Vt.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<r?Rr:s,l=0,f=0;f<p;f++){const t=e-c;let s=0;const r=t>m?i:8*t-7,a=-8&r;let o=0,u=0;for(;s<a;s+=8)u=h[c++],n[l++]=128&u?v:y,n[l++]=64&u?v:y,n[l++]=32&u?v:y,n[l++]=16&u?v:y,n[l++]=8&u?v:y,n[l++]=4&u?v:y,n[l++]=2&u?v:y,n[l++]=1&u?v:y;for(;s<r;s++)0===o&&(u=h[c++],o=128),n[l++]=u&o?v:y,o>>=1}for(;l<g;)n[l++]=0;t.putImageData(o,0,d*Rr)}}else if(e.kind===Y.RGBA_32BPP){for(f=0,g=i*Rr*4,d=0;d<r;d++)u.set(h.subarray(c,c+g)),c+=g,t.putImageData(o,0,f),f+=Rr;d<a&&(g=i*s*4,u.set(h.subarray(c,c+g)),t.putImageData(o,0,f))}else{if(e.kind!==Y.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(p=Rr,g=i*p,d=0;d<a;d++){for(d>=r&&(p=s,g=i*p),l=0,f=g;f--;)u[l++]=h[c++],u[l++]=h[c++],u[l++]=h[c++],u[l++]=255;t.putImageData(o,0,d*Rr)}}}function Or(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const n=e.height,i=e.width,s=n%Rr,r=(n-s)/Rr,a=0===s?r:r+1,o=t.createImageData(i,Rr);let l=0;const c=e.data,h=o.data;for(let u=0;u<a;u++){const e=u<r?Rr:s;({srcPos:l}=Ir({src:c,srcPos:l,dest:h,width:i,height:e,nonBlackColor:0})),t.putImageData(o,0,u*Rr)}}function Fr(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function jr(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!S){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function Br(t,e){if(e)return!0;const n=Wt.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*ae.PDF_TO_CSS_UNITS);return n[0]<=i&&n[1]<=i}const zr=["butt","round","square"],Vr=["miter","round","bevel"],Ur={},Wr={};var Hr=new WeakSet;class qr{constructor(t,e,n,i,s,a,o,l){let{optionalContentConfig:c,markedContentStack:h=null}=a;r(this,Hr),this.ctx=t,this.current=new Nr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new Pr(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing(t){let{transform:e,viewport:n,transparency:i=!1,background:s=null}=t;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const t=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(..._e(this.compositeCtx))}this.ctx.save(),jr(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=_e(this.ctx)}executeOperatorList(t,e,n,i){const s=t.argsArray,r=t.fnArray;let a=e||0;const o=s.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,c=l?Date.now()+15:0;let h=0;const u=this.commonObjs,d=this.objs;let f;for(;;){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(f=r[a],f!==bt.dependency)this[f].apply(this,s[a]);else for(const t of s[a]){const e=t.startsWith("g_")?u:d;if(!e.has(t))return e.get(t,n),a}if(a++,a===o)return a;if(l&&++h>10){if(Date.now()>c)return n(),a;h=0}}}endDrawing(){o(Hr,this,Gr).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),o(Hr,this,Kr).call(this)}_scaleImage(t,e){var n,i;const s=null!==(n=t.width)&&void 0!==n?n:t.displayWidth,r=null!==(i=t.height)&&void 0!==i?i:t.displayHeight;let a,o,l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=s,u=r,d="prescale1";for(;l>2&&h>1||c>2&&u>1;){let e=h,n=u;l>2&&h>1&&(e=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/e),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),a=this.cachedCanvases.getCanvas(d,e,n),o=a.context,o.clearRect(0,0,e,n),o.drawImage(t,0,0,h,u,0,0,e,n),t=a.canvas,h=e,u=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:u}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,s=this.current.fillColor,r=this.current.patternFill,a=_e(e);let o,l,c,h;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const n=o.get(l);if(n&&!r){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}c=n}c||(h=this.cachedCanvases.getCanvas("maskCanvas",n,i),Or(h.context,t));let u=Wt.transform(a,[1/n,0,0,-1/i,0,0]);u=Wt.transform(u,[1,0,0,1,0,-i]);const[d,f,p,g]=Wt.getAxialAlignedBoundingBox([0,0,n,i],u),m=Math.round(p-d)||1,v=Math.round(g-f)||1,y=this.cachedCanvases.getCanvas("fillCanvas",m,v),b=y.context,w=d,x=f;b.translate(-w,-x),b.transform(...u),c||(c=this._scaleImage(h.canvas,Ae(b)),c=c.img,o&&r&&o.set(l,c)),b.imageSmoothingEnabled=Br(_e(b),t.interpolate),Dr(b,c,0,0,c.width,c.height,0,0,n,i),b.globalCompositeOperation="source-in";const _=Wt.transform(Ae(b),[1,0,0,1,-w,-x]);return b.fillStyle=r?s.getPattern(e,this,_,vr):s,b.fillRect(0,0,n,i),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,y.canvas)),{canvas:y.canvas,offsetX:Math.round(w),offsetY:Math.round(x)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=zr[t]}setLineJoin(t){this.ctx.lineJoin=Vr[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(..._e(this.suspendedCtx)),Fr(this.suspendedCtx,s),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,s,r,a){e.transform(t,n,i,s,r,a),this.__originalTransform(t,n,i,s,r,a)},t.setTransform=function(t,n,i,s,r,a){e.setTransform(t,n,i,s,r,a),this.__originalSetTransform(t,n,i,s,r,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,s,r,a){e.bezierCurveTo(t,n,i,s,r,a),this.__originalBezierCurveTo(t,n,i,s,r,a)},t.rect=function(t,n,i,s){e.rect(t,n,i,s),this.__originalRect(t,n,i,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const s=i[0],r=i[1],a=i[2]-s,o=i[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(e.context,n,a,o,e.subtype,e.backdrop,e.transferMap,s,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,s,r,a,o,l,c,h){let u=t.canvas,d=o-c,f=l-h;if(r){const e=Wt.makeHexColor(...r);if(d<0||f<0||d+n>u.width||f+i>u.height){const t=this.cachedCanvases.getCanvas("maskExtension",n,i),s=t.context;s.drawImage(u,-d,-f),s.globalCompositeOperation="destination-atop",s.fillStyle=e,s.fillRect(0,0,n,i),s.globalCompositeOperation="source-over",u=t.canvas,d=f=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const s=new Path2D;s.rect(d,f,n,i),t.clip(s),t.globalCompositeOperation="destination-atop",t.fillStyle=e,t.fillRect(d,f,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(e.filter=this.filterFactory.addLuminosityFilter(a));const p=new Path2D;p.rect(o,l,n,i),e.clip(p),e.globalCompositeOperation="destination-in",e.drawImage(u,d,f,n,i,o,l,n,i),e.restore()}save(){this.inSMaskMode?(Fr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Fr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,s,r){this.ctx.transform(t,e,n,i,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,s=this.current;let r,a,o=s.x,l=s.y;const c=_e(i),h=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],u=h?n.slice(0):null;for(let d=0,f=0,p=t.length;d<p;d++)switch(0|t[d]){case bt.rectangle:o=e[f++],l=e[f++];const t=e[f++],n=e[f++],d=o+t,p=l+n;i.moveTo(o,l),0===t||0===n?i.lineTo(d,p):(i.lineTo(d,l),i.lineTo(d,p),i.lineTo(o,p)),h||s.updateRectMinMax(c,[o,l,d,p]),i.closePath();break;case bt.moveTo:o=e[f++],l=e[f++],i.moveTo(o,l),h||s.updatePathMinMax(c,o,l);break;case bt.lineTo:o=e[f++],l=e[f++],i.lineTo(o,l),h||s.updatePathMinMax(c,o,l);break;case bt.curveTo:r=o,a=l,o=e[f+4],l=e[f+5],i.bezierCurveTo(e[f],e[f+1],e[f+2],e[f+3],o,l),s.updateCurvePathMinMax(c,r,a,e[f],e[f+1],e[f+2],e[f+3],o,l,u),f+=6;break;case bt.curveTo2:r=o,a=l,i.bezierCurveTo(o,l,e[f],e[f+1],e[f+2],e[f+3]),s.updateCurvePathMinMax(c,r,a,o,l,e[f],e[f+1],e[f+2],e[f+3],u),o=e[f+2],l=e[f+3],f+=4;break;case bt.curveTo3:r=o,a=l,o=e[f+2],l=e[f+3],i.bezierCurveTo(e[f],e[f+1],o,l,o,l),s.updateCurvePathMinMax(c,r,a,e[f],e[f+1],o,l,o,l,u),f+=4;break;case bt.closePath:i.closePath()}h&&s.updateScalingPathMinMax(c,u),s.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&null!==n&&void 0!==n&&n.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,Ae(e),yr),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,n=this.current.fillColor;let i=!1;this.current.patternFill&&(e.save(),e.fillStyle=n.getPattern(e,this,Ae(e),vr),i=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),i&&e.restore(),t&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ur}eoClip(){this.pendingClip=Wr}beginText(){this.current.textMatrix=C,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var n;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error("Can't find font for ".concat(t));if(s.fontMatrix=i.fontMatrix||T,0!==s.fontMatrix[0]&&0!==s.fontMatrix[3]||kt("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(r,'", ').concat(i.fallbackName);let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=e;e<16?c=16:e>100&&(c=100),this.current.fontSizeScale=e/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(a)}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,s,r){this.current.textMatrix=[t,e,n,i,s,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i){const s=this.ctx,r=this.current,a=r.font,o=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,c=o&G,h=!!(o&K),u=r.patternFill&&!a.missingFile;let d;if((a.disableFontFace||h||u)&&(d=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||u?(s.save(),s.translate(e,n),s.beginPath(),d(s,l),i&&s.setTransform(...i),c!==U&&c!==H||s.fill(),c!==W&&c!==H||s.stroke(),s.restore()):(c!==U&&c!==H||s.fillText(t,e,n),c!==W&&c!==H||s.strokeText(t,e,n)),h){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:_e(s),x:e,y:n,fontSize:l,addToPath:d})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Mt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(0===i)return;const s=this.ctx,r=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,c=e.textHScale*l,h=t.length,u=n.vertical,d=u?1:-1,f=n.defaultVMetrics,p=i*e.fontMatrix[0],g=e.textRenderingMode===U&&!n.disableFontFace&&!e.patternFill;let m;if(s.save(),s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),l>0?s.scale(c,-1):s.scale(c,1),e.patternFill){s.save();const t=e.fillColor.getPattern(s,this,Ae(s),vr);m=_e(s),s.restore(),s.fillStyle=t}let v=e.lineWidth;const y=e.textMatrixScale;if(0===y||0===v){const t=e.textRenderingMode&G;t!==W&&t!==H||(v=this.getSinglePixelWidth())}else v/=y;if(1!==r&&(s.scale(r,r),v/=r),s.lineWidth=v,n.isInvalidPDFjsFont){const n=[];let i=0;for(const e of t)n.push(e.unicode),i+=e.width;return s.fillText(n.join(""),0,0),e.x+=i*p*c,s.restore(),void this.compose()}let b,w=0;for(b=0;b<h;++b){const e=t[b];if("number"===typeof e){w+=d*e*i/1e3;continue}let c=!1;const h=(e.isSpace?o:0)+a,v=e.fontChar,y=e.accent;let x,_,A=e.width;if(u){const t=e.vmetric||f,n=-(e.vmetric?t[1]:.5*A)*p,i=t[2]*p;A=t?-t[0]:A,x=n/r,_=(w+i)/r}else x=w/r,_=0;if(n.remeasure&&A>0){const t=1e3*s.measureText(v).width/i*r;if(A<t&&this.isFontSubpixelAAEnabled){const e=A/t;c=!0,s.save(),s.scale(e,1),x/=e}else A!==t&&(x+=(A-t)/2e3*i/r)}if(this.contentVisible&&(e.isInFont||n.missingFile))if(g&&!y)s.fillText(v,x,_);else if(this.paintChar(v,x,_,m),y){const t=x+i*y.offset.x/r,e=_-i*y.offset.y/r;this.paintChar(y.fontChar,t,e,m)}w+=u?A*p-h*l:A*p+h*l,c&&s.restore()}u?e.y-=w:e.x+=w*c,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,s=n.fontSize,r=n.fontDirection,a=i.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*r,h=n.fontMatrix||T,u=t.length;let d,f,p,g;if(!(n.textRenderingMode===q)&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(c,r),d=0;d<u;++d){if(f=t[d],"number"===typeof f){g=a*f*s/1e3,this.ctx.translate(g,0),n.x+=g*c;continue}const r=(f.isSpace?l:0)+o,u=i.charProcOperatorList[f.operatorListId];if(!u){kt('Type3 character "'.concat(f.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=f,this.save(),e.scale(s,s),e.transform(...h),this.executeOperatorList(u),this.restore());p=Wt.applyTransform([f.width,0],h)[0]*s+r,e.translate(p,0),n.x+=p*c}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,s,r){this.ctx.rect(n,i,s-n,r-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const n=t[1],i=this.baseTransform||_e(this.ctx),s={createCanvasGraphics:t=>new qr(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Mr(t,n,this.ctx,s,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Wt.makeHexColor(t,e,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Wt.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new _r(t);case"Mesh":return new kr(t);case"Dummy":return new Sr}throw new Error("Unknown IR type: ".concat(t[0]))}(this.getObject(t)),this.cachedPatterns.set(t,e)),n&&(e.matrix=n),e}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Ae(e),br);const i=Ae(e);if(i){const{width:t,height:n}=e.canvas,[s,r,a,o]=Wt.getAxialAlignedBoundingBox([0,0,t,n],i);this.ctx.fillRect(s,r,a-s,o-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){St("Should not call beginInlineImage")}beginImageData(){St("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=_e(this.ctx),e)){const t=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],t,n),this.current.updateRectMinMax(_e(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Et("TODO: Support non-isolated groups."),t.knockout&&kt("Knockout groups not supported.");const n=_e(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Wt.getAxialAlignedBoundingBox(t.bbox,_e(e));const s=[0,0,e.canvas.width,e.canvas.height];i=Wt.intersect(i,s)||[0,0,0,0];const r=Math.floor(i[0]),a=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-r,1),l=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(c,o,l),u=h.context;u.translate(-r,-a),u.transform(...n),t.smask?this.smaskStack.push({canvas:h.canvas,context:u,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,a),e.save()),Fr(e,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=_e(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const n=Wt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(t,e,n,i,s){if(o(Hr,this,Gr).call(this),jr(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const i=e[2]-e[0],r=e[3]-e[1];if(s&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=i,e[3]=r;const[s,a]=Wt.singularValueDecompose2dScale(_e(this.ctx)),{viewportScale:o}=this,l=Math.ceil(i*this.outputScaleX*o),c=Math.ceil(r*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,c);const{canvas:h,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(t,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(s,0,0,-a,0,r*a),jr(this.ctx)}else jr(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],i,r),this.ctx.clip(),this.ctx.beginPath()}this.current=new Nr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),o(Hr,this,Kr).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const n=this.ctx,i=this.processingType3;if(i&&(void 0===i.compiled&&(i.compiled=function(t){const{width:e,height:n}=t;if(e>1e3||n>1e3)return null;const i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let r,a,o,l=new Uint8Array(s*(n+1));const c=e+7&-8;let h=new Uint8Array(c*n),u=0;for(const g of t.data){let t=128;for(;t>0;)h[u++]=g&t?0:255,t>>=1}let d=0;for(u=0,0!==h[u]&&(l[0]=1,++d),a=1;a<e;a++)h[u]!==h[u+1]&&(l[a]=h[u]?2:1,++d),u++;for(0!==h[u]&&(l[a]=2,++d),r=1;r<n;r++){u=r*c,o=r*s,h[u-c]!==h[u]&&(l[o]=h[u]?1:8,++d);let t=(h[u]?4:0)+(h[u-c]?8:0);for(a=1;a<e;a++)t=(t>>2)+(h[u+1]?4:0)+(h[u-c+1]?8:0),i[t]&&(l[o+a]=i[t],++d),u++;if(h[u-c]!==h[u]&&(l[o+a]=h[u]?2:4,++d),d>1e3)return null}for(u=c*(n-1),o=r*s,0!==h[u]&&(l[o]=8,++d),a=1;a<e;a++)h[u]!==h[u+1]&&(l[o+a]=h[u]?4:8,++d),u++;if(0!==h[u]&&(l[o+a]=4,++d),d>1e3)return null;const f=new Int32Array([0,s,-1,0,-s,0,0,0,1]),p=new Path2D;for(r=0;d&&r<=n;r++){let t=r*s;const n=t+e;for(;t<n&&!l[t];)t++;if(t===n)continue;p.moveTo(t%s,r);const i=t;let a=l[t];do{const e=f[a];do{t+=e}while(!l[t]);const n=l[t];5!==n&&10!==n?(a=n,l[t]=0):(a=n&51*a>>4,l[t]&=a>>2|a<<2),p.lineTo(t%s,t/s|0),l[t]||--d}while(i!==t);--r}return h=null,l=null,function(t){t.save(),t.scale(1/e,-1/n),t.translate(0,-n),t.fill(p),t.beginPath(),t.restore()}}(t)),i.compiled))return void i.compiled(n);const s=this._createMaskCanvas(t),r=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=_e(a);a.transform(e,n,i,s,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,h=r.length;c<h;c+=2){const t=Wt.transform(o,[e,n,i,s,r[c],r[c+1]]),[h,u]=Wt.applyTransform([0,0],t);a.drawImage(l.canvas,h,u)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const s of t){const{data:t,width:r,height:a,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),c=l.context;c.save();Or(c,this.getObject(t,s)),c.globalCompositeOperation="source-in",c.fillStyle=i?n.getPattern(c,this,Ae(e),vr):n,c.fillRect(0,0,r,a),c.restore(),e.save(),e.transform(...o),e.scale(1,-1),Dr(e,l.canvas,0,0,r,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):kt("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const s=this.getObject(t);if(!s)return void kt("Dependent image isn't ready yet");const r=s.width,a=s.height,o=[];for(let l=0,c=i.length;l<c;l+=2)o.push({transform:[e,0,0,n,i[l],i[l+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:n,height:i}=t,s=this.cachedCanvases.getCanvas("inlineImage",n,i),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!S){const{filter:t}=i;"none"!==t&&""!==t&&(i.filter="none")}let s;if(i.scale(1/e,-1/n),t.bitmap)s=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)s=t;else{const i=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Lr(i,t),s=this.applyTransferMapsToCanvas(i)}const r=this._scaleImage(s,Ae(i));i.imageSmoothingEnabled=Br(_e(i),t.interpolate),Dr(i,r.img,0,0,r.paintWidth,r.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const e=t.width,n=t.height,s=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Lr(s,t),i=this.applyTransferMapsToCanvas(s)}for(const s of e)n.save(),n.transform(...s.transform),n.scale(1,-1),Dr(n,i,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Wr?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=_e(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:s}=this.ctx.getTransform();let r,a;if(0===n&&0===i){const n=Math.abs(e),i=Math.abs(s);if(n===i)if(0===t)r=a=1/n;else{const e=n*t;r=a=e<1?1/e:1}else if(0===t)r=1/n,a=1/i;else{const e=n*t,s=i*t;r=e<1?1/e:1,a=s<1?1/s:1}}else{const o=Math.abs(e*s-n*i),l=Math.hypot(e,n),c=Math.hypot(i,s);if(0===t)r=c/o,a=l/o;else{const e=t*o;r=c>e?c/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,s]=this.getScaleForStroking();if(e.lineWidth=n||1,1===i&&1===s)return void e.stroke();const r=e.getLineDash();if(t&&e.save(),e.scale(i,s),r.length>0){const t=Math.max(i,s);e.setLineDash(r.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}function Gr(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Kr(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}for(const eg in bt)void 0!==qr.prototype[eg]&&(qr.prototype[bt[eg]]=qr.prototype[eg]);class Yr{static get workerPort(){return o(Yr,this,Xr)._}static set workerPort(t){if(!("undefined"!==typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");Xr._=o(Yr,this,t)}static get workerSrc(){return o(Yr,this,Qr)._}static set workerSrc(t){if("string"!==typeof t)throw new Error("Invalid `workerSrc` type.");Qr._=o(Yr,this,t)}}var Xr={_:null},Qr={_:""};const Jr=1,$r=2,Zr={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ta(t){switch(t instanceof Error||"object"===typeof t&&null!==t||St('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Ft(t.message);case"MissingPDFException":return new Nt(t.message);case"PasswordException":return new Rt(t.message,t.code);case"UnexpectedResponseException":return new Lt(t.message,t.status);case"UnknownErrorException":return new Pt(t.message,t.details);default:return new Pt(t.message,t.toString())}}var ea=new WeakMap,na=new WeakSet;class ia{constructor(t,e,n){r(this,na),a(this,ea,new AbortController),this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",o(na,this,sa).bind(this),{signal:c(ea,this).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(r){s.reject(r)}return s.promise}sendWithStream(t,e,n,i){const s=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:t,streamId:s,data:e,desiredSize:n.desiredSize},i),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[s].pullCall=e,o.postMessage({sourceName:r,targetName:a,stream:Zr.PULL,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{Ct(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:Zr.CANCEL,streamId:s,reason:ta(t)}),e.promise}},n)}destroy(){var t;null===(t=c(ea,this))||void 0===t||t.abort(),h(ea,this,null)}}function sa(t){let{data:e}=t;if(e.targetName!==this.sourceName)return;if(e.stream)return void o(na,this,aa).call(this,e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error("Cannot resolve callback ".concat(t));if(delete this.callbackCapabilities[t],e.callback===Jr)n.resolve(e.data);else{if(e.callback!==$r)throw new Error("Unexpected callback case");n.reject(ta(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){const t=this.sourceName,i=e.sourceName,s=this.comObj;new Promise((function(t){t(n(e.data))})).then((function(n){s.postMessage({sourceName:t,targetName:i,callback:Jr,callbackId:e.callbackId,data:n})}),(function(n){s.postMessage({sourceName:t,targetName:i,callback:$r,callbackId:e.callbackId,reason:ta(n)})}))}else e.streamId?o(na,this,ra).call(this,e):n(e.data)}function ra(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,r=this,a=this.actionHandler[t.action],o={enqueue(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:Zr.ENQUEUE,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Zr.CLOSE,streamId:e}),delete r.streamSinks[e])},error(t){Ct(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Zr.ERROR,streamId:e,reason:ta(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,new Promise((function(e){e(a(t.data,o))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:Zr.START_COMPLETE,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:i,stream:Zr.START_COMPLETE,streamId:e,reason:ta(t)})}))}function aa(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Zr.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(ta(t.reason));break;case Zr.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(ta(t.reason));break;case Zr.PULL:if(!a){s.postMessage({sourceName:n,targetName:i,stream:Zr.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise((function(t){var e;t(null===(e=a.onPull)||void 0===e?void 0:e.call(a))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:Zr.PULL_COMPLETE,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:i,stream:Zr.PULL_COMPLETE,streamId:e,reason:ta(t)})}));break;case Zr.ENQUEUE:if(Ct(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case Zr.CLOSE:if(Ct(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),o(na,this,oa).call(this,r,e);break;case Zr.ERROR:Ct(r,"error should have stream controller"),r.controller.error(ta(t.reason)),o(na,this,oa).call(this,r,e);break;case Zr.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(ta(t.reason)),o(na,this,oa).call(this,r,e);break;case Zr.CANCEL:if(!a)break;new Promise((function(e){var n;e(null===(n=a.onCancel)||void 0===n?void 0:n.call(a,ta(t.reason)))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:Zr.CANCEL_COMPLETE,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:i,stream:Zr.CANCEL_COMPLETE,streamId:e,reason:ta(t)})})),a.sinkCapability.reject(ta(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async function oa(t,e){var n,i,s;await Promise.allSettled([null===(n=t.startCall)||void 0===n?void 0:n.promise,null===(i=t.pullCall)||void 0===i?void 0:i.promise,null===(s=t.cancelCall)||void 0===s?void 0:s.promise]),delete this.streamControllers[e]}var la=new WeakMap,ca=new WeakMap;class ha{constructor(t){let{parsedData:e,rawData:n}=t;a(this,la,void 0),a(this,ca,void 0),h(la,this,e),h(ca,this,n)}getRaw(){return c(ca,this)}get(t){var e;return null!==(e=c(la,this).get(t))&&void 0!==e?e:null}getAll(){return zt(c(la,this))}has(t){return c(la,this).has(t)}}const ua=Symbol("INTERNAL");var da=new WeakMap,fa=new WeakMap,pa=new WeakMap,ga=new WeakMap;class ma{constructor(t,e){let{name:n,intent:i,usage:s,rbGroups:r}=e;a(this,da,!1),a(this,fa,!1),a(this,pa,!1),a(this,ga,!0),h(da,this,!!(t&R)),h(fa,this,!!(t&P)),this.name=n,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(c(pa,this))return c(ga,this);if(!c(ga,this))return!1;const{print:t,view:e}=this.usage;return c(da,this)?"OFF"!==(null===e||void 0===e?void 0:e.viewState):!c(fa,this)||"OFF"!==(null===t||void 0===t?void 0:t.printState)}_setVisible(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==ua&&St("Internal method `_setVisible` called."),h(pa,this,n),h(ga,this,e)}}var va=new WeakMap,ya=new WeakMap,ba=new WeakMap,wa=new WeakMap,xa=new WeakSet;class _a{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;if(r(this,xa),a(this,va,null),a(this,ya,new Map),a(this,ba,null),a(this,wa,null),this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,h(wa,this,t.order);for(const n of t.groups)c(ya,this).set(n.id,new ma(e,n));if("OFF"===t.baseState)for(const t of c(ya,this).values())t._setVisible(ua,!1);for(const e of t.on)c(ya,this).get(e)._setVisible(ua,!0);for(const e of t.off)c(ya,this).get(e)._setVisible(ua,!1);h(ba,this,this.getHash())}}isVisible(t){if(0===c(ya,this).size)return!0;if(!t)return Et("Optional content group not defined."),!0;if("OCG"===t.type)return c(ya,this).has(t.id)?c(ya,this).get(t.id).visible:(kt("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return o(xa,this,Aa).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!c(ya,this).has(e))return kt("Optional content group not found: ".concat(e)),!0;if(c(ya,this).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!c(ya,this).has(e))return kt("Optional content group not found: ".concat(e)),!0;if(!c(ya,this).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!c(ya,this).has(e))return kt("Optional content group not found: ".concat(e)),!0;if(!c(ya,this).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!c(ya,this).has(e))return kt("Optional content group not found: ".concat(e)),!0;if(c(ya,this).get(e).visible)return!1}return!0}return kt("Unknown optional content policy ".concat(t.policy,".")),!0}return kt("Unknown group type ".concat(t.type,".")),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=c(ya,this).get(t);if(i){if(n&&e&&i.rbGroups.length)for(const e of i.rbGroups)for(const n of e){var s;if(n!==t)null===(s=c(ya,this).get(n))||void 0===s||s._setVisible(ua,!1,!0)}i._setVisible(ua,!!e,!0),h(va,this,null)}else kt("Optional content group not found: ".concat(t))}setOCGState(t){let e,{state:n,preserveRB:i}=t;for(const s of n){switch(s){case"ON":case"OFF":case"Toggle":e=s;continue}const t=c(ya,this).get(s);if(t)switch(e){case"ON":this.setVisibility(s,!0,i);break;case"OFF":this.setVisibility(s,!1,i);break;case"Toggle":this.setVisibility(s,!t.visible,i)}}h(va,this,null)}get hasInitialVisibility(){return null===c(ba,this)||this.getHash()===c(ba,this)}getOrder(){return c(ya,this).size?c(wa,this)?c(wa,this).slice():[...c(ya,this).keys()]:null}getGroups(){return c(ya,this).size>0?zt(c(ya,this)):null}getGroup(t){return c(ya,this).get(t)||null}getHash(){if(null!==c(va,this))return c(va,this);const t=new Cs;for(const[e,n]of c(ya,this))t.update("".concat(e,":").concat(n.visible));return h(va,this,t.hexdigest())}}function Aa(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const e=t[i];let s;if(Array.isArray(e))s=o(xa,this,Aa).call(this,e);else{if(!c(ya,this).has(e))return kt("Optional content group not found: ".concat(e)),!0;s=c(ya,this).get(e).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}class Ea{constructor(t,e){let{disableRange:n=!1,disableStream:i=!1}=e;Ct(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===r||void 0===r?void 0:r.length)>0){const t=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),t.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),t.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),t.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),t.transportReady()}_onReceiveData(t){let{begin:e,chunk:n}=t;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{Ct(this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}_onProgress(t){var e,n,i,s;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(s=i.onProgress)||void 0===s||s.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ka(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Sa(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class ka{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=t,this._done=n||!1,this._filename=ue(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Sa{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Ca(t,e){const n=new Headers;if(!t||!e||"object"!==typeof e)return n;for(const i in e){const t=e[i];void 0!==t&&n.append(i,t)}return n}function Ta(t){let{responseHeaders:e,isHttp:n,rangeChunkSize:i,disableRange:s}=t;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e.get("Content-Length"),10);if(!Number.isInteger(a))return r;if(r.suggestedLength=a,a<=2*i)return r;if(s||!n)return r;if("bytes"!==e.get("Accept-Ranges"))return r;return"identity"!==(e.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function Ma(t){const e=t.get("Content-Disposition");if(e){let t=function(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let t=a(n);return t=unescape(t),t=o(t),t=l(t),r(t)}if(n=function(t){const e=[];let n;const s=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(t));){let[,t,i,s]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[i,s]}const r=[];for(let i=0;i<e.length&&i in e;++i){let[t,n]=e[i];n=a(n),t&&(n=unescape(n),0===i&&(n=o(n))),r.push(n)}return r.join("")}(t),n)return r(l(n));if(n=i("filename","i").exec(t),n){n=n[1];let t=a(n);return t=l(t),r(t)}function i(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(t,{fatal:!0}),s=Bt(n);n=i.decode(s),e=!1}catch{}}return n}function r(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,n,i){if("q"===n||"Q"===n)return s(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{i=atob(i)}catch{}return s(e,i)}))}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ue(t))return t}return null}function Ia(t,e){return 404===t||0===t&&e.startsWith("file:")?new Nt('Missing PDF "'+e+'".'):new Lt("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t)}function Ra(t){return 200===t||206===t}function Pa(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Da(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(kt("getArrayBuffer - unexpected data format: ".concat(t)),new Uint8Array(t).buffer)}class Na{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ca(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return Ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new La(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Oa(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class La{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,Pa(n,this._withCredentials,this._abortController)).then((e=>{if(!Ra(e.status))throw Ia(e.status,i);this._reader=e.body.getReader(),this._headersCapability.resolve();const n=e.headers,{allowRangeRequests:s,suggestedLength:r}=Ta({responseHeaders:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=r||this._contentLength,this._filename=Ma(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ft("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Da(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class Oa{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range","bytes=".concat(e,"-").concat(n-1));const r=i.url;fetch(r,Pa(s,this._withCredentials,this._abortController)).then((t=>{if(!Ra(t.status))throw Ia(t.status,r);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded}),{value:Da(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class Fa{constructor(t){let{url:e,httpHeaders:n,withCredentials:i}=t;this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Ca(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const s in n)i[s]=n[s];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,r]of this.headers)e.setRequestHeader(s,r);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var n;const i=this.pendingRequests[t];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(t in this.pendingRequests))return;var s;if(delete this.pendingRequests[t],0===i.status&&this.isHttp)return void(null===(s=n.onError)||void 0===s||s.call(n,i.status));const r=i.status||200;var a;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void(null===(a=n.onError)||void 0===a||a.call(n,i.status));const o=function(t){const e=t.response;return"string"!==typeof e?e:Bt(e).buffer}(i);if(206===r){const t=i.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);n.onDone({begin:parseInt(e[1],10),chunk:o})}else if(o)n.onDone({begin:0,chunk:o});else{var l;null===(l=n.onError)||void 0===l||l.call(n,i.status)}}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class ja{constructor(t){this._source=t,this._manager=new Fa(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ba(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new za(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Ba{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map((t=>{const[e,...n]=t.split(": ");return[e,n.join(": ")]}))),{allowRangeRequests:i,suggestedLength:s}=Ta({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Ma(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Ia(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class za{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Ia(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Va=/^[a-z][a-z0-9\-+.]+:/i;function Ua(t,e,n){if("http:"===t.protocol){return gr.get("http").request(t,{headers:e},n)}return gr.get("https").request(t,{headers:e},n)}class Wa{constructor(t){this.source=t,this.url=function(t){if(Va.test(t))return new URL(t);const e=gr.get("url");return new URL(e.pathToFileURL(t))}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.headers=Ca(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return Ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ya(this):new Ga(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new Xa(this,t,e):new Ka(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Ha{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ft("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class qa{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ga extends Ha{constructor(t){super(t);const e=Object.fromEntries(t.headers);this._request=Ua(this._url,e,(e=>{if(404===e.statusCode){const t=new Nt('Missing PDF "'.concat(this._url,'".'));return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const n=new Headers(this._readableStream.headers),{allowRangeRequests:i,suggestedLength:s}=Ta({responseHeaders:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=s||this._contentLength,this._filename=Ma(n)})),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class Ka extends qa{constructor(t,e,n){super(t);const i=Object.fromEntries(t.headers);i.Range="bytes=".concat(e,"-").concat(n-1);this._request=Ua(this._url,i,(t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new Nt('Missing PDF "'.concat(this._url,'".'));this._storedError=t}})),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class Ya extends Ha{constructor(t){super(t);const e=gr.get("fs");e.promises.lstat(this._url).then((t=>{this._contentLength=t.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()}),(t=>{"ENOENT"===t.code&&(t=new Nt('Missing PDF "'.concat(this._url,'".'))),this._storedError=t,this._headersCapability.reject(t)}))}}class Xa extends qa{constructor(t,e,n){super(t);const i=gr.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:e,end:n-1}))}}const Qa=30,Ja=.8;var $a=new WeakMap,Za=new WeakMap,to=new WeakMap,eo=new WeakMap,no=new WeakMap,io=new WeakMap,so=new WeakMap,ro=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,co=new WeakMap,ho=new WeakMap,uo=new WeakMap,fo=new WeakMap,po=new WeakMap,go=new WeakMap,mo=new WeakMap,vo=new WeakSet;class yo{constructor(t){var e;let{textContentSource:n,container:i,viewport:s}=t;if(r(this,vo),a(this,$a,Promise.withResolvers()),a(this,Za,null),a(this,to,!1),a(this,eo,!(null===(e=globalThis.FontInspector)||void 0===e||!e.enabled)),a(this,no,null),a(this,io,null),a(this,so,0),a(this,ro,0),a(this,ao,null),a(this,oo,null),a(this,lo,0),a(this,co,0),a(this,ho,Object.create(null)),a(this,uo,[]),a(this,fo,null),a(this,po,[]),a(this,go,new WeakMap),a(this,mo,null),n instanceof ReadableStream)h(fo,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');h(fo,this,new ReadableStream({start(t){t.enqueue(n),t.close()}}))}h(Za,this,h(oo,this,i)),h(co,this,s.scale*(globalThis.devicePixelRatio||1)),h(lo,this,s.rotation),h(io,this,{div:null,properties:null,ctx:null});const{pageWidth:o,pageHeight:l,pageX:u,pageY:d}=s.rawDims;h(mo,this,[1,0,0,-1,-u,d+l]),h(ro,this,o),h(so,this,l),Eo.call(yo),Ee(i,s),c($a,this).promise.finally((()=>{Io._.delete(this),h(io,this,null),h(ho,this,null)})).catch((()=>{}))}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Vt.platform;return Mt(this,"fontFamilyMap",new Map([["sans-serif","".concat(t&&e?"Calibri, ":"","sans-serif")],["monospace","".concat(t&&e?"Lucida Console, ":"","monospace")]]))}render(){const t=()=>{c(ao,this).read().then((e=>{var n;let{value:i,done:s}=e;s?c($a,this).resolve():(null!==(n=c(no,this))&&void 0!==n||h(no,this,i.lang),Object.assign(c(ho,this),i.styles),o(vo,this,bo).call(this,i.items),t())}),c($a,this).reject)};return h(ao,this,c(fo,this).getReader()),Io._.add(this),t(),c($a,this).promise}update(t){let{viewport:e,onBefore:n=null}=t;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==c(lo,this)&&(null===n||void 0===n||n(),h(lo,this,s),Ee(c(oo,this),{rotation:s})),i!==c(co,this)){null===n||void 0===n||n(),h(co,this,i);const t={div:null,properties:null,ctx:_o.call(yo,c(no,this))};for(const e of c(po,this))t.properties=c(go,this).get(e),t.div=e,o(vo,this,xo).call(this,t)}}cancel(){var t;const e=new Ft("TextLayer task cancelled.");null===(t=c(ao,this))||void 0===t||t.cancel(e).catch((()=>{})),h(ao,this,null),c($a,this).reject(e)}get textDivs(){return c(po,this)}get textContentItemsStr(){return c(uo,this)}static cleanup(){if(!(o(yo,this,Io)._.size>0)){o(yo,this,So)._.clear();for(const{canvas:t}of o(yo,this,Co)._.values())t.remove();o(yo,this,Co)._.clear()}}}function bo(t){var e,n;if(c(to,this))return;null!==(n=(e=c(io,this)).ctx)&&void 0!==n||(e.ctx=_o.call(g,c(no,this)));const i=c(po,this),s=c(uo,this);for(const r of t){if(i.length>1e5)return kt("Ignoring additional textDivs for performance reasons."),void h(to,this,!0);if(void 0!==r.str)s.push(r.str),o(vo,this,wo).call(this,r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const t=c(Za,this);h(Za,this,document.createElement("span")),c(Za,this).classList.add("markedContent"),null!==r.id&&c(Za,this).setAttribute("id","".concat(r.id)),t.append(c(Za,this))}else"endMarkedContent"===r.type&&h(Za,this,c(Za,this).parentNode)}}function wo(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};c(po,this).push(e);const i=Wt.transform(c(mo,this),t.transform);let s=Math.atan2(i[1],i[0]);const r=c(ho,this)[t.fontName];r.vertical&&(s+=Math.PI/2);let a=c(eo,this)&&r.fontSubstitution||r.fontFamily;a=g.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),h=l*ko.call(g,a,c(no,this));let u,d;0===s?(u=i[4],d=i[5]-h):(u=i[4]+h*Math.sin(s),d=i[5]-h*Math.cos(s));const f="calc(var(--scale-factor)*",p=e.style;c(Za,this)===c(oo,this)?(p.left="".concat((100*u/c(ro,this)).toFixed(2),"%"),p.top="".concat((100*d/c(so,this)).toFixed(2),"%")):(p.left="".concat(f).concat(u.toFixed(2),"px)"),p.top="".concat(f).concat(d.toFixed(2),"px)")),p.fontSize="".concat(f).concat((Mo._*l).toFixed(2),"px)"),p.fontFamily=a,n.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(eo,this)&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),0!==s&&(n.angle=s*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(m=!0)}if(m&&(n.canvasWidth=r.vertical?t.height:t.width),c(go,this).set(e,n),c(io,this).div=e,c(io,this).properties=n,o(vo,this,xo).call(this,c(io,this)),n.hasText&&c(Za,this).append(e),n.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),c(Za,this).append(t)}}function xo(t){const{div:e,properties:n,ctx:i}=t,{style:s}=e;let r="";if(Mo._>1&&(r="scale(".concat(1/Mo._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:t}=s,{canvasWidth:a,fontSize:o}=n;Ao.call(g,i,o*c(co,this),t);const{width:l}=i.measureText(e.textContent);l>0&&(r="scaleX(".concat(a*c(co,this)/l,") ").concat(r))}0!==n.angle&&(r="rotate(".concat(n.angle,"deg) ").concat(r)),r.length>0&&(s.transform=r)}function _o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=o(g,this,Co)._.get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(g,this,Co)._.set(t,e),o(g,this,To)._.set(e,{size:0,family:""})}return e}function Ao(t,e,n){const i=o(g,this,To)._.get(t);e===i.size&&n===i.family||(t.font="".concat(e,"px ").concat(n),i.size=e,i.family=n)}function Eo(){if(null!==o(g,this,Mo)._)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),Mo._=o(g,this,t.getBoundingClientRect().height),t.remove()}function ko(t,e){const n=o(g,this,So)._.get(t);if(n)return n;const i=o(g,this,_o).call(this,e);i.canvas.width=i.canvas.height=Qa,o(g,this,Ao).call(this,i,Qa,t);const s=i.measureText("");let r=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(r){const e=r/(r+a);return o(g,this,So)._.set(t,e),i.canvas.width=i.canvas.height=0,e}i.strokeStyle="red",i.clearRect(0,0,Qa,Qa),i.strokeText("g",0,0);let l=i.getImageData(0,0,Qa,Qa).data;a=0;for(let o=l.length-1-3;o>=0;o-=4)if(l[o]>0){a=Math.ceil(o/4/Qa);break}i.clearRect(0,0,Qa,Qa),i.strokeText("A",0,Qa),l=i.getImageData(0,0,Qa,Qa).data,r=0;for(let o=0,h=l.length;o<h;o+=4)if(l[o]>0){r=Qa-Math.floor(o/4/Qa);break}i.canvas.width=i.canvas.height=0;const c=r?r/(r+a):Ja;return o(g,this,So)._.set(t,c),c}g=yo;var So={_:new Map},Co={_:new Map},To={_:new WeakMap},Mo={_:null},Io={_:new Set};class Ro{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};return function t(n){var i;if(!n)return;let s=null;const r=n.name;if("#text"===r)s=n.value;else{if(!Ro.shouldBuildText(r))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?s=n.attributes.textContent:n.value&&(s=n.value)}if(null!==s&&e.push({str:s}),n.children)for(const e of n.children)t(e)}(t),n}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const Po=65536,Do=S?class extends Vs{_createCanvas(t,e){return gr.get("canvas").createCanvas(t,e)}}:class extends Vs{constructor(t){let{ownerDocument:e=globalThis.document,enableHWA:n=!1}=t;super({enableHWA:n}),this._document=e}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}},No=S?class extends Us{async _fetch(t){return mr(t)}}:Ws,Lo=S?class extends Hs{}:class extends Hs{constructor(t){let{docId:e,ownerDocument:n=globalThis.document}=t;super(),r(this,$s),a(this,qs,void 0),a(this,Gs,void 0),a(this,Ks,void 0),a(this,Ys,void 0),a(this,Xs,void 0),a(this,Qs,void 0),a(this,Js,0),h(Ys,this,e),h(Xs,this,n)}addFilter(t){var e,n;if(!t)return"none";let i=l($s,this,Zs).get(t);if(i)return i;const[s,r,a]=o($s,this,nr).call(this,t),u=1===t.length?s:"".concat(s).concat(r).concat(a);if(i=l($s,this,Zs).get(u),i)return l($s,this,Zs).set(t,i),i;const d="g_".concat(c(Ys,this),"_transfer_map_").concat((h(Js,this,(e=c(Js,this),n=e++,e)),n)),f=o($s,this,ir).call(this,d);l($s,this,Zs).set(t,f),l($s,this,Zs).set(u,f);const p=o($s,this,ar).call(this,d);return o($s,this,lr).call(this,s,r,a,p),f}addHCMFilter(t,e){var n;const i="".concat(t,"-").concat(e),s="base";let r=l($s,this,tr).get(s);if((null===(n=r)||void 0===n?void 0:n.key)===i)return r.url;var a;r?(null===(a=r.filter)||void 0===a||a.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},l($s,this,tr).set(s,r));if(!t||!e)return r.url;const h=o($s,this,hr).call(this,t);t=Wt.makeHexColor(...h);const u=o($s,this,hr).call(this,e);if(e=Wt.makeHexColor(...u),l($s,this,er).style.color="","#000000"===t&&"#ffffff"===e||t===e)return r.url;const d=new Array(256);for(let o=0;o<=255;o++){const t=o/255;d[o]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const f=d.join(","),p="g_".concat(c(Ys,this),"_hcm_filter"),g=r.filter=o($s,this,ar).call(this,p);o($s,this,lr).call(this,f,f,f,g),o($s,this,rr).call(this,g);const m=(t,e)=>{const n=h[t]/255,i=u[t]/255,s=new Array(e+1);for(let r=0;r<=e;r++)s[r]=n+r/e*(i-n);return s.join(",")};return o($s,this,lr).call(this,m(0,5),m(1,5),m(2,5),g),r.url=o($s,this,ir).call(this,p),r.url}addAlphaFilter(t){var e,n;let i=l($s,this,Zs).get(t);if(i)return i;const[s]=o($s,this,nr).call(this,[t]),r="alpha_".concat(s);if(i=l($s,this,Zs).get(r),i)return l($s,this,Zs).set(t,i),i;const a="g_".concat(c(Ys,this),"_alpha_map_").concat((h(Js,this,(e=c(Js,this),n=e++,e)),n)),u=o($s,this,ir).call(this,a);l($s,this,Zs).set(t,u),l($s,this,Zs).set(r,u);const d=o($s,this,ar).call(this,a);return o($s,this,cr).call(this,s,d),u}addLuminosityFilter(t){var e,n;let i,s,r=l($s,this,Zs).get(t||"luminosity");if(r)return r;if(t?([i]=o($s,this,nr).call(this,[t]),s="luminosity_".concat(i)):s="luminosity",r=l($s,this,Zs).get(s),r)return l($s,this,Zs).set(t,r),r;const a="g_".concat(c(Ys,this),"_luminosity_map_").concat((h(Js,this,(e=c(Js,this),n=e++,e)),n)),u=o($s,this,ir).call(this,a);l($s,this,Zs).set(t,u),l($s,this,Zs).set(s,u);const d=o($s,this,ar).call(this,a);return o($s,this,sr).call(this,d),t&&o($s,this,cr).call(this,i,d),u}addHighlightHCMFilter(t,e,n,i,s){var r;const a="".concat(e,"-").concat(n,"-").concat(i,"-").concat(s);let h=l($s,this,tr).get(t);if((null===(r=h)||void 0===r?void 0:r.key)===a)return h.url;var u;h?(null===(u=h.filter)||void 0===u||u.remove(),h.key=a,h.url="none",h.filter=null):(h={key:a,url:"none",filter:null},l($s,this,tr).set(t,h));if(!e||!n)return h.url;const[d,f]=[e,n].map(o($s,this,hr).bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[m,v]=[i,s].map(o($s,this,hr).bind(this));g<p&&([p,g,m,v]=[g,p,v,m]),l($s,this,er).style.color="";const y=(t,e,n)=>{const i=new Array(256),s=(g-p)/n,r=t/255,a=(e-t)/(255*n);let o=0;for(let l=0;l<=n;l++){const t=Math.round(p+l*s),e=r+l*a;for(let n=o;n<=t;n++)i[n]=e;o=t+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},b="g_".concat(c(Ys,this),"_hcm_").concat(t,"_filter"),w=h.filter=o($s,this,ar).call(this,b);return o($s,this,rr).call(this,w),o($s,this,lr).call(this,y(m[0],v[0],5),y(m[1],v[1],5),y(m[2],v[2],5),w),h.url=o($s,this,ir).call(this,b),h.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==l($s,this,tr).size||(c(Ks,this)&&(c(Ks,this).parentNode.parentNode.remove(),h(Ks,this,null)),c(Gs,this)&&(c(Gs,this).clear(),h(Gs,this,null)),h(Js,this,0))}},Oo=S?class extends ur{async _fetch(t){return mr(t)}}:dr;function Fo(){var t,e,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof i||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const s=new Bo,{docId:r}=s,a=i.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(S&&"string"===typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(i.url):null,o=i.data?function(t){if(S&&"undefined"!==typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"===typeof t)return Bt(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===typeof t&&!isNaN(null===t||void 0===t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(i.data):null,l=i.httpHeaders||null,c=!0===i.withCredentials,h=null!==(t=i.password)&&void 0!==t?t:null,u=i.range instanceof Vo?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:Po;let f=i.worker instanceof Zo?i.worker:null;const p=i.verbosity,g="string"!==typeof i.docBaseUrl||he(i.docBaseUrl)?null:i.docBaseUrl,m="string"===typeof i.cMapUrl?i.cMapUrl:null,v=!1!==i.cMapPacked,y=i.CMapReaderFactory||No,b="string"===typeof i.standardFontDataUrl?i.standardFontDataUrl:null,w=i.StandardFontDataFactory||Oo,x=!0!==i.stopAtErrors,_=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,A=!1!==i.isEvalSupported,E="boolean"===typeof i.isOffscreenCanvasSupported?i.isOffscreenCanvasSupported:!S,k="boolean"===typeof i.isChrome?i.isChrome:!Vt.platform.isFirefox&&"undefined"!==typeof window&&!(null===(e=window)||void 0===e||!e.chrome),C=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,T="boolean"===typeof i.disableFontFace?i.disableFontFace:S,M=!0===i.fontExtraProperties,I=!0===i.enableXfa,R=i.ownerDocument||globalThis.document,P=!0===i.disableRange,D=!0===i.disableStream,N=!0===i.disableAutoFetch,L=!0===i.pdfBug,O=i.CanvasFactory||Do,F=i.FilterFactory||Lo,j=!0===i.enableHWA,B=u?u.length:null!==(n=i.length)&&void 0!==n?n:NaN,z="boolean"===typeof i.useSystemFonts?i.useSystemFonts:!S&&!T,V="boolean"===typeof i.useWorkerFetch?i.useWorkerFetch:y===Ws&&w===dr&&m&&b&&ge(m,document.baseURI)&&ge(b,document.baseURI);i.canvasFactory&&ve("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&ve("`filterFactory`-instance option, please use `FilterFactory` instead.");_t(p);const U={canvasFactory:new O({ownerDocument:R,enableHWA:j}),filterFactory:new F({docId:r,ownerDocument:R}),cMapReaderFactory:V?null:new y({baseUrl:m,isCompressed:v}),standardFontDataFactory:V?null:new w({baseUrl:b})};if(!f){const t={verbosity:p,port:Yr.workerPort};f=t.port?Zo.fromPort(t):new Zo(t),s._worker=f}const W={docId:r,apiVersion:"4.8.69",data:o,password:h,disableAutoFetch:N,rangeChunkSize:d,length:B,docBaseUrl:g,enableXfa:I,evaluatorOptions:{maxImageSize:_,disableFontFace:T,ignoreErrors:x,isEvalSupported:A,isOffscreenCanvasSupported:E,isChrome:k,canvasMaxAreaInBytes:C,fontExtraProperties:M,useSystemFonts:z,cMapUrl:V?m:null,standardFontDataUrl:V?b:null}},H={disableFontFace:T,fontExtraProperties:M,ownerDocument:R,pdfBug:L,styleElement:null,loadingParams:{disableAutoFetch:N,enableXfa:I}};return f.promise.then((function(){if(s.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const t=f.messageHandler.sendWithPromise("GetDocRequest",W,o?[o.buffer]:null);let e;if(u)e=new Ea(u,{disableRange:P,disableStream:D});else if(!o){if(!a)throw new Error("getDocument - no `url` parameter provided.");let t;if(S){t="undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype&&ge(a)?Na:Wa}else t=ge(a)?Na:ja;e=new t({url:a,length:B,httpHeaders:l,withCredentials:c,rangeChunkSize:d,disableRange:P,disableStream:D})}return t.then((t=>{if(s.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const n=new ia(r,t,f.port),i=new ul(n,s,e,H,U);s._transport=i,n.send("Ready",null)}))})).catch(s._capability.reject),s}function jo(t){return"object"===typeof t&&Number.isInteger(null===t||void 0===t?void 0:t.num)&&t.num>=0&&Number.isInteger(null===t||void 0===t?void 0:t.gen)&&t.gen>=0}class Bo{constructor(){var t,e;this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((zo._=(t=zo._,e=t++,t),e)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var t,e;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(e=this._transport)||void 0===e?void 0:e.destroy())}catch(i){var n;throw null!==(n=this._worker)&&void 0!==n&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}var zo={_:0};class Vo{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){St("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Uo{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Wo=new WeakMap,Ho=new WeakMap,qo=new WeakSet;class Go{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r(this,qo),a(this,Wo,null),a(this,Ho,!1),this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new pe:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new ml,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new le({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null}render(t){var e,n;let{canvasContext:i,viewport:s,intent:r="display",annotationMode:a=j.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:g=!1}=t;null===(e=this._stats)||void 0===e||e.time("Overall");const m=this._transport.getRenderingIntent(r,a,p,g),{renderingIntent:v,cacheKey:y}=m;h(Ho,this,!1),o(qo,this,Yo).call(this),u||(u=this._transport.getOptionalContentConfig(v));let b=this._intentStates.get(y);b||(b=Object.create(null),this._intentStates.set(y,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const w=!!(v&P);var x;b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(x=this._stats)||void 0===x||x.time("Page Request"),this._pumpOperatorList(m));const _=t=>{var e;(b.renderTasks.delete(A),(this._maybeCleanupAfterRender||w)&&h(Ho,this,!0),o(qo,this,Ko).call(this,!w),t?(A.capability.reject(t),this._abortOperatorList({intentState:b,reason:t instanceof Error?t:new Error(t)})):A.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(e=globalThis.Stats)&&void 0!==e&&e.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},A=new xl({callback:_,params:{canvasContext:i,viewport:s,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:f});((n=b).renderTasks||(n.renderTasks=new Set)).add(A);const E=A.task;return Promise.all([b.displayReadyCapability.promise,u]).then((t=>{var e;let[n,i]=t;if(this.destroyed)_();else{if(null===(e=this._stats)||void 0===e||e.time("Rendering"),!(i.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:n,optionalContentConfig:i}),A.operatorListChanged()}})).catch(_),E}getOperatorList(){let{intent:t="display",annotationMode:e=j.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this._transport.getRenderingIntent(t,e,n,i,!0);let r,a=this._intentStates.get(s.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a)),a.opListReadCapability)||(r=Object.create(null),r.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(r))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(s));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:t=!1,disableNormalization:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((t=>Ro.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,n){const i=e.getReader(),s={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then((function(n){var i;let{value:r,done:a}=n;a?t(s):(null!==(i=s.lang)&&void 0!==i||(s.lang=r.lang),Object.assign(s.styles,r.styles),s.items.push(...r.items),e())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),h(Ho,this,!1),o(qo,this,Yo).call(this),Promise.all(t)}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h(Ho,this,!0);const e=o(qo,this,Ko).call(this,!1);return t&&e&&this._stats&&(this._stats=new pe),e}_startRenderPage(t,e){var n,i;const s=this._intentStates.get(e);s&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=s.displayReadyCapability)||void 0===i||i.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&o(qo,this,Ko).call(this,!0)}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:s}=t;const{map:r,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:r,modifiedIds:s},a).getReader(),c=this._intentStates.get(n);c.streamReader=l;const h=()=>{l.read().then((t=>{let{value:e,done:n}=t;n?c.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,c),h())}),(t=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const t of c.renderTasks)t.operatorListChanged();o(qo,this,Ko).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(t);else{if(!c.opListReadCapability)throw t;c.opListReadCapability.reject(t)}}}))};h()}_abortOperatorList(t){let{intentState:e,reason:n,force:i=!1}=t;if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof ce){let t=100;return n.extraDelay>0&&n.extraDelay<1e3&&(t+=n.extraDelay),void(e.streamReaderCancelTimeout=setTimeout((()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})}),t))}}if(e.streamReader.cancel(new Ft(n.message)).catch((()=>{})),e.streamReader=null,!this._transport.destroyed){for(const[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}function Ko(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o(qo,this,Yo).call(this),!c(Ho,this)||this.destroyed)return!1;if(t)return h(Wo,this,setTimeout((()=>{h(Wo,this,null),o(qo,this,Ko).call(this,!1)}),5e3)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),h(Ho,this,!1),!0}function Yo(){c(Wo,this)&&(clearTimeout(c(Wo,this)),h(Wo,this,null))}var Xo=new WeakMap,Qo=new WeakMap;class Jo{constructor(){a(this,Xo,new Map),a(this,Qo,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};c(Qo,this).then((()=>{for(const[t]of c(Xo,this))t.call(this,n)}))}addEventListener(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted)return void kt("LoopbackPort - cannot use an `aborted` signal.");const r=()=>this.removeEventListener(t,e);i=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}c(Xo,this).set(e,i)}removeEventListener(t,e){const n=c(Xo,this).get(e);null===n||void 0===n||n(),c(Xo,this).delete(e)}terminate(){for(const[,t]of c(Xo,this))null===t||void 0===t||t();c(Xo,this).clear()}}var $o=new WeakSet;class Zo{constructor(){let{name:t=null,port:e=null,verbosity:n=At()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,$o),this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){var i;if(null!==(i=sl._)&&void 0!==i&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(sl._||(sl._=new WeakMap)).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return S?Promise.all([gr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new ia("main","worker",t),this._messageHandler.on("ready",(function(){})),o($o,this,tl).call(this)}_initialize(){if(il._||el(Zo))return void this._setupFakeWorker();let{workerSrc:t}=Zo;try{Zo._isSameOrigin(window.location.href,t)||(t=Zo._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new ia("main","worker",e),i=()=>{s.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;e.addEventListener("error",(()=>{this._webWorker||i()}),{signal:s.signal}),n.on("test",(t=>{s.abort(),!this.destroyed&&t?(this._messageHandler=n,this._port=e,this._webWorker=e,o($o,this,tl).call(this)):i()})),n.on("ready",(t=>{if(s.abort(),this.destroyed)i();else try{r()}catch{this._setupFakeWorker()}}));const r=()=>{const t=new Uint8Array;n.send("test",t,[t.buffer])};return void r()}catch{Et("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){il._||(kt("Setting up fake worker."),il._=!0),Zo._setupFakeWorkerGlobal.then((t=>{var e,n;if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const i=new Jo;this._port=i;const s="fake".concat((nl._=(e=nl._,n=e++,e),n)),r=new ia(s+"_worker",s,i);t.setup(r,i),this._messageHandler=new ia(s,s+"_worker",i),o($o,this,tl).call(this)})).catch((t=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(t=sl._)||void 0===t||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var e;if(null===t||void 0===t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=null===(e=o(Zo,this,sl)._)||void 0===e?void 0:e.get(t.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Zo(t)}static get workerSrc(){if(Yr.workerSrc)return Yr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Mt(this,"_setupFakeWorkerGlobal",(async()=>{if(l(Zo,this,el))return l(Zo,this,el);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function tl(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}function el(t){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch{return null}}m=Zo;var nl={_:0},il={_:!1},sl={_:void 0};S&&(il._=o(m,m,!0),Yr.workerSrc||(Yr.workerSrc="./pdf.worker.mjs")),m._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||"null"===n.origin)return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},m._createCDNWrapper=t=>{const e='await import("'.concat(t,'");');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var rl=new WeakMap,al=new WeakMap,ol=new WeakMap,ll=new WeakMap,cl=new WeakMap,hl=new WeakSet;class ul{constructor(t,e,n,i,s){r(this,hl),a(this,rl,new Map),a(this,al,new Map),a(this,ol,new Map),a(this,ll,new Map),a(this,cl,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new ml,this.fontLoader=new js({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Mt(this,"annotationStorage",new Ds)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=R,a=Ts;switch(t){case"any":r=I;break;case"display":break;case"print":r=P;break;default:kt("getRenderingIntent - invalid intent: ".concat(t))}const o=r&P&&n instanceof Os?n:this.annotationStorage;switch(e){case j.DISABLE:r+=L;break;case j.ENABLE:break;case j.ENABLE_FORMS:r+=D;break;case j.ENABLE_STORAGE:r+=N,a=o.serializable;break;default:kt("getRenderingIntent - invalid annotationMode: ".concat(e))}i&&(r+=O),s&&(r+=F);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:r,cacheKey:[r,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=c(cl,this))||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of c(al,this).values())e.push(i._destroy());c(al,this).clear(),c(ol,this).clear(),c(ll,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then((()=>{var t;this.commonObjs.clear(),this.fontLoader.clear(),c(rl,this).clear(),this.filterFactory.destroy(),yo.cleanup(),null===(t=this._networkStream)||void 0===t||t.cancelAllRequests(new Ft("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{Ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function(t){let{value:n,done:i}=t;i?e.close():(Ct(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(async t=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:s}=this._fullReader;if(!n||!i){var r;if(this._lastProgress)null===(r=e.onProgress)||void 0===r||r.call(e,this._lastProgress);this._fullReader.onProgress=t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:s}})),t.on("GetRangeReader",((t,e)=>{Ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then((function(t){let{value:n,done:i}=t;i?e.close():(Ct(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{n.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(t=>{let{pdfInfo:n}=t;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Uo(n,this))})),t.on("DocException",(function(t){let n;switch(t.name){case"PasswordException":n=new Rt(t.message,t.code);break;case"InvalidPDFException":n=new Dt(t.message);break;case"MissingPDFException":n=new Nt(t.message);break;case"UnexpectedResponseException":n=new Lt(t.message,t.status);break;case"UnknownErrorException":n=new Pt(t.message,t.details);break;default:St("DocException - expected a valid Error.")}e._capability.reject(n)})),t.on("PasswordRequest",(t=>{if(h(cl,this,Promise.withResolvers()),e.onPassword){const i=t=>{t instanceof Error?c(cl,this).reject(t):c(cl,this).resolve({password:t})};try{e.onPassword(i,t.code)}catch(n){c(cl,this).reject(n)}}else c(cl,this).reject(new Rt(t.message,t.code));return c(cl,this).promise})),t.on("DataLoaded",(t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{if(this.destroyed)return;c(al,this).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(e=>{var n;let[i,s,r]=e;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:e,fontExtraProperties:a,pdfBug:o}=this._params;if("error"in r){const t=r.error;kt("Error during font loading: ".concat(t)),this.commonObjs.resolve(i,t);break}const l=o&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,h=new Bs(r,{disableFontFace:e,inspectFont:l});this.fontLoader.bind(h).catch((()=>t.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!a&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)}));break;case"CopyLocalImage":const{imageRef:u}=r;Ct(u,"The imageRef must be defined.");for(const t of c(al,this).values())for(const[,e]of t.objs)if((null===e||void 0===e?void 0:e.ref)===u)return e.dataLen?(this.commonObjs.resolve(i,structuredClone(e)),e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error("Got unknown common object type ".concat(s))}return null})),t.on("obj",(t=>{let[e,n,i,s]=t;if(this.destroyed)return;const r=c(al,this).get(n);var a;if(!r.objs.has(e))if(0!==r._intentStates.size)switch(i){case"Image":r.objs.resolve(e,s),(null===s||void 0===s?void 0:s.dataLen)>1e7&&(r._maybeCleanupAfterRender=!0);break;case"Pattern":r.objs.resolve(e,s);break;default:throw new Error("Got unknown object type ".concat(i))}else null===s||void 0===s||null===(a=s.bitmap)||void 0===a||a.close()})),t.on("DocProgress",(t=>{var n;this.destroyed||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(t)})),t.on("FetchStandardFontData",(async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(t)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t,e;this.annotationStorage.size<=0&&kt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null},i).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=c(ol,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&c(ll,this).set(n.refStr,t);const i=new Go(e,n,this,this._params.pdfBug);return c(al,this).set(e,i),i}));return c(ol,this).set(e,i),i}getPageIndex(t){return jo(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return o(hl,this,dl).call(this,"GetFieldObjects")}hasJSActions(){return o(hl,this,dl).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return o(hl,this,dl).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return o(hl,this,dl).call(this,"GetOptionalContentConfig").then((e=>new _a(e,t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(rl,this).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then((t=>{var e,n,i,s;return{info:t[0],metadata:t[1]?new ha(t[1]):null,contentDispositionFilename:null!==(e=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==e?e:null,contentLength:null!==(i=null===(s=this._fullReader)||void 0===s?void 0:s.contentLength)&&void 0!==i?i:null}}));return c(rl,this).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(al,this).values()){if(!t.cleanup())throw new Error("startCleanup: Page ".concat(t.pageNumber," is currently rendering."))}this.commonObjs.clear(),t||this.fontLoader.clear(),c(rl,this).clear(),this.filterFactory.destroy(!0),yo.cleanup()}}cachedPageNumber(t){var e;if(!jo(t))return null;const n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return null!==(e=c(ll,this).get(n))&&void 0!==e?e:null}}function dl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=c(rl,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return c(rl,this).set(t,i),i}const fl=Symbol("INITIAL_DATA");var pl=new WeakMap,gl=new WeakSet;class ml{constructor(){r(this,gl),a(this,pl,Object.create(null))}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const n=o(gl,this,vl).call(this,t);return n.promise.then((()=>e(n.data))),null}const n=c(pl,this)[t];if(!n||n.data===fl)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return n.data}has(t){const e=c(pl,this)[t];return!!e&&e.data!==fl}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=o(gl,this,vl).call(this,t);n.data=e,n.resolve()}clear(){for(const e in c(pl,this)){var t;const{data:n}=c(pl,this)[e];null===n||void 0===n||null===(t=n.bitmap)||void 0===t||t.close()}h(pl,this,Object.create(null))}*[Symbol.iterator](){for(const t in c(pl,this)){const{data:e}=c(pl,this)[t];e!==fl&&(yield[t,e])}}}function vl(t){var e;return(e=c(pl,this))[t]||(e[t]={...Promise.withResolvers(),data:fl})}var yl=new WeakMap;class bl{constructor(t){a(this,yl,null),h(yl,this,t),this.onContinue=null}get promise(){return c(yl,this).capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c(yl,this).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(yl,this).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(yl,this);return t.form||t.canvas&&(null===e||void 0===e?void 0:e.size)>0}}var wl=new WeakMap;class xl{constructor(t){let{callback:e,params:n,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}=t;a(this,wl,null),this.callback=e,this.params=n,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bl(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(t){var e,n;let{transparency:i=!1,optionalContentConfig:s}=t;if(this.cancelled)return;if(this._canvas){if(_l._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_l._.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:o,background:l}=this.params;this.gfx=new qr(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:i,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),c(wl,this)&&(window.cancelAnimationFrame(c(wl,this)),h(wl,this,null)),_l._.delete(this._canvas),this.callback(e||new ce("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var t;this.graphicsReady?(null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?h(wl,this,window.requestAnimationFrame((()=>{h(wl,this,null),this._nextBound().catch(this._cancelBound)}))):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),_l._.delete(this._canvas),this.callback())))}}var _l={_:new WeakSet};const Al="4.8.69",El="3634dab10";function kl(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function Sl(t){return Math.max(0,Math.min(255,255*t))}class Cl{static CMYK_G(t){let[e,n,i,s]=t;return["G",1-Math.min(1,.3*e+.59*i+.11*n+s)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_rgb(t){let[e]=t;return e=Sl(e),[e,e,e]}static G_HTML(t){let[e]=t;const n=kl(e);return"#".concat(n).concat(n).concat(n)}static RGB_G(t){let[e,n,i]=t;return["G",.3*e+.59*n+.11*i]}static RGB_rgb(t){return t.map(Sl)}static RGB_HTML(t){return"#".concat(t.map(kl).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(t){let[e,n,i,s]=t;return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,n+s)]}static CMYK_rgb(t){let[e,n,i,s]=t;return[Sl(1-Math.min(1,e+s)),Sl(1-Math.min(1,i+s)),Sl(1-Math.min(1,n+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,n,i]=t;const s=1-e,r=1-n,a=1-i;return["CMYK",s,r,a,Math.min(s,r,a)]}}class Tl{create(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(e,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),i}createElement(t){if("string"!==typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){St("Abstract method `_createSVG` called.")}}class Ml extends Tl{_createSVG(t){return document.createElementNS(re,t)}}class Il{static setupStorage(t,e,n,i,s){const r=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===s)break;t.addEventListener("input",(t=>{i.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?t.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===s)break;t.addEventListener("change",(t=>{i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===s)break;t.addEventListener("input",(t=>{i.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of n.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const n=t.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:s})}))}}static setAttributes(t){let{html:e,element:n,storage:i=null,intent:s,linkService:r}=t;const{attributes:a}=n,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(s));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}o&&r.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,n,i)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,s=t.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:s,linkService:n});const a="richText"!==s,o=t.div;if(o.append(r),t.viewport){const e="matrix(".concat(t.viewport.transform.join(","),")");o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const t=document.createTextNode(i.value);r.append(t),a&&Ro.shouldBuildText(i.name)&&l.push(t)}return{textDivs:l}}const c=[[i,-1,r]];for(;c.length>0;){var h,u;const[t,i,r]=c.at(-1);if(i+1===t.children.length){c.pop();continue}const o=t.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const t=document.createTextNode(o.value);l.push(t),r.append(t);continue}const f=null!==o&&void 0!==o&&null!==(h=o.attributes)&&void 0!==h&&h.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(r.append(f),o.attributes&&this.setAttributes({html:f,element:o,storage:e,intent:s,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,f]);else if(o.value){const t=document.createTextNode(o.value);a&&Ro.shouldBuildText(d)&&l.push(t),f.append(t)}}for(const d of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}const Rl=1e3,Pl=new WeakSet;function Dl(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class Nl{static create(t){switch(t.data.annotationType){case Q:return new Ul(t);case X:return new Gl(t);case dt:switch(t.data.fieldType){case"Tx":return new Yl(t);case"Btn":return t.data.radioButton?new Jl(t):t.data.checkBox?new Ql(t):new $l(t);case"Ch":return new Zl(t);case"Sig":return new Xl(t)}return new Kl(t);case ht:return new tc(t);case J:return new Rc(t);case $:return new Dc(t);case Z:return new Lc(t);case tt:return new Fc(t);case nt:return new Bc(t);case lt:return new Vc(t);case ct:return new Wc(t);case et:return new zc(t);case it:return new Hc(t);case st:return new qc(t);case rt:return new Gc(t);case at:return new Kc(t);case ot:return new Yc(t);case ut:return new Jc(t);default:return new Bl(t)}}}var Ll=new WeakMap,Ol=new WeakMap,Fl=new WeakMap,jl=new WeakSet;class Bl{constructor(t){let{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,jl),a(this,Ll,null),a(this,Ol,!1),a(this,Fl,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(t){let{titleObj:e,contentsObj:n,richText:i}=t;return!!(null!==e&&void 0!==e&&e.str||null!==n&&void 0!==n&&n.str||null!==i&&void 0!==i&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Bl._hasPopupData(this.data)}updateEdited(t){var e;if(!this.container)return;c(Ll,this)||h(Ll,this,{rect:this.data.rect.slice(0)});const{rect:n}=t;n&&o(jl,this,zl).call(this,n),null===(e=c(Fl,this))||void 0===e||e.popup.updateEdited(t)}resetEdited(){var t;c(Ll,this)&&(o(jl,this,zl).call(this,c(Ll,this).rect),null===(t=c(Fl,this))||void 0===t||t.popup.resetEdited(),h(Ll,this,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof Kl||(s.tabIndex=Rl);const{style:r}=s;if(r.zIndex=this.parent.zIndex++,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof tc){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,s),s}const{width:a,height:o}=Dl(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth="".concat(e.borderStyle.width,"px");const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e="calc(".concat(t,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))");r.borderRadius=e}else if(this instanceof Jl){const t="calc(".concat(a,"px * var(--scale-factor)) / calc(").concat(o,"px * var(--scale-factor))");r.borderRadius=t}switch(e.borderStyle.style){case ft:r.borderStyle="solid";break;case pt:r.borderStyle="dashed";break;case gt:kt("Unimplemented border style: beveled");break;case mt:kt("Unimplemented border style: inset");break;case vt:r.borderBottomStyle="solid"}const i=e.borderColor||null;i?(h(Ol,this,!0),r.borderColor=Wt.makeHexColor(0|i[0],0|i[1],0|i[2])):r.borderWidth=0}const l=Wt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:d,pageY:f}=i.rawDims;r.left="".concat(100*(l[0]-d)/c,"%"),r.top="".concat(100*(l[1]-f)/u,"%");const{rotation:p}=e;return e.hasOwnCanvas||0===p?(r.width="".concat(100*a/c,"%"),r.height="".concat(100*o/u,"%")):this.setRotation(p,s),s}setRotation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:r}=Dl(this.data.rect);let a,o;t%180===0?(a=100*s/n,o=100*r/i):(a=100*r/n,o=100*s/i),e.style.width="".concat(a,"%"),e.style.height="".concat(o,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,n)=>{const i=n.detail[t],s=i[0],r=i.slice(1);n.target.style[e]=Cl["".concat(s,"_HTML")](r),this.annotationStorage.setValue(this.data.id,{[e]:Cl["".concat(s,"_rgb")](r)})};return Mt(this,"_commonActions",{display:t=>{const{display:e}=t.detail,n=e%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const s=t[i]||n[i];null===s||void 0===s||s(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,s]of Object.entries(e)){const r=n[i];if(r){r({detail:{[i]:s},target:t}),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,s]=this.data.rect.map((t=>Math.fround(t)));if(8===t.length){const[r,a,o,l]=t.subarray(2,6);if(i===r&&s===a&&e===o&&n===l)return}const{style:r}=this.container;let a;if(c(Ol,this)){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(e,'">')],this.container.classList.add("hasBorder")}const o=i-e,l=s-n,{svgFactory:h}=this,u=h.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const d=h.createElement("defs");u.append(d);const f=h.createElement("clipPath"),p="clippath_".concat(this.data.id);f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let c=2,m=t.length;c<m;c+=8){var g;const n=t[c],i=t[c+1],r=t[c+2],u=t[c+3],d=h.createElement("rect"),p=(r-e)/o,m=(s-i)/l,v=(n-r)/o,y=(i-u)/l;d.setAttribute("x",p),d.setAttribute("y",m),d.setAttribute("width",v),d.setAttribute("height",y),f.append(d),null===(g=a)||void 0===g||g.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(y,'"/>'))}c(Ol,this)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){const{data:t}=this,e=h(Fl,this,new tc({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){St("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:s,exportValues:r}of i){if(-1===t)continue;if(s===e)continue;const i="string"===typeof r?r:null,a=document.querySelector('[data-element-id="'.concat(s,'"]'));!a||Pl.has(a)?n.push({id:s,exportValue:i,domElement:a}):kt("_getElementsByName - element not allowed: ".concat(s))}return n}for(const i of document.getElementsByName(t)){const{exportValue:t}=i,s=i.getAttribute("data-element-id");s!==e&&(Pl.has(i)&&n.push({id:s,exportValue:t,domElement:i}))}return n}show(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}function zl(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...t);const{width:l,height:c}=Dl(t);e.left="".concat(100*(t[0]-a)/s,"%"),e.top="".concat(100*(r-t[3]+o)/r,"%"),0===i?(e.width="".concat(100*l/s,"%"),e.height="".concat(100*c/r,"%")):this.setRotation(i)}var Vl=new WeakSet;class Ul extends Bl{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!(null===e||void 0===e||!e.ignoreBorder),createQuadrilaterals:!0}),r(this,Vl),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(o(Vl,this,Hl).call(this,n,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(o(Vl,this,ql).call(this,n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&o(Vl,this,Wl).call(this)}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),o(Vl,this,Wl).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const s=n.get(i);s&&(t[s]=()=>{var t;return null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),o(Vl,this,Wl).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),o(Vl,this,Wl).call(this),!this._fieldObjects)return kt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(t.onclick=()=>!1));t.onclick=()=>{null===n||void 0===n||n();const{fields:t,refs:i,include:s}=e,r=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const n of t){const t=this._fieldObjects[n]||[];for(const{id:n}of t)e.add(n)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===s&&r.push(n)}else for(const e of Object.values(this._fieldObjects))r.push(...e);const a=this.annotationStorage,o=[];for(const e of r){const{id:t}=e;switch(o.push(t),e.type){case"text":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{const n=e.defaultValue===e.exportValues;a.setValue(t,{value:n});break}case"combobox":case"listbox":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(t,'"]'));n&&(Pl.has(n)?n.dispatchEvent(new Event("resetform")):kt("_bindResetFormAction - element not allowed: ".concat(t)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function Wl(){this.container.setAttribute("data-internal-link","")}function Hl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>{var t;return null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,n),!1},o(Vl,this,Wl).call(this)}function ql(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),o(Vl,this,Wl).call(this)}class Gl extends Bl{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Kl extends Bl{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Vt.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,s){n.includes("mouse")?t.addEventListener(n,(t=>{var e;null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(n,(t=>{var r;if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}s&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(t)}}))}))}_setEventListeners(t,e,n,i){for(const[o,l]of n){var s,r,a;if("Action"===l||null!==(s=this.data.actions)&&void 0!==s&&s[l])"Focus"!==l&&"Blur"!==l||e||(e={focused:!1}),this._setEventListener(t,e,o,l,i),"Focus"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Wt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=t.style;let r;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(M*i))||1);r=Math.min(i,a(e/M))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(i,a(t/M))}s.fontSize="calc(".concat(r,"px * var(--scale-factor))"),s.color=Wt.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Yl extends Kl{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,n,i){const s=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=n),s.setValue(r.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=o.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};var s,r;if(this.data.multiLine)n=document.createElement("textarea"),n.textContent=null!==(s=h)&&void 0!==s?s:l,this.data.doNotScroll&&(n.style.overflowY="hidden");else n=document.createElement("input"),n.type="text",n.setAttribute("value",null!==(r=h)&&void 0!==r?r:l),this.data.doNotScroll&&(n.style.overflowX="hidden");this.data.hasOwnCanvas&&(n.hidden=!0),Pl.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Rl,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",(i=>{t.setValue(e,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),u.formattedValue=null})),n.addEventListener("resetform",(t=>{var e;const i=null!==(e=this.data.defaultFieldValue)&&void 0!==e?e:"";n.value=u.userValue=i,u.formattedValue=null}));let d=t=>{const{formattedValue:e}=u;null!==e&&void 0!==e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var a;n.addEventListener("focus",(t=>{var e;if(u.focused)return;const{target:n}=t;u.userValue&&(n.value=u.userValue),u.lastCommittedValue=n.value,u.commitKey=1,null!==(e=this.data.actions)&&void 0!==e&&e.Focus||(u.focused=!0)})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;u.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",t.setValue(e,{value:u.userValue.toString()}),n.target.value=u.userValue},formattedValue(n){const{formattedValue:i}=n.detail;u.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i),t.setValue(e,{formattedValue:i})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:n=>{var i;const{charLimit:s}=n.detail,{target:r}=n;if(0===s)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",s);let a=u.userValue;!a||a.length<=s||(a=a.slice(0,s),r.value=u.userValue=a,t.setValue(e,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)})),n.addEventListener("keydown",(t=>{var n;u.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(u.commitKey=3):i=2,-1===i)return;const{value:s}=t.target;u.lastCommittedValue!==s&&(u.lastCommittedValue=s,u.userValue=s,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const i=d;d=null,n.addEventListener("blur",(t=>{var n;if(!u.focused||!t.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(u.focused=!1);const{value:s}=t.target;var r;(u.userValue=s,u.lastCommittedValue!==s)&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:u.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}));i(t)})),null!==(a=this.data.actions)&&void 0!==a&&a.Keystroke&&n.addEventListener("beforeinput",(t=>{var n;u.lastCommittedValue=null;const{data:i,target:s}=t,{value:r,selectionStart:a,selectionEnd:o}=s;let l=a,c=o;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,a).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=r.substring(a).match(/^[^\w]*\w*/);t&&(c+=t[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(c+=1)}t.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(d&&n.addEventListener("blur",d),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(t,"px * var(--scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Xl extends Kl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Ql extends Kl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Pl.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=Rl,s.addEventListener("change",(i=>{const{name:s,checked:r}=i.target;for(const a of this._getElementsByName(s,n)){const n=r&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=n),t.setValue(a.id,{value:n})}t.setValue(n,{value:r})})),s.addEventListener("resetform",(t=>{const n=e.defaultFieldValue||"Off";t.target.checked=n===e.exportValue})),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",(e=>{const i={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};this._dispatchEventFromSandbox(i,e)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Jl extends Kl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if("string"===typeof i&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const r of this._getElementsByName(e.fieldName,n))t.setValue(r.id,{value:!1});const s=document.createElement("input");if(Pl.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=Rl,s.addEventListener("change",(e=>{const{name:i,checked:s}=e.target;for(const r of this._getElementsByName(i,n))t.setValue(r.id,{value:!1});t.setValue(n,{value:s})})),s.addEventListener("resetform",(t=>{const n=e.defaultFieldValue;t.target.checked=null!==n&&void 0!==n&&n===e.buttonValue})),this.enableScripting&&this.hasJSActions){const i=e.buttonValue;s.addEventListener("updatefromsandbox",(e=>{const s={value:e=>{const s=i===e.detail.value;for(const i of this._getElementsByName(e.target.name)){const e=s&&i.id===n;i.domElement&&(i.domElement.checked=e),t.setValue(i.id,{value:e})}}};this._dispatchEventFromSandbox(s,e)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $l extends Ul{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class Zl extends Kl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Pl.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Rl;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===e}));for(const c of this.data.options){const t=document.createElement("option");t.textContent=c.displayValue,t.value=c.exportValue,n.value.includes(c.exportValue)&&(t.setAttribute("selected",!0),s=!1),i.append(t)}let r=null;if(s){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),i.prepend(t),r=()=>{t.remove(),i.removeEventListener("input",r),r=null},i.addEventListener("input",r)}const a=t=>{const e=t?"value":"textContent",{options:n,multiple:s}=i;return s?Array.prototype.filter.call(n,(t=>t.selected)).map((t=>t[e])):-1===n.selectedIndex?null:n[n.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(n=>{const s={value(n){var s;null===(s=r)||void 0===s||s();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const t of i.options)t.selected=c.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){i.multiple=!0},remove(n){const s=i.options,r=n.detail.remove;if(s[r].selected=!1,i.remove(r),s.length>0){-1===Array.prototype.findIndex.call(s,(t=>t.selected))&&(s[0].selected=!0)}t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(n){const{index:s,displayValue:r,exportValue:c}=n.detail.insert,h=i.children[s],u=document.createElement("option");u.textContent=r,u.value=c,h?h.before(u):i.append(u),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:s}=n.detail;for(;0!==i.length;)i.remove(0);for(const t of s){const{displayValue:e,exportValue:n}=t,s=document.createElement("option");s.textContent=e,s.value=n,i.append(s)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const t of n.target.options)t.selected=i.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(s,n)})),i.addEventListener("input",(n=>{var i;const s=a(!0),r=a(!1);t.setValue(e,{value:s}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:r,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):i.addEventListener("input",(function(n){t.setValue(e,{value:a(!0)})})),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class tc extends Bl{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Bl._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new xc({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>"".concat(Xt).concat(t))).join(",")),this.container}}var ec=new WeakMap,nc=new WeakMap,ic=new WeakMap,sc=new WeakMap,rc=new WeakMap,ac=new WeakMap,oc=new WeakMap,lc=new WeakMap,cc=new WeakMap,hc=new WeakMap,uc=new WeakMap,dc=new WeakMap,fc=new WeakMap,pc=new WeakMap,gc=new WeakMap,mc=new WeakMap,vc=new WeakMap,yc=new WeakMap,bc=new WeakMap,wc=new WeakSet;class xc{constructor(t){let{container:e,color:n,elements:i,titleObj:s,modificationDate:l,contentsObj:u,richText:d,parent:f,rect:p,parentRect:g,open:m}=t;r(this,wc),a(this,ec,o(wc,this,Sc).bind(this)),a(this,nc,o(wc,this,Ic).bind(this)),a(this,ic,o(wc,this,Mc).bind(this)),a(this,sc,o(wc,this,Tc).bind(this)),a(this,rc,null),a(this,ac,null),a(this,oc,null),a(this,lc,null),a(this,cc,null),a(this,hc,null),a(this,uc,null),a(this,dc,!1),a(this,fc,null),a(this,pc,null),a(this,gc,null),a(this,mc,null),a(this,vc,null),a(this,yc,null),a(this,bc,!1),h(ac,this,e),h(vc,this,s),h(oc,this,u),h(mc,this,d),h(hc,this,f),h(rc,this,n),h(gc,this,p),h(uc,this,g),h(cc,this,i),h(lc,this,ye.toDateObject(l)),this.trigger=i.flatMap((t=>t.getElementsToTriggerPopup()));for(const r of this.trigger)r.addEventListener("click",c(sc,this)),r.addEventListener("mouseenter",c(ic,this)),r.addEventListener("mouseleave",c(nc,this)),r.classList.add("popupTriggerArea");for(const r of i){var v;null===(v=r.container)||void 0===v||v.addEventListener("keydown",c(ec,this))}c(ac,this).hidden=!0,m&&o(wc,this,Tc).call(this)}render(){if(c(fc,this))return;const t=h(fc,this,document.createElement("div"));if(t.className="popup",c(rc,this)){const e=t.style.outlineColor=Wt.makeHexColor(...c(rc,this));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)");else{const e=.7;t.style.backgroundColor=Wt.makeHexColor(...c(rc,this).map((t=>Math.floor(e*(255-t)+t))))}}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),({dir:n.dir,str:n.textContent}=c(vc,this)),t.append(e),c(lc,this)){const t=document.createElement("span");t.classList.add("popupDate"),t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(lc,this).valueOf()})),e.append(t)}const i=l(wc,this,_c);if(i)Il.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(c(oc,this));t.append(e)}c(ac,this).append(t)}_formatContents(t){let{str:e,dir:n}=t;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const t=s[r];i.append(document.createTextNode(t)),r<a-1&&i.append(document.createElement("br"))}return i}updateEdited(t){var e;let{rect:n,popupContent:i}=t;c(yc,this)||h(yc,this,{contentsObj:c(oc,this),richText:c(mc,this)}),n&&h(pc,this,null),i&&(h(mc,this,o(wc,this,kc).call(this,i)),h(oc,this,null)),null===(e=c(fc,this))||void 0===e||e.remove(),h(fc,this,null)}resetEdited(){var t;c(yc,this)&&(({contentsObj:i(h,[oc,this])._,richText:i(h,[mc,this])._}=c(yc,this)),h(yc,this,null),null===(t=c(fc,this))||void 0===t||t.remove(),h(fc,this,null),h(pc,this,null))}forceHide(){h(bc,this,this.isVisible),c(bc,this)&&(c(ac,this).hidden=!0)}maybeShow(){c(bc,this)&&(c(fc,this)||o(wc,this,Mc).call(this),h(bc,this,!1),c(ac,this).hidden=!1)}get isVisible(){return!1===c(ac,this).hidden}}function _c(t){const e=c(mc,t),n=c(oc,t);return null===e||void 0===e||!e.str||null!==n&&void 0!==n&&n.str&&n.str!==e.str?null:c(mc,t).html||null}function Ac(t){var e;return(null===(e=l(wc,t,_c))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.fontSize)||0}function Ec(t){var e;return(null===(e=l(wc,t,_c))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.color)||null}function kc(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(wc,this,Ec),fontSize:l(wc,this,Ac)?"calc(".concat(l(wc,this,Ac),"px * var(--scale-factor))"):""}};for(const s of t.split("\n"))e.push({name:"span",value:s,attributes:i});return n}function Sc(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&c(dc,this))&&o(wc,this,Tc).call(this)}function Cc(){if(null!==c(pc,this))return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:s}}}=c(hc,this);let r=!!c(uc,this),a=c(r?uc:gc,this);for(const h of c(cc,this))if(!a||null!==Wt.intersect(h.data.rect,a)){a=h.data.rect,r=!0;break}const o=Wt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=r?a[2]-a[0]+5:0,u=o[0]+l,d=o[1];h(pc,this,[100*(u-i)/e,100*(d-s)/n]);const{style:f}=c(ac,this);f.left="".concat(c(pc,this)[0],"%"),f.top="".concat(c(pc,this)[1],"%")}function Tc(){h(dc,this,!c(dc,this)),c(dc,this)?(o(wc,this,Mc).call(this),c(ac,this).addEventListener("click",c(sc,this)),c(ac,this).addEventListener("keydown",c(ec,this))):(o(wc,this,Ic).call(this),c(ac,this).removeEventListener("click",c(sc,this)),c(ac,this).removeEventListener("keydown",c(ec,this)))}function Mc(){c(fc,this)||this.render(),this.isVisible?c(dc,this)&&c(ac,this).classList.add("focused"):(o(wc,this,Cc).call(this),c(ac,this).hidden=!1,c(ac,this).style.zIndex=parseInt(c(ac,this).style.zIndex)+1e3)}function Ic(){c(ac,this).classList.remove("focused"),!c(dc,this)&&this.isVisible&&(c(ac,this).hidden=!0,c(ac,this).style.zIndex=parseInt(c(ac,this).style.zIndex)-1e3)}class Rc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=B.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Pc=new WeakMap;class Dc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),a(this,Pc,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:n}=Dl(t.rect),i=this.svgFactory.create(e,n,!0),s=h(Pc,this,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(Pc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Nc=new WeakMap;class Lc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),a(this,Nc,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:n}=Dl(t.rect),i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,r=h(Nc,this,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",e-s),r.setAttribute("height",n-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(Nc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Oc=new WeakMap;class Fc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),a(this,Oc,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:n}=Dl(t.rect),i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,r=h(Oc,this,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",e/2),r.setAttribute("cy",n/2),r.setAttribute("rx",e/2-s/2),r.setAttribute("ry",n/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(Oc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var jc=new WeakMap;class Bc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),a(this,jc,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i}}=this;if(!e)return this.container;const{width:s,height:r}=Dl(t),a=this.svgFactory.create(s,r,!0);let o=[];for(let c=0,h=e.length;c<h;c+=2){const n=e[c]-t[0],i=t[3]-e[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=h(jc,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(jc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class zc extends Bc{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Vc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Uc=new WeakMap;class Wc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),a(this,Uc,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?B.HIGHLIGHT:B.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:e,borderStyle:n,popupRef:i}}=this,{width:s,height:r}=Dl(t),a=this.svgFactory.create(s,r,!0);for(const o of e){let e=[];for(let n=0,s=o.length;n<s;n+=2){const i=o[n]-t[0],s=t[3]-o[n+1];e.push("".concat(i,",").concat(s))}e=e.join(" ");const i=this.svgFactory.createElement(this.svgElementName);c(Uc,this).push(i),i.setAttribute("points",e),i.setAttribute("stroke-width",n.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),a.append(i)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(a),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return c(Uc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class Hc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=B.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class qc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Gc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Kc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Yc extends Bl{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=B.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xc=new WeakMap,Qc=new WeakSet;class Jc extends Bl{constructor(t){var e;super(t,{isRenderable:!0}),r(this,Qc),a(this,Xc,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||0===e.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(e.name)?"paperclip":"pushpin",".svg"),e.fillAlpha&&e.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*e.fillAlpha),"%);"))),n.addEventListener("dblclick",o(Qc,this,$c).bind(this)),h(Xc,this,n);const{isMac:i}=Vt.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(i?t.metaKey:t.ctrlKey)&&o(Qc,this,$c).call(this)})),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return c(Xc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function $c(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}var Zc=new WeakMap,th=new WeakMap,eh=new WeakMap,nh=new WeakMap,ih=new WeakSet;class sh{constructor(t){let{div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:s,page:o,viewport:l,structTreeLayer:c}=t;r(this,ih),a(this,Zc,null),a(this,th,null),a(this,eh,new Map),a(this,nh,null),this.div=e,h(Zc,this,n),h(th,this,i),h(nh,this,c||null),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(eh,this).size>0}async render(t){const{annotations:e}=t,n=this.div;Ee(n,this.viewport);const i=new Map,s={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new Ml,annotationStorage:t.annotationStorage||new Ds,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const t=a.annotationType===ht;if(t){const t=i.get(a.id);if(!t)continue;s.elements=t}else{const{width:t,height:e}=Dl(a.rect);if(t<=0||e<=0)continue}s.data=a;const e=Nl.create(s);if(!e.isRenderable)continue;if(!t&&a.popupRef){const t=i.get(a.popupRef);t?t.push(e):i.set(a.popupRef,[e])}const n=e.render();var r;if(a.hidden&&(n.style.visibility="hidden"),await o(ih,this,rh).call(this,n,a.id),e._isEditable)c(eh,this).set(e.data.id,e),null===(r=this._annotationEditorUIManager)||void 0===r||r.renderAnnotationElement(e)}o(ih,this,ah).call(this)}update(t){let{viewport:e}=t;const n=this.div;this.viewport=e,Ee(n,{rotation:e.rotation}),o(ih,this,ah).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(c(eh,this).values())}getEditableAnnotation(t){return c(eh,this).get(t)}}async function rh(t,e){var n,i;const s=t.firstChild||t,r=s.id="".concat(Xt).concat(e),a=await(null===(n=c(nh,this))||void 0===n?void 0:n.getAriaAttributes(r));if(a)for(const[o,l]of a)s.setAttribute(o,l);this.div.append(t),null===(i=c(Zc,this))||void 0===i||i.moveElementInDOM(this.div,t,s,!1)}function ah(){if(!c(th,this))return;const t=this.div;for(const[e,n]of c(th,this)){const i=t.querySelector('[data-annotation-id="'.concat(e,'"]'));if(!i)continue;n.className="annotationContent";const{firstChild:s}=i;s?"CANVAS"===s.nodeName?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):i.append(n)}c(th,this).clear()}const oh=/\r\n?|\n/g;var lh=new WeakMap,ch=new WeakMap,hh=new WeakMap,uh=new WeakMap,dh=new WeakMap,fh=new WeakSet;class ph extends os{static get _keyboardManager(){const t=ph.prototype,e=t=>t.isEmpty(),n=ei.TRANSLATE_SMALL,i=ei.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new hn([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}constructor(t){super({...t,name:"freeTextEditor"}),r(this,fh),a(this,lh,void 0),a(this,ch,""),a(this,hh,"".concat(this.id,"-editor")),a(this,uh,null),a(this,dh,void 0),h(lh,this,t.color||ph._defaultColor||os._defaultLineColor),h(dh,this,t.fontSize||ph._defaultFontSize)}static initialize(t,e){os.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case z.FREETEXT_SIZE:ph._defaultFontSize=e;break;case z.FREETEXT_COLOR:ph._defaultColor=e}}updateParams(t,e){switch(t){case z.FREETEXT_SIZE:o(fh,this,gh).call(this,e);break;case z.FREETEXT_COLOR:o(fh,this,mh).call(this,e)}}static get defaultPropertiesToUpdate(){return[[z.FREETEXT_SIZE,ph._defaultFontSize],[z.FREETEXT_COLOR,ph._defaultColor||os._defaultLineColor]]}get propertiesToUpdate(){return[[z.FREETEXT_SIZE,c(dh,this)],[z.FREETEXT_COLOR,c(lh,this)]]}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-ph._internalPadding*t,-(ph._internalPadding+c(dh,this))*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(B.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),h(uh,this,new AbortController);const t=this._uiManager.combinedSignal(c(uh,this));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(hh,this)),this._isDraggable=!0,null===(t=c(uh,this))||void 0===t||t.abort(),h(uh,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(ch,this),e=h(ch,this,o(fh,this,vh).call(this).trimEnd());if(t===e)return;const n=t=>{h(ch,this,t),t?(o(fh,this,wh).call(this),this._uiManager.rebuild(this),o(fh,this,yh).call(this)):this.remove()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),o(fh,this,yh).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ph._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(hh,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(c(dh,this),"px * var(--scale-factor))"),n.color=c(lh,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Ye(this,this.div,["dblclick","keydown"]),this.width){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[c,h]=this.pageTranslation;let u,d;switch(this.rotation){case 0:u=t+(s[0]-c)/o,d=e+this.height-(s[1]-h)/l;break;case 90:u=t+(s[0]-c)/o,d=e-(s[1]-h)/l,[r,a]=[a,-r];break;case 180:u=t-this.width+(s[0]-c)/o,d=e-(s[1]-h)/l,[r,a]=[-r,-a];break;case 270:u=t+(s[0]-c-this.height*l)/o,d=e+(s[1]-h-this.width*o)/l,[r,a]=[-a,r]}this.setAt(u*n,d*i,r,a)}else this.setAt(t*n,e*i,this.width*n,this.height*i);o(fh,this,wh).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(1===n.length&&"text/plain"===n[0])return;t.preventDefault();const i=_h.call(ph,e.getData("text")||"").replaceAll(oh,"\n");if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const r=s.getRangeAt(0);if(!i.includes("\n"))return r.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:l}=r,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(oh,"")),t!==this.editorDiv){let e=c;for(const n of this.editorDiv.childNodes)n!==t?e.push(bh.call(ph,n)):e=u}c.push(a.nodeValue.slice(0,l).replaceAll(oh,""))}else if(a===this.editorDiv){let t=c,e=0;for(const n of this.editorDiv.childNodes)e++===l&&(t=u),t.push(bh.call(ph,n))}h(ch,this,"".concat(c.join("\n")).concat(i).concat(u.join("\n"))),o(fh,this,wh).call(this);const d=new Range;let f=c.reduce(((t,e)=>t+e.length),0);for(const{firstChild:o}of this.editorDiv.childNodes)if(o.nodeType===Node.TEXT_NODE){const t=o.nodeValue.length;if(f<=t){d.setStart(o,f),d.setEnd(o,f);break}f-=t}s.removeAllRanges(),s.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let i=null;if(t instanceof Rc){const{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:s,rotation:r,id:a,popupRef:o},textContent:l,textPosition:c,parent:{page:{pageNumber:h}}}=t;if(!l||0===l.length)return null;i=t={annotationType:B.FREETEXT,color:Array.from(n),fontSize:e,value:l.join("\n"),position:c,pageIndex:h-1,rect:s.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}const s=await super.deserialize(t,e,n);return h(dh,s,t.fontSize),h(lh,s,Wt.makeHexColor(...t.color)),h(ch,s,_h.call(ph,t.value)),s.annotationElementId=t.id||null,s._initialData=i,s}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ph._internalPadding*this.parentScale,n=this.getRect(e,e),i=os._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(lh,this)),s={annotationType:B.FREETEXT,color:i,fontSize:c(dh,this),value:o(fh,this,xh).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?s:this.annotationElementId&&!o(fh,this,Ah).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:n}=e;n.fontSize="calc(".concat(c(dh,this),"px * var(--scale-factor))"),n.color=c(lh,this),e.replaceChildren();for(const s of c(ch,this).split("\n")){const t=document.createElement("div");t.append(s?document.createTextNode(s):document.createElement("br")),e.append(t)}const i=ph._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:c(ch,this)}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}function gh(t){const e=t=>{this.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))"),this.translate(0,-(t-c(dh,this))*this.parentScale),h(dh,this,t),o(fh,this,yh).call(this)},n=c(dh,this);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:z.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function mh(t){const e=t=>{h(lh,this,this.editorDiv.style.color=t)},n=c(lh,this);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:z.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function vh(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=e)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(t.push(bh.call(v,i)),e=i)}return t.join("\n")}function yh(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,i=e.style.display,s=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),n=e.getBoundingClientRect(),e.remove(),e.style.display=i,e.classList.toggle("hidden",s)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}function bh(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(oh,"")}function wh(){if(this.editorDiv.replaceChildren(),c(ch,this))for(const t of c(ch,this).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}function xh(){return c(ch,this).replaceAll("\xa0"," ")}function _h(t){return t.replaceAll(" ","\xa0")}function Ah(t){const{value:e,fontSize:n,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some(((t,e)=>t!==i[e]))||t.pageIndex!==s}v=ph,(0,A.A)(ph,"_freeTextDefaultContent",""),(0,A.A)(ph,"_internalPadding",0),(0,A.A)(ph,"_defaultColor",null),(0,A.A)(ph,"_defaultFontSize",10),(0,A.A)(ph,"_type","freetext"),(0,A.A)(ph,"_editorType",B.FREETEXT);class Eh{toSVGPath(){St("Abstract method `toSVGPath` must be implemented.")}get box(){St("Abstract getter `box` must be implemented.")}serialize(t,e){St("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){St("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){St("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var kh=new WeakMap,Sh=new WeakMap,Ch=new WeakMap,Th=new WeakMap,Mh=new WeakMap,Ih=new WeakMap,Rh=new WeakMap,Ph=new WeakMap,Dh=new WeakMap,Nh=new WeakMap,Lh=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,jh=new WeakSet;class Bh{constructor(t,e,n,i,s){let{x:o,y:l}=t,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,jh),a(this,kh,void 0),a(this,Sh,[]),a(this,Ch,void 0),a(this,Th,void 0),a(this,Mh,[]),a(this,Ih,new Float64Array(18)),a(this,Rh,void 0),a(this,Ph,void 0),a(this,Dh,void 0),a(this,Nh,void 0),a(this,Lh,void 0),a(this,Oh,void 0),a(this,Fh,[]),h(kh,this,e),h(Oh,this,i*n),h(Th,this,s),c(Ih,this).set([NaN,NaN,NaN,NaN,o,l],6),h(Ch,this,u),h(Nh,this,Kh._*n),h(Dh,this,Yh._*n),h(Lh,this,n),c(Fh,this).push(o,l)}isEmpty(){return isNaN(c(Ih,this)[8])}add(t){var e;let{x:n,y:i}=t;h(Rh,this,n),h(Ph,this,i);const[s,r,a,o]=c(kh,this);let[l,u,d,f]=c(Ih,this).subarray(8,12);const p=n-d,g=i-f,m=Math.hypot(p,g);if(m<c(Dh,this))return!1;const v=m-c(Nh,this),y=v/m,b=y*p,w=y*g;let x=l,_=u;l=d,u=f,d+=b,f+=w,null===(e=c(Fh,this))||void 0===e||e.push(n,i);const A=b/v,E=-w/v*c(Oh,this),k=A*c(Oh,this);if(c(Ih,this).set(c(Ih,this).subarray(2,8),0),c(Ih,this).set([d+E,f+k],4),c(Ih,this).set(c(Ih,this).subarray(14,18),12),c(Ih,this).set([d-E,f-k],16),isNaN(c(Ih,this)[6]))return 0===c(Mh,this).length&&(c(Ih,this).set([l+E,u+k],2),c(Mh,this).push(NaN,NaN,NaN,NaN,(l+E-s)/a,(u+k-r)/o),c(Ih,this).set([l-E,u-k],14),c(Sh,this).push(NaN,NaN,NaN,NaN,(l-E-s)/a,(u-k-r)/o)),c(Ih,this).set([x,_,l,u,d,f],6),!this.isEmpty();c(Ih,this).set([x,_,l,u,d,f],6);return Math.abs(Math.atan2(_-u,x-l)-Math.atan2(w,b))<Math.PI/2?([l,u,d,f]=c(Ih,this).subarray(2,6),c(Mh,this).push(NaN,NaN,NaN,NaN,((l+d)/2-s)/a,((u+f)/2-r)/o),[l,u,x,_]=c(Ih,this).subarray(14,18),c(Sh,this).push(NaN,NaN,NaN,NaN,((x+l)/2-s)/a,((_+u)/2-r)/o),!0):([x,_,l,u,d,f]=c(Ih,this).subarray(0,6),c(Mh,this).push(((x+5*l)/6-s)/a,((_+5*u)/6-r)/o,((5*l+d)/6-s)/a,((5*u+f)/6-r)/o,((l+d)/2-s)/a,((u+f)/2-r)/o),[d,f,l,u,x,_]=c(Ih,this).subarray(12,18),c(Sh,this).push(((x+5*l)/6-s)/a,((_+5*u)/6-r)/o,((5*l+d)/6-s)/a,((5*u+f)/6-r)/o,((l+d)/2-s)/a,((u+f)/2-r)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const t=c(Mh,this),e=c(Sh,this);if(isNaN(c(Ih,this)[6])&&!this.isEmpty())return o(jh,this,Vh).call(this);const n=[];n.push("M".concat(t[4]," ").concat(t[5]));for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));o(jh,this,Wh).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));return o(jh,this,Uh).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,s,r){return new iu(t,e,n,i,s,r)}getOutlines(){var t,e;const n=c(Mh,this),i=c(Sh,this),s=c(Ih,this),[r,a,l,h]=c(kh,this),u=new Float64Array((null!==(t=null===(e=c(Fh,this))||void 0===e?void 0:e.length)&&void 0!==t?t:0)+2);for(let o=0,p=u.length-2;o<p;o+=2)u[o]=(c(Fh,this)[o]-r)/l,u[o+1]=(c(Fh,this)[o+1]-a)/h;if(u[u.length-2]=(c(Rh,this)-r)/l,u[u.length-1]=(c(Ph,this)-a)/h,isNaN(s[6])&&!this.isEmpty())return o(jh,this,Hh).call(this,u);const d=new Float64Array(c(Mh,this).length+24+c(Sh,this).length);let f=n.length;for(let o=0;o<f;o+=2)isNaN(n[o])?d[o]=d[o+1]=NaN:(d[o]=n[o],d[o+1]=n[o+1]);f=o(jh,this,Gh).call(this,d,f);for(let o=i.length-6;o>=6;o-=6)for(let t=0;t<6;t+=2)isNaN(i[o+t])?(d[f]=d[f+1]=NaN,f+=2):(d[f]=i[o+t],d[f+1]=i[o+t+1],f+=2);return o(jh,this,qh).call(this,d,f),this.newFreeDrawOutline(d,u,c(kh,this),c(Lh,this),c(Ch,this),c(Th,this))}}function zh(){const t=c(Ih,this).subarray(4,6),e=c(Ih,this).subarray(16,18),[n,i,s,r]=c(kh,this);return[(c(Rh,this)+(t[0]-e[0])/2-n)/s,(c(Ph,this)+(t[1]-e[1])/2-i)/r,(c(Rh,this)+(e[0]-t[0])/2-n)/s,(c(Ph,this)+(e[1]-t[1])/2-i)/r]}function Vh(){const[t,e,n,i]=c(kh,this),[s,r,a,l]=o(jh,this,zh).call(this);return"M".concat((c(Ih,this)[2]-t)/n," ").concat((c(Ih,this)[3]-e)/i," L").concat((c(Ih,this)[4]-t)/n," ").concat((c(Ih,this)[5]-e)/i," L").concat(s," ").concat(r," L").concat(a," ").concat(l," L").concat((c(Ih,this)[16]-t)/n," ").concat((c(Ih,this)[17]-e)/i," L").concat((c(Ih,this)[14]-t)/n," ").concat((c(Ih,this)[15]-e)/i," Z")}function Uh(t){const e=c(Sh,this);t.push("L".concat(e[4]," ").concat(e[5]," Z"))}function Wh(t){const[e,n,i,s]=c(kh,this),r=c(Ih,this).subarray(4,6),a=c(Ih,this).subarray(16,18),[l,h,u,d]=o(jh,this,zh).call(this);t.push("L".concat((r[0]-e)/i," ").concat((r[1]-n)/s," L").concat(l," ").concat(h," L").concat(u," ").concat(d," L").concat((a[0]-e)/i," ").concat((a[1]-n)/s))}function Hh(t){const e=c(Ih,this),[n,i,s,r]=c(kh,this),[a,l,h,u]=o(jh,this,zh).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/s,(e[3]-i)/r,NaN,NaN,NaN,NaN,(e[4]-n)/s,(e[5]-i)/r,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-n)/s,(e[17]-i)/r,NaN,NaN,NaN,NaN,(e[14]-n)/s,(e[15]-i)/r],0),this.newFreeDrawOutline(d,t,c(kh,this),c(Lh,this),c(Ch,this),c(Th,this))}function qh(t,e){const n=c(Sh,this);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+6}function Gh(t,e){const n=c(Ih,this).subarray(4,6),i=c(Ih,this).subarray(16,18),[s,r,a,l]=c(kh,this),[h,u,d,f]=o(jh,this,zh).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-r)/l,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-r)/l],e),e+24}var Kh={_:8},Yh={_:Kh._+2},Xh=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,$h=new WeakMap,Zh=new WeakMap,tu=new WeakMap,eu=new WeakMap,nu=new WeakSet;class iu extends Eh{constructor(t,e,n,i,s,l){super(),r(this,nu),a(this,Xh,void 0),a(this,Qh,null),a(this,Jh,void 0),a(this,$h,void 0),a(this,Zh,void 0),a(this,tu,void 0),a(this,eu,void 0),h(eu,this,t),h(Zh,this,e),h(Xh,this,n),h(tu,this,i),h(Jh,this,s),h($h,this,l),o(nu,this,au).call(this,l);const{x:u,y:d,width:f,height:p}=c(Qh,this);for(let r=0,a=t.length;r<a;r+=2)t[r]=(t[r]-u)/f,t[r+1]=(t[r+1]-d)/p;for(let r=0,a=e.length;r<a;r+=2)e[r]=(e[r]-u)/f,e[r+1]=(e[r+1]-d)/p}toSVGPath(){const t=["M".concat(c(eu,this)[4]," ").concat(c(eu,this)[5])];for(let e=6,n=c(eu,this).length;e<n;e+=6)isNaN(c(eu,this)[e])?t.push("L".concat(c(eu,this)[e+4]," ").concat(c(eu,this)[e+5])):t.push("C".concat(c(eu,this)[e]," ").concat(c(eu,this)[e+1]," ").concat(c(eu,this)[e+2]," ").concat(c(eu,this)[e+3]," ").concat(c(eu,this)[e+4]," ").concat(c(eu,this)[e+5]));return t.push("Z"),t.join(" ")}serialize(t,e){let[n,i,s,r]=t;const a=s-n,l=r-i;let h,u;switch(e){case 0:h=o(nu,this,su).call(this,c(eu,this),n,r,a,-l),u=o(nu,this,su).call(this,c(Zh,this),n,r,a,-l);break;case 90:h=o(nu,this,ru).call(this,c(eu,this),n,i,a,l),u=o(nu,this,ru).call(this,c(Zh,this),n,i,a,l);break;case 180:h=o(nu,this,su).call(this,c(eu,this),s,i,-a,l),u=o(nu,this,su).call(this,c(Zh,this),s,i,-a,l);break;case 270:h=o(nu,this,ru).call(this,c(eu,this),s,r,-a,-l),u=o(nu,this,ru).call(this,c(Zh,this),s,r,-a,-l)}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return c(Qh,this)}newOutliner(t,e,n,i,s){return new Bh(t,e,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(t,e){const{x:n,y:i,width:s,height:r}=c(Qh,this),[a,o,l,h]=c(Xh,this),u=s*l,d=r*h,f=n*l+a,p=i*h+o,g=this.newOutliner({x:c(Zh,this)[0]*u+f,y:c(Zh,this)[1]*d+p},c(Xh,this),c(tu,this),t,c($h,this),null!==e&&void 0!==e?e:c(Jh,this));for(let m=2;m<c(Zh,this).length;m+=2)g.add({x:c(Zh,this)[m]*u+f,y:c(Zh,this)[m+1]*d+p});return g.getOutlines()}get mustRemoveSelfIntersections(){return!0}}function su(t,e,n,i,s){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a]*i,r[a+1]=n+t[a+1]*s;return r}function ru(t,e,n,i,s){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a+1]*i,r[a+1]=n+t[a]*s;return r}function au(t){const e=c(eu,this);let n=e[4],i=e[5],s=n,r=i,a=n,o=i,l=n,u=i;const d=t?Math.max:Math.min;for(let c=6,h=e.length;c<h;c+=6){if(isNaN(e[c]))s=Math.min(s,e[c+4]),r=Math.min(r,e[c+5]),a=Math.max(a,e[c+4]),o=Math.max(o,e[c+5]),u<e[c+5]?(l=e[c+4],u=e[c+5]):u===e[c+5]&&(l=d(l,e[c+4]));else{const t=Wt.bezierBoundingBox(n,i,...e.slice(c,c+6));s=Math.min(s,t[0]),r=Math.min(r,t[1]),a=Math.max(a,t[2]),o=Math.max(o,t[3]),u<t[3]?(l=t[2],u=t[3]):u===t[3]&&(l=d(l,t[2]))}n=e[c+4],i=e[c+5]}const f=s-c(Jh,this),p=r-c(Jh,this),g=a-s+2*c(Jh,this),m=o-r+2*c(Jh,this);h(Qh,this,{x:f,y:p,width:g,height:m,lastPoint:[l,u]})}var ou=new WeakMap,lu=new WeakMap,cu=new WeakMap,hu=new WeakSet;class uu{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r(this,hu),a(this,ou,void 0),a(this,lu,[]),a(this,cu,[]);let s=1/0,o=-1/0,l=1/0,u=-1/0;const d=10**-4;for(const{x:r,y:a,width:h,height:b}of t){const t=Math.floor((r-e)/d)*d,n=Math.ceil((r+h+e)/d)*d,i=Math.floor((a-e)/d)*d,f=Math.ceil((a+b+e)/d)*d,p=[t,i,f,!0],g=[n,i,f,!1];c(lu,this).push(p,g),s=Math.min(s,t),o=Math.max(o,n),l=Math.min(l,i),u=Math.max(u,f)}const f=o-s+2*n,p=u-l+2*n,g=s-n,m=l-n,v=c(lu,this).at(i?-1:-2),y=[v[0],v[2]];for(const r of c(lu,this)){const[t,e,n]=r;r[0]=(t-g)/f,r[1]=(e-m)/p,r[2]=(n-m)/p}h(ou,this,{x:g,y:m,width:f,height:p,lastPoint:y})}getOutlines(){c(lu,this).sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));const t=[];for(const e of c(lu,this))e[3]?(t.push(...o(hu,this,mu).call(this,e)),o(hu,this,pu).call(this,e)):(o(hu,this,gu).call(this,e),t.push(...o(hu,this,mu).call(this,e)));return o(hu,this,du).call(this,t)}}function du(t){const e=[],n=new Set;for(const r of t){const[t,n,i]=r;e.push([t,n,r],[t,i,r])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let r=0,a=e.length;r<a;r+=2){const t=e[r][2],i=e[r+1][2];t.push(i),i.push(t),n.add(t),n.add(i)}const i=[];let s;for(;n.size>0;){const t=n.values().next().value;let[e,r,a,o,l]=t;n.delete(t);let c=e,h=r;for(s=[e,a],i.push(s);;){let t;if(n.has(o))t=o;else{if(!n.has(l))break;t=l}n.delete(t),[e,r,a,o,l]=t,c!==e&&(s.push(c,h,e,h===r?r:a),c=e),h=h===r?a:r}s.push(c,h)}return new bu(i,c(ou,this))}function fu(t){const e=c(cu,this);let n=0,i=e.length-1;for(;n<=i;){const s=n+i>>1,r=e[s][0];if(r===t)return s;r<t?n=s+1:i=s-1}return i+1}function pu(t){let[,e,n]=t;const i=o(hu,this,fu).call(this,e);c(cu,this).splice(i,0,[e,n])}function gu(t){let[,e,n]=t;const i=o(hu,this,fu).call(this,e);for(let s=i;s<c(cu,this).length;s++){const[t,i]=c(cu,this)[s];if(t!==e)break;if(t===e&&i===n)return void c(cu,this).splice(s,1)}for(let s=i-1;s>=0;s--){const[t,i]=c(cu,this)[s];if(t!==e)break;if(t===e&&i===n)return void c(cu,this).splice(s,1)}}function mu(t){const[e,n,i]=t,s=[[e,n,i]],r=o(hu,this,fu).call(this,i);for(let a=0;a<r;a++){const[t,n]=c(cu,this)[a];for(let i=0,r=s.length;i<r;i++){const[,a,o]=s[i];if(!(n<=a||o<=t))if(a>=t)if(o>n)s[i][1]=n;else{if(1===r)return[];s.splice(i,1),i--,r--}else s[i][2]=t,o>n&&s.push([e,n,o])}}return s}var vu=new WeakMap,yu=new WeakMap;class bu extends Eh{constructor(t,e){super(),a(this,vu,void 0),a(this,yu,void 0),h(yu,this,t),h(vu,this,e)}toSVGPath(){const t=[];for(const e of c(yu,this)){let[n,i]=e;t.push("M".concat(n," ").concat(i));for(let s=2;s<e.length;s+=2){const r=e[s],a=e[s+1];r===n?(t.push("V".concat(a)),i=a):a===i&&(t.push("H".concat(r)),n=r)}t.push("Z")}return t.join(" ")}serialize(t,e){let[n,i,s,r]=t;const a=[],o=s-n,l=r-i;for(const h of c(yu,this)){const t=new Array(h.length);for(let e=0;e<h.length;e+=2)t[e]=n+h[e]*o,t[e+1]=r-h[e+1]*l;a.push(t)}return a}get box(){return c(vu,this)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class wu extends Bh{newFreeDrawOutline(t,e,n,i,s,r){return new xu(t,e,n,i,s,r)}get classNamesForDrawing(){return["highlight","free"]}}class xu extends iu{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,n,i,s){return new wu(t,e,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var _u=new WeakMap,Au=new WeakMap,Eu=new WeakMap,ku=new WeakMap,Su=new WeakMap,Cu=new WeakMap,Tu=new WeakMap,Mu=new WeakMap,Iu=new WeakMap,Ru=new WeakMap,Pu=new WeakMap,Du=new WeakSet;class Nu{static get _keyboardManager(){return Mt(this,"_keyboardManager",new hn([[["Escape","mac+Escape"],Nu.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Nu.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Nu.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Nu.prototype._moveToPrevious],[["Home","mac+Home"],Nu.prototype._moveToBeginning],[["End","mac+End"],Nu.prototype._moveToEnd]]))}constructor(t){var e;let{editor:n=null,uiManager:i=null}=t;r(this,Du),a(this,_u,null),a(this,Au,null),a(this,Eu,void 0),a(this,ku,null),a(this,Su,!1),a(this,Cu,!1),a(this,Tu,null),a(this,Mu,void 0),a(this,Iu,null),a(this,Ru,null),a(this,Pu,void 0),n?(h(Cu,this,!1),h(Pu,this,z.HIGHLIGHT_COLOR),h(Tu,this,n)):(h(Cu,this,!0),h(Pu,this,z.HIGHLIGHT_DEFAULT_COLOR)),h(Ru,this,(null===n||void 0===n?void 0:n._uiManager)||i),h(Mu,this,c(Ru,this)._eventBus),h(Eu,this,(null===n||void 0===n?void 0:n.color)||(null===(e=c(Ru,this))||void 0===e?void 0:e.highlightColors.values().next().value)||"#FFFF98"),Vu._||(Vu._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const t=h(_u,this,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(Ru,this)._signal;t.addEventListener("click",o(Du,this,ju).bind(this),{signal:e}),t.addEventListener("keydown",o(Du,this,Fu).bind(this),{signal:e});const n=h(Au,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(Eu,this),t.append(n),t}renderMainDropdown(){const t=h(ku,this,o(Du,this,Lu).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(_u,this))return void o(Du,this,ju).call(this,t);const e=t.target.getAttribute("data-color");e&&o(Du,this,Ou).call(this,e,t)}_moveToNext(t){var e,n;l(Du,this,zu)?t.target!==c(_u,this)?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(n=c(ku,this).firstChild)||void 0===n||n.focus():o(Du,this,ju).call(this,t)}_moveToPrevious(t){var e,n;t.target!==(null===(e=c(ku,this))||void 0===e?void 0:e.firstChild)&&t.target!==c(_u,this)?(l(Du,this,zu)||o(Du,this,ju).call(this,t),null===(n=t.target.previousSibling)||void 0===n||n.focus()):l(Du,this,zu)&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){var e;l(Du,this,zu)?null===(e=c(ku,this).firstChild)||void 0===e||e.focus():o(Du,this,ju).call(this,t)}_moveToEnd(t){var e;l(Du,this,zu)?null===(e=c(ku,this).lastChild)||void 0===e||e.focus():o(Du,this,ju).call(this,t)}hideDropdown(){var t,e;null===(t=c(ku,this))||void 0===t||t.classList.add("hidden"),null===(e=c(Iu,this))||void 0===e||e.abort(),h(Iu,this,null)}_hideDropdownFromKeyboard(){var t;c(Cu,this)||(l(Du,this,zu)?(this.hideDropdown(),c(_u,this).focus({preventScroll:!0,focusVisible:c(Su,this)})):null===(t=c(Tu,this))||void 0===t||t.unselect())}updateColor(t){if(c(Au,this)&&(c(Au,this).style.backgroundColor=t),!c(ku,this))return;const e=c(Ru,this).highlightColors.values();for(const n of c(ku,this).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;null===(t=c(_u,this))||void 0===t||t.remove(),h(_u,this,null),h(Au,this,null),null===(e=c(ku,this))||void 0===e||e.remove(),h(ku,this,null)}}function Lu(){const t=document.createElement("div"),e=c(Ru,this)._signal;t.addEventListener("contextmenu",me,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of c(Ru,this).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",Vu._[n]);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=i,s.setAttribute("aria-selected",i===c(Eu,this)),s.addEventListener("click",o(Du,this,Ou).bind(this,i),{signal:e}),t.append(s)}return t.addEventListener("keydown",o(Du,this,Fu).bind(this),{signal:e}),t}function Ou(t,e){e.stopPropagation(),c(Mu,this).dispatch("switchannotationeditorparams",{source:this,type:c(Pu,this),value:t})}function Fu(t){y._keyboardManager.exec(this,t)}function ju(t){if(l(Du,this,zu))return void this.hideDropdown();if(h(Su,this,0===t.detail),c(Iu,this)||(h(Iu,this,new AbortController),window.addEventListener("pointerdown",o(Du,this,Bu).bind(this),{signal:c(Ru,this).combinedSignal(c(Iu,this))})),c(ku,this))return void c(ku,this).classList.remove("hidden");const e=h(ku,this,o(Du,this,Lu).call(this));c(_u,this).append(e)}function Bu(t){var e;null!==(e=c(ku,this))&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}function zu(t){return c(ku,t)&&!c(ku,t).classList.contains("hidden")}y=Nu;var Vu={_:null},Uu=new WeakMap,Wu=new WeakMap,Hu=new WeakMap,qu=new WeakMap,Gu=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,$u=new WeakMap,Zu=new WeakMap,td=new WeakMap,ed=new WeakMap,nd=new WeakMap,id=new WeakMap,sd=new WeakMap,rd=new WeakMap,ad=new WeakSet;class od extends os{static get _keyboardManager(){const t=od.prototype;return Mt(this,"_keyboardManager",new hn([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),r(this,ad),a(this,Uu,null),a(this,Wu,0),a(this,Hu,void 0),a(this,qu,null),a(this,Gu,null),a(this,Ku,null),a(this,Yu,null),a(this,Xu,0),a(this,Qu,null),a(this,Ju,null),a(this,$u,null),a(this,Zu,!1),a(this,td,null),a(this,ed,void 0),a(this,nd,null),a(this,id,""),a(this,sd,void 0),a(this,rd,""),this.color=t.color||od._defaultColor,h(sd,this,t.thickness||od._defaultThickness),h(ed,this,t.opacity||od._defaultOpacity),h(Hu,this,t.boxes||null),h(rd,this,t.methodOfCreation||""),h(id,this,t.text||""),this._isDraggable=!1,t.highlightId>-1?(h(Zu,this,!0),o(ad,this,cd).call(this,t),o(ad,this,pd).call(this)):c(Hu,this)&&(h(Uu,this,t.anchorNode),h(Wu,this,t.anchorOffset),h(Yu,this,t.focusNode),h(Xu,this,t.focusOffset),o(ad,this,ld).call(this),o(ad,this,pd).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:c(Zu,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(sd,this),methodOfCreation:c(rd,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,e){var n;os.initialize(t,e),od._defaultColor||(od._defaultColor=(null===(n=e.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,e){switch(t){case z.HIGHLIGHT_DEFAULT_COLOR:od._defaultColor=e;break;case z.HIGHLIGHT_THICKNESS:od._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return c(td,this)}updateParams(t,e){switch(t){case z.HIGHLIGHT_COLOR:o(ad,this,hd).call(this,e);break;case z.HIGHLIGHT_THICKNESS:o(ad,this,ud).call(this,e)}}static get defaultPropertiesToUpdate(){return[[z.HIGHLIGHT_DEFAULT_COLOR,od._defaultColor],[z.HIGHLIGHT_THICKNESS,od._defaultThickness]]}get propertiesToUpdate(){return[[z.HIGHLIGHT_COLOR,this.color||od._defaultColor],[z.HIGHLIGHT_THICKNESS,c(sd,this)||od._defaultThickness],[z.HIGHLIGHT_FREE,c(Zu,this)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(h(Gu,this,new Nu({editor:this})),t.addColorPicker(c(Gu,this))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(o(ad,this,yd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,o(ad,this,yd).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){o(ad,this,fd).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(o(ad,this,pd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)o(ad,this,fd).call(this);else if(t){var n;o(ad,this,pd).call(this,t),e=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(t),this.show(this._isVisible),e&&this.select()}rotate(t){const{drawLayer:e}=this.parent;let n;c(Zu,this)?(t=(t-this.rotation+360)%360,n=gd.call(od,c(Ju,this).box,t)):n=gd.call(od,this,t),e.rotate(c($u,this),t),e.rotate(c(nd,this),t),e.updateBox(c($u,this),n),e.updateBox(c(nd,this),gd.call(od,c(Ku,this).box,t))}render(){if(this.div)return this.div;const t=super.render();c(id,this)&&(t.setAttribute("aria-label",c(id,this)),t.setAttribute("role","mark")),c(Zu,this)?t.classList.add("free"):this.div.addEventListener("keydown",o(ad,this,md).bind(this),{signal:this._uiManager._signal});const e=h(Qu,this,document.createElement("div"));t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=c(qu,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Ye(this,c(Qu,this),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(c(nd,this),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(c(nd,this),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:o(ad,this,vd).call(this,!0);break;case 1:case 3:o(ad,this,vd).call(this,!1)}}select(){var t,e;super.select(),c(nd,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.removeClass(c(nd,this),"hovered"),null===(e=this.parent)||void 0===e||e.drawLayer.addClass(c(nd,this),"selected"))}unselect(){var t;super.unselect(),c(nd,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.removeClass(c(nd,this),"selected"),c(Zu,this)||o(ad,this,vd).call(this,!1))}get _mustFixPosition(){return!c(Zu,this)}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(t),this.parent&&(this.parent.drawLayer.show(c($u,this),t),this.parent.drawLayer.show(c(nd,this),t))}static startHighlighting(t,e,n){let{target:i,x:s,y:r}=n;const{x:a,y:l,width:c,height:h}=i.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u),f=e=>{u.abort(),o(od,this,_d).call(this,t,e)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",(t=>{t.preventDefault(),t.stopPropagation()}),{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",me,{signal:d}),i.addEventListener("pointermove",o(od,this,xd).bind(this,t),{signal:d}),this._freeHighlight=new wu({x:s,y:r},[a,l,c,h],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static async deserialize(t,e,n){let i=null;if(t instanceof Hc){const{data:{quadPoints:e,rect:n,rotation:s,id:r,color:a,opacity:o,popupRef:l},parent:{page:{pageNumber:c}}}=t;i=t={annotationType:B.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:e,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:s,id:r,deleted:!1,popupRef:l}}else if(t instanceof Wc){const{data:{inkLists:e,rect:n,rotation:s,id:r,color:a,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:c}}}=t;i=t={annotationType:B.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:e,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:s,id:r,deleted:!1,popupRef:l}}const{color:s,quadPoints:r,inkLists:a,opacity:l}=t,u=await super.deserialize(t,e,n);u.color=Wt.makeHexColor(...s),h(ed,u,l||1),a&&h(sd,u,t.thickness),u.annotationElementId=t.id||null,u._initialData=i;const[d,f]=u.pageDimensions,[p,g]=u.pageTranslation;if(r){const t=h(Hu,u,[]);for(let e=0;e<r.length;e+=8)t.push({x:(r[e]-p)/d,y:1-(r[e+1]-g)/f,width:(r[e+2]-r[e])/d,height:(r[e+1]-r[e+5])/f});o(ad,u,ld).call(u),o(ad,u,pd).call(u),u.rotate(u.rotation)}else if(a){h(Zu,u,!0);const t=a[0],n={x:t[0]-p,y:f-(t[1]-g)},i=new wu(n,[0,0,d,f],1,c(sd,u)/2,!0,.001);for(let e=0,a=t.length;e<a;e+=2)n.x=t[e]-p,n.y=f-(t[e+1]-g),i.add(n);const{id:s,clipPathId:r}=e.drawLayer.draw(i,u.color,u._defaultOpacity,!0);o(ad,u,cd).call(u,{highlightOutlines:i.getOutlines(),highlightId:s,clipPathId:r}),o(ad,u,pd).call(u)}return u}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),n=os._colorManager.convert(this.color),i={annotationType:B.HIGHLIGHT,color:n,opacity:c(ed,this),thickness:c(sd,this),quadPoints:o(ad,this,bd).call(this),outlines:o(ad,this,wd).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:o(ad,this,yd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!o(ad,this,Ad).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function ld(){const t=new uu(c(Hu,this),.001);h(Ju,this,t.getOutlines()),({x:this.x,y:this.y,width:this.width,height:this.height}=c(Ju,this).box);const e=new uu(c(Hu,this),.0025,.001,"ltr"===this._uiManager.direction);h(Ku,this,e.getOutlines());const{lastPoint:n}=c(Ku,this).box;h(td,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function cd(t){let{highlightOutlines:e,highlightId:n,clipPathId:i}=t;h(Ju,this,e);if(h(Ku,this,e.getNewOutline(c(sd,this)/2+1.5,.0025)),n>=0)h($u,this,n),h(qu,this,i),this.parent.drawLayer.finalizeLine(n,e),h(nd,this,this.parent.drawLayer.drawOutline(c(Ku,this)));else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c($u,this),e),this.parent.drawLayer.updateBox(c($u,this),gd.call(b,c(Ju,this).box,(t-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(nd,this),c(Ku,this)),this.parent.drawLayer.updateBox(c(nd,this),gd.call(b,c(Ku,this).box,t))}const{x:s,y:r,width:a,height:o}=e.box;switch(this.rotation){case 0:this.x=s,this.y=r,this.width=a,this.height=o;break;case 90:{const[t,e]=this.parentDimensions;this.x=r,this.y=1-s,this.width=a*e/t,this.height=o*t/e;break}case 180:this.x=1-s,this.y=1-r,this.width=a,this.height=o;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-r,this.y=s,this.width=a*e/t,this.height=o*t/e;break}}const{lastPoint:l}=c(Ku,this).box;h(td,this,[(l[0]-s)/a,(l[1]-r)/o])}function hd(t){const e=(t,e)=>{var n,i,s;this.color=t,null===(n=this.parent)||void 0===n||n.drawLayer.changeColor(c($u,this),t),null===(i=c(Gu,this))||void 0===i||i.updateColor(t),h(ed,this,e),null===(s=this.parent)||void 0===s||s.drawLayer.changeOpacity(c($u,this),e)},n=this.color,i=c(ed,this);this.addCommands({cmd:e.bind(this,t,b._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:z.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}function ud(t){const e=c(sd,this),n=t=>{h(sd,this,t),o(ad,this,dd).call(this,t)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:z.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}function dd(t){if(!c(Zu,this))return;o(ad,this,cd).call(this,{highlightOutlines:c(Ju,this).getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}function fd(){null!==c($u,this)&&this.parent&&(this.parent.drawLayer.remove(c($u,this)),h($u,this,null),this.parent.drawLayer.remove(c(nd,this)),h(nd,this,null))}function pd(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===c($u,this)&&(({id:i(h,[$u,this])._,clipPathId:i(h,[qu,this])._}=t.drawLayer.draw(c(Ju,this),this.color,c(ed,this))),h(nd,this,t.drawLayer.drawOutline(c(Ku,this))),c(Qu,this)&&(c(Qu,this).style.clipPath=c(qu,this)))}function gd(t,e){let{x:n,y:i,width:s,height:r}=t;switch(e){case 90:return{x:1-i-r,y:n,width:r,height:s};case 180:return{x:1-n-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-n-s,width:r,height:s}}return{x:n,y:i,width:s,height:r}}function md(t){b._keyboardManager.exec(this,t)}function vd(t){if(!c(Uu,this))return;const e=window.getSelection();t?e.setPosition(c(Uu,this),c(Wu,this)):e.setPosition(c(Yu,this),c(Xu,this))}function yd(){return c(Zu,this)?this.rotation:0}function bd(){if(c(Zu,this))return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,s=c(Hu,this),r=new Float32Array(8*s.length);let a=0;for(const{x:o,y:l,width:c,height:h}of s){const s=o*t+n,u=(1-l-h)*e+i;r[a]=r[a+4]=s,r[a+1]=r[a+3]=u,r[a+2]=r[a+6]=s+c*t,r[a+5]=r[a+7]=u+h*e,a+=8}return r}function wd(t){return c(Ju,this).serialize(t,o(ad,this,yd).call(this))}function xd(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}function _d(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function Ad(t){const{color:e}=this._initialData;return t.color.some(((t,n)=>t!==e[n]))}b=od,(0,A.A)(od,"_defaultColor",null),(0,A.A)(od,"_defaultOpacity",1),(0,A.A)(od,"_defaultThickness",12),(0,A.A)(od,"_type","highlight"),(0,A.A)(od,"_editorType",B.HIGHLIGHT),(0,A.A)(od,"_freeHighlightId",-1),(0,A.A)(od,"_freeHighlight",null),(0,A.A)(od,"_freeHighlightClipId","");var Ed=new WeakMap,kd=new WeakMap,Sd=new WeakMap,Cd=new WeakMap,Td=new WeakMap,Md=new WeakMap,Id=new WeakMap,Rd=new WeakMap,Pd=new WeakMap,Dd=new WeakMap,Nd=new WeakMap,Ld=new WeakMap,Od=new WeakMap,Fd=new WeakSet;class jd extends os{constructor(t){super({...t,name:"inkEditor"}),r(this,Fd),a(this,Ed,0),a(this,kd,0),a(this,Sd,null),a(this,Cd,new Path2D),a(this,Td,!1),a(this,Md,null),a(this,Id,!1),a(this,Rd,!1),a(this,Pd,null),a(this,Dd,null),a(this,Nd,0),a(this,Ld,0),a(this,Od,null),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){os.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case z.INK_THICKNESS:jd._defaultThickness=e;break;case z.INK_COLOR:jd._defaultColor=e;break;case z.INK_OPACITY:jd._defaultOpacity=e/100}}updateParams(t,e){switch(t){case z.INK_THICKNESS:o(Fd,this,Bd).call(this,e);break;case z.INK_COLOR:o(Fd,this,zd).call(this,e);break;case z.INK_OPACITY:o(Fd,this,Vd).call(this,e)}}static get defaultPropertiesToUpdate(){return[[z.INK_THICKNESS,jd._defaultThickness],[z.INK_COLOR,jd._defaultColor||os._defaultLineColor],[z.INK_OPACITY,Math.round(100*jd._defaultOpacity)]]}get propertiesToUpdate(){var t;return[[z.INK_THICKNESS,this.thickness||jd._defaultThickness],[z.INK_COLOR,this.color||jd._defaultColor||os._defaultLineColor],[z.INK_OPACITY,Math.round(100*(null!==(t=this.opacity)&&void 0!==t?t:jd._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(o(Fd,this,ef).call(this),o(Fd,this,nf).call(this)),this.isAttachedToDOM||(this.parent.add(this),o(Fd,this,sf).call(this)),o(Fd,this,ff).call(this)))}remove(){var t;null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(Sd,this)&&(clearTimeout(c(Sd,this)),h(Sd,this,null)),null===(t=c(Pd,this))||void 0===t||t.disconnect(),h(Pd,this,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,n=this.width*t,i=this.height*e;this.setDimensions(n,i)}enableEditMode(){c(Td,this)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,o(Fd,this,$d).call(this))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),o(Fd,this,Zd).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){c(Td,this)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),h(Td,this,!0),this.div.classList.add("disabled"),o(Fd,this,ff).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!c(Td,this)&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),o(Fd,this,Hd).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),o(Fd,this,qd).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),o(Fd,this,tf).call(this,t)}canvasPointerleave(t){o(Fd,this,tf).call(this,t)}get isResizable(){return!this.isEmpty()&&c(Td,this)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,i,s,r]=o(Fd,this,Ud).call(this);if(this.setAt(n,i,0,0),this.setDims(s,r),o(Fd,this,ef).call(this),this.width){const[n,i]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*i),this.setAt(t*n,e*i,this.width*n,this.height*i),h(Rd,this,!0),o(Fd,this,sf).call(this),this.setDims(this.width*n,this.height*i),o(Fd,this,Jd).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return o(Fd,this,nf).call(this),this.div}setDimensions(t,e){const n=Math.round(t),i=Math.round(e);if(c(Nd,this)===n&&c(Ld,this)===i)return;h(Nd,this,n),h(Ld,this,i),this.canvas.style.visibility="hidden";const[s,r]=this.parentDimensions;this.width=t/s,this.height=e/r,this.fixAndSetPosition(),c(Td,this)&&o(Fd,this,rf).call(this,t,e),o(Fd,this,sf).call(this),o(Fd,this,Jd).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,e,n){if(t instanceof Wc)return null;const i=await super.deserialize(t,e,n);i.thickness=t.thickness,i.color=Wt.makeHexColor(...t.color),i.opacity=t.opacity;const[s,r]=i.pageDimensions,a=i.width*s,l=i.height*r,c=i.parentScale,u=t.thickness/2;h(Td,i,!0),h(Nd,i,Math.round(a)),h(Ld,i,Math.round(l));const{paths:d,rect:f,rotation:p}=t;for(let{bezier:h}of d){h=cf.call(jd,h,f,p);const t=[];i.paths.push(t);let e=c*(h[0]-u),n=c*(h[1]-u);for(let i=2,r=h.length;i<r;i+=6){const s=c*(h[i]-u),r=c*(h[i+1]-u),a=c*(h[i+2]-u),o=c*(h[i+3]-u),l=c*(h[i+4]-u),d=c*(h[i+5]-u);t.push([[e,n],[s,r],[a,o],[l,d]]),e=l,n=d}const s=o(jd,this,of).call(this,t);i.bezierPath2D.push(s)}const g=o(Fd,i,uf).call(i);return h(kd,i,Math.max(os.MIN_SIZE,g[2]-g[0])),h(Ed,i,Math.max(os.MIN_SIZE,g[3]-g[1])),o(Fd,i,rf).call(i,a,l),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=os._colorManager.convert(this.ctx.strokeStyle);return{annotationType:B.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:o(Fd,this,hf).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}function Bd(t){const e=t=>{this.thickness=t,o(Fd,this,ff).call(this)},n=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:z.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function zd(t){const e=t=>{this.color=t,o(Fd,this,Jd).call(this)},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:z.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Vd(t){const e=t=>{this.opacity=t,o(Fd,this,Jd).call(this)};t/=100;const n=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:z.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Ud(){const{parentRotation:t,parentDimensions:[e,n]}=this;switch(t){case 90:return[0,n,n,e];case 180:return[e,n,e,n];case 270:return[e,0,n,e];default:return[0,0,e,n]}}function Wd(){const{ctx:t,color:e,opacity:n,thickness:i,parentScale:s,scaleFactor:r}=this;t.lineWidth=i*s/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle="".concat(e).concat(function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}(n))}function Hd(t,e){this.canvas.addEventListener("contextmenu",me,{signal:this._uiManager._signal}),o(Fd,this,Zd).call(this),h(Md,this,new AbortController);const n=this._uiManager.combinedSignal(c(Md,this));var i;(this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:n}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:n}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:n}),this.isEditing=!0,c(Rd,this))||(h(Rd,this,!0),o(Fd,this,sf).call(this),this.thickness||(this.thickness=w._defaultThickness),this.color||(this.color=w._defaultColor||os._defaultLineColor),null!==(i=this.opacity)&&void 0!==i||(this.opacity=w._defaultOpacity));this.currentPath.push([t,e]),h(Id,this,!1),o(Fd,this,Wd).call(this),h(Od,this,(()=>{o(Fd,this,Yd).call(this),c(Od,this)&&window.requestAnimationFrame(c(Od,this))})),window.requestAnimationFrame(c(Od,this))}function qd(t,e){const[n,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===n&&e===i)return;const s=this.currentPath;let r=c(Cd,this);if(s.push([t,e]),h(Id,this,!0),s.length<=2)return r.moveTo(...s[0]),void r.lineTo(t,e);3===s.length&&(h(Cd,this,r=new Path2D),r.moveTo(...s[0])),o(Fd,this,Xd).call(this,r,...s.at(-3),...s.at(-2),t,e)}function Gd(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);c(Cd,this).lineTo(...t)}function Kd(t,e){let n;if(h(Od,this,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),o(Fd,this,qd).call(this,t,e),o(Fd,this,Gd).call(this),1!==this.currentPath.length)n=o(Fd,this,Qd).call(this);else{const i=[t,e];n=[[i,i.slice(),i.slice(),i]]}const i=c(Cd,this),s=this.currentPath;this.currentPath=[],h(Cd,this,new Path2D);this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(n),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(o(Fd,this,ef).call(this),o(Fd,this,nf).call(this)),o(Fd,this,ff).call(this))},mustExec:!0})}function Yd(){if(!c(Id,this))return;h(Id,this,!1);const t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),n=e.map((t=>t[0])),i=e.map((t=>t[1])),{ctx:s}=(Math.min(...n),Math.max(...n),Math.min(...i),Math.max(...i),this);s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)s.stroke(r);s.stroke(c(Cd,this)),s.restore()}function Xd(t,e,n,i,s,r,a){const o=(e+i)/2,l=(n+s)/2,c=(i+r)/2,h=(s+a)/2;t.bezierCurveTo(o+2*(i-o)/3,l+2*(s-l)/3,c+2*(i-c)/3,h+2*(s-h)/3,c,h)}function Qd(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let n,[i,s]=t[0];for(n=1;n<t.length-2;n++){const[r,a]=t[n],[o,l]=t[n+1],c=(r+o)/2,h=(a+l)/2,u=[i+2*(r-i)/3,s+2*(a-s)/3],d=[c+2*(r-c)/3,h+2*(a-h)/3];e.push([[i,s],u,d,[c,h]]),[i,s]=[c,h]}const[r,a]=t[n],[o,l]=t[n+1],c=[i+2*(r-i)/3,s+2*(a-s)/3],h=[o+2*(r-o)/3,l+2*(a-l)/3];return e.push([[i,s],c,h,[o,l]]),e}function Jd(){if(this.isEmpty())return void o(Fd,this,af).call(this);o(Fd,this,Wd).call(this);const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),o(Fd,this,af).call(this);for(const n of this.bezierPath2D)e.stroke(n)}function $d(){if(c(Dd,this))return;h(Dd,this,new AbortController);const t=this._uiManager.combinedSignal(c(Dd,this));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})}function Zd(){var t;null===(t=this.pointerdownAC)||void 0===t||t.abort(),this.pointerdownAC=null}function tf(t){var e;null===(e=c(Md,this))||void 0===e||e.abort(),h(Md,this,null),o(Fd,this,$d).call(this),c(Sd,this)&&clearTimeout(c(Sd,this)),h(Sd,this,setTimeout((()=>{h(Sd,this,null),this.canvas.removeEventListener("contextmenu",me)}),10)),o(Fd,this,Kd).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function ef(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function nf(){h(Pd,this,new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}))),c(Pd,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var t;null===(t=c(Pd,this))||void 0===t||t.disconnect(),h(Pd,this,null)}),{once:!0})}function sf(){if(!c(Rd,this))return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),o(Fd,this,af).call(this)}function rf(t,e){const n=o(Fd,this,df).call(this),i=(t-n)/c(kd,this),s=(e-n)/c(Ed,this);this.scaleFactor=Math.min(i,s)}function af(){const t=o(Fd,this,df).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function of(t){const e=new Path2D;for(let n=0,i=t.length;n<i;n++){const[i,s,r,a]=t[n];0===n&&e.moveTo(...i),e.bezierCurveTo(s[0],s[1],r[0],r[1],a[0],a[1])}return e}function lf(t,e,n){const[i,s,r,a]=e;switch(n){case 0:for(let e=0,n=t.length;e<n;e+=2)t[e]+=i,t[e+1]=a-t[e+1];break;case 90:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=t[e+1]+i,t[e+1]=n+s}break;case 180:for(let e=0,n=t.length;e<n;e+=2)t[e]=r-t[e],t[e+1]+=s;break;case 270:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=r-t[e+1],t[e+1]=a-n}break;default:throw new Error("Invalid rotation")}return t}function cf(t,e,n){const[i,s,r,a]=e;switch(n){case 0:for(let e=0,n=t.length;e<n;e+=2)t[e]-=i,t[e+1]=a-t[e+1];break;case 90:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=t[e+1]-s,t[e+1]=n-i}break;case 180:for(let e=0,n=t.length;e<n;e+=2)t[e]=r-t[e],t[e+1]-=s;break;case 270:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=a-t[e+1],t[e+1]=r-n}break;default:throw new Error("Invalid rotation")}return t}function hf(t,e,n,i){const s=[],r=this.thickness/2,a=t*e+r,o=t*n+r;for(const l of this.paths){const e=[],n=[];for(let i=0,s=l.length;i<s;i++){const[r,c,h,u]=l[i];if(r[0]===u[0]&&r[1]===u[1]&&1===s){const i=t*r[0]+a,s=t*r[1]+o;e.push(i,s),n.push(i,s);break}const d=t*r[0]+a,f=t*r[1]+o,p=t*c[0]+a,g=t*c[1]+o,m=t*h[0]+a,v=t*h[1]+o,y=t*u[0]+a,b=t*u[1]+o;0===i&&(e.push(d,f),n.push(d,f)),e.push(p,g,m,v,y,b),n.push(p,g),i===s-1&&n.push(y,b)}s.push({bezier:lf.call(w,e,i,this.rotation),points:lf.call(w,n,i,this.rotation)})}return s}function uf(){let t=1/0,e=-1/0,n=1/0,i=-1/0;for(const s of this.paths)for(const[r,a,o,l]of s){const s=Wt.bezierBoundingBox(...r,...a,...o,...l);t=Math.min(t,s[0]),n=Math.min(n,s[1]),e=Math.max(e,s[2]),i=Math.max(i,s[3])}return[t,n,e,i]}function df(){return c(Td,this)?Math.ceil(this.thickness*this.parentScale):0}function ff(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!c(Td,this))return void o(Fd,this,Jd).call(this);const e=o(Fd,this,uf).call(this),n=o(Fd,this,df).call(this);h(kd,this,Math.max(os.MIN_SIZE,e[2]-e[0])),h(Ed,this,Math.max(os.MIN_SIZE,e[3]-e[1]));const i=Math.ceil(n+c(kd,this)*this.scaleFactor),s=Math.ceil(n+c(Ed,this)*this.scaleFactor),[r,a]=this.parentDimensions;this.width=i/r,this.height=s/a,this.setAspectRatio(i,s);const l=this.translationX,u=this.translationY;this.translationX=-e[0],this.translationY=-e[1],o(Fd,this,sf).call(this),o(Fd,this,Jd).call(this),h(Nd,this,i),h(Ld,this,s),this.setDims(i,s);const d=t?n/this.scaleFactor/2:0;this.translate(l-this.translationX-d,u-this.translationY-d)}w=jd,(0,A.A)(jd,"_defaultColor",null),(0,A.A)(jd,"_defaultOpacity",1),(0,A.A)(jd,"_defaultThickness",1),(0,A.A)(jd,"_type","ink"),(0,A.A)(jd,"_editorType",B.INK);var pf=new WeakMap,gf=new WeakMap,mf=new WeakMap,vf=new WeakMap,yf=new WeakMap,bf=new WeakMap,wf=new WeakMap,xf=new WeakMap,_f=new WeakMap,Af=new WeakMap,Ef=new WeakMap,kf=new WeakSet;class Sf extends os{constructor(t){super({...t,name:"stampEditor"}),r(this,kf),a(this,pf,null),a(this,gf,null),a(this,mf,null),a(this,vf,null),a(this,yf,null),a(this,bf,""),a(this,wf,null),a(this,xf,null),a(this,_f,null),a(this,Af,!1),a(this,Ef,!1),h(vf,this,t.bitmapUrl),h(yf,this,t.bitmapFile)}static initialize(t,e){os.initialize(t,e)}static get supportedTypes(){return Mt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>"image/".concat(t))))}static get supportedTypesStr(){return Mt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(B.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!(null===(t=this.altTextData)||void 0===t||!t.altText)}}static computeTelemetryFinalData(t){var e,n;const i=t.get("hasAltText");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:r}=t||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:s,height:r,channels:i.length/(s*r)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var t,e;c(gf,this)&&(h(pf,this,null),this._uiManager.imageManager.deleteId(c(gf,this)),null===(t=c(wf,this))||void 0===t||t.remove(),h(wf,this,null),null===(e=c(xf,this))||void 0===e||e.disconnect(),h(xf,this,null),c(_f,this)&&(clearTimeout(c(_f,this)),h(_f,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(c(gf,this)&&null===c(wf,this)&&o(kf,this,Mf).call(this),this.isAttachedToDOM||this.parent.add(this))):c(gf,this)&&o(kf,this,Mf).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(mf,this)||c(pf,this)||c(vf,this)||c(yf,this)||c(gf,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(pf,this)?o(kf,this,If).call(this):o(kf,this,Mf).call(this),this.width&&!this.annotationElementId){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i)}return this.div}copyCanvas(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=224);const{width:i,height:s}=c(pf,this),r=new ke;let a=c(pf,this),l=i,h=s,u=null;if(e){var d,f;if(i>e||s>e){const t=Math.min(e/i,e/s);l=Math.floor(i*t),h=Math.floor(s*t)}u=document.createElement("canvas");const t=u.width=Math.ceil(l*r.sx),n=u.height=Math.ceil(h*r.sy);c(Af,this)||(a=o(kf,this,Pf).call(this,t,n));const p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";"none"!==this._uiManager.hcmFilter?m="black":null!==(d=(f=window).matchMedia)&&void 0!==d&&d.call(f,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",m="#42414d");const v=15,y=v*r.sx,b=v*r.sy,w=new OffscreenCanvas(2*y,2*b),x=w.getContext("2d");x.fillStyle=g,x.fillRect(0,0,2*y,2*b),x.fillStyle=m,x.fillRect(0,0,y,b),x.fillRect(y,b,y,b),p.fillStyle=p.createPattern(w,"repeat"),p.fillRect(0,0,t,n),p.drawImage(a,0,0,a.width,a.height,0,0,t,n)}let p=null;if(n){let e,n;if(r.symmetric&&a.width<t&&a.height<t)e=a.width,n=a.height;else if(a=c(pf,this),i>t||s>t){const r=Math.min(t/i,t/s);e=Math.floor(i*r),n=Math.floor(s*r),c(Af,this)||(a=o(kf,this,Pf).call(this,e,n))}const l=new OffscreenCanvas(e,n).getContext("2d",{willReadFrequently:!0});l.drawImage(a,0,0,a.width,a.height,0,0,e,n),p={width:e,height:n,data:l.getImageData(0,0,e,n).data}}return{canvas:u,width:l,height:h,imageData:p}}getImageForAltText(){return c(wf,this)}static async deserialize(t,e,n){let i=null;if(t instanceof Yc){var s;const{data:{rect:r,rotation:a,id:o,structParent:l,popupRef:c},container:h,parent:{page:{pageNumber:u}}}=t,d=h.querySelector("canvas"),f=n.imageManager.getFromCanvas(h.id,d);d.remove();const p=(null===(s=await e._structTree.getAriaAttributes("".concat(Xt).concat(o)))||void 0===s?void 0:s.get("aria-label"))||"";i=t={annotationType:B.STAMP,bitmapId:f.id,bitmap:f.bitmap,pageIndex:u-1,rect:r.slice(0),rotation:a,id:o,deleted:!1,accessibilityData:{decorative:!1,altText:p},isSvg:!1,structParent:l,popupRef:c}}const r=await super.deserialize(t,e,n),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:u,accessibilityData:d}=t;c&&n.imageManager.isValidId(c)?(h(gf,r,c),o&&h(pf,r,o)):h(vf,r,l),h(Af,r,u);const[f,p]=r.pageDimensions;return r.width=(a[2]-a[0])/f,r.height=(a[3]-a[1])/p,r.annotationElementId=t.id||null,d&&(r.altTextData=d),r._initialData=i,h(Ef,r,!!i),r}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:B.STAMP,bitmapId:c(gf,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(Af,this),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=o(kf,this,Nf).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const t=o(kf,this,Of).call(this,n);if(t.isSame)return null;var r;if(t.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(r=this._initialData.structParent)&&void 0!==r?r:-1}if(n.id=this.annotationElementId,null===e)return n;e.stamps||(e.stamps=new Map);const a=c(Af,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(c(gf,this))){if(c(Af,this)){const t=e.stamps.get(c(gf,this));a>t.area&&(t.area=a,t.serialized.bitmap.close(),t.serialized.bitmap=o(kf,this,Nf).call(this,!1))}}else e.stamps.set(c(gf,this),{area:a,serialized:n}),n.bitmap=o(kf,this,Nf).call(this,!1);return n}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}function Cf(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(h(pf,this,t.bitmap),e||(h(gf,this,t.id),h(Af,this,t.isSvg)),t.file&&h(bf,this,t.file.name),o(kf,this,If).call(this)):this.remove()}function Tf(){if(h(mf,this,null),this._uiManager.enableWaiting(!1),c(wf,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(pf,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(pf,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}function Mf(){if(c(gf,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(c(gf,this)).then((t=>o(kf,this,Cf).call(this,t,!0))).finally((()=>o(kf,this,Tf).call(this)));if(c(vf,this)){const t=c(vf,this);return h(vf,this,null),this._uiManager.enableWaiting(!0),void h(mf,this,this._uiManager.imageManager.getFromUrl(t).then((t=>o(kf,this,Cf).call(this,t))).finally((()=>o(kf,this,Tf).call(this))))}if(c(yf,this)){const t=c(yf,this);return h(yf,this,null),this._uiManager.enableWaiting(!0),void h(mf,this,this._uiManager.imageManager.getFromFile(t).then((t=>o(kf,this,Cf).call(this,t))).finally((()=>o(kf,this,Tf).call(this))))}const t=document.createElement("input");t.type="file",t.accept=x.supportedTypesStr;const e=this._uiManager._signal;h(mf,this,new Promise((n=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),o(kf,this,Cf).call(this,e)}else this.remove();n()}),{signal:e}),t.addEventListener("cancel",(()=>{this.remove(),n()}),{signal:e})})).finally((()=>o(kf,this,Tf).call(this)))),t.click()}function If(){const{div:t}=this;let{width:e,height:n}=c(pf,this);const[i,s]=this.pageDimensions,r=.75;if(this.width)e=this.width*i,n=this.height*s;else if(e>r*i||n>r*s){const t=Math.min(r*i/e,r*s/n);e*=t,n*=t}const[a,l]=this.parentDimensions;this.setDims(e*a/i,n*l/s),this._uiManager.enableWaiting(!1);const u=h(wf,this,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),o(kf,this,Df).call(this,e,n),o(kf,this,Lf).call(this),c(Ef,this)||(this.parent.addUndoableEditor(this),h(Ef,this,!0)),this._reportTelemetry({action:"inserted_image"}),c(bf,this)&&u.setAttribute("aria-label",c(bf,this))}function Rf(t,e){var n;const[i,s]=this.parentDimensions;this.width=t/i,this.height=e/s,null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==c(_f,this)&&clearTimeout(c(_f,this));h(_f,this,setTimeout((()=>{h(_f,this,null),o(kf,this,Df).call(this,t,e)}),200))}function Pf(t,e){const{width:n,height:i}=c(pf,this);let s=n,r=i,a=c(pf,this);for(;s>2*t||r>2*e;){const n=s,i=r;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(s,r);o.getContext("2d").drawImage(a,0,0,n,i,0,0,s,r),a=o.transferToImageBitmap()}return a}function Df(t,e){const n=new ke,i=Math.ceil(t*n.sx),s=Math.ceil(e*n.sy),r=c(wf,this);if(!r||r.width===i&&r.height===s)return;r.width=i,r.height=s;const a=c(Af,this)?c(pf,this):o(kf,this,Pf).call(this,i,s),l=r.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(a,0,0,a.width,a.height,0,0,i,s)}function Nf(t){if(t){if(c(Af,this)){const t=this._uiManager.imageManager.getSvgUrl(c(gf,this));if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=c(pf,this));return t.getContext("2d").drawImage(c(pf,this),0,0),t.toDataURL()}if(c(Af,this)){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*ae.PDF_TO_CSS_UNITS),i=Math.round(this.height*e*ae.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,i);return s.getContext("2d").drawImage(c(pf,this),0,0,c(pf,this).width,c(pf,this).height,0,0,n,i),s.transferToImageBitmap()}return structuredClone(c(pf,this))}function Lf(){this._uiManager._signal&&(h(xf,this,new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&o(kf,this,Rf).call(this,e.width,e.height)}))),c(xf,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var t;null===(t=c(xf,this))||void 0===t||t.disconnect(),h(xf,this,null)}),{once:!0}))}function Of(t){var e;const{rect:n,pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.rect.every(((t,e)=>Math.abs(t-n[e])<1)),a=t.pageIndex===i,o=((null===(e=t.accessibilityData)||void 0===e?void 0:e.alt)||"")===s;return{isSame:r&&a&&o,isSameAltText:o}}x=Sf,(0,A.A)(Sf,"_type","stamp"),(0,A.A)(Sf,"_editorType",B.STAMP);var Ff=new WeakMap,jf=new WeakMap,Bf=new WeakMap,zf=new WeakMap,Vf=new WeakMap,Uf=new WeakMap,Wf=new WeakMap,Hf=new WeakMap,qf=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,Yf=new WeakMap,Xf=new WeakSet;class Qf{constructor(t){let{uiManager:e,pageIndex:n,div:i,structTreeLayer:s,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:p}=t;r(this,Xf),a(this,Ff,void 0),a(this,jf,!1),a(this,Bf,null),a(this,zf,null),a(this,Vf,null),a(this,Uf,new Map),a(this,Wf,!1),a(this,Hf,!1),a(this,qf,!1),a(this,Gf,null),a(this,Kf,null),a(this,Yf,void 0);const g=[...np._.values()];if(!Qf._initialized){Qf._initialized=!0;for(const t of g)t.initialize(p,e)}e.registerEditorTypes(g),h(Yf,this,e),this.pageIndex=n,this.div=i,h(Ff,this,o),h(Bf,this,l),this.viewport=f,h(Gf,this,d),this.drawLayer=u,this._structTree=s,c(Yf,this).addLayer(this)}get isEmpty(){return 0===c(Uf,this).size}get isInvisible(){return this.isEmpty&&c(Yf,this).getMode()===B.NONE}updateToolbar(t){c(Yf,this).updateToolbar(t)}updateMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c(Yf,this).getMode();switch(o(Xf,this,ep).call(this),t){case B.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case B.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case B.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of np._.values())e.toggle("".concat(n._type,"Editing"),t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===(null===(e=c(Gf,this))||void 0===e?void 0:e.div)}addInkEditorIfNeeded(t){if(c(Yf,this).getMode()!==B.INK)return;if(!t)for(const e of c(Uf,this).values())if(e.isEmpty())return void e.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){c(Yf,this).setEditingState(t)}addCommands(t){c(Yf,this).addCommands(t)}toggleDrawing(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!t)}togglePointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=c(Bf,this))||void 0===t||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of c(Uf,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(Yf,this).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!c(Bf,this))return;const e=c(Bf,this).getEditableAnnotations();for(const n of e){if(n.hide(),c(Yf,this).isDeletedAnnotationElement(n.data.id))continue;if(t.has(n.data.id))continue;const e=await this.deserialize(n);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){h(qf,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const s of c(Uf,this).values()){var n;s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(e.set(s.annotationElementId,s),null===(n=this.getEditableAnnotation(s.annotationElementId))||void 0===n||n.show(),s.remove()):t.set(s.annotationElementId,s))}if(c(Bf,this)){const n=c(Bf,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(c(Yf,this).isDeletedAnnotationElement(n))continue;let s=e.get(n);s?(s.resetAnnotationElement(i),s.show(!1),i.show()):(s=t.get(n),s&&(c(Yf,this).addChangedExistingAnnotation(s),s.renderAnnotationElement(i)&&s.show(!1)),i.show())}}o(Xf,this,ep).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of np._.values())i.remove("".concat(s._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),h(qf,this,!1)}getEditableAnnotation(t){var e;return(null===(e=c(Bf,this))||void 0===e?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(Yf,this).getActive()!==t&&c(Yf,this).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,null!==(t=c(Gf,this))&&void 0!==t&&t.div&&!c(Kf,this)){h(Kf,this,new AbortController);const t=c(Yf,this).combinedSignal(c(Kf,this));c(Gf,this).div.addEventListener("pointerdown",o(Xf,this,Jf).bind(this),{signal:t}),c(Gf,this).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,null!==(t=c(Gf,this))&&void 0!==t&&t.div&&c(Kf,this)&&(c(Kf,this).abort(),h(Kf,this,null),c(Gf,this).div.classList.remove("highlighting"))}enableClick(){if(c(zf,this))return;h(zf,this,new AbortController);const t=c(Yf,this).combinedSignal(c(zf,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;null===(t=c(zf,this))||void 0===t||t.abort(),h(zf,this,null)}attach(t){c(Uf,this).set(t.id,t);const{annotationElementId:e}=t;e&&c(Yf,this).isDeletedAnnotationElement(e)&&c(Yf,this).removeDeletedAnnotationElement(t)}detach(t){var e;c(Uf,this).delete(t.id),null===(e=c(Ff,this))||void 0===e||e.removePointerInTextLayer(t.contentDiv),!c(qf,this)&&t.annotationElementId&&c(Yf,this).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(Yf,this).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,c(Hf,this)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(Yf,this).addDeletedAnnotationElement(t.annotationElementId),os.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),c(Yf,this).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),c(Yf,this).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!c(Vf,this)&&(t._focusEventsAllowed=!1,h(Vf,this,setTimeout((()=>{h(Vf,this,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:c(Yf,this)._signal}),n.focus())}),0))),t._structTreeParentId=null===(e=c(Ff,this))||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return c(Yf,this).getId()}combinedSignal(t){return c(Yf,this).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return null===(t=l(Xf,this,$f))||void 0===t?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){c(Yf,this).updateToolbar(t),c(Yf,this).updateMode(t);const{offsetX:n,offsetY:i}=o(Xf,this,tp).call(this),s=this.getNextId(),r=o(Xf,this,Zf).call(this,{parent:this,id:s,x:n,y:i,uiManager:c(Yf,this),isCentered:!0,...e});r&&this.add(r)}async deserialize(t){var e,n;return await(null===(e=np._.get(null!==(n=t.annotationType)&&void 0!==n?n:t.annotationEditorType))||void 0===e?void 0:e.deserialize(t,this,c(Yf,this)))||null}createAndAddNewEditor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),s=o(Xf,this,Zf).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:c(Yf,this),isCentered:e,...n});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(o(Xf,this,tp).call(this),!0)}setSelected(t){c(Yf,this).setSelected(t)}toggleSelected(t){c(Yf,this).toggleSelected(t)}unselect(t){c(Yf,this).unselect(t)}pointerup(t){const{isMac:e}=Vt.platform;0!==t.button||t.ctrlKey&&e||t.target===this.div&&c(Wf,this)&&(h(Wf,this,!1),c(jf,this)?c(Yf,this).getMode()!==B.STAMP?this.createAndAddNewEditor(t,!1):c(Yf,this).unselectAll():h(jf,this,!0))}pointerdown(t){if(c(Yf,this).getMode()===B.HIGHLIGHT&&this.enableTextSelection(),c(Wf,this))return void h(Wf,this,!1);const{isMac:e}=Vt.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;h(Wf,this,!0);const n=c(Yf,this).getActive();h(jf,this,!n||n.isEmpty())}findNewParent(t,e,n){const i=c(Yf,this).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}destroy(){var t;(null===(t=c(Yf,this).getActive())||void 0===t?void 0:t.parent)===this&&(c(Yf,this).commitOrRemove(),c(Yf,this).setActiveEditor(null)),c(Vf,this)&&(clearTimeout(c(Vf,this)),h(Vf,this,null));for(const n of c(Uf,this).values()){var e;null===(e=c(Ff,this))||void 0===e||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,c(Uf,this).clear(),c(Yf,this).removeLayer(this)}render(t){let{viewport:e}=t;this.viewport=e,Ee(this.div,e);for(const n of c(Yf,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(t){let{viewport:e}=t;c(Yf,this).commitOrRemove(),o(Xf,this,ep).call(this);const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Ee(this.div,{rotation:i}),n!==i)for(const s of c(Uf,this).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(Yf,this).viewParameters.realScale}}function Jf(t){c(Yf,this).unselectAll();const{target:e}=t;if(e===c(Gf,this).div||("img"===e.getAttribute("role")||e.classList.contains("endOfContent"))&&c(Gf,this).div.contains(e)){const{isMac:e}=Vt.platform;if(0!==t.button||t.ctrlKey&&e)return;c(Yf,this).showAllEditors("highlight",!0,!0),c(Gf,this).div.classList.add("free"),this.toggleDrawing(),od.startHighlighting(this,"ltr"===c(Yf,this).direction,{target:c(Gf,this).div,x:t.x,y:t.y}),c(Gf,this).div.addEventListener("pointerup",(()=>{c(Gf,this).div.classList.remove("free"),this.toggleDrawing(!0)}),{once:!0,signal:c(Yf,this)._signal}),t.preventDefault()}}function $f(t){return np._.get(c(Yf,t).getMode())}function Zf(t){const e=l(Xf,this,$f);return e?new e.prototype.constructor(t):null}function tp(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,t),r=Math.max(0,e),a=(s+Math.min(window.innerWidth,t+n))/2-t,o=(r+Math.min(window.innerHeight,e+i))/2-e,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function ep(){h(Hf,this,!0);for(const t of c(Uf,this).values())t.isEmpty()&&t.remove();h(Hf,this,!1)}(0,A.A)(Qf,"_initialized",!1);var np={_:new Map([ph,jd,Sf,od].map((t=>[t._editorType,t])))},ip=new WeakMap,sp=new WeakMap,rp=new WeakMap,ap=new WeakMap,op=new WeakSet;class lp{constructor(t){let{pageIndex:e}=t;r(this,op),a(this,ip,null),a(this,sp,0),a(this,rp,new Map),a(this,ap,new Map),this.pageIndex=e}setParent(t){if(c(ip,this)){if(c(ip,this)!==t){if(c(rp,this).size>0)for(const e of c(rp,this).values())e.remove(),t.append(e);h(ip,this,t)}}else h(ip,this,t)}static get _svgFactory(){return Mt(this,"_svgFactory",new Ml)}draw(t,e,n){var i,s;let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(h(sp,this,(i=c(sp,this),s=i++,i)),s),l=o(op,this,hp).call(this,t.box);l.classList.add(...t.classNamesForDrawing);const u=lp._svgFactory.createElement("defs");l.append(u);const d=lp._svgFactory.createElement("path");u.append(d);const f="path_p".concat(this.pageIndex,"_").concat(a);d.setAttribute("id",f),d.setAttribute("d",t.toSVGPath()),r&&c(ap,this).set(a,d);const p=o(op,this,up).call(this,u,f),g=lp._svgFactory.createElement("use");return l.append(g),l.setAttribute("fill",e),l.setAttribute("fill-opacity",n),g.setAttribute("href","#".concat(f)),c(rp,this).set(a,l),{id:a,clipPathId:"url(#".concat(p,")")}}drawOutline(t){var e,n;const i=(h(sp,this,(e=c(sp,this),n=e++,e)),n),s=o(op,this,hp).call(this,t.box);s.classList.add(...t.classNamesForOutlining);const r=lp._svgFactory.createElement("defs");s.append(r);const a=lp._svgFactory.createElement("path");r.append(a);const l="path_p".concat(this.pageIndex,"_").concat(i);let u;if(a.setAttribute("id",l),a.setAttribute("d",t.toSVGPath()),a.setAttribute("vector-effect","non-scaling-stroke"),t.mustRemoveSelfIntersections){const t=lp._svgFactory.createElement("mask");r.append(t),u="mask_p".concat(this.pageIndex,"_").concat(i),t.setAttribute("id",u),t.setAttribute("maskUnits","objectBoundingBox");const e=lp._svgFactory.createElement("rect");t.append(e),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("fill","white");const n=lp._svgFactory.createElement("use");t.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const d=lp._svgFactory.createElement("use");s.append(d),d.setAttribute("href","#".concat(l)),u&&d.setAttribute("mask","url(#".concat(u,")"));const f=d.cloneNode();return s.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),c(rp,this).set(i,s),i}finalizeLine(t,e){const n=c(ap,this).get(t);c(ap,this).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){c(rp,this).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){c(ap,this).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){cp.call(lp,c(rp,this).get(t),e)}show(t,e){c(rp,this).get(t).classList.toggle("hidden",!e)}rotate(t,e){c(rp,this).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){c(rp,this).get(t).setAttribute("fill",e)}changeOpacity(t,e){c(rp,this).get(t).setAttribute("fill-opacity",e)}addClass(t,e){c(rp,this).get(t).classList.add(e)}removeClass(t,e){c(rp,this).get(t).classList.remove(e)}getSVGRoot(t){return c(rp,this).get(t)}remove(t){c(ap,this).delete(t),null!==c(ip,this)&&(c(rp,this).get(t).remove(),c(rp,this).delete(t))}destroy(){h(ip,this,null);for(const t of c(rp,this).values())t.remove();c(rp,this).clear(),c(ap,this).clear()}}function cp(t){let{x:e=0,y:n=0,width:i=1,height:s=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:r}=t;r.top="".concat(100*n,"%"),r.left="".concat(100*e,"%"),r.width="".concat(100*i,"%"),r.height="".concat(100*s,"%")}function hp(t){const e=_._svgFactory.create(1,1,!0);return c(ip,this).append(e),e.setAttribute("aria-hidden",!0),cp.call(_,e,t),e}function up(t,e){const n=_._svgFactory.createElement("clipPath");t.append(n);const i="clip_".concat(e);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=_._svgFactory.createElement("use");return n.append(s),s.setAttribute("href","#".concat(e)),s.classList.add("clip"),i}_=lp;var dp=k.AbortException,fp=k.AnnotationEditorLayer,pp=k.AnnotationEditorParamsType,gp=k.AnnotationEditorType,mp=k.AnnotationEditorUIManager,vp=k.AnnotationLayer,yp=k.AnnotationMode,bp=k.ColorPicker,wp=k.DOMSVGFactory,xp=k.DrawLayer,_p=k.FeatureTest,Ap=k.GlobalWorkerOptions,Ep=k.ImageKind,kp=k.InvalidPDFException,Sp=k.MissingPDFException,Cp=k.OPS,Tp=k.OutputScale,Mp=k.PDFDataRangeTransport,Ip=k.PDFDateString,Rp=k.PDFWorker,Pp=k.PasswordResponses,Dp=k.PermissionFlag,Np=k.PixelsPerInch,Lp=k.RenderingCancelledException,Op=k.TextLayer,Fp=k.UnexpectedResponseException,jp=k.Util,Bp=k.VerbosityLevel,zp=k.XfaLayer,Vp=k.build,Up=k.createValidAbsoluteUrl,Wp=k.fetchData,Hp=k.getDocument,qp=k.getFilenameFromUrl,Gp=k.getPdfFilenameFromUrl,Kp=k.getXfaPageViewport,Yp=k.isDataScheme,Xp=k.isPdfFile,Qp=k.noContextMenu,Jp=k.normalizeUnicode,$p=k.setLayerDimensions,Zp=k.shadow,tg=k.version}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var r=Object.create(null);n.r(r);var a={};t=t||[null,e({}),e([]),e(e)];for(var o=2&s&&i;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>i[t]));return a.default=()=>i,n.d(r,a),r}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,i)=>(n.f[i](t,e),e)),[])),n.u=t=>"static/js/"+t+".10ad4b37.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="crudfbla:";n.l=(i,s,r,a)=>{if(t[i])t[i].push(s);else{var o,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==e+r){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+r),o.src=i),t[i]=[s];var d=(e,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=t[i];if(delete t[i],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",(()=>{var t={792:0};n.f.j=(e,i)=>{var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise(((n,i)=>s=t[e]=[n,i]));i.push(s[2]=r);var a=n.p+n.u(e),o=new Error;n.l(a,(i=>{if(n.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,s[1](o)}}),"chunk-"+e,e)}};var e=(e,i)=>{var s,r,a=i[0],o=i[1],l=i[2],c=0;if(a.some((e=>0!==t[e]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(e&&e(i);c<a.length;c++)r=a[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0},i=self.webpackChunkcrudfbla=self.webpackChunkcrudfbla||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t,e=n(43),i=n.t(e,2),s=n(391);function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(t||(t={}));const a="popstate";function o(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function l(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function c(t,e){return{usr:t.state,key:t.key,idx:e}}function h(t,e,n,i){return void 0===n&&(n=null),r({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?d(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function u(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function d(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function f(e,n,i,s){void 0===s&&(s={});let{window:l=document.defaultView,v5Compat:d=!1}=s,f=l.history,p=t.Pop,g=null,m=v();function v(){return(f.state||{idx:null}).idx}function y(){p=t.Pop;let e=v(),n=null==e?null:e-m;m=e,g&&g({action:p,location:w.location,delta:n})}function b(t){let e="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof t?t:u(t);return n=n.replace(/ $/,"%20"),o(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==m&&(m=0,f.replaceState(r({},f.state,{idx:m}),""));let w={get action(){return p},get location(){return e(l,f)},listen(t){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(a,y),g=t,()=>{l.removeEventListener(a,y),g=null}},createHref:t=>n(l,t),createURL:b,encodeLocation(t){let e=b(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(e,n){p=t.Push;let s=h(w.location,e,n);i&&i(s,e),m=v()+1;let r=c(s,m),a=w.createHref(s);try{f.pushState(r,"",a)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(a)}d&&g&&g({action:p,location:w.location,delta:1})},replace:function(e,n){p=t.Replace;let s=h(w.location,e,n);i&&i(s,e),m=v();let r=c(s,m),a=w.createHref(s);f.replaceState(r,"",a),d&&g&&g({action:p,location:w.location,delta:0})},go:t=>f.go(t)};return w}var p;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(t,e,n){void 0===n&&(n="/");let i=M(("string"===typeof e?d(e):e).pathname||"/",n);if(null==i)return null;let s=m(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(s);let r=null;for(let a=0;null==r&&a<s.length;++a){let t=T(i);r=S(s[a],t)}return r}function m(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let s=(t,s,r)=>{let a={relativePath:void 0===r?t.path||"":r,caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let l=N([i,a.relativePath]),c=n.concat(a);t.children&&t.children.length>0&&(o(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),m(t.children,e,c,l)),(null!=t.path||t.index)&&e.push({path:l,score:k(l,t.index),routesMeta:c})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of v(t.path))s(t,e,i);else s(t,e)})),e}function v(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===i.length)return s?[r,""]:[r];let a=v(i.join("/")),o=[];return o.push(...a.map((t=>""===t?r:[r,t].join("/")))),s&&o.push(...a),o.map((e=>t.startsWith("/")&&""===e?"/":e))}const y=/^:[\w-]+$/,b=3,w=2,x=1,_=10,A=-2,E=t=>"*"===t;function k(t,e){let n=t.split("/"),i=n.length;return n.some(E)&&(i+=A),e&&(i+=w),n.filter((t=>!E(t))).reduce(((t,e)=>t+(y.test(e)?b:""===e?x:_)),i)}function S(t,e){let{routesMeta:n}=t,i={},s="/",r=[];for(let a=0;a<n.length;++a){let t=n[a],o=a===n.length-1,l="/"===s?e:e.slice(s.length)||"/",c=C({path:t.relativePath,caseSensitive:t.caseSensitive,end:o},l);if(!c)return null;Object.assign(i,c.params);let h=t.route;r.push({params:i,pathname:N([s,c.pathname]),pathnameBase:L(N([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=N([s,c.pathnameBase]))}return r}function C(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);l("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(i.push({paramName:"*"}),s+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==t&&"/"!==t&&(s+="(?:(?=\\/|$))");let r=new RegExp(s,e?void 0:"i");return[r,i]}(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1),c=i.reduce(((t,e,n)=>{let{paramName:i,isOptional:s}=e;if("*"===i){let t=o[n]||"";a=r.slice(0,r.length-t.length).replace(/(.)\/+$/,"$1")}const l=o[n];return t[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{});return{params:c,pathname:r,pathnameBase:a,pattern:t}}function T(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return l(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function M(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function I(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function P(t,e){let n=R(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}function D(t,e,n,i){let s;void 0===i&&(i=!1),"string"===typeof t?s=d(t):(s=r({},t),o(!s.pathname||!s.pathname.includes("?"),I("?","pathname","search",s)),o(!s.pathname||!s.pathname.includes("#"),I("#","pathname","hash",s)),o(!s.search||!s.search.includes("#"),I("#","search","hash",s)));let a,l=""===t||""===s.pathname,c=l?"/":s.pathname;if(null==c)a=n;else{let t=e.length-1;if(!i&&c.startsWith("..")){let e=c.split("/");for(;".."===e[0];)e.shift(),t-=1;s.pathname=e.join("/")}a=t>=0?e[t]:"/"}let h=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:s=""}="string"===typeof t?d(t):t,r=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:r,search:O(i),hash:F(s)}}(s,a),u=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return h.pathname.endsWith("/")||!u&&!f||(h.pathname+="/"),h}const N=t=>t.join("/").replace(/\/\/+/g,"/"),L=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),O=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",F=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;function j(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const B=["post","put","patch","delete"],z=(new Set(B),["get",...B]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},V.apply(this,arguments)}const U=e.createContext(null);const W=e.createContext(null);const H=e.createContext(null);const q=e.createContext(null);const G=e.createContext({outlet:null,matches:[],isDataRoute:!1});const K=e.createContext(null);function Y(){return null!=e.useContext(q)}function X(){return Y()||o(!1),e.useContext(q).location}function Q(t){e.useContext(H).static||e.useLayoutEffect(t)}function J(){let{isDataRoute:t}=e.useContext(G);return t?function(){let{router:t}=ot(rt.UseNavigateStable),n=ct(at.UseNavigateStable),i=e.useRef(!1);Q((()=>{i.current=!0}));let s=e.useCallback((function(e,s){void 0===s&&(s={}),i.current&&("number"===typeof e?t.navigate(e):t.navigate(e,V({fromRouteId:n},s)))}),[t,n]);return s}():function(){Y()||o(!1);let t=e.useContext(U),{basename:n,future:i,navigator:s}=e.useContext(H),{matches:r}=e.useContext(G),{pathname:a}=X(),l=JSON.stringify(P(r,i.v7_relativeSplatPath)),c=e.useRef(!1);Q((()=>{c.current=!0}));let h=e.useCallback((function(e,i){if(void 0===i&&(i={}),!c.current)return;if("number"===typeof e)return void s.go(e);let r=D(e,JSON.parse(l),a,"path"===i.relative);null==t&&"/"!==n&&(r.pathname="/"===r.pathname?n:N([n,r.pathname])),(i.replace?s.replace:s.push)(r,i.state,i)}),[n,s,l,a,t]);return h}()}function $(t,n){let{relative:i}=void 0===n?{}:n,{future:s}=e.useContext(H),{matches:r}=e.useContext(G),{pathname:a}=X(),o=JSON.stringify(P(r,s.v7_relativeSplatPath));return e.useMemo((()=>D(t,JSON.parse(o),a,"path"===i)),[t,o,a,i])}function Z(n,i,s,r){Y()||o(!1);let{navigator:a}=e.useContext(H),{matches:l}=e.useContext(G),c=l[l.length-1],h=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,p=X();if(i){var m;let t="string"===typeof i?d(i):i;"/"===u||(null==(m=t.pathname)?void 0:m.startsWith(u))||o(!1),f=t}else f=p;let v=f.pathname||"/",y=v;if("/"!==u){let t=u.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(t.length).join("/")}let b=g(n,{pathname:y});let w=st(b&&b.map((t=>Object.assign({},t,{params:Object.assign({},h,t.params),pathname:N([u,a.encodeLocation?a.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?u:N([u,a.encodeLocation?a.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),l,s,r);return i&&w?e.createElement(q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:t.Pop}},w):w}function tt(){let t=function(){var t;let n=e.useContext(K),i=lt(at.UseRouteError),s=ct(at.UseRouteError);if(void 0!==n)return n;return null==(t=i.errors)?void 0:t[s]}(),n=j(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:r},i):null,null)}const et=e.createElement(tt,null);class nt extends e.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?e.createElement(G.Provider,{value:this.props.routeContext},e.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function it(t){let{routeContext:n,match:i,children:s}=t,r=e.useContext(U);return r&&r.static&&r.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(G.Provider,{value:n},s)}function st(t,n,i,s){var r;if(void 0===n&&(n=[]),void 0===i&&(i=null),void 0===s&&(s=null),null==t){var a;if(null==(a=i)||!a.errors)return null;t=i.matches}let l=t,c=null==(r=i)?void 0:r.errors;if(null!=c){let t=l.findIndex((t=>t.route.id&&void 0!==(null==c?void 0:c[t.route.id])));t>=0||o(!1),l=l.slice(0,Math.min(l.length,t+1))}let h=!1,u=-1;if(i&&s&&s.v7_partialHydration)for(let e=0;e<l.length;e++){let t=l[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:n}=i,s=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||s){h=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight(((t,s,r)=>{let a,o=!1,d=null,f=null;var p;i&&(a=c&&s.route.id?c[s.route.id]:void 0,d=s.route.errorElement||et,h&&(u<0&&0===r?(p="route-fallback",!1||ht[p]||(ht[p]=!0),o=!0,f=null):u===r&&(o=!0,f=s.route.hydrateFallbackElement||null)));let g=n.concat(l.slice(0,r+1)),m=()=>{let n;return n=a?d:o?f:s.route.Component?e.createElement(s.route.Component,null):s.route.element?s.route.element:t,e.createElement(it,{match:s,routeContext:{outlet:t,matches:g,isDataRoute:null!=i},children:n})};return i&&(s.route.ErrorBoundary||s.route.errorElement||0===r)?e.createElement(nt,{location:i.location,revalidation:i.revalidation,component:d,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var rt=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(rt||{}),at=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(at||{});function ot(t){let n=e.useContext(U);return n||o(!1),n}function lt(t){let n=e.useContext(W);return n||o(!1),n}function ct(t){let n=function(t){let n=e.useContext(G);return n||o(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||o(!1),i.route.id}const ht={};i.startTransition;function ut(t){o(!1)}function dt(n){let{basename:i="/",children:s=null,location:r,navigationType:a=t.Pop,navigator:l,static:c=!1,future:h}=n;Y()&&o(!1);let u=i.replace(/^\/*/,"/"),f=e.useMemo((()=>({basename:u,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},h)})),[u,h,l,c]);"string"===typeof r&&(r=d(r));let{pathname:p="/",search:g="",hash:m="",state:v=null,key:y="default"}=r,b=e.useMemo((()=>{let t=M(p,u);return null==t?null:{location:{pathname:t,search:g,hash:m,state:v,key:y},navigationType:a}}),[u,p,g,m,v,y,a]);return null==b?null:e.createElement(H.Provider,{value:f},e.createElement(q.Provider,{children:s,value:b}))}function ft(t){let{children:e,location:n}=t;return Z(pt(e),n)}new Promise((()=>{}));e.Component;function pt(t,n){void 0===n&&(n=[]);let i=[];return e.Children.forEach(t,((t,s)=>{if(!e.isValidElement(t))return;let r=[...n,s];if(t.type===e.Fragment)return void i.push.apply(i,pt(t.props.children,r));t.type!==ut&&o(!1),t.props.index&&t.props.children&&o(!1);let a={id:t.props.id||r.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=pt(t.props.children,r)),i.push(a)})),i}var gt=n(950),mt=n.t(gt,2);function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vt.apply(this,arguments)}function yt(t,e){if(null==t)return{};var n,i,s={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(s[n]=t[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const bt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(sw){}new Map;const wt=i.startTransition;mt.flushSync,i.useId;function xt(t){let{basename:n,children:i,future:s,window:r}=t,a=e.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:r,v5Compat:!0})&&(o={}),f((function(t,e){let{pathname:n,search:i,hash:s}=t.location;return h("",{pathname:n,search:i,hash:s},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:u(e)}),null,o)));let l=a.current,[c,d]=e.useState({action:l.action,location:l.location}),{v7_startTransition:p}=s||{},g=e.useCallback((t=>{p&&wt?wt((()=>d(t))):d(t)}),[d,p]);return e.useLayoutEffect((()=>l.listen(g)),[l,g]),e.createElement(dt,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:l,future:s})}const _t="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,At=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Et=e.forwardRef((function(t,n){let i,{onClick:s,relative:r,reloadDocument:a,replace:l,state:c,target:h,to:d,preventScrollReset:f,unstable_viewTransition:p}=t,g=yt(t,bt),{basename:m}=e.useContext(H),v=!1;if("string"===typeof d&&At.test(d)&&(i=d,_t))try{let t=new URL(window.location.href),e=d.startsWith("//")?new URL(t.protocol+d):new URL(d),n=M(e.pathname,m);e.origin===t.origin&&null!=n?d=n+e.search+e.hash:v=!0}catch(sw){}let y=function(t,n){let{relative:i}=void 0===n?{}:n;Y()||o(!1);let{basename:s,navigator:r}=e.useContext(H),{hash:a,pathname:l,search:c}=$(t,{relative:i}),h=l;return"/"!==s&&(h="/"===l?s:N([s,l])),r.createHref({pathname:h,search:c,hash:a})}(d,{relative:r}),b=function(t,n){let{target:i,replace:s,state:r,preventScrollReset:a,relative:o,unstable_viewTransition:l}=void 0===n?{}:n,c=J(),h=X(),d=$(t,{relative:o});return e.useCallback((e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,i)){e.preventDefault();let n=void 0!==s?s:u(h)===u(d);c(t,{replace:n,state:r,preventScrollReset:a,relative:o,unstable_viewTransition:l})}}),[h,c,d,s,r,i,t,a,o,l])}(d,{replace:l,state:c,target:h,preventScrollReset:f,relative:r,unstable_viewTransition:p});return e.createElement("a",vt({},g,{href:i||y,onClick:v||a?s:function(t){s&&s(t),t.defaultPrevented||b(t)},ref:n,target:h}))}));var kt,St;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kt||(kt={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(St||(St={}));function Ct(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var Tt=function t(e,n){function i(t,i,s){if("undefined"!==typeof document){"number"===typeof(s=Ct({},n,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in s)s[a]&&(r+="; "+a,!0!==s[a]&&(r+="="+s[a].split(";")[0]));return document.cookie=t+"="+e.write(i,t)+r}}return Object.create({set:i,get:function(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],i={},s=0;s<n.length;s++){var r=n[s].split("="),a=r.slice(1).join("=");try{var o=decodeURIComponent(r[0]);if(i[o]=e.read(a,o),t===o)break}catch(sw){}}return t?i[t]:i}},remove:function(t,e){i(t,"",Ct({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,Ct({},this.attributes,e))},withConverter:function(e){return t(Ct({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Mt=n(579);const It=()=>{const t=J(),[n,i]=(0,e.useState)(!1),[s,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const t="true"===Tt.get("adminMode"),e=Tt.get("employerId"),n=Tt.get("studentId");i(t),r(!!e),o(!!n)}),[]);const l=()=>{Tt.remove("adminMode"),Tt.remove("employerId"),Tt.remove("studentId"),i(!1),r(!1),o(!1),t("/")};return(0,Mt.jsxs)("nav",{className:"bg-white p-2 m-4 rounded-3xl border-gray-800",children:[(0,Mt.jsxs)("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4",children:[(0,Mt.jsx)("a",{href:"/",className:"flex items-center space-x-3 rtl:space-x-reverse",children:(0,Mt.jsx)("span",{className:"self-center text-2xl font-extrabold text-indigo-700",children:"AlphaJob"})}),(0,Mt.jsxs)("button",{"data-collapse-toggle":"navbar-default",type:"button",className:"inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"navbar-default","aria-expanded":"false",children:[(0,Mt.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,Mt.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",children:(0,Mt.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h15M1 7h15M1 13h15"})})]}),(0,Mt.jsx)("div",{className:"hidden w-full md:block md:w-auto",id:"navbar-default",children:(0,Mt.jsxs)("ul",{className:"font-medium flex flex-col p-4 md:p-0 mt-4 rounded-lg md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0  dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700",children:[(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/help",className:"block py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500","aria-current":"page",children:"Info"})}),(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/postings",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Postings"})}),a&&(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/applications",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"My Applications"})}),(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/ai_analysis",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Resume Analysis"})})]}),n&&(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/backend",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Backend Panel (Update Postings)"})}),(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/create",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Create Posting"})})]}),!s&&!a&&(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/student-login",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Student Login"})}),(0,Mt.jsx)("li",{children:(0,Mt.jsx)("a",{href:"/employer-login",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Employer Login"})})]}),(s||a||n)&&(0,Mt.jsx)("li",{children:(0,Mt.jsx)("button",{onClick:l,className:"block py-2 px-3 text-red-600 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white",children:"Logout"})})]})})]}),(0,Mt.jsx)("dialog",{id:"admin_modal",className:"modal",children:(0,Mt.jsxs)("div",{className:"modal-box",children:[(0,Mt.jsx)("h3",{className:"font-bold text-lg",children:"Admin Mode Settings"}),(0,Mt.jsxs)("div",{className:"mb-6 mt-2",children:[(0,Mt.jsx)("input",{className:"input input-bordered bg-white w-full mb-2",placeholder:"Enter admin name...",type:"text",id:"adminName"}),(0,Mt.jsx)("input",{className:"input input-bordered bg-white w-full mb-2",placeholder:"Enter secret code...",type:"password",id:"secretCode"}),(0,Mt.jsx)("br",{}),(0,Mt.jsx)("button",{className:"btn btn-primary w-full",onClick:()=>{const t=document.getElementById("adminName").value,e=document.getElementById("secretCode").value;[{name:"Shourya Sinha",code:"1234"},{name:"Narain Singaram",code:"1234"},{name:"Mithran Prakash",code:"1234"},{name:"Alex Johnson",code:"1234"},{name:"Sarah Williams",code:"1234"},{name:"Michael Chen",code:"1234"},{name:"Emma Rodriguez",code:"1234"},{name:"James Wilson",code:"1234"},{name:"Olivia Garcia",code:"1234"},{name:"William Taylor",code:"1234"},{name:"Sophia Lee",code:"1234"},{name:"Lucas Brown",code:"1234"},{name:"Isabella Martinez",code:"1234"}].find((n=>n.name===t&&n.code===e))?(Tt.set("adminMode","true",{expires:7}),i(!0),document.getElementById("admin_modal").close()):alert("Invalid admin credentials.")},children:"Activate Admin Mode"})]}),(0,Mt.jsx)("div",{className:"modal-action",children:(0,Mt.jsx)("form",{method:"dialog",children:(0,Mt.jsx)("button",{className:"btn",onClick:l,children:"Close & Deactivate Admin Mode"})})})]})})]})},Rt=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):55296===(64512&s)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},Pt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const e=t[s],r=s+1<t.length,a=r?t[s+1]:0,o=s+2<t.length,l=o?t[s+2]:0,c=e>>2,h=(3&e)<<4|a>>4;let u=(15&a)<<2|l>>6,d=63&l;o||(d=64,r||(u=64)),i.push(n[c],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rt(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(r>>10)),e[i++]=String.fromCharCode(56320+(1023&r))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const e=n[t.charAt(s++)],r=s<t.length?n[t.charAt(s)]:0;++s;const a=s<t.length?n[t.charAt(s)]:64;++s;const o=s<t.length?n[t.charAt(s)]:64;if(++s,null==e||null==r||null==a||null==o)throw new Dt;const l=e<<2|r>>4;if(i.push(l),64!==a){const t=r<<4&240|a>>2;if(i.push(t),64!==o){const t=a<<6&192|o;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Dt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nt=function(t){return function(t){const e=Rt(t);return Pt.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Lt=function(t){try{return Pt.decodeString(t,!0)}catch(sw){console.error("base64Decode failed: ",sw)}return null};const Ot=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ft=()=>{try{return Ot()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(sw){return}const e=t&&Lt(t[1]);return e&&JSON.parse(e)})()}catch(sw){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(sw))}},jt=t=>{const e=(t=>{var e,n;return null===(n=null===(e=Ft())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Bt=()=>{var t;return null===(t=Ft())||void 0===t?void 0:t.config};class zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function Vt(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nt(JSON.stringify({alg:"none",type:"JWT"})),Nt(JSON.stringify(r)),""].join(".")}function Ut(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Wt(){return!function(){var t;const e=null===(t=Ft())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(sw){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ht(){try{return"object"===typeof indexedDB}catch(sw){return!1}}class qt extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],s=i?function(t,e){return t.replace(Kt,((t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,e):"Error",r="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new qt(n,r,e)}}const Kt=/\{\$([^}]+)}/g;function Yt(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const n=t[s],r=e[s];if(Xt(n)&&Xt(r)){if(!Yt(n,r))return!1}else if(n!==r)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Xt(t){return null!==t&&"object"===typeof t}function Qt(t){return t&&t._delegate?t._delegate:t}class Jt{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const $t="[DEFAULT]";class Zt{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new zt;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(sw){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(sw){if(i)return null;throw sw}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:$t})}catch(sw){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(sw){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,r]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&r.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(i){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(s=e,s===$t?void 0:s),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(r){}var s;return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;return this.component?this.component.multipleInstances?t:$t:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Zt(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const ee=[];var ne;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ne||(ne={}));const ie={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},se=ne.INFO,re={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ae=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=re[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var s=arguments.length,r=new Array(s>2?s-2:0),a=2;a<s;a++)r[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(t.name,":"),...r)};class oe{constructor(t){this.name=t,this._logLevel=se,this._logHandler=ae,this._userLogHandler=null,ee.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ne))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?ie[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const le=(t,e)=>e.some((e=>t instanceof e));let ce,he;const ue=new WeakMap,de=new WeakMap,fe=new WeakMap,pe=new WeakMap,ge=new WeakMap;let me={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return de.get(t);if("objectStoreNames"===e)return t.objectStoreNames||fe.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return be(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ve(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(we(this),n),be(ue.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return be(t.apply(we(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];const r=t.call(we(this),e,...i);return fe.set(r,e.sort?e.sort():[e]),be(r)}}function ye(t){return"function"===typeof t?ve(t):(t instanceof IDBTransaction&&function(t){if(de.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",r),t.removeEventListener("abort",r)},s=()=>{e(),i()},r=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",r),t.addEventListener("abort",r)}));de.set(t,e)}(t),le(t,ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,me):t)}function be(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",r)},s=()=>{e(be(t.result)),i()},r=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",r)}));return e.then((e=>{e instanceof IDBCursor&&ue.set(e,t)})).catch((()=>{})),ge.set(e,t),e}(t);if(pe.has(t))return pe.get(t);const e=ye(t);return e!==t&&(pe.set(t,e),ge.set(e,t)),e}const we=t=>ge.get(t);const xe=["get","getKey","getAll","getAllKeys","count"],_e=["put","add","delete","clear"],Ae=new Map;function Ee(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(Ae.get(e))return Ae.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=_e.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!xe.includes(n))return;const r=async function(t){const e=this.transaction(t,s?"readwrite":"readonly");let r=e.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(r=r.index(o.shift())),(await Promise.all([r[n](...o),s&&e.done]))[0]};return Ae.set(e,r),r}!function(t){me=t(me)}((t=>({...t,get:(e,n,i)=>Ee(e,n)||t.get(e,n,i),has:(e,n)=>!!Ee(e,n)||t.has(e,n)})));class ke{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((t=>t)).join(" ")}}const Se="@firebase/app",Ce="0.10.5",Te=new oe("@firebase/app"),Me="@firebase/app-compat",Ie="@firebase/analytics-compat",Re="@firebase/analytics",Pe="@firebase/app-check-compat",De="@firebase/app-check",Ne="@firebase/auth",Le="@firebase/auth-compat",Oe="@firebase/database",Fe="@firebase/database-compat",je="@firebase/functions",Be="@firebase/functions-compat",ze="@firebase/installations",Ve="@firebase/installations-compat",Ue="@firebase/messaging",We="@firebase/messaging-compat",He="@firebase/performance",qe="@firebase/performance-compat",Ge="@firebase/remote-config",Ke="@firebase/remote-config-compat",Ye="@firebase/storage",Xe="@firebase/storage-compat",Qe="@firebase/firestore",Je="@firebase/vertexai-preview",$e="@firebase/firestore-compat",Ze="firebase",tn="[DEFAULT]",en={[Se]:"fire-core",[Me]:"fire-core-compat",[Re]:"fire-analytics",[Ie]:"fire-analytics-compat",[De]:"fire-app-check",[Pe]:"fire-app-check-compat",[Ne]:"fire-auth",[Le]:"fire-auth-compat",[Oe]:"fire-rtdb",[Fe]:"fire-rtdb-compat",[je]:"fire-fn",[Be]:"fire-fn-compat",[ze]:"fire-iid",[Ve]:"fire-iid-compat",[Ue]:"fire-fcm",[We]:"fire-fcm-compat",[He]:"fire-perf",[qe]:"fire-perf-compat",[Ge]:"fire-rc",[Ke]:"fire-rc-compat",[Ye]:"fire-gcs",[Xe]:"fire-gcs-compat",[Qe]:"fire-fst",[$e]:"fire-fst-compat",[Je]:"fire-vertex","fire-js":"fire-js",[Ze]:"fire-js-all"},nn=new Map,sn=new Map,rn=new Map;function an(t,e){try{t.container.addComponent(e)}catch(sw){Te.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),sw)}}function on(t){const e=t.name;if(rn.has(e))return Te.debug("There were multiple attempts to register component ".concat(e,".")),!1;rn.set(e,t);for(const n of nn.values())an(n,t);for(const n of sn.values())an(n,t);return!0}function ln(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const cn=new Gt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class hn{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Jt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}const un="10.12.2";function dn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:tn,automaticDataCollectionEnabled:!1},e),s=i.name;if("string"!==typeof s||!s)throw cn.create("bad-app-name",{appName:String(s)});if(n||(n=Bt()),!n)throw cn.create("no-options");const r=nn.get(s);if(r){if(Yt(n,r.options)&&Yt(i,r.config))return r;throw cn.create("duplicate-app",{appName:s})}const a=new te(s);for(const l of rn.values())a.addComponent(l);const o=new hn(n,i,a);return nn.set(s,o),o}function fn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;const e=nn.get(t);if(!e&&t===tn&&Bt())return dn();if(!e)throw cn.create("no-app",{appName:t});return e}function pn(t,e,n){var i;let s=null!==(i=en[t])&&void 0!==i?i:t;n&&(s+="-".concat(n));const r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const t=['Unable to register library "'.concat(s,'" with version "').concat(e,'":')];return r&&t.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),r&&a&&t.push("and"),a&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void Te.warn(t.join(" "))}on(new Jt("".concat(s,"-version"),(()=>({library:s,version:e})),"VERSION"))}const gn="firebase-heartbeat-database",mn=1,vn="firebase-heartbeat-store";let yn=null;function bn(){return yn||(yn=function(t,e){let{blocked:n,upgrade:i,blocking:s,terminated:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(t,e),o=be(a);return i&&a.addEventListener("upgradeneeded",(t=>{i(be(a.result),t.oldVersion,t.newVersion,be(a.transaction),t)})),n&&a.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),o.then((t=>{r&&t.addEventListener("close",(()=>r())),s&&t.addEventListener("versionchange",(t=>s(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),o}(gn,mn,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(vn)}catch(sw){console.warn(sw)}}}).catch((t=>{throw cn.create("idb-open",{originalErrorMessage:t.message})}))),yn}async function wn(t,e){try{const n=(await bn()).transaction(vn,"readwrite"),i=n.objectStore(vn);await i.put(e,xn(t)),await n.done}catch(sw){if(sw instanceof qt)Te.warn(sw.message);else{const e=cn.create("idb-set",{originalErrorMessage:null===sw||void 0===sw?void 0:sw.message});Te.warn(e.message)}}}function xn(t){return"".concat(t.name,"!").concat(t.options.appId)}class _n{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new En(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=An();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=An(),{heartbeatsToSend:n,unsentEntries:i}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=t.slice();for(const s of t){const t=n.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),kn(n)>e){t.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),kn(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),s=Nt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function An(){return(new Date).toISOString().substring(0,10)}class En{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ht()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await bn()).transaction(vn),n=await e.objectStore(vn).get(xn(t));return await e.done,n}catch(sw){if(sw instanceof qt)Te.warn(sw.message);else{const e=cn.create("idb-get",{originalErrorMessage:null===sw||void 0===sw?void 0:sw.message});Te.warn(e.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function kn(t){return Nt(JSON.stringify({version:2,heartbeats:t})).length}var Sn;Sn="",on(new Jt("platform-logger",(t=>new ke(t)),"PRIVATE")),on(new Jt("heartbeat",(t=>new _n(t)),"PRIVATE")),pn(Se,Ce,Sn),pn(Se,Ce,"esm2017"),pn("fire-js","");pn("firebase","10.12.2","app");var Cn,Tn,Mn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},In={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var s=0;16>s;++s)i[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var r=t.g[3],a=e+(r^n&(s^r))+i[0]+3614090360&4294967295;a=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=n+(a<<7&4294967295|a>>>25))+((a=r+(s^e&(n^s))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^s&(r^e))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^n&(s^r))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=r+(s^e&(n^s))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^s&(r^e))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^n&(s^r))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=r+(s^e&(n^s))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^s&(r^e))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^n&(s^r))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=r+(s^e&(n^s))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^s&(r^e))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^r&(n^s))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(e^n&(r^e))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(s^r))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=e+(s^r&(n^s))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(e^n&(r^e))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(s^r))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=e+(s^r&(n^s))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(e^n&(r^e))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(s^r))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=e+(s^r&(n^s))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(e^n&(r^e))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(s^r))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=e+(n^s^r)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^s)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^e)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^s^r)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^s)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^e)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^s^r)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^s)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^e)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^s^r)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^s)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^e^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^e)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=e+(s^(n|~r))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~s))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(e^(r|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(s|~e))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=e+(s^(n|~r))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~s))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(e^(r|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(s|~e))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=e+(s^(n|~r))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~s))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(e^(r|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(s|~e))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((r=(e=n+((a=e+(s^(n|~r))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~s))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=r+((a=s+(e^(r|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+r&4294967295}function i(t,e){this.h=e;for(var n=[],i=!0,s=t.length-1;0<=s;s--){var r=0|t[s];i&&r==e||(n[s]=r,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[n].apply(t,s)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,s=this.B,r=this.h,a=0;a<e;){if(0==r)for(;a<=i;)n(this,t,a),a+=this.blockSize;if("string"===typeof t){for(;a<e;)if(s[r++]=t.charCodeAt(a++),r==this.blockSize){n(this,s),r=0;break}}else for(;a<e;)if(s[r++]=t[a++],r==this.blockSize){n(this,s),r=0;break}}this.h=r,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var s={};function r(t){return-128<=t&&128>t?function(t,e){var n=s;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new i([0|t],0>t?-1:0)})):new i([0|t],0>t?-1:0)}function a(t){if(isNaN(t)||!isFinite(t))return o;if(0>t)return d(a(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=4294967296;return new i(e,0)}var o=r(0),l=r(1),c=r(16777216);function h(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function u(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new i(n,~t.h).add(l)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(h(e))throw Error("division by zero");if(h(t))return new g(o,o);if(u(t))return e=m(d(t),e),new g(d(e.g),d(e.h));if(u(e))return e=m(t,d(e)),new g(d(e.g),e.h);if(30<t.g.length){if(u(t)||u(e))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=e;0>=i.l(t);)n=v(n),i=v(i);var s=y(n,1),r=y(i,1);for(i=y(i,2),n=y(n,2);!h(i);){var c=r.add(i);0>=c.l(t)&&(s=s.add(n),r=c),i=y(i,1),n=y(n,1)}return e=f(t,s.j(e)),new g(s,e)}for(s=o;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(r=a(n)).j(e);u(c)||0<c.l(t);)c=(r=a(n-=i)).j(e);h(r)&&(r=l),s=s.add(r),t=f(t,c)}return new g(s,t)}function v(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.i(s)<<1|t.i(s-1)>>>31;return new i(n,t.h)}function y(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,r=[],a=0;a<s;a++)r[a]=0<e?t.i(a+n)>>>e|t.i(a+n+1)<<32-e:t.i(a+n);return new i(r,t.h)}(t=i.prototype).m=function(){if(u(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(h(this))return"0";if(u(this))return"-"+d(this).toString(t);for(var e=a(Math.pow(t,6)),n=this,i="";;){var s=m(n,e).g,r=((0<(n=f(n,s.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(h(n=s))return r+i;for(;6>r.length;)r="0"+r;i=r+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return u(t=f(this,t))?-1:h(t)?0:1},t.abs=function(){return u(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,r=0;r<=e;r++){var a=s+(65535&this.i(r))+(65535&t.i(r)),o=(a>>>16)+(this.i(r)>>>16)+(t.i(r)>>>16);s=o>>>16,a&=65535,o&=65535,n[r]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(h(this)||h(t))return o;if(u(this))return u(t)?d(this).j(d(t)):d(d(this).j(t));if(u(t))return d(this.j(d(t)));if(0>this.l(c)&&0>t.l(c))return a(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var r=0;r<t.g.length;r++){var l=this.i(s)>>>16,f=65535&this.i(s),g=t.i(r)>>>16,m=65535&t.i(r);n[2*s+2*r]+=f*m,p(n,2*s+2*r),n[2*s+2*r+1]+=l*m,p(n,2*s+2*r+1),n[2*s+2*r+1]+=f*g,p(n,2*s+2*r+1),n[2*s+2*r+2]+=l*g,p(n,2*s+2*r+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new i(n,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.i(s)&t.i(s);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.i(s)|t.i(s);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.i(s)^t.i(s);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,Tn=In.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=a,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=a(Math.pow(n,8)),s=o,r=0;r<e.length;r+=8){var l=Math.min(8,e.length-r),c=parseInt(e.substring(r,r+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(i)).add(a(c))}return s},Cn=In.Integer=i}).apply("undefined"!==typeof Mn?Mn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Rn,Pn,Dn,Nn,Ln,On,Fn,jn,Bn,zn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vn={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof zn&&zn];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var s=n;t=t.split(".");for(var r=0;r<t.length-1;r++){var a=t[r];if(!(a in s))break t;s=s[a]}(i=i(r=s[t=t[t.length-1]]))!=r&&null!=i&&e(s,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,s={next:function(){if(!i&&n<t.length){var s=n++;return{value:e(s,t[s]),done:!1}}return i=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(t,e){return e}))}}));var i=i||{},s=this||self;function r(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function a(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function o(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function c(t,e,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function h(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function u(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[n].apply(t,s)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(r(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let s=0;s<i;s++)t[n+s]=e[s]}else t.push(e)}}function p(t){return/^[\s\xa0]*$/.test(t)}function g(){var t=s.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function b(t){const e={};for(const n in t)e[n]=t[n];return e}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(t,e){let n,i;for(let s=1;s<arguments.length;s++){for(n in i=arguments[s],i)t[n]=i[n];for(let e=0;e<w.length;e++)n=w[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function _(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function A(t){s.setTimeout((()=>{throw t}),0)}function E(){var t=M;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var k=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new S),(t=>t.reset()));class S{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,M=new class{constructor(){this.h=this.g=null}add(t,e){const n=k.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const t=s.Promise.resolve(void 0);C=()=>{t.then(R)}};var R=()=>{for(var t;t=E();){try{t.h.call(t.g)}catch(n){A(n)}var e=k;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}T=!1};function P(){this.s=this.s,this.C=this.C}function D(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};s.addEventListener("test",t,e),s.removeEventListener("test",t,e)}catch(n){}return t}();function L(t,e){if(D.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(v){t:{try{m(e.nodeName);var s=!0;break t}catch(r){}s=!1}s||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:O[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&L.aa.h.call(this)}}u(L,D);var O={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function B(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=s,this.key=++j,this.da=this.fa=!1}function z(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function V(t){this.src=t,this.g={},this.h=0}function U(t,e){var n=e.type;if(n in t.g){var i,s=t.g[n],r=Array.prototype.indexOf.call(s,e,void 0);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(z(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function W(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.da&&r.listener==e&&r.capture==!!n&&r.ha==i)return s}return-1}V.prototype.add=function(t,e,n,i,s){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var a=W(t,e,i,s);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new B(e,this.src,r,!!i,s)).fa=n,t.push(e)),e};var H="closure_lm_"+(1e6*Math.random()|0),q={};function G(t,e,n,i,s){if(i&&i.once)return Y(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)G(t,e[r],n,i,s);return null}return n=et(n),t&&t[F]?t.K(e,n,a(i)?!!i.capture:!!i,s):K(t,e,n,!1,i,s)}function K(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(t);if(l||(t[H]=l=new V(t)),(n=l.add(e,n,i,o,r)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=$;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)N||(s=o),void 0===s&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(J(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Y(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)Y(t,e[r],n,i,s);return null}return n=et(n),t&&t[F]?t.L(e,n,a(i)?!!i.capture:!!i,s):K(t,e,n,!0,i,s)}function X(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)X(t,e[r],n,i,s);else i=a(i)?!!i.capture:!!i,n=et(n),t&&t[F]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=W(r=t.g[e],n,i,s))&&(z(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--)))):t&&(t=Z(t))&&(e=t.g[e.toString()],t=-1,e&&(t=W(e,n,i,s)),(n=-1<t?e[t]:null)&&Q(n))}function Q(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[F])U(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(J(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Z(e))?(U(n,t),0==n.h&&(n.src=null,e[H]=null)):z(t)}}}function J(t){return t in q?q[t]:q[t]="on"+t}function $(t,e){if(t.da)t=!0;else{e=new L(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&Q(t),t=n.call(i,e)}return t}function Z(t){return(t=t[H])instanceof V?t:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"===typeof t?t:(t[tt]||(t[tt]=function(e){return t.handleEvent(e)}),t[tt])}function nt(){P.call(this),this.i=new V(this),this.M=this,this.F=null}function it(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"===typeof e)e=new D(e,t);else if(e instanceof D)e.target=e.target||t;else{var s=e;x(e=new D(i,t),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var a=e.g=n[r];s=st(a,i,!0,e)&&s}if(s=st(a=e.g=t,i,!0,e)&&s,s=st(a,i,!1,e)&&s,n)for(r=0;r<n.length;r++)s=st(a=e.g=n[r],i,!1,e)&&s}function st(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var a=e[r];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&U(t.i,a),s=!1!==o.call(l,i)&&s}}return s&&!i.defaultPrevented}function rt(t,e,n){if("function"===typeof t)n&&(t=c(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function at(t){t.g=rt((()=>{t.g=null,t.i&&(t.i=!1,at(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}u(nt,P),nt.prototype[F]=!0,nt.prototype.removeEventListener=function(t,e,n,i){X(this,t,e,n,i)},nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)z(n[i]);delete e.g[t],e.h--}}this.F=null},nt.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},nt.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class ot extends P{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(t){P.call(this),this.h=t,this.g={}}u(lt,P);var ct=[];function ht(t){y(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Q(t)}),t),t.g={}}lt.prototype.N=function(){lt.aa.N.call(this),ht(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=s.JSON.stringify,dt=s.JSON.parse,ft=class{stringify(t){return s.JSON.stringify(t,void 0)}parse(t){return s.JSON.parse(t,void 0)}};function pt(){}function gt(t){return t.h||(t.h=t.i())}function mt(){}pt.prototype.h=null;var vt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){D.call(this,"d")}function bt(){D.call(this,"c")}u(yt,D),u(bt,D);var wt={},xt=null;function _t(){return xt=xt||new nt}function At(t){D.call(this,wt.La,t)}function Et(t){const e=_t();it(e,new At(e))}function kt(t,e){D.call(this,wt.STAT_EVENT,t),this.stat=e}function St(t){const e=_t();it(e,new kt(e,t))}function Ct(t,e){D.call(this,wt.Ma,t),this.size=e}function Tt(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){t()}),e)}function Mt(){this.g=!0}function It(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var a=1;a<s.length;a++)s[a]=""}}}return ut(n)}catch(o){return e}}(t,n)+(i?" "+i:"")}))}wt.La="serverreachability",u(At,D),wt.STAT_EVENT="statevent",u(kt,D),wt.Ma="timingevent",u(Ct,D),Mt.prototype.xa=function(){this.g=!1},Mt.prototype.info=function(){};var Rt,Pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Nt(){}function Lt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}u(Nt,pt),Nt.prototype.g=function(){return new XMLHttpRequest},Nt.prototype.i=function(){return{}},Rt=new Nt;var Ft={},jt={};function Bt(t,e,n){t.L=1,t.v=ue(ae(e)),t.m=n,t.P=!0,zt(t,null)}function zt(t,e){t.F=Date.now(),Wt(t),t.A=ae(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),ke(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Ot,t.g=fn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new ot(c(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var s="readystatechange";Array.isArray(s)||(s&&(ct[0]=s.toString()),s=ct);for(var r=0;r<s.length;r++){var a=G(n,s[r],i||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}e=t.H?b(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Et(),function(t,e,n,i,s,r){t.info((function(){if(t.g)if(r)for(var a="",o=r.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var h=c[0];c=c[1];var u=h.split("_");a=2<=u.length&&"type"==u[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+n+"\n"+a}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Vt(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function Ut(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?jt:(n=Number(e.substring(n,i)),isNaN(n)?Ft:(i+=1)+n>e.length?jt:(e=e.slice(i,i+n),t.C=i+n,e))}function Wt(t){t.S=Date.now()+t.I,Ht(t,t.I)}function Ht(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Tt(c(t.ba,t),e)}function qt(t){t.B&&(s.clearTimeout(t.B),t.B=null)}function Gt(t){0==t.j.G||t.J||ln(t.j,t)}function Kt(t){qt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ht(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Yt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Zt(n.h,t)))if(!t.K&&Zt(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(h){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;on(n),Qe(n)}sn(n),St(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Tt(c(n.Za,n),6e3));if(1>=$t(n.h)&&n.ca){try{n.ca()}catch(h){}n.ca=void 0}}else hn(n,11)}else if((t.K||n.g==t)&&on(n),!p(e))for(s=n.Da.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const e=c[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const h=c[5];null!=h&&"number"===typeof h&&0<h&&(i=1.5*h,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=i.h;r.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(te(r,r.h),r.h=null))}if(i.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,he(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=t;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),a.K){ee(i.h,a);var o=a,l=i.L;l&&(o.I=l),o.B&&(qt(o),Wt(o)),i.g=a}else nn(i);0<n.i.length&&$e(n)}else"stop"!=c[0]&&"close"!=c[0]||hn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?hn(n,7):Xe(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Et()}catch(h){}}Lt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==qe(t)?e.j():this.Y(t)},Lt.prototype.Y=function(t){try{if(t==this.g)t:{const d=qe(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ge(this.g)))){this.J||4!=d||7==e||Et(),qt(this);var n=this.g.Z();this.X=n;e:if(Vt(this)){var i=Ge(this.g);t="";var r=i.length,a=4==qe(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Kt(this),Gt(this);var o="";break e}this.h.i=new s.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(a&&e==r-1)});i.length=0,this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(t,e,n,i,s,r,a){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+r+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var h=l;break e}}h=null}if(!(n=h)){this.o=!1,this.s=3,St(12),Kt(this),Gt(this);break t}It(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<o.length;){if(t=Ut(this,o),t==jt){4==d&&(this.s=4,St(14),n=!1),It(this.i,this.l,null,"[Incomplete Response]");break}if(t==Ft){this.s=4,St(15),It(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}It(this.i,this.l,t,null),Yt(this,t)}if(Vt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,St(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),rn(u),u.M=!0,St(11))}}else It(this.i,this.l,o,"[Invalid Chunked Response]"),Kt(this),Gt(this)}else It(this.i,this.l,o,null),Yt(this,o);4==d&&Kt(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,Wt(this)))}else(function(t){const e={};t=(t.g&&2<=qe(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(p(t[i]))continue;var n=_(t[i]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const r=e[s]||[];e[s]=r,r.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Kt(this),Gt(this)}}}catch(d){}},Lt.prototype.cancel=function(){this.J=!0,Kt(this)},Lt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(Et(),St(17)),Kt(this),this.s=2,Gt(this)):Ht(this,this.S-t)};var Xt=class{constructor(t,e){this.g=t,this.map=e}};function Qt(t){this.l=t||10,s.PerformanceNavigationTiming?t=0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function $t(t){return t.h?1:t.g?t.g.size:0}function Zt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function te(t,e){t.g?t.g.add(e):t.h=e}function ee(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ne(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(r(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(r(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(r(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),s=i.length,a=0;a<s;a++)e.call(void 0,i[a],n&&n[a],t)}Qt.prototype.cancel=function(){if(this.i=ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var se=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function re(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof re){this.h=t.h,oe(this,t.j),this.o=t.o,this.g=t.g,le(this,t.s),this.l=t.l;var e=t.i,n=new xe;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ce(this,n),this.m=t.m}else t&&(e=String(t).match(se))?(this.h=!1,oe(this,e[1]||"",!0),this.o=de(e[2]||""),this.g=de(e[3]||"",!0),le(this,e[4]),this.l=de(e[5]||"",!0),ce(this,e[6]||"",!0),this.m=de(e[7]||"")):(this.h=!1,this.i=new xe(null,this.h))}function ae(t){return new re(t)}function oe(t,e,n){t.j=n?de(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function ce(t,e,n){e instanceof xe?(t.i=e,function(t,e){e&&!t.j&&(_e(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ae(this,e),ke(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=fe(e,be)),t.i=new xe(e,t.h))}function he(t,e,n){t.i.set(e,n)}function ue(t){return he(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function de(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fe(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,pe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}re.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fe(e,me,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(fe(e,me,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(fe(n,"/"==n.charAt(0)?ye:ve,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",fe(n,we)),t.join("")};var ge,me=/[#\/\?@]/g,ve=/[#\?:]/g,ye=/[#\?]/g,be=/[#\?@]/g,we=/#/g;function xe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _e(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ae(t,e){_e(t),e=Se(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ee(t,e){return _e(t),e=Se(t,e),t.g.has(e)}function ke(t,e,n){Ae(t,e),0<n.length&&(t.i=null,t.g.set(Se(t,e),d(n)),t.h+=n.length)}function Se(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ce(t,e,n,i,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),i(n)}catch(r){}}function Te(){this.g=new ft}function Me(t,e,n){const i=n||"";try{ie(t,(function(t,n){let s=t;a(t)&&(s=ut(t)),e.push(i+n+"="+encodeURIComponent(s))}))}catch(sw){throw e.push(i+"type="+encodeURIComponent("_badmap")),sw}}function Ie(t){this.l=t.Ub||null,this.j=t.eb||!1}function Re(t,e){nt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pe(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function De(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Ne(t)}function Ne(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Le(t){let e="";return y(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Oe(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Le(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):he(t,e,n))}function Fe(t){nt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=xe.prototype).add=function(t,e){_e(this),this.i=null,t=Se(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){_e(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},t.na=function(){_e(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let t=0;t<s.length;t++)n.push(e[i])}return n},t.V=function(t){_e(this);let e=[];if("string"===typeof t)Ee(this,t)&&(e=e.concat(this.g.get(Se(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return _e(this),this.i=null,Ee(this,t=Se(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const r=encodeURIComponent(String(i)),a=this.V(i);for(i=0;i<a.length;i++){var s=r;""!==a[i]&&(s+="="+encodeURIComponent(String(a[i]))),t.push(s)}}return this.i=t.join("&")},u(Ie,pt),Ie.prototype.g=function(){return new Re(this.l,this.j)},Ie.prototype.i=(ge={},function(){return ge}),u(Re,nt),(t=Re.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Ne(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||s).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,De(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ne(this)),this.g&&(this.readyState=3,Ne(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pe(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?De(this):Ne(this),3==this.readyState&&Pe(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,De(this))},t.Qa=function(t){this.g&&(this.response=t,De(this))},t.ga=function(){this.g&&De(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Re.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),u(Fe,nt);var je=/^https?$/i,Be=["POST","PUT"];function ze(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Ve(t),We(t)}function Ve(t){t.A||(t.A=!0,it(t,"complete"),it(t,"error"))}function Ue(t){if(t.h&&"undefined"!=typeof i&&(!t.v[1]||4!=qe(t)||2!=t.Z()))if(t.u&&4==qe(t))rt(t.Ea,0,t);else if(it(t,"readystatechange"),4==qe(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===i){var a=String(t.D).match(se)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),r=!je.test(a?a.toLowerCase():"")}n=r}if(n)it(t,"complete"),it(t,"success");else{t.m=6;try{var o=2<qe(t)?t.g.statusText:""}catch(l){o=""}t.l=o+" ["+t.Z()+"]",Ve(t)}}finally{We(t)}}}function We(t,e){if(t.g){He(t);const n=t.g,i=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||it(t,"ready");try{n.onreadystatechange=i}catch(sw){}}}function He(t){t.I&&(s.clearTimeout(t.I),t.I=null)}function qe(t){return t.g?t.g.readyState:0}function Ge(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Hn){return null}}function Ke(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ye(t){this.Aa=0,this.i=[],this.j=new Mt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ke("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ke("baseRetryDelayMs",5e3,t),this.cb=Ke("retryDelaySeedMs",1e4,t),this.Wa=Ke("forwardChannelMaxRetries",2,t),this.wa=Ke("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new Qt(t&&t.concurrentRequestLimit),this.Da=new Te,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xe(t){if(Je(t),3==t.G){var e=t.U++,n=ae(t.I);if(he(n,"SID",t.K),he(n,"RID",e),he(n,"TYPE","terminate"),tn(t,n),(e=new Lt(t,t.j,e)).L=2,e.v=ue(ae(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&s.Image&&((new Image).src=e.v,n=!0),n||(e.g=fn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),Wt(e)}un(t)}function Qe(t){t.g&&(rn(t),t.g.cancel(),t.g=null)}function Je(t){Qe(t),t.u&&(s.clearTimeout(t.u),t.u=null),on(t),t.h.cancel(),t.s&&("number"===typeof t.s&&s.clearTimeout(t.s),t.s=null)}function $e(t){if(!Jt(t.h)&&!t.s){t.s=!0;var e=t.Ga;C||I(),T||(C(),T=!0),M.add(e,t),t.B=0}}function Ze(t,e){var n;n=e?e.l:t.U++;const i=ae(t.I);he(i,"SID",t.K),he(i,"RID",n),he(i,"AID",t.T),tn(t,i),t.m&&t.o&&Oe(i,t.m,t.o),n=new Lt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=en(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),te(t.h,n),Bt(n,i,e)}function tn(t,e){t.H&&y(t.H,(function(t,n){he(e,n,t)})),t.l&&ie({},(function(t,n){he(e,n,t)}))}function en(t,e,n){n=Math.min(t.i.length,n);var i=t.l?c(t.l.Na,t.l,t):null;t:{var s=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=s[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=e,0>n)e=Math.max(0,s[o].g-100),a=!1;else try{Me(l,t,"req"+n+"_")}catch(r){i&&i(l)}}if(a){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function nn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;C||I(),T||(C(),T=!0),M.add(e,t),t.v=0}}function sn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Tt(c(t.Fa,t),cn(t,t.v)),t.v++,!0)}function rn(t){null!=t.A&&(s.clearTimeout(t.A),t.A=null)}function an(t){t.g=new Lt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=ae(t.qa);he(e,"RID","rpc"),he(e,"SID",t.K),he(e,"AID",t.T),he(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&he(e,"TO",t.ja),he(e,"TYPE","xmlhttp"),tn(t,e),t.m&&t.o&&Oe(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=ue(ae(e)),n.m=null,n.P=!0,zt(n,t)}function on(t){null!=t.C&&(s.clearTimeout(t.C),t.C=null)}function ln(t,e){var n=null;if(t.g==e){on(t),rn(t),t.g=null;var i=2}else{if(!Zt(t.h,e))return;n=e.D,ee(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var s=t.B;it(i=_t(),new Ct(i,n)),$e(t)}else nn(t);else if(3==(s=e.s)||0==s&&0<e.X||!(1==i&&function(t,e){return!($t(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=Tt(c(t.Ga,t,e),cn(t,t.B)),t.B++,!0))}(t,e)||2==i&&sn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:hn(t,5);break;case 4:hn(t,10);break;case 3:hn(t,6);break;default:hn(t,2)}}function cn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function hn(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.fb,t),i=t.Xa;const e=!i;i=new re(i||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||oe(i,"https"),ue(i),e?function(t,e){const n=new Mt;if(s.Image){const i=new Image;i.onload=h(Ce,n,"TestLoadImage: loaded",!0,e,i),i.onerror=h(Ce,n,"TestLoadImage: error",!1,e,i),i.onabort=h(Ce,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=h(Ce,n,"TestLoadImage: timeout",!1,e,i),s.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new Mt;const n=new AbortController,i=setTimeout((()=>{n.abort(),Ce(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(i),t.ok?Ce(0,0,!0,e):Ce(0,0,!1,e)})).catch((()=>{clearTimeout(i),Ce(0,0,!1,e)}))}(i.toString(),n)}else St(2);t.G=0,t.l&&t.l.sa(e),un(t),Je(t)}function un(t){if(t.G=0,t.ka=[],t.l){const e=ne(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function dn(t,e,n){var i=n instanceof re?ae(n):new re(n);if(""!=i.g)e&&(i.g=e+"."+i.g),le(i,i.s);else{var r=s.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var a=new re(null);i&&oe(a,i),e&&(a.g=e),r&&le(a,r),n&&(a.l=n),i=a}return n=t.D,e=t.ya,n&&e&&he(i,n,e),he(i,"VER",t.la),tn(t,i),i}function fn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Fe(new Ie({eb:n})):new Fe(t.pa)).Ha(t.J),e}function pn(){}function gn(){}function mn(t,e){nt.call(this),this.g=new Ye(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new bn(this)}function vn(t){yt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function yn(){bt.call(this),this.status=1}function bn(t){this.g=t}(t=Fe.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rt.g(),this.v=this.o?gt(this.o):gt(Rt),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(a){return void ze(this,a)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=s.FormData&&t instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Be,e,void 0))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{He(this),this.u=!0,this.g.send(t),this.u=!1}catch(a){ze(this,a)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,it(this,"complete"),it(this,"abort"),We(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),We(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ue(this):this.bb())},t.bb=function(){Ue(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<qe(this)?this.g.status:-1}catch(ge){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(ge){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=Ye.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){St(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),$e(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Lt(this,this.j,t);let r=this.o;if(this.S&&(r?(r=b(r),x(r,this.S)):r=this.S),null!==this.m||this.O||(s.H=r,r=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=en(this,s,e),he(n=ae(this.I),"RID",t),he(n,"CVER",22),this.D&&he(n,"X-HTTP-Session-Id",this.D),tn(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(Le(r)))+"&"+e:this.m&&Oe(n,this.m,r)),te(this.h,s),this.Ua&&he(n,"TYPE","init"),this.P?(he(n,"$req",e),he(n,"SID","null"),s.T=!0,Bt(s,n,null)):Bt(s,n,e),this.G=2}}else 3==this.G&&(t?Ze(this,t):0==this.i.length||Jt(this.h)||Ze(this))},t.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Tt(c(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Qe(this),an(this))},t.Za=function(){null!=this.C&&(this.C=null,Qe(this),sn(this),St(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=pn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},gn.prototype.g=function(t,e){return new mn(t,e)},u(mn,nt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Xe(this.g)},mn.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=ut(t),t=n);e.i.push(new Xt(e.Ya++,t)),3==e.G&&$e(e)},mn.prototype.N=function(){this.g.l=null,delete this.j,Xe(this.g),delete this.g,mn.aa.N.call(this)},u(vn,yt),u(yn,bt),u(bn,pn),bn.prototype.ua=function(){it(this.g,"a")},bn.prototype.ta=function(t){it(this.g,new vn(t))},bn.prototype.sa=function(t){it(this.g,new yn)},bn.prototype.ra=function(){it(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Bn=Vn.createWebChannelTransport=function(){return new gn},jn=Vn.getStatEventTarget=function(){return _t()},Fn=Vn.Event=wt,On=Vn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pt.NO_ERROR=0,Pt.TIMEOUT=8,Pt.HTTP_ERROR=6,Ln=Vn.ErrorCode=Pt,Dt.COMPLETE="complete",Nn=Vn.EventType=Dt,mt.EventType=vt,vt.OPEN="a",vt.CLOSE="b",vt.ERROR="c",vt.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Dn=Vn.WebChannel=mt,Pn=Vn.FetchXmlHttpFactory=Ie,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Rn=Vn.XhrIo=Fe}).apply("undefined"!==typeof zn?zn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Un="@firebase/firestore";class Wn{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");let Hn="10.12.1";const qn=new oe("@firebase/firestore");function Gn(){return qn.logLevel}function Kn(t){if(qn.logLevel<=ne.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const s=n.map(Qn);qn.debug("Firestore (".concat(Hn,"): ").concat(t),...s)}}function Yn(t){if(qn.logLevel<=ne.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const s=n.map(Qn);qn.error("Firestore (".concat(Hn,"): ").concat(t),...s)}}function Xn(t){if(qn.logLevel<=ne.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const s=n.map(Qn);qn.warn("Firestore (".concat(Hn,"): ").concat(t),...s)}}function Qn(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Jn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat(Hn,") INTERNAL ASSERTION FAILED: ")+t;throw Yn(e),new Error(e)}function $n(t,e){t||Jn()}function Zn(t,e){return t}const ti={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ei extends qt{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ni{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ii{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class si{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Wn.UNAUTHENTICATED)))}shutdown(){}}class ri{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class ai{constructor(t){this.t=t,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let s=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ni,t.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},a=t=>{Kn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>a(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?a(t):(Kn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ni)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Kn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?($n("string"==typeof e.accessToken),new ii(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return $n(null===t||"string"==typeof t),new Wn(t)}}class oi{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class li{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new oi(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ci{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hi{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Kn("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.R;return this.R=t.token,Kn("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Kn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Kn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?($n("string"==typeof t.token),this.R=t.token,new ci(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ui(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class di{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=ui(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<e&&(n+=t.charAt(i[s]%62))}return n}}function fi(t,e){return t<e?-1:t>e?1:0}function pi(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class gi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ei(ti.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ei(ti.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ei(ti.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ei(ti.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return gi.fromMillis(Date.now())}static fromDate(t){return gi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new gi(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fi(this.nanoseconds,t.nanoseconds):fi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mi{constructor(t){this.timestamp=t}static fromTimestamp(t){return new mi(t)}static min(){return new mi(new gi(0,0))}static max(){return new mi(new gi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class vi{constructor(t,e,n){void 0===e?e=0:e>t.length&&Jn(),void 0===n?n=t.length-e:n>t.length-e&&Jn(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===vi.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof vi?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),s=e.get(i);if(n<s)return-1;if(n>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class yi extends vi{construct(t,e,n){return new yi(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const s of n){if(s.indexOf("//")>=0)throw new ei(ti.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));t.push(...s.split("/").filter((t=>t.length>0)))}return new yi(t)}static emptyPath(){return new yi([])}}const bi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends vi{construct(t,e,n){return new wi(t,e,n)}static isValidIdentifier(t){return bi.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wi(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const s=()=>{if(0===n.length)throw new ei(ti.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let r=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ei(ti.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ei(ti.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(r=!r,i++):"."!==e||r?(n+=e,i++):(s(),i++)}if(s(),r)throw new ei(ti.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new wi(e)}static emptyPath(){return new wi([])}}class xi{constructor(t){this.path=t}static fromPath(t){return new xi(yi.fromString(t))}static fromName(t){return new xi(yi.fromString(t).popFirst(5))}static empty(){return new xi(yi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===yi.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return yi.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xi(new yi(t.slice()))}}class _i{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}_i.UNKNOWN_ID=-1;function Ai(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=mi.fromTimestamp(1e9===i?new gi(n+1,0):new gi(n,i));return new ki(s,xi.empty(),e)}function Ei(t){return new ki(t.readTime,t.key,-1)}class ki{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new ki(mi.min(),xi.empty(),-1)}static max(){return new ki(mi.max(),xi.empty(),-1)}}function Si(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=xi.comparator(t.documentKey,e.documentKey),0!==n?n:fi(t.largestBatchId,e.largestBatchId))}const Ci="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ti{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Mi(t){if(t.code!==ti.FAILED_PRECONDITION||t.message!==Ci)throw t;Kn("LocalStore","Unexpectedly lost primary lease")}class Ii{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Jn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ii(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Ii?e:Ii.resolve(e)}catch(t){return Ii.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Ii.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Ii.reject(e)}static resolve(t){return new Ii(((e,n)=>{e(t)}))}static reject(t){return new Ii(((e,n)=>{n(t)}))}static waitFor(t){return new Ii(((e,n)=>{let i=0,s=0,r=!1;t.forEach((t=>{++i,t.next((()=>{++s,r&&s===i&&e()}),(t=>n(t)))})),r=!0,s===i&&e()}))}static or(t){let e=Ii.resolve(!1);for(const n of t)e=e.next((t=>t?Ii.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Ii(((n,i)=>{const s=t.length,r=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;e(t[l]).next((t=>{r[l]=t,++a,a===s&&n(r)}),(t=>i(t)))}}))}static doWhile(t,e){return new Ii(((n,i)=>{const s=()=>{!0===t()?e().next((()=>{s()}),i):n()};s()}))}}function Ri(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pi(t){return"IndexedDbTransactionError"===t.name}class Di{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function Ni(t){return null==t}function Li(t){return 0===t&&1/t==-1/0}function Oi(t){return"number"==typeof t&&Number.isInteger(t)&&!Li(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}Di.oe=-1;const Fi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ji=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bi=ji;function zi(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ui(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Wi{constructor(t,e){this.comparator=t,this.root=e||qi.EMPTY}insert(t,e){return new Wi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(t){return new Wi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push("".concat(e,":").concat(n)),!1))),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Hi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Hi(this.root,t,this.comparator,!1)}getReverseIterator(){return new Hi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Hi(this.root,t,this.comparator,!0)}}class Hi{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qi{constructor(t,e,n,i,s){this.key=t,this.value=e,this.color=null!=n?n:qi.RED,this.left=null!=i?i:qi.EMPTY,this.right=null!=s?s:qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,s){return new qi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const s=n(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===s?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return qi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Jn();if(this.right.isRed())throw Jn();const t=this.left.check();if(t!==this.right.check())throw Jn();return t+(this.isRed()?0:1)}}qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1,qi.EMPTY=new class{constructor(){this.size=0}get key(){throw Jn()}get value(){throw Jn()}get color(){throw Jn()}get left(){throw Jn()}get right(){throw Jn()}copy(t,e,n,i,s){return this}insert(t,e,n){return new qi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gi{constructor(t){this.comparator=t,this.data=new Wi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ki(this.data.getIterator())}getIteratorFrom(t){return new Ki(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Gi))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Gi(this.comparator);return e.data=t,e}}class Ki{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yi{constructor(t){this.fields=t,t.sort(wi.comparator)}static empty(){return new Yi([])}unionWith(t){let e=new Gi(wi.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Yi(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return pi(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Xi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Xi("Invalid base64 string: "+t):t}}(t);return new Qi(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Qi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qi.EMPTY_BYTE_STRING=new Qi("");const Ji=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if($n(!!t),"string"==typeof t){let e=0;const n=Ji.exec(t);if($n(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Zi(t.seconds),nanos:Zi(t.nanos)}}function Zi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ts(t){return"string"==typeof t?Qi.fromBase64String(t):Qi.fromUint8Array(t)}function es(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ns(t){const e=t.mapValue.fields.__previous_value__;return es(e)?ns(e):e}function is(t){const e=$i(t.mapValue.fields.__local_write_time__.timestampValue);return new gi(e.seconds,e.nanos)}class ss{constructor(t,e,n,i,s,r,a,o,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class rs{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new rs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof rs&&t.projectId===this.projectId&&t.database===this.database}}const as={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?es(t)?4:xs(t)?9007199254740991:10:Jn()}function ls(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return is(t).isEqual(is(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=$i(t.timestampValue),i=$i(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ts(t.bytesValue).isEqual(ts(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Zi(t.geoPointValue.latitude)===Zi(e.geoPointValue.latitude)&&Zi(t.geoPointValue.longitude)===Zi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Zi(t.integerValue)===Zi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Zi(t.doubleValue),i=Zi(e.doubleValue);return n===i?Li(n)===Li(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(zi(n)!==zi(i))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===i[s]||!ls(n[s],i[s])))return!1;return!0}(t,e);default:return Jn()}}function cs(t,e){return void 0!==(t.values||[]).find((t=>ls(t,e)))}function hs(t,e){if(t===e)return 0;const n=os(t),i=os(e);if(n!==i)return fi(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return fi(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Zi(t.integerValue||t.doubleValue),i=Zi(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return us(t.timestampValue,e.timestampValue);case 4:return us(is(t),is(e));case 5:return fi(t.stringValue,e.stringValue);case 6:return function(t,e){const n=ts(t),i=ts(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let s=0;s<n.length&&s<i.length;s++){const t=fi(n[s],i[s]);if(0!==t)return t}return fi(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=fi(Zi(t.latitude),Zi(e.latitude));return 0!==n?n:fi(Zi(t.longitude),Zi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const t=hs(n[s],i[s]);if(t)return t}return fi(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===as.mapValue&&e===as.mapValue)return 0;if(t===as.mapValue)return 1;if(e===as.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),s=e.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let a=0;a<i.length&&a<r.length;++a){const t=fi(i[a],r[a]);if(0!==t)return t;const e=hs(n[i[a]],s[r[a]]);if(0!==e)return e}return fi(i.length,r.length)}(t.mapValue,e.mapValue);default:throw Jn()}}function us(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fi(t,e);const n=$i(t),i=$i(e),s=fi(n.seconds,i.seconds);return 0!==s?s:fi(n.nanos,i.nanos)}function ds(t){return fs(t)}function fs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=$i(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return ts(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return xi.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=fs(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const s of e)i?i=!1:n+=",",n+="".concat(s,":").concat(fs(t.fields[s]));return n+"}"}(t.mapValue):Jn()}function ps(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function gs(t){return!!t&&"integerValue"in t}function ms(t){return!!t&&"arrayValue"in t}function vs(t){return!!t&&"nullValue"in t}function ys(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bs(t){return!!t&&"mapValue"in t}function ws(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vi(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ws(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ws(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xs(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class _s{constructor(t){this.value=t}static empty(){return new _s({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!bs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ws(e)}setAll(t){let e=wi.emptyPath(),n={},i=[];t.forEach(((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=s.popLast()}t?n[s.lastSegment()]=ws(t):i.push(s.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,n,i)}delete(t){const e=this.field(t.popLast());bs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ls(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];bs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Vi(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new _s(ws(this.value))}}function As(t){const e=[];return Vi(t.fields,((t,n)=>{const i=new wi([t]);if(bs(n)){const t=As(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Yi(e)}class Es{constructor(t,e,n,i,s,r,a){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=s,this.data=r,this.documentState=a}static newInvalidDocument(t){return new Es(t,0,mi.min(),mi.min(),mi.min(),_s.empty(),0)}static newFoundDocument(t,e,n,i){return new Es(t,1,e,mi.min(),n,i,0)}static newNoDocument(t,e){return new Es(t,2,e,mi.min(),mi.min(),_s.empty(),0)}static newUnknownDocument(t,e){return new Es(t,3,e,mi.min(),mi.min(),_s.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(mi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_s.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mi.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Es&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ks{constructor(t,e){this.position=t,this.inclusive=e}}function Ss(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(i=r.field.isKeyField()?xi.comparator(xi.fromName(a.referenceValue),n.key):hs(a,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function Cs(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}class Ts{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function Ms(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Is{}class Rs extends Is{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Bs(t,e,n):"array-contains"===e?new Ws(t,n):"in"===e?new Hs(t,n):"not-in"===e?new qs(t,n):"array-contains-any"===e?new Gs(t,n):new Rs(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new zs(t,n):new Vs(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(hs(e,this.value)):null!==e&&os(this.value)===os(e)&&this.matchesComparison(hs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Jn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ps extends Is{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Ps(t,e)}matches(t){return Ds(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ds(t){return"and"===t.op}function Ns(t){return Ls(t)&&Ds(t)}function Ls(t){for(const e of t.filters)if(e instanceof Ps)return!1;return!0}function Os(t){if(t instanceof Rs)return t.field.canonicalString()+t.op.toString()+ds(t.value);if(Ns(t))return t.filters.map((t=>Os(t))).join(",");{const e=t.filters.map((t=>Os(t))).join(",");return"".concat(t.op,"(").concat(e,")")}}function Fs(t,e){return t instanceof Rs?function(t,e){return e instanceof Rs&&t.op===e.op&&t.field.isEqual(e.field)&&ls(t.value,e.value)}(t,e):t instanceof Ps?function(t,e){return e instanceof Ps&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Fs(n,e.filters[i])),!0)}(t,e):void Jn()}function js(t){return t instanceof Rs?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(ds(t.value))}(t):t instanceof Ps?function(t){return t.op.toString()+" {"+t.getFilters().map(js).join(" ,")+"}"}(t):"Filter"}class Bs extends Rs{constructor(t,e,n){super(t,e,n),this.key=xi.fromName(n.referenceValue)}matches(t){const e=xi.comparator(t.key,this.key);return this.matchesComparison(e)}}class zs extends Rs{constructor(t,e){super(t,"in",e),this.keys=Us("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Vs extends Rs{constructor(t,e){super(t,"not-in",e),this.keys=Us("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Us(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>xi.fromName(t.referenceValue)))}class Ws extends Rs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ms(e)&&cs(e.arrayValue,this.value)}}class Hs extends Rs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&cs(this.value.arrayValue,e)}}class qs extends Rs{constructor(t,e){super(t,"not-in",e)}matches(t){if(cs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!cs(this.value.arrayValue,e)}}class Gs extends Rs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ms(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>cs(this.value.arrayValue,t)))}}class Ks{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=a,this.ue=null}}function Ys(t){return new Ks(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Xs(t){const e=Zn(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Os(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Ni(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ds(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ds(t))).join(",")),e.ue=t}return e.ue}function Qs(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ms(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Fs(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cs(t.startAt,e.startAt)&&Cs(t.endAt,e.endAt)}function Js(t){return xi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class $s{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Zs(t,e,n,i,s,r,a,o){return new $s(t,e,n,i,s,r,a,o)}function tr(t){return new $s(t)}function er(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function nr(t){return null!==t.collectionGroup}function ir(t){const e=Zn(t);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Gi(wi.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ts(i,n))})),t.has(wi.keyField().canonicalString())||e.ce.push(new Ts(wi.keyField(),n))}return e.ce}function sr(t){const e=Zn(t);return e.le||(e.le=rr(e,ir(t))),e.le}function rr(t,e){if("F"===t.limitType)return Ys(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Ts(t.field,e)}));const n=t.endAt?new ks(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ks(t.startAt.position,t.startAt.inclusive):null;return Ys(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function ar(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function or(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lr(t,e){return Qs(sr(t),sr(e))&&t.limitType===e.limitType}function cr(t){return"".concat(Xs(sr(t)),"|lt:").concat(t.limitType)}function hr(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((t=>js(t))).join(", "),"]")),Ni(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t))).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ds(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ds(t))).join(",")),"Target(".concat(e,")")}(sr(t)),"; limitType=").concat(t.limitType,")")}function ur(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):xi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of ir(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Ss(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,ir(t),e))&&!(t.endAt&&!function(t,e,n){const i=Ss(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,ir(t),e))}(t,e)}function dr(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fr(t){return(e,n)=>{let i=!1;for(const s of ir(t)){const t=pr(s,e,n);if(0!==t)return t;i=i||s.field.isKeyField()}return 0}}function pr(t,e,n){const i=t.field.isKeyField()?xi.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),s=n.data.field(t);return null!==i&&null!==s?hs(i,s):Jn()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Jn()}}class gr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,s]of n)if(this.equalsFn(i,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Vi(this.inner,((e,n)=>{for(const[i,s]of n)t(i,s)}))}isEmpty(){return Ui(this.inner)}size(){return this.innerSize}}const mr=new Wi(xi.comparator);function vr(){return mr}const yr=new Wi(xi.comparator);function br(){let t=yr;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const s of n)t=t.insert(s.key,s);return t}function wr(t){let e=yr;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function xr(){return Ar()}function _r(){return Ar()}function Ar(){return new gr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Er=new Wi(xi.comparator),kr=new Gi(xi.comparator);function Sr(){let t=kr;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const s of n)t=t.add(s);return t}const Cr=new Gi(fi);function Tr(){return Cr}function Mr(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Li(e)?"-0":e}}function Ir(t){return{integerValue:""+t}}function Rr(t,e){return Oi(e)?Ir(e):Mr(t,e)}class Pr{constructor(){this._=void 0}}function Dr(t,e,n){return t instanceof Or?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&es(e)&&(e=ns(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Fr?jr(t,e):t instanceof Br?zr(t,e):function(t,e){const n=Lr(t,e),i=Ur(n)+Ur(t.Pe);return gs(n)&&gs(t.Pe)?Ir(i):Mr(t.serializer,i)}(t,e)}function Nr(t,e,n){return t instanceof Fr?jr(t,e):t instanceof Br?zr(t,e):n}function Lr(t,e){return t instanceof Vr?function(t){return gs(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Or extends Pr{}class Fr extends Pr{constructor(t){super(),this.elements=t}}function jr(t,e){const n=Wr(e);for(const i of t.elements)n.some((t=>ls(t,i)))||n.push(i);return{arrayValue:{values:n}}}class Br extends Pr{constructor(t){super(),this.elements=t}}function zr(t,e){let n=Wr(e);for(const i of t.elements)n=n.filter((t=>!ls(t,i)));return{arrayValue:{values:n}}}class Vr extends Pr{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Ur(t){return Zi(t.integerValue||t.doubleValue)}function Wr(t){return ms(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Hr{constructor(t,e){this.field=t,this.transform=e}}class qr{constructor(t,e){this.version=t,this.transformResults=e}}class Gr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Gr}static exists(t){return new Gr(void 0,t)}static updateTime(t){return new Gr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Kr(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Yr{}function Xr(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ra(t.key,Gr.none()):new ta(t.key,t.data,Gr.none());{const n=t.data,i=_s.empty();let s=new Gi(wi.comparator);for(let t of e.fields)if(!s.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),s=s.add(t)}return new ea(t.key,i,new Yi(s.toArray()),Gr.none())}}function Qr(t,e,n){t instanceof ta?function(t,e,n){const i=t.value.clone(),s=ia(t.fieldTransforms,e,n.transformResults);i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof ea?function(t,e,n){if(!Kr(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=ia(t.fieldTransforms,e,n.transformResults),s=e.data;s.setAll(na(t)),s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Jr(t,e,n,i){return t instanceof ta?function(t,e,n,i){if(!Kr(t.precondition,e))return n;const s=t.value.clone(),r=sa(t.fieldTransforms,i,e);return s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null}(t,e,n,i):t instanceof ea?function(t,e,n,i){if(!Kr(t.precondition,e))return n;const s=sa(t.fieldTransforms,i,e),r=e.data;return r.setAll(na(t)),r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Kr(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function $r(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),s=Lr(i.transform,t||null);null!=s&&(null===n&&(n=_s.empty()),n.set(i.field,s))}return n||null}function Zr(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&pi(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Fr&&e instanceof Fr||t instanceof Br&&e instanceof Br?pi(t.elements,e.elements,ls):t instanceof Vr&&e instanceof Vr?ls(t.Pe,e.Pe):t instanceof Or&&e instanceof Or}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ta extends Yr{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ea extends Yr{constructor(t,e,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function na(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function ia(t,e,n){const i=new Map;$n(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,o=e.data.field(r.field);i.set(r.field,Nr(a,o,n[s]))}return i}function sa(t,e,n){const i=new Map;for(const s of t){const t=s.transform,r=n.data.field(s.field);i.set(s.field,Dr(t,r,e))}return i}class ra extends Yr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aa extends Yr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oa{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&Qr(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Jr(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Jr(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=_r();return this.mutations.forEach((i=>{const s=t.get(i.key),r=s.overlayedDocument;let a=this.applyToLocalView(r,s.mutatedFields);a=e.has(i.key)?null:a;const o=Xr(r,a);null!==o&&n.set(i.key,o),r.isValidDocument()||r.convertToNoDocument(mi.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Sr())}isEqual(t){return this.batchId===t.batchId&&pi(this.mutations,t.mutations,((t,e)=>Zr(t,e)))&&pi(this.baseMutations,t.baseMutations,((t,e)=>Zr(t,e)))}}class la{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){$n(t.mutations.length===n.length);let i=Er;const s=t.mutations;for(let r=0;r<s.length;r++)i=i.insert(s[r].key,n[r].version);return new la(t,e,n,i)}}class ca{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ha{constructor(t,e){this.count=t,this.unchangedNames=e}}var ua,da;function fa(t){switch(t){default:return Jn();case ti.CANCELLED:case ti.UNKNOWN:case ti.DEADLINE_EXCEEDED:case ti.RESOURCE_EXHAUSTED:case ti.INTERNAL:case ti.UNAVAILABLE:case ti.UNAUTHENTICATED:return!1;case ti.INVALID_ARGUMENT:case ti.NOT_FOUND:case ti.ALREADY_EXISTS:case ti.PERMISSION_DENIED:case ti.FAILED_PRECONDITION:case ti.ABORTED:case ti.OUT_OF_RANGE:case ti.UNIMPLEMENTED:case ti.DATA_LOSS:return!0}}function pa(t){if(void 0===t)return Yn("GRPC error has no .code"),ti.UNKNOWN;switch(t){case ua.OK:return ti.OK;case ua.CANCELLED:return ti.CANCELLED;case ua.UNKNOWN:return ti.UNKNOWN;case ua.DEADLINE_EXCEEDED:return ti.DEADLINE_EXCEEDED;case ua.RESOURCE_EXHAUSTED:return ti.RESOURCE_EXHAUSTED;case ua.INTERNAL:return ti.INTERNAL;case ua.UNAVAILABLE:return ti.UNAVAILABLE;case ua.UNAUTHENTICATED:return ti.UNAUTHENTICATED;case ua.INVALID_ARGUMENT:return ti.INVALID_ARGUMENT;case ua.NOT_FOUND:return ti.NOT_FOUND;case ua.ALREADY_EXISTS:return ti.ALREADY_EXISTS;case ua.PERMISSION_DENIED:return ti.PERMISSION_DENIED;case ua.FAILED_PRECONDITION:return ti.FAILED_PRECONDITION;case ua.ABORTED:return ti.ABORTED;case ua.OUT_OF_RANGE:return ti.OUT_OF_RANGE;case ua.UNIMPLEMENTED:return ti.UNIMPLEMENTED;case ua.DATA_LOSS:return ti.DATA_LOSS;default:return Jn()}}(da=ua||(ua={}))[da.OK=0]="OK",da[da.CANCELLED=1]="CANCELLED",da[da.UNKNOWN=2]="UNKNOWN",da[da.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",da[da.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",da[da.NOT_FOUND=5]="NOT_FOUND",da[da.ALREADY_EXISTS=6]="ALREADY_EXISTS",da[da.PERMISSION_DENIED=7]="PERMISSION_DENIED",da[da.UNAUTHENTICATED=16]="UNAUTHENTICATED",da[da.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",da[da.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",da[da.ABORTED=10]="ABORTED",da[da.OUT_OF_RANGE=11]="OUT_OF_RANGE",da[da.UNIMPLEMENTED=12]="UNIMPLEMENTED",da[da.INTERNAL=13]="INTERNAL",da[da.UNAVAILABLE=14]="UNAVAILABLE",da[da.DATA_LOSS=15]="DATA_LOSS";let ga=null;function ma(){return new TextEncoder}const va=new Cn([4294967295,4294967295],0);function ya(t){const e=ma().encode(t),n=new Tn;return n.update(e),new Uint8Array(n.digest())}function ba(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Cn([n,i],0),new Cn([s,r],0)]}class wa{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new xa("Invalid padding: ".concat(e));if(n<0)throw new xa("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new xa("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new xa("Invalid padding when bitmap length is 0: ".concat(e));this.Ie=8*t.length-e,this.Te=Cn.fromNumber(this.Ie)}Ee(t,e,n){let i=t.add(e.multiply(Cn.fromNumber(n)));return 1===i.compare(va)&&(i=new Cn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=ya(t),[n,i]=ba(e);for(let s=0;s<this.hashCount;s++){const t=this.Ee(n,i,s);if(!this.de(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),r=new wa(s,i,e);return n.forEach((t=>r.insert(t))),r}insert(t){if(0===this.Ie)return;const e=ya(t),[n,i]=ba(e);for(let s=0;s<this.hashCount;s++){const t=this.Ee(n,i,s);this.Ae(t)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _a{constructor(t,e,n,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Aa.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new _a(mi.min(),i,new Wi(fi),vr(),Sr())}}class Aa{constructor(t,e,n,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Aa(n,e,Sr(),Sr(),Sr())}}class Ea{constructor(t,e,n,i){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=i}}class ka{constructor(t,e){this.targetId=t,this.me=e}}class Sa{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qi.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Ca{constructor(){this.fe=0,this.ge=Ia(),this.pe=Qi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Sr(),e=Sr(),n=Sr();return this.ge.forEach(((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Jn()}})),new Aa(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=Ia()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,$n(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ta{constructor(t){this.Le=t,this.Be=new Map,this.ke=vr(),this.qe=Ma(),this.Qe=new Wi(fi)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,(e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:Jn()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((t,n)=>{this.ze(n)&&e(n)}))}He(t){const e=t.targetId,n=t.me.count,i=this.Je(e);if(i){const s=i.target;if(Js(s))if(0===n){const t=new xi(s.path);this.Ue(e,t,Es.newNoDocument(t,mi.min()))}else $n(1===n);else{const i=this.Ye(e);if(i!==n){const n=this.Ze(t),s=n?this.Xe(n,t,i):1;if(0!==s){this.je(e);const t=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,t)}null==ga||ga.et(function(t,e,n,i,s){var r,a,o,l,c,h;const u={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(r=null==d?void 0:d.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(h=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==h?h:0,mightContain:t=>{var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),u}(i,t.me,this.Le.tt(),n,s))}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=e;let r,a;try{r=ts(n).toUint8Array()}catch(t){if(t instanceof Xi)return Xn("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{a=new wa(r,i,s)}catch(t){return Xn(t instanceof xa?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===a.Ie?null:a}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const s=this.Le.tt(),r="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());t.mightContain(r)||(this.Ue(e,n,null),i++)})),i}rt(t){const e=new Map;this.Be.forEach(((n,i)=>{const s=this.Je(i);if(s){if(n.current&&Js(s.target)){const e=new xi(s.target.path);null!==this.ke.get(e)||this.it(i,e)||this.Ue(i,e,Es.newNoDocument(e,t))}n.be&&(e.set(i,n.Ce()),n.ve())}}));let n=Sr();this.qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Je(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.ke.forEach(((e,n)=>n.setReadTime(t)));const i=new _a(t,e,this.Qe,this.ke,n);return this.ke=vr(),this.qe=Ma(),this.Qe=new Wi(fi),i}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,e)?i.Fe(e,1):i.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Ca,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Gi(fi),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||Kn("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Ca),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.Ue(t,e,null)}))}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Ma(){return new Wi(xi.comparator)}function Ia(){return new Wi(xi.comparator)}const Ra={asc:"ASCENDING",desc:"DESCENDING"},Pa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Da={and:"AND",or:"OR"};class Na{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function La(t,e){return t.useProto3Json||Ni(e)?e:{value:e}}function Oa(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fa(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ja(t,e){return Oa(t,e.toTimestamp())}function Ba(t){return $n(!!t),mi.fromTimestamp(function(t){const e=$i(t);return new gi(e.seconds,e.nanos)}(t))}function za(t,e){return Va(t,e).canonicalString()}function Va(t,e){const n=function(t){return new yi(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Ua(t){const e=yi.fromString(t);return $n(lo(e)),e}function Wa(t,e){return za(t.databaseId,e.path)}function Ha(t,e){const n=Ua(e);if(n.get(1)!==t.databaseId.projectId)throw new ei(ti.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ei(ti.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xi(Ya(n))}function qa(t,e){return za(t.databaseId,e)}function Ga(t){const e=Ua(t);return 4===e.length?yi.emptyPath():Ya(e)}function Ka(t){return new yi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ya(t){return $n(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Xa(t,e,n){return{name:Wa(t,e),fields:n.value.mapValue.fields}}function Qa(t,e){let n;if(e instanceof ta)n={update:Xa(t,e.key,e.value)};else if(e instanceof ra)n={delete:Wa(t,e.key)};else if(e instanceof ea)n={update:Xa(t,e.key,e.data),updateMask:oo(e.fieldMask)};else{if(!(e instanceof aa))return Jn();n={verify:Wa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Or)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Br)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vr)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw Jn()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ja(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Jn()}(t,e.precondition)),n}function Ja(t,e){return{documents:[qa(t,e.path)]}}function $a(t,e){const n={structuredQuery:{}},i=e.path;let s;null!==e.collectionGroup?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=qa(t,s);const r=function(t){if(0!==t.length)return ao(Ps.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:so(t.field),direction:eo(t.dir)}}(t)))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=La(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{_t:n,parent:s}}function Za(t){let e=Ga(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){$n(1===i);const t=n.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=function(t){const e=to(t);return e instanceof Ps&&Ns(e)?e.getFilters():[e]}(n.where));let a=[];n.orderBy&&(a=function(t){return t.map((t=>function(t){return new Ts(ro(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let o=null;n.limit&&(o=function(t){let e;return e="object"==typeof t?t.value:t,Ni(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new ks(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new ks(n,e)}(n.endAt)),Zs(e,s,a,r,o,"F",l,c)}function to(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ro(t.unaryFilter.field);return Rs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ro(t.unaryFilter.field);return Rs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ro(t.unaryFilter.field);return Rs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ro(t.unaryFilter.field);return Rs.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Jn()}}(t):void 0!==t.fieldFilter?function(t){return Rs.create(ro(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jn()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Ps.create(t.compositeFilter.filters.map((t=>to(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Jn()}}(t.compositeFilter.op))}(t):Jn()}function eo(t){return Ra[t]}function no(t){return Pa[t]}function io(t){return Da[t]}function so(t){return{fieldPath:t.canonicalString()}}function ro(t){return wi.fromServerFormat(t.fieldPath)}function ao(t){return t instanceof Rs?function(t){if("=="===t.op){if(ys(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NAN"}};if(vs(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ys(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NAN"}};if(vs(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(t.field),op:no(t.op),value:t.value}}}(t):t instanceof Ps?function(t){const e=t.getFilters().map((t=>ao(t)));return 1===e.length?e[0]:{compositeFilter:{op:io(t.op),filters:e}}}(t):Jn()}function oo(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class co{constructor(t,e,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mi.min(),r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:mi.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qi.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(t){return new co(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class ho{constructor(t){this.ct=t}}function uo(t){const e=Za({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?or(e,e.limit,"L"):e}class fo{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Zi(t.integerValue));else if("doubleValue"in t){const n=Zi(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Li(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Et(e,20),"string"==typeof n&&(n=$i(n)),e.At("".concat(n.seconds||"")),e.dt(n.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(ts(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?xs(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Jn()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const i of Object.keys(n))this.Rt(i,e),this.It(n[i],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const i of n)this.It(i,e)}gt(t,e){this.Et(e,37),xi.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}fo.bt=new fo;class po{constructor(){this._n=new go}addToCollectionParentIndex(t,e){return this._n.add(e),Ii.resolve()}getCollectionParents(t,e){return Ii.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Ii.resolve()}deleteFieldIndex(t,e){return Ii.resolve()}deleteAllFieldIndexes(t){return Ii.resolve()}createTargetIndexes(t,e){return Ii.resolve()}getDocumentsMatchingTarget(t,e){return Ii.resolve(null)}getIndexType(t,e){return Ii.resolve(0)}getFieldIndexes(t,e){return Ii.resolve([])}getNextCollectionGroupToUpdate(t){return Ii.resolve(null)}getMinOffset(t,e){return Ii.resolve(ki.min())}getMinOffsetFromCollectionGroup(t,e){return Ii.resolve(ki.min())}updateCollectionGroup(t,e,n){return Ii.resolve()}updateIndexEntries(t,e){return Ii.resolve()}}class go{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Gi(yi.comparator),s=!i.has(n);return this.index[e]=i.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Gi(yi.comparator)).toArray()}}new Uint8Array(0);class mo{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new mo(t,mo.DEFAULT_COLLECTION_PERCENTILE,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}mo.DEFAULT_COLLECTION_PERCENTILE=10,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mo.DEFAULT=new mo(41943040,mo.DEFAULT_COLLECTION_PERCENTILE,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mo.DISABLED=new mo(-1,0,0);class vo{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new vo(0)}static Ln(){return new vo(-1)}}class yo{constructor(){this.changes=new gr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Es.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ii.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class bo{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class wo{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Jr(n.mutation,t,Yi.empty(),gi.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Sr()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sr();const i=xr();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=br();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=xr();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Sr())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let s=vr();const r=Ar(),a=Ar();return e.forEach(((t,e)=>{const a=n.get(e.key);i.has(e.key)&&(void 0===a||a.mutation instanceof ea)?s=s.insert(e.key,e):void 0!==a?(r.set(e.key,a.mutation.getFieldMask()),Jr(a.mutation,e,a.mutation.getFieldMask(),gi.now())):r.set(e.key,Yi.empty())})),this.recalculateAndSaveOverlays(t,s).next((t=>(t.forEach(((t,e)=>r.set(t,e))),e.forEach(((t,e)=>{var n;return a.set(t,new bo(e,null!==(n=r.get(t))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(t,e){const n=Ar();let i=new Wi(((t,e)=>t-e)),s=Sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const s of t)s.keys().forEach((t=>{const r=e.get(t);if(null===r)return;let a=n.get(t)||Yi.empty();a=s.applyToLocalView(r,a),n.set(t,a);const o=(i.get(s.batchId)||Sr()).add(t);i=i.insert(s.batchId,o)}))})).next((()=>{const r=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),o=i.key,l=i.value,c=_r();l.forEach((t=>{if(!s.has(t)){const i=Xr(e.get(t),n.get(t));null!==i&&c.set(t,i),s=s.add(t)}})),r.push(this.documentOverlayCache.saveOverlays(t,o,c))}return Ii.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return xi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):nr(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((s=>{const r=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-s.size):Ii.resolve(xr());let a=-1,o=s;return r.next((e=>Ii.forEach(e,((e,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(e)?Ii.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{o=o.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,s))).next((()=>this.computeViews(t,o,e,Sr()))).next((t=>({batchId:a,changes:wr(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new xi(e)).next((t=>{let e=br();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const s=e.collectionGroup;let r=br();return this.indexManager.getCollectionParents(t,s).next((a=>Ii.forEach(a,(a=>{const o=function(t,e){return new $s(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(s));return this.getDocumentsMatchingCollectionQuery(t,o,n,i).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,i)))).next((t=>{s.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Es.newInvalidDocument(i)))}));let n=br();return t.forEach(((t,i)=>{const r=s.get(t);void 0!==r&&Jr(r.mutation,i,Yi.empty(),gi.now()),ur(e,i)&&(n=n.insert(t,i))})),n}))}}class xo{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Ii.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Ba(t.createTime)}}(e)),Ii.resolve()}getNamedQuery(t,e){return Ii.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:uo(t.bundledQuery),readTime:Ba(t.readTime)}}(e)),Ii.resolve()}}class _o{constructor(){this.overlays=new Wi(xi.comparator),this.hr=new Map}getOverlay(t,e){return Ii.resolve(this.overlays.get(e))}getOverlays(t,e){const n=xr();return Ii.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Ii.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Ii.resolve()}getOverlaysForCollection(t,e,n){const i=xr(),s=e.length+1,r=new xi(e.child("")),a=this.overlays.getIteratorFrom(r);for(;a.hasNext();){const t=a.getNext().value,r=t.getKey();if(!e.isPrefixOf(r.path))break;r.path.length===s&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Ii.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let s=new Wi(((t,e)=>t-e));const r=this.overlays.getIterator();for(;r.hasNext();){const t=r.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=s.get(t.largestBatchId);null===e&&(e=xr(),s=s.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const a=xr(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((t,e)=>a.set(t,e))),!(a.size()>=i)););return Ii.resolve(a)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new ca(e,n));let s=this.hr.get(e);void 0===s&&(s=Sr(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}class Ao{constructor(){this.Pr=new Gi(Eo.Ir),this.Tr=new Gi(Eo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new Eo(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new Eo(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new xi(new yi([])),n=new Eo(e,t),i=new Eo(e,t+1),s=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),s.push(t.key)})),s}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new xi(new yi([])),n=new Eo(e,t),i=new Eo(e,t+1);let s=Sr();return this.Tr.forEachInRange([n,i],(t=>{s=s.add(t.key)})),s}containsKey(t){const e=new Eo(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Eo{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return xi.comparator(t.key,e.key)||fi(t.pr,e.pr)}static Er(t,e){return fi(t.pr,e.pr)||xi.comparator(t.key,e.key)}}class ko{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Gi(Eo.Ir)}checkEmpty(t){return Ii.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new oa(s,e,n,i);this.mutationQueue.push(r);for(const a of i)this.wr=this.wr.add(new Eo(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ii.resolve(r)}lookupMutationBatch(t,e){return Ii.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),s=i<0?0:i;return Ii.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ii.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Ii.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Eo(e,0),i=new Eo(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);s.push(e)})),Ii.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Gi(fi);return e.forEach((t=>{const e=new Eo(t,0),i=new Eo(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Ii.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let s=n;xi.isDocumentKey(s)||(s=s.child(""));const r=new Eo(new xi(s),0);let a=new Gi(fi);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(a=a.add(t.pr)),!0)}),r),Ii.resolve(this.Dr(a))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){$n(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Ii.forEach(e.mutations,(i=>{const s=new Eo(i.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new Eo(e,0),i=this.wr.firstAfterOrEqual(n);return Ii.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ii.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class So{constructor(t){this.vr=t,this.docs=new Wi(xi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),s=i?i.size:0,r=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ii.resolve(n?n.document.mutableCopy():Es.newInvalidDocument(e))}getEntries(t,e){let n=vr();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Es.newInvalidDocument(t))})),Ii.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let s=vr();const r=e.path,a=new xi(r.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:t,value:{document:a}}=o.getNext();if(!r.isPrefixOf(t.path))break;t.path.length>r.length+1||Si(Ei(a),n)<=0||(i.has(a.key)||ur(e,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Ii.resolve(s)}getAllFromCollectionGroup(t,e,n,i){Jn()}Fr(t,e){return Ii.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Co(this)}getSize(t){return Ii.resolve(this.size)}}class Co extends yo{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Ii.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class To{constructor(t){this.persistence=t,this.Mr=new gr((t=>Xs(t)),Qs),this.lastRemoteSnapshotVersion=mi.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ao,this.targetCount=0,this.Lr=vo.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Ii.resolve()}getLastRemoteSnapshotVersion(t){return Ii.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ii.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ii.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Ii.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new vo(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Ii.resolve()}updateTargetData(t,e){return this.qn(e),Ii.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Ii.resolve()}removeTargets(t,e,n){let i=0;const s=[];return this.Mr.forEach(((r,a)=>{a.sequenceNumber<=e&&null===n.get(a.targetId)&&(this.Mr.delete(r),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Ii.waitFor(s).next((()=>i))}getTargetCount(t){return Ii.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Ii.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Ii.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach((e=>{s.push(i.markPotentiallyOrphaned(t,e))})),Ii.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Ii.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Ii.resolve(n)}containsKey(t,e){return Ii.resolve(this.Nr.containsKey(e))}}class Mo{constructor(t,e){this.Br={},this.overlays={},this.kr=new Di(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new To(this),this.indexManager=new po,this.remoteDocumentCache=function(t){return new So(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new ho(e),this.$r=new xo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new _o,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new ko(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){Kn("MemoryPersistence","Starting transaction:",t);const i=new Io(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Ii.or(Object.values(this.Br).map((n=>()=>n.containsKey(t,e))))}}class Io extends Ti{constructor(t){super(),this.currentSequenceNumber=t}}class Ro{constructor(t){this.persistence=t,this.zr=new Ao,this.jr=null}static Hr(t){return new Ro(t)}get Jr(){if(this.jr)return this.jr;throw Jn()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Ii.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Ii.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Ii.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ii.forEach(this.Jr,(n=>{const i=xi.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,mi.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Ii.or([()=>Ii.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class Po{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=Sr(),i=Sr();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Po(t,e.fromCache,n,i)}}class Do{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class No{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Wt()?8:Ri(Ut())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const s={result:null};return this.ji(t,e).next((t=>{s.result=t})).next((()=>{if(!s.result)return this.Hi(t,e,i,n).next((t=>{s.result=t}))})).next((()=>{if(s.result)return;const n=new Do;return this.Ji(t,e,n).next((i=>{if(s.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>s.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(Gn()<=ne.DEBUG&&Kn("QueryEngine","SDK will not create cache indexes for query:",hr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ii.resolve()):(Gn()<=ne.DEBUG&&Kn("QueryEngine","Query:",hr(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Gn()<=ne.DEBUG&&Kn("QueryEngine","The SDK decides to create cache indexes for query:",hr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,sr(e))):Ii.resolve())}ji(t,e){if(er(e))return Ii.resolve(null);let n=sr(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=or(e,null,"F"),n=sr(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const s=Sr(...i);return this.zi.getDocuments(t,s).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const r=this.Zi(e,i);return this.Xi(e,r,s,n.readTime)?this.ji(t,or(e,null,"F")):this.es(t,r,e,n)}))))})))))}Hi(t,e,n,i){return er(e)||i.isEqual(mi.min())?Ii.resolve(null):this.zi.getDocuments(t,n).next((s=>{const r=this.Zi(e,s);return this.Xi(e,r,n,i)?Ii.resolve(null):(Gn()<=ne.DEBUG&&Kn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hr(e)),this.es(t,r,e,Ai(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new Gi(fr(t));return e.forEach(((e,i)=>{ur(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,e,n){return Gn()<=ne.DEBUG&&Kn("QueryEngine","Using full collection scan to execute query:",hr(e)),this.zi.getDocumentsMatchingQuery(t,e,ki.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Lo{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new Wi(fi),this.rs=new gr((t=>Xs(t)),Qs),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wo(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}function Oo(t,e,n,i){return new Lo(t,e,n,i)}async function Fo(t,e){const n=Zn(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const s=[],r=[];let a=Sr();for(const t of i){s.push(t.batchId);for(const e of t.mutations)a=a.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)a=a.add(e.key)}return n.localDocuments.getDocuments(t,a).next((t=>({us:t,removedBatchIds:s,addedBatchIds:r})))}))}))}function jo(t){const e=Zn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function Bo(t,e,n){let i=Sr(),s=Sr();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=vr();return n.forEach(((n,r)=>{const a=t.get(n);r.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),r.isNoDocument()&&r.version.isEqual(mi.min())?(e.removeEntry(n,r.readTime),i=i.insert(n,r)):!a.isValidDocument()||r.version.compareTo(a.version)>0||0===r.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(r),i=i.insert(n,r)):Kn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",r.version)})),{cs:i,ls:s}}))}function zo(t,e){const n=Zn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Vo(t,e){const n=Zn(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((s=>s?(i=s,Ii.resolve(i)):n.Qr.allocateTargetId(t).next((s=>(i=new co(e,s,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}async function Uo(t,e,n){const i=Zn(t),s=i.ns.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(t=>i.persistence.referenceDelegate.removeTarget(t,s)))}catch(t){if(!Pi(t))throw t;Kn("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}i.ns=i.ns.remove(e),i.rs.delete(s.target)}function Wo(t,e,n){const i=Zn(t);let s=mi.min(),r=Sr();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=Zn(t),s=i.rs.get(n);return void 0!==s?Ii.resolve(i.ns.get(s)):i.Qr.getTargetData(e,n)}(i,t,sr(e)).next((e=>{if(e)return s=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?s:mi.min(),n?r:Sr()))).next((t=>(Ho(i,dr(e),t),{documents:t,hs:r})))))}function Ho(t,e,n){let i=t.ss.get(e)||mi.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}class qo{constructor(){this.activeTargetIds=Tr()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Go{constructor(){this.no=new qo,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new qo,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ko{io(t){}shutdown(){}}class Yo{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Kn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Kn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xo=null;function Qo(){return null===Xo?Xo=268435456+Math.round(2147483648*Math.random()):Xo++,"0x"+Xo.toString(16)}const Jo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $o{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}const Zo="WebChannelConnection";class tl extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=e+"://"+t.host,this.So="projects/".concat(n,"/databases/").concat(i),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Do(){return!1}Co(t,e,n,i,s){const r=Qo(),a=this.vo(t,e.toUriEncodedString());Kn("RestConnection","Sending RPC '".concat(t,"' ").concat(r,":"),a,n);const o={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(o,i,s),this.Mo(t,a,o,n).then((e=>(Kn("RestConnection","Received RPC '".concat(t,"' ").concat(r,": "),e),e)),(e=>{throw Xn("RestConnection","RPC '".concat(t,"' ").concat(r," failed with error: "),e,"url: ",a,"request:",n),e}))}xo(t,e,n,i,s,r){return this.Co(t,e,n,i,s)}Fo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Hn,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}vo(t,e){const n=Jo[t];return"".concat(this.wo,"/v1/").concat(e,":").concat(n)}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,i){const s=Qo();return new Promise(((r,a)=>{const o=new Rn;o.setWithCredentials(!0),o.listenOnce(Nn.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Ln.NO_ERROR:const e=o.getResponseJson();Kn(Zo,"XHR for RPC '".concat(t,"' ").concat(s," received:"),JSON.stringify(e)),r(e);break;case Ln.TIMEOUT:Kn(Zo,"RPC '".concat(t,"' ").concat(s," timed out")),a(new ei(ti.DEADLINE_EXCEEDED,"Request time out"));break;case Ln.HTTP_ERROR:const n=o.getStatus();if(Kn(Zo,"RPC '".concat(t,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let t=o.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(ti).indexOf(e)>=0?e:ti.UNKNOWN}(e.status);a(new ei(t,e.message))}else a(new ei(ti.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ei(ti.UNAVAILABLE,"Connection failed."));break;default:Jn()}}finally{Kn(Zo,"RPC '".concat(t,"' ").concat(s," completed."))}}));const l=JSON.stringify(i);Kn(Zo,"RPC '".concat(t,"' ").concat(s," sending request:"),i),o.send(e,"POST",l,n,15)}))}Oo(t,e,n){const i=Qo(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Bn(),a=jn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new Pn({})),this.Fo(o.initMessageHeaders,e,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Kn(Zo,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(c),o);const h=r.createWebChannel(c,o);let u=!1,d=!1;const f=new $o({lo:e=>{d?Kn(Zo,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(u||(Kn(Zo,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),h.open(),u=!0),Kn(Zo,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),h.send(e))},ho:()=>h.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(h,Dn.EventType.OPEN,(()=>{d||(Kn(Zo,"RPC '".concat(t,"' stream ").concat(i," transport opened.")),f.mo())})),p(h,Dn.EventType.CLOSE,(()=>{d||(d=!0,Kn(Zo,"RPC '".concat(t,"' stream ").concat(i," transport closed")),f.po())})),p(h,Dn.EventType.ERROR,(e=>{d||(d=!0,Xn(Zo,"RPC '".concat(t,"' stream ").concat(i," transport errored:"),e),f.po(new ei(ti.UNAVAILABLE,"The operation could not be completed")))})),p(h,Dn.EventType.MESSAGE,(e=>{var n;if(!d){const s=e.data[0];$n(!!s);const r=s,a=r.error||(null===(n=r[0])||void 0===n?void 0:n.error);if(a){Kn(Zo,"RPC '".concat(t,"' stream ").concat(i," received error:"),a);const e=a.status;let n=function(t){const e=ua[t];if(void 0!==e)return pa(e)}(e),s=a.message;void 0===n&&(n=ti.INTERNAL,s="Unknown error status: "+e+" with message "+a.message),d=!0,f.po(new ei(n,s)),h.close()}else Kn(Zo,"RPC '".concat(t,"' stream ").concat(i," received:"),s),f.yo(s)}})),p(a,Fn.STAT_EVENT,(e=>{e.stat===On.PROXY?Kn(Zo,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===On.NOPROXY&&Kn(Zo,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function el(){return"undefined"!=typeof document?document:null}function nl(t){return new Na(t,!0)}class il{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=t,this.timerId=e,this.No=n,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),i=Math.max(0,e-n);i>0&&Kn("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Qo=Date.now(),t()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class sl{constructor(t,e,n,i,s,r,a,o){this.oi=t,this.Go=n,this.zo=i,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new il(t,e)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==t?this.Yo.reset():e&&e.code===ti.RESOURCE_EXHAUSTED?(Yn(e.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===ti.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,i]=t;this.jo===e&&this.u_(n,i)}),(e=>{t((()=>{const t=new ei(ti.UNKNOWN,"Fetching auth token failed: "+e.message);return this.c_(t)}))}))}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((t=>{n((()=>this.c_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(t){return Kn("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget((()=>this.jo===t?e():(Kn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rl extends sl{constructor(t,e,n,i,s,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,r),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Jn()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(t,e){return t.useProto3Json?($n(void 0===e||"string"==typeof e),Qi.fromBase64String(e||"")):($n(void 0===e||e instanceof Buffer||e instanceof Uint8Array),Qi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(t){const e=void 0===t.code?ti.UNKNOWN:pa(t.code);return new ei(e,t.message||"")}(a);n=new Sa(i,s,r,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ha(t,i.document.name),r=Ba(i.document.updateTime),a=i.document.createTime?Ba(i.document.createTime):mi.min(),o=new _s({mapValue:{fields:i.document.fields}}),l=Es.newFoundDocument(s,r,a,o),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Ea(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ha(t,i.document),r=i.readTime?Ba(i.readTime):mi.min(),a=Es.newNoDocument(s,r),o=i.removedTargetIds||[];n=new Ea([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ha(t,i.document),r=i.removedTargetIds||[];n=new Ea([],r,s,null)}else{if(!("filter"in e))return Jn();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:s}=t,r=new ha(i,s),a=t.targetId;n=new ka(a,r)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return mi.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?mi.min():e.readTime?Ba(e.readTime):mi.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=Ka(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=Js(i)?{documents:Ja(t,i)}:{query:$a(t,i)._t},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Fa(t,e.resumeToken);const i=La(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(mi.min())>0){n.readTime=Oa(t,e.snapshotVersion.toTimestamp());const i=La(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jn()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=Ka(this.serializer),e.removeTarget=t,this.i_(e)}}class al extends sl{constructor(t,e,n,i,s,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,r),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if($n(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=function(t,e){return t&&t.length>0?($n(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Ba(t.updateTime):Ba(e);return n.isEqual(mi.min())&&(n=Ba(e)),new qr(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Ba(t.commitTime);return this.listener.A_(n,e)}return $n(!t.writeResults||0===t.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Ka(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Qa(this.serializer,t)))};this.i_(e)}}class ol extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ei(ti.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[r,a]=s;return this.connection.Co(t,Va(e,n),i,r,a)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===ti.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ei(ti.UNKNOWN,t.toString())}))}xo(t,e,n,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[a,o]=r;return this.connection.xo(t,Va(e,n),i,a,o,s)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===ti.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ei(ti.UNKNOWN,t.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class ll{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(t){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.S_("Offline")))}set(t){this.C_(),this.g_=0,"Online"===t&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Yn(e),this.y_=!1):Kn("OnlineStateTracker",e)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class cl{constructor(t,e,n,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io((t=>{n.enqueueAndForget((async()=>{yl(this)&&(Kn("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Zn(t);e.M_.add(4),await ul(e),e.N_.set("Unknown"),e.M_.delete(4),await hl(e)}(this))}))})),this.N_=new ll(n,i)}}async function hl(t){if(yl(t))for(const e of t.x_)await e(!0)}async function ul(t){for(const e of t.x_)await e(!1)}function dl(t,e){const n=Zn(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),vl(n)?ml(n):Fl(n).Xo()&&pl(n,e))}function fl(t,e){const n=Zn(t),i=Fl(n);n.F_.delete(e),i.Xo()&&gl(n,e),0===n.F_.size&&(i.Xo()?i.n_():yl(n)&&n.N_.set("Unknown"))}function pl(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mi.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(t).P_(e)}function gl(t,e){t.L_.xe(e),Fl(t).I_(e)}function ml(t){t.L_=new Ta({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fl(t).start(),t.N_.w_()}function vl(t){return yl(t)&&!Fl(t).Zo()&&t.F_.size>0}function yl(t){return 0===Zn(t).M_.size}function bl(t){t.L_=void 0}async function wl(t){t.N_.set("Online")}async function xl(t){t.F_.forEach(((e,n)=>{pl(t,e)}))}async function _l(t,e){bl(t),vl(t)?(t.N_.D_(e),ml(t)):t.N_.set("Unknown")}async function Al(t,e,n){if(t.N_.set("Online"),e instanceof Sa&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.F_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.F_.delete(i),t.L_.removeTarget(i))}(t,e)}catch(n){Kn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await El(t,n)}else if(e instanceof Ea?t.L_.Ke(e):e instanceof ka?t.L_.He(e):t.L_.We(e),!n.isEqual(mi.min()))try{const e=await jo(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.L_.rt(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=t.F_.get(i);s&&t.F_.set(i,s.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.F_.get(e);if(!i)return;t.F_.set(e,i.withResumeToken(Qi.EMPTY_BYTE_STRING,i.snapshotVersion)),gl(t,e);const s=new co(i.target,e,n,i.sequenceNumber);pl(t,s)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Kn("RemoteStore","Failed to raise snapshot:",e),await El(t,e)}}async function El(t,e,n){if(!Pi(e))throw e;t.M_.add(1),await ul(t),t.N_.set("Offline"),n||(n=()=>jo(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Kn("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await hl(t)}))}function kl(t,e){return e().catch((n=>El(t,n,e)))}async function Sl(t){const e=Zn(t),n=jl(e);let i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Cl(e);)try{const t=await zo(e.localStore,i);if(null===t){0===e.v_.length&&n.n_();break}i=t.batchId,Tl(e,t)}catch(t){await El(e,t)}Ml(e)&&Il(e)}function Cl(t){return yl(t)&&t.v_.length<10}function Tl(t,e){t.v_.push(e);const n=jl(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Ml(t){return yl(t)&&!jl(t).Zo()&&t.v_.length>0}function Il(t){jl(t).start()}async function Rl(t){jl(t).V_()}async function Pl(t){const e=jl(t);for(const n of t.v_)e.d_(n.mutations)}async function Dl(t,e,n){const i=t.v_.shift(),s=la.from(i,e,n);await kl(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Sl(t)}async function Nl(t,e){e&&jl(t).E_&&await async function(t,e){if(function(t){return fa(t)&&t!==ti.ABORTED}(e.code)){const n=t.v_.shift();jl(t).t_(),await kl(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Sl(t)}}(t,e),Ml(t)&&Il(t)}async function Ll(t,e){const n=Zn(t);n.asyncQueue.verifyOperationInProgress(),Kn("RemoteStore","RemoteStore received new credentials");const i=yl(n);n.M_.add(3),await ul(n),i&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await hl(n)}async function Ol(t,e){const n=Zn(t);e?(n.M_.delete(2),await hl(n)):e||(n.M_.add(2),await ul(n),n.N_.set("Unknown"))}function Fl(t){return t.B_||(t.B_=function(t,e,n){const i=Zn(t);return i.f_(),new rl(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:wl.bind(null,t),To:xl.bind(null,t),Ao:_l.bind(null,t),h_:Al.bind(null,t)}),t.x_.push((async e=>{e?(t.B_.t_(),vl(t)?ml(t):t.N_.set("Unknown")):(await t.B_.stop(),bl(t))}))),t.B_}function jl(t){return t.k_||(t.k_=function(t,e,n){const i=Zn(t);return i.f_(),new al(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:Rl.bind(null,t),Ao:Nl.bind(null,t),R_:Pl.bind(null,t),A_:Dl.bind(null,t)}),t.x_.push((async e=>{e?(t.k_.t_(),await Sl(t)):(await t.k_.stop(),t.v_.length>0&&(Kn("RemoteStore","Stopping write stream with ".concat(t.v_.length," pending writes")),t.v_=[]))}))),t.k_}class Bl{constructor(t,e,n,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,s){const r=Date.now()+n,a=new Bl(t,e,r,i,s);return a.start(n),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ei(ti.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zl(t,e){if(Yn("AsyncQueue","".concat(e,": ").concat(t)),Pi(t))return new ei(ti.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class Vl{constructor(t){this.comparator=t?(e,n)=>t(e,n)||xi.comparator(e.key,n.key):(t,e)=>xi.comparator(t.key,e.key),this.keyedMap=br(),this.sortedSet=new Wi(this.comparator)}static emptySet(t){return new Vl(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Vl))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Vl;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Ul{constructor(){this.q_=new Wi(xi.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?0!==t.type&&3===n.type?this.q_=this.q_.insert(e,t):3===t.type&&1!==n.type?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.q_=this.q_.remove(e):1===t.type&&2===n.type?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):Jn():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Wl{constructor(t,e,n,i,s,r,a,o,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,s){const r=[];return e.forEach((t=>{r.push({type:0,doc:t})})),new Wl(t,e,Vl.emptySet(e),r,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lr(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class Hl{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((t=>t.G_()))}}class ql{constructor(){this.queries=new gr((t=>cr(t)),lr),this.onlineState="Unknown",this.z_=new Set}}async function Gl(t,e){const n=Zn(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.W_()&&e.G_()&&(i=2):(r=new Hl,i=e.G_()?0:1);try{switch(i){case 0:r.K_=await n.onListen(s,!0);break;case 1:r.K_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(t){const n=zl(t,"Initialization of query '".concat(hr(e.query),"' failed"));return void e.onError(n)}n.queries.set(s,r),r.U_.push(e),e.j_(n.onlineState),r.K_&&e.H_(r.K_)&&Ql(n)}async function Kl(t,e){const n=Zn(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const t=r.U_.indexOf(e);t>=0&&(r.U_.splice(t,1),0===r.U_.length?s=e.G_()?0:1:!r.W_()&&e.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Yl(t,e){const n=Zn(t);let i=!1;for(const s of e){const t=s.query,e=n.queries.get(t);if(e){for(const t of e.U_)t.H_(s)&&(i=!0);e.K_=s}}i&&Ql(n)}function Xl(t,e,n){const i=Zn(t),s=i.queries.get(e);if(s)for(const r of s.U_)r.onError(n);i.queries.delete(e)}function Ql(t){t.z_.forEach((t=>{t.next()}))}var Jl,$l;($l=Jl||(Jl={})).J_="default",$l.Cache="cache";class Zl{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Wl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==e;return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}na(t){t=Wl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Jl.Cache}}class tc{constructor(t){this.key=t}}class ec{constructor(t){this.key=t}}class nc{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Sr(),this.mutatedKeys=Sr(),this.Ia=fr(t),this.Ta=new Vl(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new Ul,i=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,r=i,a=!1;const o="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const c=i.get(t),h=ur(this.query,e)?e:null,u=!!c&&this.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;c&&h?c.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),f=!0):this.Ra(c,h)||(n.track({type:2,doc:h}),f=!0,(o&&this.Ia(h,o)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!c&&h?(n.track({type:0,doc:h}),f=!0):c&&!h&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(h?(r=r.add(h),s=d?s.add(t):s.delete(t)):(r=r.delete(t),s=s.delete(t)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const t="F"===this.query.limitType?r.last():r.first();r=r.delete(t.key),s=s.delete(t.key),n.track({type:1,doc:t})}return{Ta:r,Aa:n,Xi:a,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const r=t.Aa.Q_();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jn()}};return n(t)-n(e)}(t.type,e.type)||this.Ia(t.doc,e.doc))),this.Va(n),i=null!=i&&i;const a=e&&!i?this.ma():[],o=0===this.Pa.size&&this.current&&!i?1:0,l=o!==this.ha;return this.ha=o,0!==r.length||l?{snapshot:new Wl(this.query,t.Ta,s,r,t.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Ul,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach((t=>this.la=this.la.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.la=this.la.delete(t))),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Sr(),this.Ta.forEach((t=>{this.ga(t.key)&&(this.Pa=this.Pa.add(t.key))}));const e=[];return t.forEach((t=>{this.Pa.has(t)||e.push(new ec(t))})),this.Pa.forEach((n=>{t.has(n)||e.push(new tc(n))})),e}pa(t){this.la=t.hs,this.Pa=Sr();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Wl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class ic{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class sc{constructor(t){this.key=t,this.wa=!1}}class rc{constructor(t,e,n,i,s,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Sa={},this.ba=new gr((t=>cr(t)),lr),this.Da=new Map,this.Ca=new Set,this.va=new Wi(xi.comparator),this.Fa=new Map,this.Ma=new Ao,this.xa={},this.Oa=new Map,this.Na=vo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function ac(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Cc(t);let s;const r=i.ba.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.ya()):s=await lc(i,e,n,!0),s}async function oc(t,e){const n=Cc(t);await lc(n,e,!0,!1)}async function lc(t,e,n,i){const s=await Vo(t.localStore,sr(e)),r=s.targetId,a=n?t.sharedClientState.addLocalQueryTarget(r):"not-current";let o;return i&&(o=await cc(t,e,r,"current"===a,s.resumeToken)),t.isPrimaryClient&&n&&dl(t.remoteStore,s),o}async function cc(t,e,n,i,s){t.Ba=(e,n,i)=>async function(t,e,n,i){let s=e.view.da(n);s.Xi&&(s=await Wo(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.da(n,s)})));const r=i&&i.targetChanges.get(e.targetId),a=i&&null!=i.targetMismatches.get(e.targetId),o=e.view.applyChanges(s,t.isPrimaryClient,r,a);return xc(t,e.targetId,o.fa),o.snapshot}(t,e,n,i);const r=await Wo(t.localStore,e,!0),a=new nc(e,r.hs),o=a.da(r.documents),l=Aa.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,s),c=a.applyChanges(o,t.isPrimaryClient,l);xc(t,n,c.fa);const h=new ic(e,n,a);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function hc(t,e,n){const i=Zn(t),s=i.ba.get(e),r=i.Da.get(s.targetId);if(r.length>1)return i.Da.set(s.targetId,r.filter((t=>!lr(t,e)))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Uo(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&fl(i.remoteStore,s.targetId),bc(i,s.targetId)})).catch(Mi)):(bc(i,s.targetId),await Uo(i.localStore,s.targetId,!0))}async function uc(t,e){const n=Zn(t),i=n.ba.get(e),s=n.Da.get(i.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fl(n.remoteStore,i.targetId))}async function dc(t,e){const n=Zn(t);try{const t=await function(t,e){const n=Zn(t),i=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach(((r,o)=>{const l=s.get(o);if(!l)return;a.push(n.Qr.removeMatchingKeys(t,r.removedDocuments,o).next((()=>n.Qr.addMatchingKeys(t,r.addedDocuments,o))));let c=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(o)?c=c.withResumeToken(Qi.EMPTY_BYTE_STRING,mi.min()).withLastLimboFreeSnapshotVersion(mi.min()):r.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(r.resumeToken,i)),s=s.insert(o,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,r)&&a.push(n.Qr.updateTargetData(t,c))}));let o=vr(),l=Sr();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),a.push(Bo(t,r,e.documentUpdates).next((t=>{o=t.cs,l=t.ls}))),!i.isEqual(mi.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));a.push(e)}return Ii.waitFor(a).next((()=>r.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,o,l))).next((()=>o))})).then((t=>(n.ns=s,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Fa.get(e);i&&($n(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.wa=!0:t.modifiedDocuments.size>0?$n(i.wa):t.removedDocuments.size>0&&($n(i.wa),i.wa=!1))})),await Ec(n,t,e)}catch(t){await Mi(t)}}function fc(t,e,n){const i=Zn(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ba.forEach(((n,i)=>{const s=i.view.j_(e);s.snapshot&&t.push(s.snapshot)})),function(t,e){const n=Zn(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const s of n.U_)s.j_(e)&&(i=!0)})),i&&Ql(n)}(i.eventManager,e),t.length&&i.Sa.h_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pc(t,e,n){const i=Zn(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Fa.get(e),r=s&&s.key;if(r){let t=new Wi(xi.comparator);t=t.insert(r,Es.newNoDocument(r,mi.min()));const n=Sr().add(r),s=new _a(mi.min(),new Map,new Wi(fi),t,n);await dc(i,s),i.va=i.va.remove(r),i.Fa.delete(e),Ac(i)}else await Uo(i.localStore,e,!1).then((()=>bc(i,e,n))).catch(Mi)}async function gc(t,e){const n=Zn(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Zn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const s=n.batch,r=s.keys();let a=Ii.resolve();return r.forEach((t=>{a=a.next((()=>i.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);$n(null!==r),e.version.compareTo(r)<0&&(s.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),a.next((()=>t.mutationQueue.removeMutationBatch(e,s)))}(n,t,e,s).next((()=>s.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Sr();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);yc(n,i,null),vc(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ec(n,t)}catch(t){await Mi(t)}}async function mc(t,e,n){const i=Zn(t);try{const t=await function(t,e){const n=Zn(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>($n(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);yc(i,e,n),vc(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ec(i,t)}catch(n){await Mi(n)}}function vc(t,e){(t.Oa.get(e)||[]).forEach((t=>{t.resolve()})),t.Oa.delete(e)}function yc(t,e,n){const i=Zn(t);let s=i.xa[i.currentUser.toKey()];if(s){const t=s.get(e);t&&(n?t.reject(n):t.resolve(),s=s.remove(e)),i.xa[i.currentUser.toKey()]=s}}function bc(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach((e=>{t.Ma.containsKey(e)||wc(t,e)}))}function wc(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);null!==n&&(fl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Ac(t))}function xc(t,e,n){for(const i of n)i instanceof tc?(t.Ma.addReference(i.key,e),_c(t,i)):i instanceof ec?(Kn("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||wc(t,i.key)):Jn()}function _c(t,e){const n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(Kn("SyncEngine","New document in limbo: "+n),t.Ca.add(i),Ac(t))}function Ac(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new xi(yi.fromString(e)),i=t.Na.next();t.Fa.set(i,new sc(n)),t.va=t.va.insert(n,i),dl(t.remoteStore,new co(sr(tr(n.path)),i,"TargetPurposeLimboResolution",Di.oe))}}async function Ec(t,e,n){const i=Zn(t),s=[],r=[],a=[];i.ba.isEmpty()||(i.ba.forEach(((t,o)=>{a.push(i.Ba(o,e,n).then((t=>{if((t||n)&&i.isPrimaryClient){const e=t&&!t.fromCache;i.sharedClientState.updateQueryState(o.targetId,e?"current":"not-current")}if(t){s.push(t);const e=Po.Ki(o.targetId,t);r.push(e)}})))})),await Promise.all(a),i.Sa.h_(s),await async function(t,e){const n=Zn(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Ii.forEach(e,(e=>Ii.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Ii.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Pi(t))throw t;Kn("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.ns.get(t),i=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(t,s)}}}(i.localStore,r))}async function kc(t,e){const n=Zn(t);if(!n.currentUser.isEqual(e)){Kn("SyncEngine","User change. New user:",e.toKey());const t=await Fo(n.localStore,e);n.currentUser=e,function(t,e){t.Oa.forEach((t=>{t.forEach((t=>{t.reject(new ei(ti.CANCELLED,e))}))})),t.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ec(n,t.us)}}function Sc(t,e){const n=Zn(t),i=n.Fa.get(e);if(i&&i.wa)return Sr().add(i.key);{let t=Sr();const i=n.Da.get(e);if(!i)return t;for(const e of i){const i=n.ba.get(e);t=t.unionWith(i.view.Ea)}return t}}function Cc(t){const e=Zn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pc.bind(null,e),e.Sa.h_=Yl.bind(null,e.eventManager),e.Sa.ka=Xl.bind(null,e.eventManager),e}function Tc(t){const e=Zn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mc.bind(null,e),e}class Mc{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=nl(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Oo(this.persistence,new No,t.initialUser,this.serializer)}createPersistence(t){return new Mo(Ro.Hr,this.serializer)}createSharedClientState(t){return new Go}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ic{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>fc(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=kc.bind(null,this.syncEngine),await Ol(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new ql}createDatastore(t){const e=nl(t.databaseInfo.databaseId),n=function(t){return new tl(t)}(t.databaseInfo);return function(t,e,n,i){return new ol(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,s){return new cl(t,e,n,i,s)}(this.localStore,this.datastore,t.asyncQueue,(t=>fc(this.syncEngine,t,0)),Yo.D()?new Yo:new Ko)}createSyncEngine(t,e){return function(t,e,n,i,s,r,a){const o=new rc(t,e,n,i,s,r);return a&&(o.La=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=Zn(t);Kn("RemoteStore","RemoteStore shutting down."),e.M_.add(5),await ul(e),e.O_.shutdown(),e.N_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class Rc{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Yn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Pc{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Wn.UNAUTHENTICATED,this.clientId=di.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Kn("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Kn("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ei(ti.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=zl(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Dc(t,e){t.asyncQueue.verifyOperationInProgress(),Kn("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Fo(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Nc(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Oc(t);Kn("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Ll(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Ll(e.remoteStore,n))),t._onlineComponents=e}function Lc(t){return"FirebaseError"===t.name?t.code===ti.FAILED_PRECONDITION||t.code===ti.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function Oc(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Kn("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Lc(n))throw n;Xn("Error using user provided cache. Falling back to memory cache: "+n),await Dc(t,new Mc)}}else Kn("FirestoreClient","Using default OfflineComponentProvider"),await Dc(t,new Mc);return t._offlineComponents}async function Fc(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Kn("FirestoreClient","Using user provided OnlineComponentProvider"),await Nc(t,t._uninitializedComponentsProvider._online)):(Kn("FirestoreClient","Using default OnlineComponentProvider"),await Nc(t,new Ic))),t._onlineComponents}function jc(t){return Fc(t).then((t=>t.syncEngine))}async function Bc(t){const e=await Fc(t),n=e.eventManager;return n.onListen=ac.bind(null,e.syncEngine),n.onUnlisten=hc.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oc.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uc.bind(null,e.syncEngine),n}function zc(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new ni;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,s){const r=new Rc({next:r=>{e.enqueueAndForget((()=>Kl(t,a)));const o=r.docs.has(n);!o&&r.fromCache?s.reject(new ei(ti.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&r.fromCache&&i&&"server"===i.source?s.reject(new ei(ti.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(r)},error:t=>s.reject(t)}),a=new Zl(tr(n.path),r,{includeMetadataChanges:!0,ra:!0});return Gl(t,a)}(await Bc(t),t.asyncQueue,e,n,i))),i.promise}function Vc(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Uc=new Map;function Wc(t,e,n){if(!n)throw new ei(ti.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Hc(t){if(!xi.isDocumentKey(t))throw new ei(ti.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function qc(t){if(xi.isDocumentKey(t))throw new ei(ti.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function Gc(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":Jn()}function Kc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ei(ti.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gc(t);throw new ei(ti.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}class Yc{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new ei(ti.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ei(ti.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new ei(ti.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vc(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new ei(ti.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new ei(ti.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new ei(ti.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Xc{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ei(ti.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ei(ti.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yc(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new si;switch(t.type){case"firstParty":return new li(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ei(ti.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Uc.get(t);e&&(Kn("ComponentProvider","Removing Datastore"),Uc.delete(t),e.terminate())}(this),Promise.resolve()}}class Qc{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Qc(this.firestore,t,this._query)}}class Jc{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $c(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Jc(this.firestore,t,this._key)}}class $c extends Qc{constructor(t,e,n){super(t,e,tr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Jc(this.firestore,null,new xi(t))}withConverter(t){return new $c(this.firestore,t,this._path)}}function Zc(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(t=Qt(t),Wc("collection","path",e),t instanceof Xc){const n=yi.fromString(e,...i);return qc(n),new $c(t,null,n)}{if(!(t instanceof Jc||t instanceof $c))throw new ei(ti.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yi.fromString(e,...i));return qc(n),new $c(t.firestore,null,n)}}function th(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(t=Qt(t),1===arguments.length&&(e=di.newId()),Wc("doc","path",e),t instanceof Xc){const n=yi.fromString(e,...i);return Hc(n),new Jc(t,null,new xi(n))}{if(!(t instanceof Jc||t instanceof $c))throw new ei(ti.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yi.fromString(e,...i));return Hc(n),new Jc(t.firestore,t instanceof $c?t.converter:null,new xi(n))}}class eh{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new il(this,"async_queue_retry"),this.hu=()=>{const t=el();t&&Kn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const t=el();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=el();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise((()=>{}));const e=new ni;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.su.push(t),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(sw){if(!Pi(sw))throw sw;Kn("AsyncQueue","Operation failed with retryable error: "+sw)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(t){const e=this.iu.then((()=>(this.uu=!0,t().catch((t=>{this.au=t,this.uu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Yn("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.uu=!1,t))))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const i=Bl.createAndSchedule(this,t,e,n,(t=>this.Eu(t)));return this._u.push(i),i}Pu(){this.au&&Jn()}verifyOperationInProgress(){}async du(){let t;do{t=this.iu,await t}while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then((()=>{this._u.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this._u)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.du()}))}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function nh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"==typeof n[i])return!0;return!1}(t,["next","error","complete"])}class ih extends Xc{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new eh,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rh(this),this._firestoreClient.terminate()}}function sh(t){return t._firestoreClient||rh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rh(t){var e,n,i;const s=t._freezeSettings(),r=function(t,e,n,i){return new ss(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Vc(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Pc(t._authCredentials,t._appCheckCredentials,t._queue,r),(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=s.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}class ah{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ah(Qi.fromBase64String(t))}catch(t){throw new ei(ti.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new ah(Qi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class oh{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new ei(ti.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class lh{constructor(t){this._methodName=t}}class ch{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ei(ti.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ei(ti.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fi(this._lat,t._lat)||fi(this._long,t._long)}}const hh=/^__.*__$/;class uh{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new ea(t,this.data,this.fieldMask,e,this.fieldTransforms):new ta(t,this.data,e,this.fieldTransforms)}}class dh{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new ea(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function fh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jn()}}class ph{constructor(t,e,n,i,s,r){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new ph(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.gu({path:n,yu:!1});return i.wu(t),i}Su(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.gu({path:n,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Ih(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(0===t.length)throw this.Du("Document fields must not be empty");if(fh(this.fu)&&hh.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class gh{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||nl(t)}Fu(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ph({fu:t,methodName:e,vu:n,path:wi.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mh(t){const e=t._freezeSettings(),n=nl(t._databaseId);return new gh(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vh(t,e,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=t.Fu(r.merge||r.mergeFields?2:0,e,n,s);Sh("Data must be an object, but it was:",a,i);const o=Eh(i,a);let l,c;if(r.merge)l=new Yi(a.fieldMask),c=a.fieldTransforms;else if(r.mergeFields){const t=[];for(const i of r.mergeFields){const s=Ch(e,i,n);if(!a.contains(s))throw new ei(ti.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Rh(t,s)||t.push(s)}l=new Yi(t),c=a.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=a.fieldTransforms;return new uh(new _s(o),l,c)}class yh extends lh{_toFieldTransform(t){if(2!==t.fu)throw 1===t.fu?t.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):t.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof yh}}class bh extends lh{_toFieldTransform(t){return new Hr(t.path,new Or)}isEqual(t){return t instanceof bh}}function wh(t,e,n,i){const s=t.Fu(1,e,n);Sh("Data must be an object, but it was:",s,i);const r=[],a=_s.empty();Vi(i,((t,i)=>{const o=Mh(e,t,n);i=Qt(i);const l=s.Su(o);if(i instanceof yh)r.push(o);else{const t=Ah(i,l);null!=t&&(r.push(o),a.set(o,t))}}));const o=new Yi(r);return new dh(a,o,s.fieldTransforms)}function xh(t,e,n,i,s,r){const a=t.Fu(1,e,n),o=[Ch(e,i,n)],l=[s];if(r.length%2!=0)throw new ei(ti.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<r.length;d+=2)o.push(Ch(e,r[d])),l.push(r[d+1]);const c=[],h=_s.empty();for(let d=o.length-1;d>=0;--d)if(!Rh(c,o[d])){const t=o[d];let e=l[d];e=Qt(e);const n=a.Su(t);if(e instanceof yh)c.push(t);else{const i=Ah(e,n);null!=i&&(c.push(t),h.set(t,i))}}const u=new Yi(c);return new dh(h,u,a.fieldTransforms)}function _h(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ah(n,t.Fu(i?4:3,e))}function Ah(t,e){if(kh(t=Qt(t)))return Sh("Unsupported field value:",e,t),Eh(t,e);if(t instanceof lh)return function(t,e){if(!fh(e.fu))throw e.Du("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.Du("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const s of t){let t=Ah(s,e.bu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Qt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Rr(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=gi.fromDate(t);return{timestampValue:Oa(e.serializer,n)}}if(t instanceof gi){const n=new gi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Oa(e.serializer,n)}}if(t instanceof ch)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ah)return{bytesValue:Fa(e.serializer,t._byteString)};if(t instanceof Jc){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Du("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:za(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Du("Unsupported field value: ".concat(Gc(t)))}(t,e)}function Eh(t,e){const n={};return Ui(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vi(t,((t,i)=>{const s=Ah(i,e.pu(t));null!=s&&(n[t]=s)})),{mapValue:{fields:n}}}function kh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof gi||t instanceof ch||t instanceof ah||t instanceof Jc||t instanceof lh)}function Sh(t,e,n){if(!kh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Gc(n);throw"an object"===i?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function Ch(t,e,n){if((e=Qt(e))instanceof oh)return e._internalPath;if("string"==typeof e)return Mh(t,e);throw Ih("Field path arguments must be of type string or ",t,!1,void 0,n)}const Th=new RegExp("[~\\*/\\[\\]]");function Mh(t,e,n){if(e.search(Th)>=0)throw Ih("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new oh(...e.split("."))._internalPath}catch(Du){throw Ih("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function Ih(t,e,n,i,s){const r=i&&!i.isEmpty(),a=void 0!==s;let o="Function ".concat(e,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(r||a)&&(l+=" (found",r&&(l+=" in field ".concat(i)),a&&(l+=" in document ".concat(s)),l+=")"),new ei(ti.INVALID_ARGUMENT,o+t+l)}function Rh(t,e){return t.some((t=>t.isEqual(e)))}class Ph{constructor(t,e,n,i,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Dh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Nh("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Dh extends Ph{data(){return super.data()}}function Nh(t,e){return"string"==typeof e?Mh(t,e):e instanceof oh?e._internalPath:e._delegate._internalPath}function Lh(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ei(ti.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oh{}class Fh extends Oh{}function jh(t,e){let n=[];for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];e instanceof Oh&&n.push(e),n=n.concat(s),function(t){const e=t.filter((t=>t instanceof Vh)).length,n=t.filter((t=>t instanceof Bh)).length;if(e>1||e>0&&n>0)throw new ei(ti.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Bh extends Fh{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Bh(t,e,n)}_apply(t){const e=this._parse(t);return Hh(t._query,e),new Qc(t.firestore,t.converter,ar(t._query,e))}_parse(t){const e=mh(t.firestore),n=function(t,e,n,i,s,r,a){let o;if(s.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new ei(ti.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(r,"' queries on documentId()."));if("in"===r||"not-in"===r){Wh(a,r);const e=[];for(const n of a)e.push(Uh(i,t,n));o={arrayValue:{values:e}}}else o=Uh(i,t,a)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||Wh(a,r),o=_h(n,e,a,"in"===r||"not-in"===r);return Rs.create(s,r,o)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function zh(t,e,n){const i=e,s=Nh("where",t);return Bh._create(s,i,n)}class Vh extends Oh{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Vh(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Ps.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const s of i)Hh(n,s),n=ar(n,s)}(t._query,e),new Qc(t.firestore,t.converter,ar(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Uh(t,e,n){if("string"==typeof(n=Qt(n))){if(""===n)throw new ei(ti.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nr(e)&&-1!==n.indexOf("/"))throw new ei(ti.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=e.path.child(yi.fromString(n));if(!xi.isDocumentKey(i))throw new ei(ti.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return ps(t,new xi(i))}if(n instanceof Jc)return ps(t,n._key);throw new ei(ti.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Gc(n),"."))}function Wh(t,e){if(!Array.isArray(t)||0===t.length)throw new ei(ti.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function Hh(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new ei(ti.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new ei(ti.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class qh{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(os(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ts(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Jn()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Vi(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new ch(Zi(t.latitude),Zi(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=ns(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(is(t));default:return null}}convertTimestamp(t){const e=$i(t);return new gi(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=yi.fromString(t);$n(lo(n));const i=new rs(n.get(1),n.get(3)),s=new xi(n.popFirst(5));return i.isEqual(e)||Yn("Document ".concat(s," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),s}}function Gh(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Kh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Yh extends Ph{constructor(t,e,n,i,s,r){super(t,e,n,i,r),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Nh("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Xh extends Yh{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class Qh{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Kh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Xh(this._firestore,this._userDataWriter,n.key,n,new Kh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ei(ti.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new Xh(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Kh(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Xh(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Kh(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let s=-1,r=-1;return 0!==e.type&&(s=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:Jh(e.type),doc:i,oldIndex:s,newIndex:r}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Jh(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jn()}}class $h extends qh{constructor(t){super(),this.firestore=t}convertBytes(t){return new ah(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Jc(this.firestore,null,e)}}function Zh(t,e,n){t=Kc(t,Jc);const i=Kc(t.firestore,ih),s=mh(i);let r;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return r="string"==typeof(e=Qt(e))||e instanceof oh?xh(s,"updateDoc",t._key,e,n,o):wh(s,"updateDoc",t._key,e),nu(i,[r.toMutation(t._key,Gr.exists(!0))])}function tu(t,e){const n=Kc(t.firestore,ih),i=th(t),s=Gh(t.converter,e);return nu(n,[vh(mh(t.firestore),"addDoc",i._key,s,null!==t.converter,{}).toMutation(i._key,Gr.exists(!1))]).then((()=>i))}function eu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var s,r,a;t=Qt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||nh(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(nh(n[l])){const t=n[l];n[l]=null===(s=t.next)||void 0===s?void 0:s.bind(t),n[l+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),n[l+2]=null===(a=t.complete)||void 0===a?void 0:a.bind(t)}let h,u,d;if(t instanceof Jc)u=Kc(t.firestore,ih),d=tr(t._key.path),h={next:e=>{n[l]&&n[l](iu(u,t,e))},error:n[l+1],complete:n[l+2]};else{const e=Kc(t,Qc);u=Kc(e.firestore,ih),d=e._query;const i=new $h(u);h={next:t=>{n[l]&&n[l](new Qh(u,i,e,t))},error:n[l+1],complete:n[l+2]},Lh(t._query)}return function(t,e,n,i){const s=new Rc(i),r=new Zl(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>Gl(await Bc(t),r))),()=>{s.$a(),t.asyncQueue.enqueueAndForget((async()=>Kl(await Bc(t),r)))}}(sh(u),d,c,h)}function nu(t,e){return function(t,e){const n=new ni;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Tc(t);try{const t=await function(t,e){const n=Zn(t),i=gi.now(),s=e.reduce(((t,e)=>t.add(e.key)),Sr());let r,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let o=vr(),l=Sr();return n.os.getEntries(t,s).next((t=>{o=t,o.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,o))).next((s=>{r=s;const a=[];for(const t of e){const e=$r(t,r.get(t.key).overlayedDocument);null!=e&&a.push(new ea(t.key,e,As(e.value.mapValue),Gr.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,a,e)})).next((e=>{a=e;const i=e.applyToLocalDocumentSet(r,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:a.batchId,changes:wr(r)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.xa[t.currentUser.toKey()];i||(i=new Wi(fi)),i=i.insert(e,n),t.xa[t.currentUser.toKey()]=i}(i,t.batchId,n),await Ec(i,t.changes),await Sl(i.remoteStore)}catch(t){const e=zl(t,"Failed to persist write");n.reject(e)}}(await jc(t),e,n))),n.promise}(sh(t),e)}function iu(t,e,n){const i=n.docs.get(e._key),s=new $h(t);return new Yh(t,s,e._key,i,new Kh(n.hasPendingWrites,n.fromCache),e.converter)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){Hn=t}(un),on(new Jt("firestore",((t,n)=>{let{instanceIdentifier:i,options:s}=n;const r=t.getProvider("app").getImmediate(),a=new ih(new ai(t.getProvider("auth-internal")),new hi(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ei(ti.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rs(t.options.projectId,e)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),pn(Un,"4.6.3",t),pn(Un,"4.6.3","esm2017")}();const su="firebasestorage.googleapis.com",ru="storageBucket";class au extends qt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(cu(t),"Firebase Storage: ".concat(e," (").concat(cu(t),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,au.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return cu(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var ou,lu;function cu(t){return"storage/"+t}function hu(){return new au(ou.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function uu(){return new au(ou.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function du(){return new au(ou.CANCELED,"User canceled the upload/download.")}function fu(t){return new au(ou.INVALID_ARGUMENT,t)}function pu(){return new au(ou.APP_DELETED,"The Firebase app was deleted.")}!function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(ou||(ou={}));class gu{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=gu.makeFromUrl(t,e)}catch(sw){return new gu(t,"")}if(""===n.path)return n;throw i=t,new au(ou.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(t,e){let n=null;const i="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+i+"(/(.*))?$","i");function r(t){t.path_=decodeURIComponent(t.path)}const a=e.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:r},{regex:new RegExp("^https?://".concat(e===su?"(?:storage.googleapis.com|storage.cloud.google.com)":e,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:r}];for(let l=0;l<o.length;l++){const e=o[l],i=e.regex.exec(t);if(i){const t=i[e.indices.bucket];let s=i[e.indices.path];s||(s=""),n=new gu(t,s),e.postModify(n);break}}if(null==n)throw function(t){return new au(ou.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return n}}class mu{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(){}}function vu(t,e,n,i){if(i<e)throw fu("Invalid value for '".concat(t,"'. Expected ").concat(e," or greater."));if(i>n)throw fu("Invalid value for '".concat(t,"'. Expected ").concat(n," or less."))}function yu(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){n=n+(e(i)+"="+e(t[i]))+"&"}return n=n.slice(0,-1),n}function bu(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),s=-1!==e.indexOf(t);return n||i||s}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(lu||(lu={}));class wu{constructor(t,e,n,i,s,r,a,o,l,c,h){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=r,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{if(e)return void t(!1,new xu(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const e=n.getErrorCode()===lu.NO_ERROR,s=n.getStatus();if(!e||bu(s,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===lu.ABORT;return void t(!1,new xu(!1,null,e))}const r=-1!==this.successCodes_.indexOf(s);t(!0,new xu(r,n))}))},e=(t,e)=>{const n=this.resolve_,i=this.reject_,s=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(s,s.getResponse());void 0!==t?n(t):n()}catch(sw){i(sw)}else if(null!==s){const t=hu();t.serverResponse=s.getErrorText(),this.errorCallback_?i(this.errorCallback_(s,t)):i(t)}else if(e.canceled){i(this.appDelete_?pu():du())}else{i(uu())}};this.canceled_?e(0,new xu(!1,null,!0)):this.backoffId_=function(t,e,n){let i=1,s=null,r=null,a=!1,o=0;function l(){return 2===o}let c=!1;function h(){if(!c){c=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(null,n)}}function u(e){s=setTimeout((()=>{s=null,t(f,l())}),e)}function d(){r&&clearTimeout(r)}function f(t){if(c)return void d();for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];if(t)return d(),void h.call(null,t,...n);if(l()||a)return d(),void h.call(null,t,...n);let r;i<64&&(i*=2),1===o?(o=2,r=0):r=1e3*(i+Math.random()),u(r)}let p=!1;function g(t){p||(p=!0,d(),c||(null!==s?(t||(o=2),clearTimeout(s),u(0)):t||(o=1)))}return u(0),r=setTimeout((()=>{a=!0,g(!0)}),n),g}(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xu{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function _u(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}class Au{constructor(t,e){this._service=t,this._location=e instanceof gu?e:gu.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Au(t,e)}get root(){const t=new gu(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _u(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new gu(this._location.bucket,t);return new Au(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new au(ou.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function Eu(t,e){const n=null===e||void 0===e?void 0:e[ru];return null==n?null:gu.makeFromBucketSpec(n,t)}class ku{constructor(t,e,n,i,s){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=su,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?gu.makeFromBucketSpec(i,this._host):Eu(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=gu.makeFromBucketSpec(this._url,t):this._bucket=Eu(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){vu("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){vu("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});if(t){return(await t.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Au(this,t)}_makeRequest(t,e,n,i){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new mu(pu());{const r=function(t,e,n,i,s,r){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=yu(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(c,r),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,i),new wu(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}(t,this._appId,n,i,e,this._firebaseVersion,s);return this._requests.add(r),r.getPromise().then((()=>this._requests.delete(r)),(()=>this._requests.delete(r))),r}}async makeRequestWithTokens(t,e){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,i).getPromise()}}const Su="@firebase/storage",Cu="0.12.5",Tu="storage";function Mu(t,e){let{instanceIdentifier:n}=e;const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new ku(i,s,r,n,un)}on(new Jt(Tu,Mu,"PUBLIC").setMultipleInstances(!0)),pn(Su,Cu,""),pn(Su,Cu,"esm2017");const Iu=dn({apiKey:"AIzaSyDV-tviFUTABy9ik3FogRM2P9oMBPe5JUA",authDomain:"alphajob-db3d7.firebaseapp.com",projectId:"alphajob-db3d7",storageBucket:"alphajob-db3d7.firebasestorage.app",messagingSenderId:"1040844005992",appId:"1:1040844005992:web:0d29d7163f149fb629d1dd",measurementId:"G-GY3ZGW7LNT"}),Ru=function(t,e){const n="string"==typeof t?t:e||"(default)",i=ln("object"==typeof t?t:fn(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=jt("firestore");t&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const r=(t=Kc(t,Xc))._getSettings(),a="".concat(e,":").concat(n);if("firestore.googleapis.com"!==r.host&&r.host!==a&&Xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:a,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Wn.MOCK_USER;else{e=Vt(i.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new ei(ti.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Wn(r)}t._authCredentials=new ri(new ii(e,n))}}(i,...t)}return i}(Iu);!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn(),e=arguments.length>1?arguments[1]:void 0;t=Qt(t);const n=ln(t,Tu).getImmediate({identifier:e}),i=jt("storage");i&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.host="".concat(e,":").concat(n),t._protocol="http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken="string"===typeof s?s:Vt(s,t.app.options.projectId))}(t,e,n,i)}(n,...i)}(Iu);function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pu.apply(null,arguments)}function Du(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Du(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}const Nu=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=Du(t))&&(i&&(i+=" "),i+=e);return i};var Lu=function(t,e){return t&&e};const Ou=function(t,e){var n=t.handledProps,i=void 0===n?[]:n;return Object.keys(e).reduce((function(t,n){return"childKey"===n||-1===i.indexOf(n)&&(t[n]=e[n]),t}),{})};const Fu=function(t,e,n){var i=t.defaultProps,s=void 0===i?{}:i;if(e.as&&e.as!==s.as)return e.as;if(n){var r=n();if(r)return r}return e.href?"a":s.as||"div"};function ju(t){var n,i,s=t.active,r=t.children,a=t.className,o=t.content,l=t.disabled,c=t.indeterminate,h=t.inline,u=t.inverted,d=t.size,f=Nu("ui",d,Lu(s,"active"),Lu(l,"disabled"),Lu(c,"indeterminate"),Lu(u,"inverted"),Lu(r||o,"text"),(i="inline",(n=h)&&(!0===n?i:n+" "+i)),"loader",a),p=Ou(ju,t),g=Fu(ju,t);return e.createElement(g,Pu({},p,{className:f}),function(t){return null===t||void 0===t||Array.isArray(t)&&0===t.length}(r)?o:r)}ju.handledProps=["active","as","children","className","content","disabled","indeterminate","inline","inverted","size"],ju.propTypes={};const Bu=ju,zu=()=>(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)(Bu,{active:!0,inline:"centered",size:"huge"})}),Vu=()=>{const[t,n]=(0,e.useState)([]),[i,s]=(0,e.useState)(!1),[r,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(null),[c,h]=(0,e.useState)(!1),[u,d]=(0,e.useState)({name:"",grade:"",gpa:"",resume:"",coverLetter:""}),[f,p]=(0,e.useState)({title:"",jobType:"",baseSalary:"",description:"",companyName:"",numberOfEmployers:"",workHoursWeekly:"",qualifications:"",remoteOptions:"",website:"",contactEmail:"",contactPhone:"",salaryRange:"",location:"",field:"",deadline:"",hashtags:""}),[g,m]=(0,e.useState)(""),[v,y]=(0,e.useState)(""),[b,w]=(0,e.useState)("asc"),[x,_]=(0,e.useState)("");(0,e.useEffect)((()=>{s(!0);const t=eu(Zc(Ru,"postings"),(t=>{let e=[];t.docs.forEach((t=>{const n=t.data();e.push({id:t.id,...n})})),n(e),s(!1)}),(t=>{console.error("Error fetching data:",t),a(t),s(!1)}));return()=>{t()}}),[]);const A=t=>{const{name:e,value:n}=t.target;d({...u,[e]:n})},E=t=>{const{name:e,value:n}=t.target;p({...f,[e]:n})},k=t.filter((t=>t.title.toLowerCase().includes(g.toLowerCase())||t.description.toLowerCase().includes(g.toLowerCase())||t.location.toLowerCase().includes(g.toLowerCase()))).filter((t=>!x||t.location.toLowerCase().includes(x.toLowerCase()))).sort(((t,e)=>"title"===v?"asc"===b?t.title.localeCompare(e.title):e.title.localeCompare(t.title):"salaryRange"===v?"asc"===b?t.salaryRange.localeCompare(e.salaryRange):e.salaryRange.localeCompare(t.salaryRange):"location"===v?"asc"===b?t.location.localeCompare(e.location):e.location.localeCompare(t.location):0));return i?(0,Mt.jsx)(zu,{}):r?(0,Mt.jsxs)("div",{children:["Error: ",r.message]}):(0,Mt.jsxs)("div",{className:"p-4",children:[(0,Mt.jsx)("div",{className:"text-3xl mb-4 font-extrabold text-center text-black bg-indigo-300 px-8 py-1 rounded-3xl mx-auto max-w-max",children:"AlphaJob"}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsxs)("div",{className:"relative w-full mb-4",children:[(0,Mt.jsx)("input",{type:"search",id:"location-search",className:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-2xl border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-s-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Search for Job Posting",value:g,onChange:t=>m(t.target.value),required:!0}),(0,Mt.jsxs)("button",{type:"submit",className:"absolute top-0 end-0 h-full p-2.5 text-sm font-medium text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[(0,Mt.jsx)("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,Mt.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),(0,Mt.jsx)("span",{className:"sr-only",children:"Search"})]})]}),(0,Mt.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,Mt.jsxs)("div",{className:"flex items-center",children:[(0,Mt.jsx)("label",{className:"mr-2",children:"Sort by:"}),(0,Mt.jsxs)("select",{value:v,onChange:t=>y(t.target.value),className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-4",children:[(0,Mt.jsx)("option",{value:"",children:"Select"}),(0,Mt.jsx)("option",{value:"title",children:"Title"}),(0,Mt.jsx)("option",{value:"salaryRange",children:"Salary Range"}),(0,Mt.jsx)("option",{value:"location",children:"Location"})]}),(0,Mt.jsxs)("select",{value:b,onChange:t=>w(t.target.value),className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Mt.jsx)("option",{value:"asc",children:"Ascending"}),(0,Mt.jsx)("option",{value:"desc",children:"Descending"})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center",children:[(0,Mt.jsx)("label",{className:"mr-2",children:"Filter by Location:"}),(0,Mt.jsx)("input",{type:"text",placeholder:"Location",value:x,onChange:t=>_(t.target.value),className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]})]})]}),(0,Mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 m-8 rounded-2xl",children:k.length>0?k.map((t=>{var e;return(0,Mt.jsxs)("div",{className:"p-6 bg-white shadow-md rounded-3xl border border-gray-200 flex flex-col justify-between",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h2",{className:"text-2xl text-indigo-700 font-bold mb-2",children:t.title}),(0,Mt.jsx)("img",{src:"/Users/narainsingaram/Desktop/alpha_job/public/job_image.jpg",alt:"Job Image",className:"mb-4"}),(0,Mt.jsxs)("p",{className:"text-md bg-slate-100 p-4 rounded-2xl text-gray-700 mb-4",children:[(0,Mt.jsx)("span",{className:"font-bold",children:"Description: "}),t.description]}),(0,Mt.jsx)("p",{className:"text-gray-500 mb-4",children:t.companyName}),(0,Mt.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Job Type:"})," ",t.jobType]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Base Salary:"})," ",t.baseSalary]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Work Hours:"})," ",t.workHoursWeekly," hours/week"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Remote Options:"})," ",t.remoteOptions]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Location:"})," ",t.location]})]}),(0,Mt.jsx)("hr",{className:"my-4"}),(0,Mt.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Qualifications:"})," ",t.qualifications]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Salary Range:"})," ",t.salaryRange]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Field:"})," ",t.field]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Application Deadline:"})," ",new Date(1e3*(null===(e=t.deadline)||void 0===e?void 0:e.seconds)).toLocaleDateString()]})]}),(0,Mt.jsx)("hr",{className:"my-4"}),(0,Mt.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Website:"})," ",(0,Mt.jsx)("a",{href:t.website,className:"text-indigo-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:t.website})]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Contact Email:"})," ",(0,Mt.jsx)("a",{href:"mailto:".concat(t.contactEmail),className:"text-indigo-600 hover:underline",children:t.contactEmail})]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Contact Phone:"})," ",t.contactPhone]})]}),(0,Mt.jsx)("div",{className:"flex flex-wrap mt-4",children:t.hashtags&&t.hashtags.map(((t,e)=>(0,Mt.jsxs)("span",{className:"bg-indigo-100 text-indigo-700 rounded-full px-3 py-1 text-xs font-medium mr-2 mb-2",children:["#",t]},e)))})]}),(0,Mt.jsx)("div",{className:"flex justify-end mt-6",children:(0,Mt.jsx)("button",{className:"btn bg-indigo-600 text-white",onClick:()=>{return e=t.id,void l(e);var e},children:"Apply Now"})})]},t.id)})):(0,Mt.jsx)("p",{children:"No postings found."})}),o&&(0,Mt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:(0,Mt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,Mt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Apply for Job"}),(0,Mt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const e=Tt.get("studentId");if(e)try{await tu(Zc(Ru,"applications"),{postingId:o,studentId:e,studentName:u.name,grade:u.grade,gpa:u.gpa,resume:u.resume,coverLetter:u.coverLetter,status:"pending"}),alert("Application submitted successfully!"),l(null),d({name:"",grade:"",gpa:"",resume:"",coverLetter:""})}catch(r){console.error("Error submitting application:",r),alert("Failed to submit application.")}else alert("You must be logged in as a student to apply for a job.")},children:[(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",name:"name",type:"text",value:u.name,onChange:A,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"grade",children:"Grade"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"grade",name:"grade",type:"text",value:u.grade,onChange:A,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"gpa",children:"GPA"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"gpa",name:"gpa",type:"text",value:u.gpa,onChange:A,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"resume",children:"Resume Link"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"resume",name:"resume",type:"text",value:u.resume,onChange:A,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"coverLetter",children:"Cover Letter Link"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"coverLetter",name:"coverLetter",type:"text",value:u.coverLetter,onChange:A,required:!0})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Submit"}),(0,Mt.jsx)("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>l(null),children:"Cancel"})]})]})]})}),"true"===Tt.get("adminMode")&&(0,Mt.jsx)("button",{className:"fixed bottom-4 right-4 btn btn-primary",onClick:()=>h(!0),children:"Create Posting"}),c&&(0,Mt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:(0,Mt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md overflow-y-auto max-h-[80vh]",children:[(0,Mt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Create Job Posting"}),(0,Mt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const e=Tt.get("employerId");if(console.log("Employer ID:",e),e)try{await tu(Zc(Ru,"postings"),{...f,employerId:e,dateAdded:new bh("serverTimestamp"),hashtags:f.hashtags.split(",").map((t=>t.trim()))}),alert("Job posting created successfully!"),h(!1),p({title:"",jobType:"",baseSalary:"",description:"",companyName:"",numberOfEmployers:"",workHoursWeekly:"",qualifications:"",remoteOptions:"",website:"",contactEmail:"",contactPhone:"",salaryRange:"",location:"",field:"",deadline:"",hashtags:""})}catch(r){console.error("Error creating job posting:",r)}else alert("You must be logged in as an employer to create a posting.")},children:[(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"Job Title"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"title",name:"title",type:"text",value:f.title,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"jobType",children:"Job Type"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"jobType",name:"jobType",type:"text",value:f.jobType,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"baseSalary",children:"Base Salary"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"baseSalary",name:"baseSalary",type:"text",value:f.baseSalary,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"description",children:"Job Description"}),(0,Mt.jsx)("textarea",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"description",name:"description",value:f.description,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"companyName",children:"Company Name"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"companyName",name:"companyName",type:"text",value:f.companyName,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"numberOfEmployers",children:"Number of Employers"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"numberOfEmployers",name:"numberOfEmployers",type:"text",value:f.numberOfEmployers,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"workHoursWeekly",children:"Work Hours Weekly"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"workHoursWeekly",name:"workHoursWeekly",type:"text",value:f.workHoursWeekly,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"qualifications",children:"Recommended Qualifications"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"qualifications",name:"qualifications",type:"text",value:f.qualifications,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"remoteOptions",children:"Remote Working Options"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"remoteOptions",name:"remoteOptions",type:"text",value:f.remoteOptions,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"website",children:"Website"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"website",name:"website",type:"text",value:f.website,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"contactEmail",children:"Contact Email"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"contactEmail",name:"contactEmail",type:"email",value:f.contactEmail,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"contactPhone",children:"Contact Phone"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"contactPhone",name:"contactPhone",type:"text",value:f.contactPhone,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"salaryRange",children:"Salary Range"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"salaryRange",name:"salaryRange",type:"text",value:f.salaryRange,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"location",children:"Location"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"location",name:"location",type:"text",value:f.location,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"field",children:"Field"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"field",name:"field",type:"text",value:f.field,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"deadline",children:"Deadline"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"deadline",name:"deadline",type:"date",value:f.deadline,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"hashtags",children:"Hashtags (comma-separated)"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"hashtags",name:"hashtags",type:"text",value:f.hashtags,onChange:E,required:!0})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Create Posting"}),(0,Mt.jsx)("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>h(!1),children:"Cancel"})]})]})]})})]})},Uu=()=>{const[t,n]=(0,e.useState)({title:"",description:"",salaryRange:"",location:""}),i=J(),s="true"===Tt.get("adminMode"),r=e=>{const{name:i,value:s}=e.target;n({...t,[i]:s})};return s?(0,Mt.jsxs)("div",{className:"p-4",children:[(0,Mt.jsx)("h1",{className:"text-5xl mb-4 font-bold text-center",children:"Create Job Posting"}),(0,Mt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!s)return alert("You must be logged in as an admin to create a posting."),void i("/");try{await tu(Zc(Ru,"postings"),{...t,employerId:Tt.get("employerId")}),alert("Job posting created successfully!"),i("/")}catch(n){console.error("Error creating job posting:",n)}},children:[(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"Job Title"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"title",name:"title",type:"text",value:t.title,onChange:r,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"description",children:"Job Description"}),(0,Mt.jsx)("textarea",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"description",name:"description",value:t.description,onChange:r,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"salaryRange",children:"Salary Range"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"salaryRange",name:"salaryRange",type:"text",value:t.salaryRange,onChange:r,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"location",children:"Location"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"location",name:"location",type:"text",value:t.location,onChange:r,required:!0})]}),(0,Mt.jsx)("div",{className:"flex items-center justify-between",children:(0,Mt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Create Posting"})})]})]}):(0,Mt.jsx)("div",{children:"You must be logged in as an admin to create a posting."})},Wu=JSON.parse('[{"id":"student1","name":"John Doe","password":"password1"},{"id":"student2","name":"Jane Smith","password":"password2"},{"id":"student3","name":"Emily Davis","password":"password3"},{"id":"student4","name":"Michael Johnson","password":"password4"},{"id":"student5","name":"Sarah Wilson","password":"password5"}]'),Hu=JSON.parse('[{"id":"employer1","name":"Employer One","password":"password1","email":"narainsingaram7@gmail.com"},{"id":"employer2","name":"Employer Two","password":"password2","email":"narainsingaram7@gmail.com"},{"id":"employer3","name":"Employer Three","password":"password3","email":"narainsingaram7@gmail.com"},{"id":"employer4","name":"Narain Singaram","password":"narain2007","email":"narainsingaram7@gmail.com"}]'),qu=t=>{let{isEmployer:n}=t;const[i,s]=(0,e.useState)(""),[r,a]=(0,e.useState)(""),[o,l]=(0,e.useState)([]),[c,h]=(0,e.useState)([]),u=J();(0,e.useEffect)((()=>{l(Wu),h(Hu)}),[]);return(0,Mt.jsxs)("div",{className:"p-4",children:[(0,Mt.jsx)("h1",{className:"text-5xl mb-4 font-bold text-center",children:n?"Employer Login":"Student Login"}),(0,Mt.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),n){const t=c.find((t=>t.name===i&&t.password===r));return void(t?(Tt.set("employerId",t.id),Tt.set("adminMode","true",{expires:7}),u("/")):alert("Invalid employer credentials."))}const e=o.find((t=>t.name===i&&t.password===r));e?(Tt.set("studentId",e.id),u("/")):alert("Invalid student credentials.")},children:[(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Name"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",name:"email",type:"text",value:i,onChange:t=>s(t.target.value),required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",name:"password",type:"password",value:r,onChange:t=>a(t.target.value),required:!0})]}),(0,Mt.jsx)("div",{className:"flex items-center justify-between",children:(0,Mt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Login"})})]})]})},Gu=t=>e=>{const n=J();return"true"===Tt.get("adminMode")?(0,Mt.jsx)(t,{...e}):(n("/"),null)};var Ku=n(705);function Yu(t){return t+.5|0}const Xu=(t,e,n)=>Math.max(Math.min(t,n),e);function Qu(t){return Xu(Yu(2.55*t),0,255)}function Ju(t){return Xu(Yu(255*t),0,255)}function $u(t){return Xu(Yu(t/2.55)/100,0,1)}function Zu(t){return Xu(Yu(100*t),0,100)}const td={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ed=[..."0123456789ABCDEF"],nd=t=>ed[15&t],id=t=>ed[(240&t)>>4]+ed[15&t],sd=t=>(240&t)>>4===(15&t);function rd(t){var e=(t=>sd(t.r)&&sd(t.g)&&sd(t.b)&&sd(t.a))(t)?nd:id;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const ad=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function od(t,e,n){const i=e*Math.min(n,1-n),s=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-i*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function ld(t,e,n){const i=function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+t/60)%6;return n-n*e*Math.max(Math.min(s,4-s,1),0)};return[i(5),i(3),i(1)]}function cd(t,e,n){const i=od(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function hd(t){const e=t.r/255,n=t.g/255,i=t.b/255,s=Math.max(e,n,i),r=Math.min(e,n,i),a=(s+r)/2;let o,l,c;return s!==r&&(c=s-r,l=a>.5?c/(2-s-r):c/(s+r),o=function(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,s),o=60*o+.5),[0|o,l||0,a]}function ud(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ju)}function dd(t,e,n){return ud(od,t,e,n)}function fd(t){return(t%360+360)%360}function pd(t){const e=ad.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?Qu(+e[5]):Ju(+e[5]));const s=fd(+e[2]),r=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return ud(cd,t,e,n)}(s,r,a):"hsv"===e[1]?function(t,e,n){return ud(ld,t,e,n)}(s,r,a):dd(s,r,a),{r:n[0],g:n[1],b:n[2],a:i}}const gd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},md={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let vd;function yd(t){vd||(vd=function(){const t={},e=Object.keys(md),n=Object.keys(gd);let i,s,r,a,o;for(i=0;i<e.length;i++){for(a=o=e[i],s=0;s<n.length;s++)r=n[s],o=o.replace(r,gd[r]);r=parseInt(md[a],16),t[o]=[r>>16&255,r>>8&255,255&r]}return t}(),vd.transparent=[0,0,0,0]);const e=vd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const bd=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const wd=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,xd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function _d(t,e,n){if(t){let i=hd(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=dd(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Ad(t,e){return t?Object.assign(e||{},t):t}function Ed(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ju(t[3]))):(e=Ad(t,{r:0,g:0,b:0,a:1})).a=Ju(e.a),e}function kd(t){return"r"===t.charAt(0)?function(t){const e=bd.exec(t);let n,i,s,r=255;if(e){if(e[7]!==n){const t=+e[7];r=e[8]?Qu(t):Xu(255*t,0,255)}return n=+e[1],i=+e[3],s=+e[5],n=255&(e[2]?Qu(n):Xu(n,0,255)),i=255&(e[4]?Qu(i):Xu(i,0,255)),s=255&(e[6]?Qu(s):Xu(s,0,255)),{r:n,g:i,b:s,a:r}}}(t):pd(t)}class Sd{constructor(t){if(t instanceof Sd)return t;const e=typeof t;let n;"object"===e?n=Ed(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*td[t[1]],g:255&17*td[t[2]],b:255&17*td[t[3]],a:5===n?17*td[t[4]]:255}:7!==n&&9!==n||(e={r:td[t[1]]<<4|td[t[2]],g:td[t[3]]<<4|td[t[4]],b:td[t[5]]<<4|td[t[6]],a:9===n?td[t[7]]<<4|td[t[8]]:255})),e}(t)||yd(t)||kd(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Ad(this._rgb);return t&&(t.a=$u(t.a)),t}set rgb(t){this._rgb=Ed(t)}rgbString(){return this._valid?function(t){return t&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat($u(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"))}(this._rgb):void 0}hexString(){return this._valid?rd(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=hd(t),n=e[0],i=Zu(e[1]),s=Zu(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(s,"%, ").concat($u(t.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(s,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let s;const r=e===s?.5:e,a=2*r-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;s=1-l,n.r=255&l*n.r+s*i.r+.5,n.g=255&l*n.g+s*i.g+.5,n.b=255&l*n.b+s*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=xd($u(t.r)),s=xd($u(t.g)),r=xd($u(t.b));return{r:Ju(wd(i+n*(xd($u(e.r))-i))),g:Ju(wd(s+n*(xd($u(e.g))-s))),b:Ju(wd(r+n*(xd($u(e.b))-r))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Sd(this.rgb)}alpha(t){return this._rgb.a=Ju(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=Yu(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return _d(this._rgb,2,t),this}darken(t){return _d(this._rgb,2,-t),this}saturate(t){return _d(this._rgb,1,t),this}desaturate(t){return _d(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=hd(t);n[0]=fd(n[0]+e),n=dd(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function Cd(){}const Td=(()=>{let t=0;return()=>t++})();function Md(t){return null===t||void 0===t}function Id(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Rd(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Pd(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function Dd(t,e){return Pd(t)?t:e}function Nd(t,e){return"undefined"===typeof t?e:t}const Ld=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Od(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function Fd(t,e,n,i){let s,r,a;if(Id(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(Rd(t))for(a=Object.keys(t),r=a.length,s=0;s<r;s++)e.call(n,t[a[s]],a[s])}function jd(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Bd(t){if(Id(t))return t.map(Bd);if(Rd(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=Bd(t[n[s]]);return e}return t}function zd(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Vd(t,e,n,i){if(!zd(t))return;const s=e[t],r=n[t];Rd(s)&&Rd(r)?Ud(s,r,i):e[t]=Bd(r)}function Ud(t,e,n){const i=Id(e)?e:[e],s=i.length;if(!Rd(t))return t;const r=(n=n||{}).merger||Vd;let a;for(let o=0;o<s;++o){if(a=i[o],!Rd(a))continue;const e=Object.keys(a);for(let i=0,s=e.length;i<s;++i)r(e[i],t,a,n)}return t}function Wd(t,e){return Ud(t,e,{merger:Hd})}function Hd(t,e,n){if(!zd(t))return;const i=e[t],s=n[t];Rd(i)&&Rd(s)?Wd(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Bd(s))}const qd={"":t=>t,x:t=>t.x,y:t=>t.y};function Gd(t,e){const n=qd[e]||(qd[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function Kd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Yd=t=>"undefined"!==typeof t,Xd=t=>"function"===typeof t,Qd=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const Jd=Math.PI,$d=2*Jd,Zd=$d+Jd,tf=Number.POSITIVE_INFINITY,ef=Jd/180,nf=Jd/2,sf=Jd/4,rf=2*Jd/3,af=Math.log10,of=Math.sign;function lf(t,e,n){return Math.abs(t-e)<n}function cf(t){const e=Math.round(t);t=lf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(af(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function hf(t){return!isNaN(parseFloat(t))&&isFinite(t)}function uf(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function df(t){return t*(Jd/180)}function ff(t){return t*(180/Jd)}function pf(t){if(!Pd(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function gf(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Jd&&(r+=$d),{angle:r,distance:s}}function mf(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vf(t,e){return(t-e+Zd)%$d-Jd}function yf(t){return(t%$d+$d)%$d}function bf(t,e,n,i){const s=yf(t),r=yf(e),a=yf(n),o=yf(r-s),l=yf(a-s),c=yf(s-r),h=yf(s-a);return s===r||s===a||i&&r===a||o>l&&c<h}function wf(t,e,n){return Math.max(e,Math.min(n,t))}function xf(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function _f(t,e,n){n=n||(n=>t[n]<e);let i,s=t.length-1,r=0;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Af=(t,e,n,i)=>_f(t,n,i?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),Ef=(t,e,n)=>_f(t,n,(i=>t[i][e]>=n));const kf=["push","pop","shift","splice","unshift"];function Sf(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);-1!==s&&i.splice(s,1),i.length>0||(kf.forEach((e=>{delete t[e]})),delete t._chartjs)}function Cf(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Tf="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function Mf(t,e){let n=[],i=!1;return function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];n=r,i||(i=!0,Tf.call(window,(()=>{i=!1,t.apply(e,n)})))}}const If=t=>"start"===t?"left":"end"===t?"right":"center",Rf=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Pf(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:a,_parsed:o}=t,l=a.axis,{min:c,max:h,minDefined:u,maxDefined:d}=a.getUserBounds();u&&(s=wf(Math.min(Af(o,l,c).lo,n?i:Af(e,l,a.getPixelForValue(c)).lo),0,i-1)),r=d?wf(Math.max(Af(o,a.axis,h,!0).hi+1,n?0:Af(e,l,a.getPixelForValue(h),!0).hi+1),s,i)-s:i-s}return{start:s,count:r}}function Df(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Nf=t=>0===t||1===t,Lf=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*$d/n),Of=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*$d/n)+1,Ff={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*nf),easeOutSine:t=>Math.sin(t*nf),easeInOutSine:t=>-.5*(Math.cos(Jd*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Nf(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Nf(t)?t:Lf(t,.075,.3),easeOutElastic:t=>Nf(t)?t:Of(t,.075,.3),easeInOutElastic(t){const e=.1125;return Nf(t)?t:t<.5?.5*Lf(2*t,e,.45):.5+.5*Of(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Ff.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Ff.easeInBounce(2*t):.5*Ff.easeOutBounce(2*t-1)+.5};function jf(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Bf(t){return jf(t)?t:new Sd(t)}function zf(t){return jf(t)?t:new Sd(t).saturate(.5).darken(.1).hexString()}const Vf=["x","y","borderWidth","radius","tension"],Uf=["color","borderColor","backgroundColor"];const Wf=new Map;function Hf(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Wf.get(n);return i||(i=new Intl.NumberFormat(t,e),Wf.set(n,i)),i}(e,n).format(t)}const qf={values:t=>Id(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(s="scientific"),r=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const a=af(Math.abs(r)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Hf(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(af(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?qf.numeric.call(this,t,e,n):""}};var Gf={formatters:qf};const Kf=Object.create(null),Yf=Object.create(null);function Xf(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function Qf(t,e,n){return"string"===typeof e?Ud(Xf(t,e),n):Ud(Xf(t,""),e)}class Jf{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>zf(e.backgroundColor),this.hoverBorderColor=(t,e)=>zf(e.borderColor),this.hoverColor=(t,e)=>zf(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Qf(this,t,e)}get(t){return Xf(this,t)}describe(t,e){return Qf(Yf,t,e)}override(t,e){return Qf(Kf,t,e)}route(t,e,n,i){const s=Xf(this,t),r=Xf(this,n),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=r[i];return Rd(t)?Object.assign({},e,t):Nd(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach((t=>t(this)))}}var $f=new Jf({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Uf},numbers:{type:"number",properties:Vf}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Gf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function Zf(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function tp(t,e,n,i){let s=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let a=0;const o=n.length;let l,c,h,u,d;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||Id(u)){if(Id(u))for(c=0,h=u.length;c<h;c++)d=u[c],void 0===d||null===d||Id(d)||(a=Zf(t,s,r,a,d))}else a=Zf(t,s,r,a,u);t.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return a}function ep(t,e,n){const i=t.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function np(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ip(t,e,n,i){sp(t,e,n,i,null)}function sp(t,e,n,i,s){let r,a,o,l,c,h,u,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*ef;if(f&&"object"===typeof f&&(r=f.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,g,0,0,$d):t.arc(n,i,g,0,$d),t.closePath();break;case"triangle":h=s?s/2:g,t.moveTo(n+Math.sin(m)*h,i-Math.cos(m)*g),m+=rf,t.lineTo(n+Math.sin(m)*h,i-Math.cos(m)*g),m+=rf,t.lineTo(n+Math.sin(m)*h,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+sf)*l,u=Math.cos(m+sf)*(s?s/2-c:l),o=Math.sin(m+sf)*l,d=Math.sin(m+sf)*(s?s/2-c:l),t.arc(n-u,i-o,c,m-Jd,m-nf),t.arc(n+d,i-a,c,m-nf,m),t.arc(n+u,i+o,c,m,m+nf),t.arc(n-d,i+a,c,m+nf,m+Jd),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=s?s/2:l,t.rect(n-h,i-l,2*h,2*l);break}m+=sf;case"rectRot":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-u,i-o),t.lineTo(n+d,i-a),t.lineTo(n+u,i+o),t.lineTo(n-d,i+a),t.closePath();break;case"crossRot":m+=sf;case"cross":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-u,i-o),t.lineTo(n+u,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"star":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-u,i-o),t.lineTo(n+u,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a),m+=sf,u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-u,i-o),t.lineTo(n+u,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"line":a=s?s/2:Math.cos(m)*g,o=Math.sin(m)*g,t.moveTo(n-a,i-o),t.lineTo(n+a,i+o);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(s?s/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function rp(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ap(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function op(t){t.restore()}function lp(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if("middle"===s){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===s!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function cp(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function hp(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),a=e-r.actualBoundingBoxLeft,o=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(a,h),t.lineTo(o,h),t.stroke()}}function up(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function dp(t,e,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Id(e)?e:[e],o=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(t.save(),t.font=s.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Md(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,r),l=0;l<a.length;++l)c=a[l],r.backdrop&&up(t,r.backdrop),o&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Md(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),hp(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function fp(t,e){const{x:n,y:i,w:s,h:r,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Jd,Jd,!0),t.lineTo(n,i+r-a.bottomLeft),t.arc(n+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,Jd,nf,!0),t.lineTo(n+s-a.bottomRight,i+r),t.arc(n+s-a.bottomRight,i+r-a.bottomRight,a.bottomRight,nf,0,!0),t.lineTo(n+s,i+a.topRight),t.arc(n+s-a.topRight,i+a.topRight,a.topRight,0,-nf,!0),t.lineTo(n+a.topLeft,i)}const pp=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gp=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mp(t,e){const n=(""+t).match(pp);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const vp=t=>+t||0;function yp(t,e){const n={},i=Rd(e),s=i?Object.keys(e):e,r=Rd(t)?i?n=>Nd(t[n],t[e[n]]):e=>t[e]:()=>t;for(const a of s)n[a]=vp(r(a));return n}function bp(t){return yp(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wp(t){return yp(t,["topLeft","topRight","bottomLeft","bottomRight"])}function xp(t){const e=bp(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function _p(t,e){t=t||{},e=e||$f.font;let n=Nd(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=Nd(t.style,e.style);i&&!(""+i).match(gp)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Nd(t.family,e.family),lineHeight:mp(Nd(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Nd(t.weight,e.weight),string:""};return s.string=function(t){return!t||Md(t.size)||Md(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(s),s}function Ap(t,e,n,i){let s,r,a,o=!0;for(s=0,r=t.length;s<r;++s)if(a=t[s],void 0!==a&&(void 0!==e&&"function"===typeof a&&(a=a(e),o=!1),void 0!==n&&Id(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function Ep(t,e){return Object.assign(Object.create(t),e)}function kp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];const s=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof n&&(n=Op("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:n,_getTarget:i,override:i=>kp([i,...t],e,s,n)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Ip(n,i,(()=>function(t,e,n,i){let s;for(const r of e)if(s=Op(Tp(r,t),n),"undefined"!==typeof s)return Mp(t,s)?Np(n,i,t,s):s}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Fp(t).includes(e),ownKeys:t=>Fp(t),set(t,e,n){const s=t._storage||(t._storage=i());return t[e]=s[e]=n,delete t._keys,!0}})}function Sp(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Cp(t,i),setContext:e=>Sp(t,e,n,i),override:s=>Sp(t.override(s),e,n,i)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Ip(t,e,(()=>function(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:a}=t;let o=i[e];Xd(o)&&a.isScriptable(e)&&(o=function(t,e,n,i){const{_proxy:s,_context:r,_subProxy:a,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(r,a||i);o.delete(t),Mp(t,l)&&(l=Np(s._scopes,s,t,l));return l}(e,o,t,n));Id(o)&&o.length&&(o=function(t,e,n,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof r.index&&i(t))return e[r.index%e.length];if(Rd(e[0])){const n=e,i=s._scopes.filter((t=>t!==n));e=[];for(const l of n){const n=Np(i,s,t,l);e.push(Sp(n,r,a&&a[t],o))}}return e}(e,o,t,a.isIndexable));Mp(e,o)&&(o=Sp(o,s,r&&r[e],a));return o}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Cp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Xd(n)?n:()=>n,isIndexable:Xd(i)?i:()=>i}}const Tp=(t,e)=>t?t+Kd(e):e,Mp=(t,e)=>Rd(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ip(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const i=n();return t[e]=i,i}function Rp(t,e,n){return Xd(t)?t(e,n):t}const Pp=(t,e)=>!0===t?e:"string"===typeof t?Gd(e,t):void 0;function Dp(t,e,n,i,s){for(const r of e){const e=Pp(n,r);if(e){t.add(e);const r=Rp(e._fallback,n,s);if("undefined"!==typeof r&&r!==n&&r!==i)return r}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function Np(t,e,n,i){const s=e._rootScopes,r=Rp(e._fallback,n,i),a=[...t,...s],o=new Set;o.add(i);let l=Lp(o,a,n,r||n,i);return null!==l&&(("undefined"===typeof r||r===n||(l=Lp(o,a,r,l,i),null!==l))&&kp(Array.from(o),[""],s,r,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];if(Id(s)&&Rd(n))return n;return s||{}}(e,n,i))))}function Lp(t,e,n,i,s){for(;n;)n=Dp(t,e,n,i,s);return n}function Op(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function Fp(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function jp(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,a=new Array(i);let o,l,c,h;for(o=0,l=i;o<l;++o)c=o+n,h=e[c],a[o]={r:s.parse(Gd(h,r),c)};return a}const Bp=Number.EPSILON||1e-14,zp=(t,e)=>e<t.length&&!t[e].skip&&t[e],Vp=t=>"x"===t?"y":"x";function Up(t,e,n,i){const s=t.skip?e:t,r=e,a=n.skip?e:n,o=mf(r,s),l=mf(a,r);let c=o/(o+l),h=l/(o+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=i*c,d=i*h;return{previous:{x:r.x-u*(a.x-s.x),y:r.y-u*(a.y-s.y)},next:{x:r.x+d*(a.x-s.x),y:r.y+d*(a.y-s.y)}}}function Wp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Vp(e),i=t.length,s=Array(i).fill(0),r=Array(i);let a,o,l,c=zp(t,0);for(a=0;a<i;++a)if(o=l,l=c,c=zp(t,a+1),l){if(c){const t=c[e]-l[e];s[a]=0!==t?(c[n]-l[n])/t:0}r[a]=o?c?of(s[a-1])!==of(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(t,e,n){const i=t.length;let s,r,a,o,l,c=zp(t,0);for(let h=0;h<i-1;++h)l=c,c=zp(t,h+1),l&&c&&(lf(e[h],0,Bp)?n[h]=n[h+1]=0:(s=n[h]/e[h],r=n[h+1]/e[h],o=Math.pow(s,2)+Math.pow(r,2),o<=9||(a=3/Math.sqrt(o),n[h]=s*a*e[h],n[h+1]=r*a*e[h])))}(t,s,r),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Vp(n),s=t.length;let r,a,o,l=zp(t,0);for(let c=0;c<s;++c){if(a=o,o=l,l=zp(t,c+1),!o)continue;const s=o[n],h=o[i];a&&(r=(s-a[n])/3,o["cp1".concat(n)]=s-r,o["cp1".concat(i)]=h-r*e[c]),l&&(r=(l[n]-s)/3,o["cp2".concat(n)]=s+r,o["cp2".concat(i)]=h+r*e[c])}}(t,r,e)}function Hp(t,e,n){return Math.max(Math.min(t,n),e)}function qp(t,e,n,i,s){let r,a,o,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)Wp(t,s);else{let n=i?t[t.length-1]:t[0];for(r=0,a=t.length;r<a;++r)o=t[r],l=Up(n,o,t[Math.min(r+1,a-(i?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}e.capBezierPoints&&function(t,e){let n,i,s,r,a,o=rp(t[0],e);for(n=0,i=t.length;n<i;++n)a=r,r=o,o=n<i-1&&rp(t[n+1],e),r&&(s=t[n],a&&(s.cp1x=Hp(s.cp1x,e.left,e.right),s.cp1y=Hp(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=Hp(s.cp2x,e.left,e.right),s.cp2y=Hp(s.cp2y,e.top,e.bottom)))}(t,n)}function Gp(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Kp(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Yp(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const Xp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const Qp=["top","right","bottom","left"];function Jp(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=Qp[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const $p=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Zp(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=Xp(n),r="border-box"===s.boxSizing,a=Jp(s,"padding"),o=Jp(s,"border","width"),{x:l,y:c,box:h}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let a,o,l=!1;if($p(s,r,t.target))a=s,o=r;else{const t=e.getBoundingClientRect();a=i.clientX-t.left,o=i.clientY-t.top,l=!0}return{x:a,y:o,box:l}}(t,n),u=a.left+(h&&o.left),d=a.top+(h&&o.top);let{width:f,height:p}=e;return r&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-u)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const tg=t=>Math.round(10*t)/10;function eg(t,e,n,i){const s=Xp(t),r=Jp(s,"margin"),a=Yp(s.maxWidth,t,"clientWidth")||tf,o=Yp(s.maxHeight,t,"clientHeight")||tf,l=function(t,e,n){let i,s;if(void 0===e||void 0===n){const r=t&&Kp(t);if(r){const t=r.getBoundingClientRect(),a=Xp(r),o=Jp(a,"border","width"),l=Jp(a,"padding");e=t.width-l.width-o.width,n=t.height-l.height-o.height,i=Yp(a.maxWidth,r,"clientWidth"),s=Yp(a.maxHeight,r,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||tf,maxHeight:s||tf}}(t,e,n);let{width:c,height:h}=l;if("content-box"===s.boxSizing){const t=Jp(s,"border","width"),e=Jp(s,"padding");c-=e.width+t.width,h-=e.height+t.height}c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=tg(Math.min(c,a,l.maxWidth)),h=tg(Math.min(h,o,l.maxHeight)),c&&!h&&(h=tg(c/2));return(void 0!==e||void 0!==n)&&i&&l.height&&h>l.height&&(h=l.height,c=tg(Math.floor(h*i))),{width:c,height:h}}function ng(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(t.height,"px"),a.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==i||a.height!==s||a.width!==r)&&(t.currentDevicePixelRatio=i,a.height=s,a.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0)}const ig=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Gp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(sw){}return t}();function sg(t,e){const n=function(t,e){return Xp(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function rg(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ag(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function og(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},a=rg(t,s,n),o=rg(s,r,n),l=rg(r,e,n),c=rg(a,o,n),h=rg(o,l,n);return rg(c,h,n)}function lg(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function cg(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function hg(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ug(t){return"angle"===t?{between:bf,compare:vf,normalize:yf}:{between:xf,compare:(t,e)=>t-e,normalize:t=>t}}function dg(t){let{start:e,end:n,count:i,loop:s,style:r}=t;return{start:e%i,end:n%i,loop:s&&(n-e+1)%i===0,style:r}}function fg(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,a=e.length,{compare:o,between:l,normalize:c}=ug(i),{start:h,end:u,loop:d,style:f}=function(t,e,n){const{property:i,start:s,end:r}=n,{between:a,normalize:o}=ug(i),l=e.length;let c,h,{start:u,end:d,loop:f}=t;if(f){for(u+=l,d+=l,c=0,h=l;c<h&&a(o(e[u%l][i]),s,r);++c)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,v,y=!1,b=null;const w=()=>y||l(s,v,g)&&0!==o(s,v),x=()=>!y||0===o(r,g)||l(r,v,g);for(let _=h,A=h;_<=u;++_)m=e[_%a],m.skip||(g=c(m[i]),g!==v&&(y=l(g,s,r),null===b&&w()&&(b=0===o(g,s)?_:A),null!==b&&x()&&(p.push(dg({start:b,end:_,loop:d,count:a,style:f})),b=null),A=_,v=g));return null!==b&&p.push(dg({start:b,end:u,loop:d,count:a,style:f})),p}function pg(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=fg(i[s],t.points,e);r.length&&n.push(...r)}return n}function gg(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const s=t._chart.getContext(),r=mg(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=n.length,c=[];let h=r,u=e[0].start,d=u;function f(t,e,i,s){const r=o?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=r;for(;n[e%l].skip;)e+=r;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:s}),h=s,u=e%l)}}for(const p of e){u=o?u:p.start;let t,e=n[u%l];for(d=u+1;d<=p.end;d++){const r=n[d%l];t=mg(i.setContext(Ep(s,{type:"segment",p0:e,p1:r,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),vg(t,h)&&f(u,d-1,p.loop,h),e=r,h=t}u<d-1&&f(u,d-1,p.loop,h)}return c}(t,e,n,i):e}function mg(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function vg(t,e){if(!e)return!1;const n=[],i=function(t,e){return jf(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}class yg{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const s=e.listeners[i],r=e.duration;s.forEach((i=>i({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)})))}_refresh(){this._request||(this._running=!0,this._request=Tf.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let r,a=s.length-1,o=!1;for(;a>=0;--a)r=s[a],r._active?(r._total>n.duration&&(n.duration=r._total),r.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,n,t,"progress")),s.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=s.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var bg=new yg;const wg="transparent",xg={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Bf(t||wg),s=i.valid&&Bf(e||wg);return s&&s.valid?s.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class _g{constructor(t,e,n,i){const s=e[n];i=Ap([t.to,i,s,t.from]);const r=Ap([t.from,s,i]);this._active=!0,this._fn=t.fn||xg[t.type||typeof r],this._easing=Ff[t.easing]||Ff.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,r=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Ap([t.to,e,i,t.from]),this._from=Ap([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,s=this._from,r=this._loop,a=this._to;let o;if(this._active=s!==a&&(r||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=s:(o=e/n%2,o=r&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(s,a,o))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class Ag{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Rd(t))return;const e=Object.keys($f.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const s=t[i];if(!Rd(s))return;const r={};for(const t of e)r[t]=s[t];(Id(s.properties)&&s.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,r)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const e=t[i[s]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),s}_createAnimations(t,e){const n=this._properties,i=[],s=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let o;for(o=r.length-1;o>=0;--o){const l=r[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let h=s[l];const u=n.get(l);if(h){if(u&&h.active()){h.update(u,c,a);continue}h.cancel()}u&&u.duration?(s[l]=h=new _g(u,t,l,c),i.push(h)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(bg.add(this._chart,n),!0):void 0}}function Eg(t,e){const n=t&&t.options||{},i=n.reverse,s=void 0===n.min?e:0,r=void 0===n.max?e:0;return{start:i?r:s,end:i?s:r}}function kg(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Sg(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t.keys,r="single"===i.mode;let a,o,l,c;if(null===e)return;let h=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(h=!0,i.all)continue;break}c=t.values[l],Pd(c)&&(r||0===e||of(e)===of(c))&&(e+=c)}return h||i.all?e:0}function Cg(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Tg(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Mg(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const e=t[s.index];if(n&&e>0||!n&&e<0)return s.index}return null}function Ig(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:a,index:o}=i,l=r.axis,c=a.axis,h=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(r,a,i),u=e.length;let d;for(let f=0;f<u;++f){const t=e[f],{[l]:n,[c]:r}=t;d=(t._stacks||(t._stacks={}))[c]=Tg(s,h,n),d[o]=r,d._top=Mg(d,a,!0,i.type),d._bottom=Mg(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[o]=r}}function Rg(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Pg(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const Dg=t=>"reset"===t||"none"===t,Ng=(t,e)=>e?t:Object.assign({},t);class Lg{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Cg(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Pg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,s=e.xAxisID=Nd(n.xAxisID,Rg(t,"x")),r=e.yAxisID=Nd(n.yAxisID,Rg(t,"y")),a=e.rAxisID=Nd(n.rAxisID,Rg(t,"r")),o=e.indexAxis,l=e.iAxisID=i(o,s,r,a),c=e.vAxisID=i(o,r,s,a);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Sf(this._data,this),t._stacked&&Pg(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Rd(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:i}=e,s="x"===n.axis?"x":"y",r="x"===i.axis?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,c,h;for(l=0,c=a.length;l<c;++l)h=a[l],o[l]={[s]:h,[r]:t[h]};return o}(e,t)}else if(n!==e){if(n){Sf(n,this);const t=this._cachedMeta;Pg(t),t._parsed=[]}e&&Object.isExtensible(e)&&(s=this,(i=e)._chartjs?i._chartjs.listeners.push(s):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),kf.forEach((t=>{const e="_onData"+Kd(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];const a=n.apply(this,s);return i._chartjs.listeners.forEach((t=>{"function"===typeof t[e]&&t[e](...s)})),a}})})))),this._syncList=[],this._data=e}var i,s}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=Cg(e.vScale,e),e.stack!==n.stack&&(i=!0,Pg(e),e.stack=n.stack),this._resyncElements(t),(i||s!==e._stacked)&&(Ig(this,e._parsed),e._stacked=Cg(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:r}=n,a=s.axis;let o,l,c,h=0===t&&e===i.length||n._sorted,u=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Id(i[t])?this.parseArrayData(n,i,t,e):Rd(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const s=()=>null===l[a]||u&&l[a]<u[a];for(o=0;o<e;++o)n._parsed[o+t]=l=c[o],h&&(s()&&(h=!1),u=l);n._sorted=h}r&&Ig(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:s,vScale:r}=t,a=s.axis,o=r.axis,l=s.getLabels(),c=s===r,h=new Array(i);let u,d,f;for(u=0,d=i;u<d;++u)f=u+n,h[u]={[a]:c||s.parse(l[f],f),[o]:r.parse(e[f],f)};return h}parseArrayData(t,e,n,i){const{xScale:s,yScale:r}=t,a=new Array(i);let o,l,c,h;for(o=0,l=i;o<l;++o)c=o+n,h=e[c],a[o]={x:s.parse(h[0],c),y:r.parse(h[1],c)};return a}parseObjectData(t,e,n,i){const{xScale:s,yScale:r}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,h,u,d;for(c=0,h=i;c<h;++c)u=c+n,d=e[u],l[c]={x:s.parse(Gd(d,a),u),y:r.parse(Gd(d,o),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,s=this._cachedMeta,r=e[t.axis];return Sg({keys:kg(i,!0),values:e._stacks[t.axis]._visualValues},r,s.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const s=n[e.axis];let r=null===s?NaN:s;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,r=Sg(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&t===n.iScale,r=i.length,a=this._getOtherScale(t),o=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kg(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=function(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let u,d;function f(){d=i[u];const e=d[a.axis];return!Pd(d[t.axis])||c>e||h<e}for(u=0;u<r&&(f()||(this.updateRangeFromParsed(l,t,d,o),!s));++u);if(s)for(u=r-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(l,t,d,o);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i][t.axis],Pd(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,s;return Rd(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:!1===t}}(Nd(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Eg(t,n),s=Eg(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],s=e.chartArea,r=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,s,a,o),c=a;c<a+o;++c){const e=i[c];e.hidden||(e.active&&l?r.push(e):e.draw(t,s))}for(c=0;c<r.length;++c)r[c].draw(t,s)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];s=e.$context||(e.$context=function(t,e,n){return Ep(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=function(t,e){return Ep(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=n,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===e,s=this._cachedDataOpts,r=t+"-"+e,a=s[r],o=this.enableOptionSharing&&Yd(n);if(a)return Ng(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),h=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),c),d=Object.keys($f.elements[t]),f=l.resolveNamedOptions(u,d,(()=>this.getContext(n,i,e)),h);return f.$shared&&(f.$shared=o,s[r]=Object.freeze(Ng(f,o))),f}_resolveAnimations(t,e,n){const i=this.chart,s=this._cachedDataOpts,r="animation-".concat(e),a=s[r];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,s=i.datasetAnimationScopeKeys(this._type,e),r=i.getOptionScopes(this.getDataset(),s);o=i.createResolver(r,this.getContext(t,n,e))}const l=new Ag(i,o&&o.animations);return o&&o._cacheable&&(s[r]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Dg(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(n),r=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,n),{sharedOptions:s,includeOptions:r}}updateElement(t,e,n,i){Dg(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Dg(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,s=e.length,r=Math.min(s,i);r&&this.parse(0,r),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,s=i.data,r=t+e;let a;const o=t=>{for(t.length+=e,a=t.length-1;a>=r;a--)t[a]=t[a-e]};for(o(s),a=t;a<r;++a)s[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(t,e),n&&this.updateElements(s,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Pg(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Og(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,s=n.length;e<s;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Cf(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,s,r,a,o=e._length;const l=()=>{32767!==r&&-32768!==r&&(Yd(a)&&(o=Math.min(o,Math.abs(r-a)||o)),a=r)};for(i=0,s=n.length;i<s;++i)r=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)r=e.getPixelForTick(i),l();return o}function Fg(t,e,n,i){return Id(t)?function(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),a=Math.min(s,r),o=Math.max(s,r);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:a,max:o}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function jg(t,e,n,i){const s=t.iScale,r=t.vScale,a=s.getLabels(),o=s===r,l=[];let c,h,u,d;for(c=n,h=n+i;c<h;++c)d=e[c],u={},u[s.axis]=o||s.parse(a[c],c),l.push(Fg(d,u,r,c));return l}function Bg(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function zg(t,e,n,i){let s=e.borderSkipped;const r={};if(!s)return void(t.borderSkipped=r);if(!0===s)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:h}=function(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}(t);"middle"===s&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=h:(r[Vg(h,a,o,l)]=!0,s=c)),r[Vg(s,a,o,l)]=!0,t.borderSkipped=r}function Vg(t,e,n,i){var s,r,a;return i?(a=n,t=Ug(t=(s=t)===(r=e)?a:s===a?r:s,n,e)):t=Ug(t,e,n),t}function Ug(t,e,n){return"start"===t?e:"end"===t?n:t}function Wg(t,e,n){let{inflateAmount:i}=e;t.inflateAmount="auto"===i?1===n?.33:0:i}(0,Ku.A)(Lg,"defaults",{}),(0,Ku.A)(Lg,"datasetElementType",null),(0,Ku.A)(Lg,"dataElementType",null);class Hg extends Lg{parsePrimitiveData(t,e,n,i){return jg(t,e,n,i)}parseArrayData(t,e,n,i){return jg(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:s,vScale:r}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?a:o,c="x"===r.axis?a:o,h=[];let u,d,f,p;for(u=n,d=n+i;u<d;++u)p=e[u],f={},f[s.axis]=s.parse(Gd(p,l),u),h.push(Fg(Gd(p,c),f,r,u));return h}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const s=n._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,s=this.getParsed(t),r=s._custom,a=Bg(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const s="reset"===i,{index:r,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:h,includeOptions:u}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=s||Md(e[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||Bg(e._custom)||r===p._top||r===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};u&&(g.options=h||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;zg(g,m,p,r),Wg(g,m,c.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),s=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(e),o=a&&a[n.axis],l=t=>{const e=t._parsed.find((t=>t[n.axis]===o)),i=e&&e[t.vScale.axis];if(Md(i)||isNaN(i))return!0};for(const c of i)if((void 0===e||!l(c))&&((!1===s||-1===r.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&r.push(c.stack),c.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),s=void 0!==e?i.indexOf(e):-1;return-1===s?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let s,r;for(s=0,r=e.data.length;s<r;++s)i.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=t.barThickness;return{min:a||Og(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:s,minBarLength:r}}=this,a=s||0,o=this.getParsed(t),l=o._custom,c=Bg(l);let h,u,d=o[e.axis],f=0,p=n?this.applyStack(e,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&of(d)!==of(l.barEnd)&&(f=0),f+=d);const g=Md(s)||c?f:s;let m=e.getPixelForValue(g);if(h=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,u=h-m,Math.abs(u)<r){u=function(t,e,n){return 0!==t?of(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(u,e,a)*r,d===a&&(m-=u/2);const t=e.getPixelForDecimal(0),s=e.getPixelForDecimal(1),l=Math.min(t,s),f=Math.max(t,s);m=Math.max(Math.min(m,f),l),h=m+u,n&&!c&&(o._stacks[e.axis]._visualValues[i]=e.getValueForPixel(h)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=of(u)*e.getLineWidthForValue(a)/2;m+=t,u-=t}return{size:u,base:m,head:h,center:h+u/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,s=i.skipNull,r=Nd(i.maxBarThickness,1/0);let a,o;if(e.grouped){const n=s?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?function(t,e,n,i){const s=e.pixels,r=s[t];let a=t>0?s[t-1]:null,o=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;null===a&&(a=r-(null===o?e.end-e.start:o-r)),null===o&&(o=r+r-a);const c=r-(r-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n):function(t,e,n,i){const s=n.barThickness;let r,a;return Md(s)?(r=e.min*n.categoryPercentage,a=n.barPercentage):(r=s*i,a=1),{chunk:r/i,ratio:a,start:e.pixels[t]-r/2}}(t,e,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(r,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),o=Math.min(r,e.min*e.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let s=0;for(;s<i;++s)null===this.getParsed(s)[e.axis]||n[s].hidden||n[s].draw(this._ctx)}}(0,Ku.A)(Hg,"id","bar"),(0,Ku.A)(Hg,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Ku.A)(Hg,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class qg extends Lg{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const s=super.parsePrimitiveData(t,e,n,i);for(let r=0;r<s.length;r++)s[r]._custom=this.resolveDataElementOptions(r+n).radius;return s}parseArrayData(t,e,n,i){const s=super.parseArrayData(t,e,n,i);for(let r=0;r<s.length;r++){const t=e[n+r];s[r]._custom=Nd(t[2],this.resolveDataElementOptions(r+n).radius)}return s}parseObjectData(t,e,n,i){const s=super.parseObjectData(t,e,n,i);for(let r=0;r<s.length;r++){const t=e[n+r];s[r]._custom=Nd(t&&t.r&&+t.r,this.resolveDataElementOptions(r+n).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=e,r=this.getParsed(t),a=i.getLabelForValue(r.x),o=s.getLabelForValue(r.y),l=r._custom;return{label:n[t]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(e,i),c=r.axis,h=a.axis;for(let u=e;u<e+n;u++){const e=t[u],n=!s&&this.getParsed(u),d={},f=d[c]=s?r.getPixelForDecimal(.5):r.getPixelForValue(n[c]),p=d[h]=s?a.getBasePixel():a.getPixelForValue(n[h]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(u,e.active?"active":i),s&&(d.options.radius=0)),this.updateElement(e,u,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return"active"!==e&&(i.radius=0),i.radius+=Nd(n&&n._custom,s),i}}(0,Ku.A)(qg,"id","bubble"),(0,Ku.A)(qg,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Ku.A)(qg,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Gg extends Lg{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let s,r,a=t=>+n[t];if(Rd(n[t])){const{key:t="value"}=this._parsing;a=e=>+Gd(n[e],t)}for(s=t,r=t+e;s<r;++s)i._parsed[s]=a(s)}}_getRotation(){return df(this.options.rotation-90)}_getCircumference(){return df(this.options.circumference)}_getRotationExtents(){let t=$d,e=-$d;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,s=i._getRotation(),r=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,s=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,s=1,r=0,a=0;if(e<$d){const o=t,l=o+e,c=Math.cos(o),h=Math.sin(o),u=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>bf(t,o,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>bf(t,o,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,u),m=f(nf,h,d),v=p(Jd,c,u),y=p(Jd+nf,h,d);i=(g-v)/2,s=(m-y)/2,r=-(g+v)/2,a=-(m+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:a}}(d,u,o),v=(n.width-r)/f,y=(n.height-r)/p,b=Math.max(Math.min(v,y)/2,0),w=Ld(this.options.radius,b),x=(w-Math.max(w*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/$d)}updateElements(t,e,n,i){const s="reset"===i,r=this.chart,a=r.chartArea,o=r.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,h=s&&o.animateScale,u=h?0:this.innerRadius,d=h?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,s);for(g=e;g<e+n;++g){const e=this._circumference(g,s),n=t[g],r={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:u};p&&(r.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,r,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const s=t._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(s))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?$d*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Hf(e._parsed[t],n.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,s,r,a,o;if(!t)for(i=0,s=n.data.datasets.length;i<s;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,a=r.controller;break}if(!t)return 0;for(i=0,s=t.length;i<s;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(e=Math.max(e,o.borderWidth||0,o.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Nd(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Ku.A)(Gg,"id","doughnut"),(0,Ku.A)(Gg,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Ku.A)(Gg,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),(0,Ku.A)(Gg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,s)=>{const r=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:i,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class Kg extends Lg{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=e,r=this.chart._animationsDisabled;let{start:a,count:o}=Pf(e,i,r);this._drawStart=a,this._drawCount=o,Df(e)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:l},t),this.updateElements(i,a,o,t)}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(e,i),u=r.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=hf(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===i,v=e+n,y=t.length;let b=e>0&&this.getParsed(e-1);for(let w=0;w<y;++w){const n=t[w],f=m?n:{};if(w<e||w>=v){f.skip=!0;continue}const y=this.getParsed(w),x=Md(y[d]),_=f[u]=r.getPixelForValue(y[u],w),A=f[d]=s||x?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[d],w);f.skip=isNaN(_)||isNaN(A)||x,f.stop=w>0&&Math.abs(y[u]-b[u])>g,p&&(f.parsed=y,f.raw=l.data[w]),h&&(f.options=c||this.resolveDataElementOptions(w,n.active?"active":i)),m||this.updateElement(n,w,f,i),b=y}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}(0,Ku.A)(Kg,"id","line"),(0,Ku.A)(Kg,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Ku.A)(Kg,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Yg extends Lg{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Hf(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:s}}parseObjectData(t,e,n,i){return jp.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(i/2,0),r=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=s-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,n,i){const s="reset"===i,r=this.chart,a=r.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,h=o.getIndexAngle(0)-.5*Jd;let u,d=h;const f=360/this.countVisibleElements();for(u=0;u<e;++u)d+=this._computeAngle(u,i,f);for(u=e;u<e+n;u++){const e=t[u];let n=d,p=d+this._computeAngle(u,i,f),g=r.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;d=p,s&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=h));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(u,e.active?"active":i)};this.updateElement(e,u,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?df(this.resolveDataElementOptions(t,e).angle||n):0}}(0,Ku.A)(Yg,"id","polarArea"),(0,Ku.A)(Yg,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Ku.A)(Yg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,s)=>{const r=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:i,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Xg extends Gg{}(0,Ku.A)(Xg,"id","pie"),(0,Ku.A)(Xg,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Qg extends Lg{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return jp.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],s=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const r={_loop:!0,_fullLoop:s.length===i.length,options:e};this.updateElement(n,void 0,r,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const s=this._cachedMeta.rScale,r="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),o=s.getPointPositionForValue(a,this.getParsed(a).r),l=r?s.xCenter:o.x,c=r?s.yCenter:o.y,h={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,h,i)}}}(0,Ku.A)(Qg,"id","radar"),(0,Ku.A)(Qg,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Ku.A)(Qg,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Jg extends Lg{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=e,r=this.getParsed(t),a=i.getLabelForValue(r.x),o=s.getLabelForValue(r.y);return{label:n[t]||"",value:"("+a+", "+o+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:s,count:r}=Pf(e,n,i);if(this._drawStart=s,this._drawCount=r,Df(e)&&(s=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:r}=e;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(s,void 0,{animated:!i,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,s,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),h=this.getSharedOptions(c),u=this.includeOptions(i,h),d=r.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=hf(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||"none"===i;let y=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),c=v?e:{},p=Md(n[f]),w=c[d]=r.getPixelForValue(n[d],b),x=c[f]=s||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(w)||isNaN(x)||p,c.stop=b>0&&Math.abs(n[d]-y[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),u&&(c.options=h||this.resolveDataElementOptions(b,e.active?"active":i)),v||this.updateElement(e,b,c,i),y=n}this.updateSharedOptions(h,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const s=e[0].size(this.resolveDataElementOptions(0)),r=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,s,r)/2}}(0,Ku.A)(Jg,"id","scatter"),(0,Ku.A)(Jg,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Ku.A)(Jg,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function $g(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Zg{static override(t){Object.assign(Zg.prototype,t)}constructor(t){(0,Ku.A)(this,"options",void 0),this.options=t||{}}init(){}formats(){return $g()}parse(){return $g()}format(){return $g()}add(){return $g()}diff(){return $g()}startOf(){return $g()}endOf(){return $g()}}var tm=Zg;function em(t,e,n,i){const{controller:s,data:r,_sorted:a}=t,o=s._cachedMeta.iScale;if(o&&e===o.axis&&"r"!==e&&a&&r.length){const t=o._reversePixels?Ef:Af;if(!i)return t(r,e,n);if(s._sharedOptions){const i=r[0],s="function"===typeof i.getRange&&i.getRange(e);if(s){const i=t(r,e,n-s),a=t(r,e,n+s);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:r.length-1}}function nm(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),a=n[e];for(let o=0,l=r.length;o<l;++o){const{index:t,data:n}=r[o],{lo:l,hi:c}=em(r[o],e,a,s);for(let e=l;e<=c;++e){const s=n[e];s.skip||i(s,t,e)}}}function im(t,e,n,i,s){const r=[];if(!s&&!t.isPointInArea(e))return r;return nm(t,n,e,(function(n,a,o){(s||rp(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&r.push({element:n,datasetIndex:a,index:o})}),!0),r}function sm(t,e,n,i,s,r){let a=[];const o=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const s=e?Math.abs(t.x-i.x):0,r=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}(n);let l=Number.POSITIVE_INFINITY;return nm(t,n,e,(function(n,c,h){const u=n.inRange(e.x,e.y,s);if(i&&!u)return;const d=n.getCenterPoint(s);if(!(!!r||t.isPointInArea(d))&&!u)return;const f=o(e,d);f<l?(a=[{element:n,datasetIndex:c,index:h}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:h})})),a}function rm(t,e,n,i,s,r){return r||t.isPointInArea(e)?"r"!==n||i?sm(t,e,n,i,s,r):function(t,e,n,i){let s=[];return nm(t,n,e,(function(t,n,r){const{startAngle:a,endAngle:o}=t.getProps(["startAngle","endAngle"],i),{angle:l}=gf(t,{x:e.x,y:e.y});bf(l,a,o)&&s.push({element:t,datasetIndex:n,index:r})})),s}(t,e,n,s):[]}function am(t,e,n,i,s){const r=[],a="x"===n?"inXRange":"inYRange";let o=!1;return nm(t,n,e,((t,i,l)=>{t[a]&&t[a](e[n],s)&&(r.push({element:t,datasetIndex:i,index:l}),o=o||t.inRange(e.x,e.y,s))})),i&&!o?[]:r}var om={evaluateInteractionItems:nm,modes:{index(t,e,n,i){const s=Zp(e,t),r=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?im(t,s,r,i,a):rm(t,s,r,!1,i,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=o[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,n,i){const s=Zp(e,t),r=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?im(t,s,r,i,a):rm(t,s,r,!1,i,a);if(o.length>0){const e=o[0].datasetIndex,n=t.getDatasetMeta(e).data;o=[];for(let t=0;t<n.length;++t)o.push({element:n[t],datasetIndex:e,index:t})}return o},point:(t,e,n,i)=>im(t,Zp(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const s=Zp(e,t),r=n.axis||"xy",a=n.includeInvisible||!1;return rm(t,s,r,n.intersect,i,a)},x:(t,e,n,i)=>am(t,Zp(e,t),"x",n.intersect,i),y:(t,e,n,i)=>am(t,Zp(e,t),"y",n.intersect,i)}};const lm=["left","top","right","bottom"];function cm(t,e){return t.filter((t=>t.pos===e))}function hm(t,e){return t.filter((t=>-1===lm.indexOf(t.pos)&&t.box.axis===e))}function um(t,e){return t.sort(((t,n)=>{const i=e?n:t,s=e?t:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight}))}function dm(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:s}=n;if(!t||!lm.includes(i))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=s}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,a,o;for(r=0,a=t.length;r<a;++r){o=t[r];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&e.availableWidth,o.height=s):(o.width=i,o.height=c?c*s:a&&e.availableHeight)}return n}function fm(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function pm(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function gm(t,e,n,i){const{pos:s,box:r}=n,a=t.maxPadding;if(!Rd(s)){n.size&&(t[s]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?r.height:r.width),n.size=e.size/e.count,t[s]+=n.size}r.getPadding&&pm(a,r.getPadding());const o=Math.max(0,e.outerWidth-fm(a,t,"left","right")),l=Math.max(0,e.outerHeight-fm(a,t,"top","bottom")),c=o!==t.w,h=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function mm(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function vm(t,e,n,i){const s=[];let r,a,o,l,c,h;for(r=0,a=t.length,c=0;r<a;++r){o=t[r],l=o.box,l.update(o.width||e.w,o.height||e.h,mm(o.horizontal,e));const{same:a,other:u}=gm(e,n,o,i);c|=a&&s.length,h=h||u,l.fullSize||s.push(o)}return c&&vm(s,e,n,i)||h}function ym(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function bm(t,e,n,i){const s=n.padding;let{x:r,y:a}=e;for(const o of t){const t=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=e.w*c,r=l.size||t.height;Yd(l.start)&&(a=l.start),t.fullSize?ym(t,s.left,a,n.outerWidth-s.right-s.left,r):ym(t,e.left+l.placed,a,i,r),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*c,a=l.size||t.width;Yd(l.start)&&(r=l.start),t.fullSize?ym(t,r,s.top,a,n.outerHeight-s.bottom-s.top):ym(t,r,e.top+l.placed,a,i),l.start=r,l.placed+=i,r=t.right}}e.x=r,e.y=a}var wm={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=xp(t.options.layout.padding),r=Math.max(e-s.width,0),a=Math.max(n-s.height,0),o=function(t){const e=function(t){const e=[];let n,i,s,r,a,o;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],({position:r,options:{stack:a,stackWeight:o=1}}=s),e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:o});return e}(t),n=um(e.filter((t=>t.box.fullSize)),!0),i=um(cm(e,"left"),!0),s=um(cm(e,"right")),r=um(cm(e,"top"),!0),a=um(cm(e,"bottom")),o=hm(e,"x"),l=hm(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:cm(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(a).concat(o)}}(t.boxes),l=o.vertical,c=o.horizontal;Fd(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const h=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,u=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/h,hBoxMaxHeight:a/2}),d=Object.assign({},s);pm(d,xp(i));const f=Object.assign({maxPadding:d,w:r,h:a,x:s.left,y:s.top},s),p=dm(l.concat(c),u);vm(o.fullSize,f,u,p),vm(l,f,u,p),vm(c,f,u,p)&&vm(l,f,u,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),bm(o.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,bm(o.rightAndBottom,f,u,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Fd(o.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class xm{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class _m extends xm{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Am="$chartjs",Em={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},km=t=>null===t||""===t;const Sm=!!ig&&{passive:!0};function Cm(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Sm)}function Tm(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Mm(t,e,n){const i=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Tm(n.addedNodes,i),e=e&&!Tm(n.removedNodes,i);e&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}function Im(t,e,n){const i=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Tm(n.removedNodes,i),e=e&&!Tm(n.addedNodes,i);e&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}const Rm=new Map;let Pm=0;function Dm(){const t=window.devicePixelRatio;t!==Pm&&(Pm=t,Rm.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function Nm(t,e,n){const i=t.canvas,s=i&&Kp(i);if(!s)return;const r=Mf(((t,e)=>{const i=s.clientWidth;n(t,e),i<s.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||r(n,i)}));return a.observe(s),function(t,e){Rm.size||window.addEventListener("resize",Dm),Rm.set(t,e)}(t,r),a}function Lm(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Rm.delete(t),Rm.size||window.removeEventListener("resize",Dm)}(t)}function Om(t,e,n){const i=t.canvas,s=Mf((e=>{null!==t.ctx&&n(function(t,e){const n=Em[t.type]||t.type,{x:i,y:s}=Zp(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==s?s:null}}(e,t))}),t);return function(t,e,n){t&&t.addEventListener(e,n,Sm)}(i,e,s),s}class Fm extends xm{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Am]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",km(s)){const e=sg(t,"width");void 0!==e&&(t.width=e)}if(km(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=sg(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Am])return!1;const n=e[Am].initial;["height","width"].forEach((t=>{const i=n[t];Md(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e[Am],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),s={attach:Mm,detach:Im,resize:Nm}[e]||Om;i[e]=s(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:Lm,detach:Lm,resize:Lm}[e]||Cm)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return eg(t,e,n,i)}isAttached(t){const e=t&&Kp(t);return!(!e||!e.isConnected)}}class jm{constructor(){(0,Ku.A)(this,"x",void 0),(0,Ku.A)(this,"y",void 0),(0,Ku.A)(this,"active",!1),(0,Ku.A)(this,"options",void 0),(0,Ku.A)(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return hf(this.x)&&hf(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}function Bm(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],a=r.length,o=r[0],l=r[a-1],c=[];if(a>s)return function(t,e,n,i){let s,r=0,a=n[0];for(i=Math.ceil(i),s=0;s<t.length;s++)s===a&&(e.push(t[s]),r++,a=n[r*i])}(e,c,r,a/s),c;const h=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),s=e.length/n;if(!i)return Math.max(s,1);const r=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let a=0,o=r.length-1;a<o;a++){const t=r[a];if(t>s)return t}return Math.max(s,1)}(r,e,s);if(a>0){let t,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(zm(e,c,h,Md(i)?0:o-i,o),t=0,n=a-1;t<n;t++)zm(e,c,h,r[t],r[t+1]);return zm(e,c,h,l,Md(i)?e.length:l+i),c}return zm(e,c,h),c}function zm(t,e,n,i,s){const r=Nd(i,0),a=Math.min(Nd(s,t.length),t.length);let o,l,c,h=0;for(n=Math.ceil(n),s&&(o=s-i,n=o/Math.floor(o/n)),c=r;c<0;)h++,c=Math.round(r+h*n);for(l=Math.max(r,0);l<a;l++)l===c&&(e.push(t[l]),h++,c=Math.round(r+h*n))}(0,Ku.A)(jm,"defaults",{}),(0,Ku.A)(jm,"defaultRoutes",void 0);const Vm=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Um=(t,e)=>Math.min(e||t,t);function Wm(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function Hm(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,a=t._endPixel,o=1e-6;let l,c=t.getPixelForTick(s);if(!(n&&(l=1===i?Math.max(c-r,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(s-1))/2,c+=s<e?l:-l,c<r-o||c>a+o)))return c}function qm(t){return t.drawTicks?t.tickLength:0}function Gm(t,e){if(!t.display)return 0;const n=_p(t.font,e),i=xp(t.padding);return(Id(t.text)?t.text.length:1)*n.lineHeight+i.height}function Km(t,e,n){let i=If(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Ym extends jm{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Dd(t,Number.POSITIVE_INFINITY),e=Dd(e,Number.NEGATIVE_INFINITY),n=Dd(n,Number.POSITIVE_INFINITY),i=Dd(i,Number.NEGATIVE_INFINITY),{min:Dd(t,n),max:Dd(e,i),minDefined:Pd(t),maxDefined:Pd(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds();if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)e=a[o].controller.getMinMax(this,t),s||(n=Math.min(n,e.min)),r||(i=Math.max(i,e.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Dd(n,Dd(i,n)),max:Dd(i,Dd(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Od(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:s,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:s}=t,r=Ld(e,(s-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(r)),max:a(s,r)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?Wm(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=Bm(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Od(this.options.afterUpdate,[this])}beforeSetDimensions(){Od(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Od(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Od(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Od(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,s;for(n=0,i=t.length;n<i;n++)s=t[n],s.label=Od(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Od(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Od(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Um(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let r,a,o,l=i;if(!this._isVisible()||!e.display||i>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),h=c.widest.width,u=c.highest.height,d=wf(this.chart.width-h,0,this.maxWidth);r=t.offset?this.maxWidth/n:d/(n-1),h+6>r&&(r=d/(n-(t.offset?.5:1)),a=this.maxHeight-qm(t.grid)-e.padding-Gm(t.title,this.chart.options.font),o=Math.sqrt(h*h+u*u),l=ff(Math.min(Math.asin(wf((c.highest.height+6)/r,-1,1)),Math.asin(wf(a/o,-1,1))-Math.asin(wf(u/o,-1,1)))),l=Math.max(i,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){Od(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Od(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:s}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const r=Gm(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=qm(s)+r):(t.height=this.maxHeight,t.width=qm(s)+r),n.display&&this.ticks.length){const{first:e,last:i,widest:s,highest:r}=this._getLabelSizes(),o=2*n.padding,l=df(this.labelRotation),c=Math.cos(l),h=Math.sin(l);if(a){const e=n.mirror?0:h*s.width+c*r.height;t.height=Math.min(this.maxHeight,t.height+e+o)}else{const e=n.mirror?0:c*s.width+h*r.height;t.width=Math.min(this.maxWidth,t.width+e+o)}this._calculatePadding(e,i,h,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:s,padding:r},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,u=0;o?l?(h=i*t.width,u=n*e.height):(h=n*t.height,u=i*e.width):"start"===s?u=e.width:"end"===s?h=t.width:"inner"!==s&&(h=t.width/2,u=e.width/2),this.paddingLeft=Math.max((h-a+r)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===s?(n=0,i=t.height):"end"===s&&(n=e.height,i=0),this.paddingTop=n+r,this.paddingBottom=i+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Od(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Md(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Wm(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:s}=this,r=[],a=[],o=Math.floor(e/Um(e,n));let l,c,h,u,d,f,p,g,m,v,y,b=0,w=0;for(l=0;l<e;l+=o){if(u=t[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=s[f]=s[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,Md(u)||Id(u)){if(Id(u))for(c=0,h=u.length;c<h;++c)y=u[c],Md(y)||Id(y)||(m=Zf(i,p.data,p.gc,m,y),v+=g)}else m=Zf(i,p.data,p.gc,m,u),v=g;r.push(m),a.push(v),b=Math.max(m,b),w=Math.max(v,w)}!function(t,e){Fd(t,(t=>{const n=t.gc,i=n.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[n[s]];n.splice(0,i)}}))}(s,e);const x=r.indexOf(b),_=a.indexOf(w),A=t=>({width:r[t]||0,height:a[t]||0});return{first:A(0),last:A(e-1),widest:A(x),highest:A(_),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return wf(this._alignToPixels?ep(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Ep(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Ep(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=df(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),r=t.autoSkipPadding||0,a=s?s.widest.width+r:0,o=s?s.highest.height+r:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:s,position:r,border:a}=i,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),h=qm(s),u=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return ep(n,t,f)};let m,v,y,b,w,x,_,A,E,k,S,C;if("top"===r)m=g(this.bottom),x=this.bottom-h,A=m-p,k=g(t.top)+p,C=t.bottom;else if("bottom"===r)m=g(this.top),k=t.top,C=g(t.bottom)-p,x=m+p,A=this.top+h;else if("left"===r)m=g(this.right),w=this.right-h,_=m-p,E=g(t.left)+p,S=t.right;else if("right"===r)m=g(this.left),E=t.left,S=g(t.right)-p,w=m+p,_=this.left+h;else if("x"===e){if("center"===r)m=g((t.top+t.bottom)/2+.5);else if(Rd(r)){const t=Object.keys(r)[0],e=r[t];m=g(this.chart.scales[t].getPixelForValue(e))}k=t.top,C=t.bottom,x=m+p,A=x+h}else if("y"===e){if("center"===r)m=g((t.left+t.right)/2);else if(Rd(r)){const t=Object.keys(r)[0],e=r[t];m=g(this.chart.scales[t].getPixelForValue(e))}w=m-p,_=w-h,E=t.left,S=t.right}const T=Nd(i.ticks.maxTicksLimit,c),M=Math.max(1,Math.ceil(c/T));for(v=0;v<c;v+=M){const t=this.getContext(v),e=s.setContext(t),i=a.setContext(t),r=e.lineWidth,c=e.color,h=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=Hm(this,v,o),void 0!==y&&(b=ep(n,y,r),l?w=_=E=S=b:x=A=k=C=b,u.push({tx1:w,ty1:x,tx2:_,ty2:A,x1:E,y1:k,x2:S,y2:C,width:r,color:c,borderDash:h,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:s}=n,r=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:h}=s,u=qm(n.grid),d=u+c,f=h?-c:d,p=-df(this.labelRotation),g=[];let m,v,y,b,w,x,_,A,E,k,S,C,T="middle";if("top"===i)x=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===i)x=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(u);_=t.textAlign,w=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(u);_=t.textAlign,w=t.x}else if("x"===e){if("center"===i)x=(t.top+t.bottom)/2+d;else if(Rd(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)+d}_=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)w=(t.left+t.right)/2-d;else if(Rd(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)}_=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===o?T="top":"end"===o&&(T="bottom"));const M=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){y=a[m],b=y.label;const t=s.setContext(this.getContext(m));A=this.getPixelForTick(m)+s.labelOffset,E=this._resolveTickFontOptions(m),k=E.lineHeight,S=Id(b)?b.length:1;const e=S/2,n=t.color,o=t.textStrokeColor,c=t.textStrokeWidth;let u,d=_;if(r?(w=A,"inner"===_&&(d=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===l||0!==p?-S*k+k/2:"center"===l?-M.highest.height/2-e*k+k:-M.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?M.highest.height/2-e*k:M.highest.height-S*k,h&&(C*=-1),0===p||t.showLabelBackdrop||(w+=k/2*Math.sin(p))):(x=A,C=(1-S)*k/2),t.showLabelBackdrop){const e=xp(t.backdropPadding),n=M.heights[m],i=M.widths[m];let s=C-e.top,r=0-e.left;switch(T){case"middle":s-=n/2;break;case"bottom":s-=n}switch(_){case"center":r-=i/2;break;case"right":r-=i;break;case"inner":m===v-1?r-=i:m>0&&(r-=i/2)}u={left:r,top:s,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:E,textOffset:C,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:T,translation:[w,x],backdrop:u}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-df(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,r=t+s,a=this._getLabelSizes().widest.width;let o,l;return"left"===e?i?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===e?i?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:s,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,s,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,r;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(s=0,r=i.length;s<r;++s){const t=i[s];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),r=n.display?s.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,h,u;this.isHorizontal()?(l=ep(t,this.left,r)-r/2,c=ep(t,this.right,a)+a/2,h=u=o):(h=ep(t,this.top,r)-r/2,u=ep(t,this.bottom,a)+a/2,l=c=o),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(l,h),e.lineTo(c,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&ap(e,n);const i=this.getLabelItems(t);for(const s of i){const t=s.options,n=s.font;dp(e,s.label,0,s.textOffset,n,t)}n&&op(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const s=_p(n.font),r=xp(n.padding),a=n.align;let o=s.lineHeight/2;"bottom"===e||"center"===e||Rd(e)?(o+=r.bottom,Id(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=r.top;const{titleX:l,titleY:c,maxWidth:h,rotation:u}=function(t,e,n,i){const{top:s,left:r,bottom:a,right:o,chart:l}=t,{chartArea:c,scales:h}=l;let u,d,f,p=0;const g=a-s,m=o-r;if(t.isHorizontal()){if(d=Rf(i,r,o),Rd(n)){const t=Object.keys(n)[0],i=n[t];f=h[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:Vm(t,n,e);u=o-r}else{if(Rd(n)){const t=Object.keys(n)[0],i=n[t];d=h[t].getPixelForValue(i)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:Vm(t,n,e);f=Rf(i,a,s),p="left"===n?-nf:nf}return{titleX:d,titleY:f,maxWidth:u,rotation:p}}(this,o,e,a);dp(t,n.text,0,0,s,{color:n.color,maxWidth:h,rotation:u,textAlign:Km(a,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Nd(t.grid&&t.grid.z,-1),i=Nd(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Ym.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,r;for(s=0,r=e.length;s<r;++s){const r=e[s];r[n]!==this.id||t&&r.type!==t||i.push(r)}return i}_resolveTickFontOptions(t){return _p(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Xm{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,s=t.id,r=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,function(t,e,n){const i=Ud(Object.create(null),[n?$f.get(n):{},$f.get(e),t.defaults]);$f.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),a=e[n].split("."),o=a.pop(),l=a.join(".");$f.route(r,s,l,o)}))}(e,t.defaultRoutes);t.descriptors&&$f.describe(e,t.descriptors)}(t,r,n),this.override&&$f.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in $f[i]&&(delete $f[i][n],this.override&&delete Kf[n])}}class Qm{constructor(){this.controllers=new Xm(Lg,"datasets",!0),this.elements=new Xm(jm,"elements"),this.plugins=new Xm(Object,"plugins"),this.scales=new Xm(Ym,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):Fd(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=Kd(t);Od(n["before"+i],[],n),e[t](n),Od(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var Jm=new Qm;class $m{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,i){i=i||{};for(const s of t){const t=s.plugin;if(!1===Od(t[n],[e,i,s.options],t)&&i.cancelable)return!1}return!0}invalidate(){Md(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=Nd(n.options&&n.options.plugins,{}),s=function(t){const e={},n=[],i=Object.keys(Jm.plugins.items);for(let r=0;r<i.length;r++)n.push(Jm.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const t=s[r];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,e,n,i){let{plugins:s,localIds:r}=e;const a=[],o=t.getContext();for(const l of s){const e=l.id,s=Zm(n[e],i);null!==s&&a.push({plugin:l,options:tv(t.config,{plugin:l,local:r[e]},s,o)})}return a}(t,s,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Zm(t,e){return e||!1!==t?!0===t?{}:t:null}function tv(t,e,n,i){let{plugin:s,local:r}=e;const a=t.pluginScopeKeys(s),o=t.getOptionScopes(n,a);return r&&s.defaults&&o.push(s.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ev(t,e){const n=$f.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function nv(t){if("x"===t||"y"===t||"r"===t)return t}function iv(t){if(nv(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n){const e=r.axis||("top"===(s=r.position)||"bottom"===s?"x":"left"===s||"right"===s?"y":void 0)||t.length>1&&nv(t[0].toLowerCase());if(e)return e}var s;throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function sv(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function rv(t,e){const n=Kf[t.type]||{scales:{}},i=e.scales||{},s=ev(t.type,e),r=Object.create(null);return Object.keys(i).forEach((e=>{const a=i[e];if(!Rd(a))return console.error("Invalid scale configuration for scale: ".concat(e));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const o=iv(e,a,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return sv(t,"x",n[0])||sv(t,"y",n[0])}return{}}(e,t),$f.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(o,s),c=n.scales||{};r[e]=Wd(Object.create(null),[{axis:o},a,c[o],c[l]])})),t.data.datasets.forEach((n=>{const s=n.type||t.type,a=n.indexAxis||ev(s,e),o=(Kf[s]||{}).scales||{};Object.keys(o).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),s=n[e+"AxisID"]||e;r[s]=r[s]||Object.create(null),Wd(r[s],[{axis:e},i[s],o[t]])}))})),Object.keys(r).forEach((t=>{const e=r[t];Wd(e,[$f.scales[e.type],$f.scale])})),r}function av(t){const e=t.options||(t.options={});e.plugins=Nd(e.plugins,{}),e.scales=rv(t,e)}function ov(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const lv=new Map,cv=new Set;function hv(t,e){let n=lv.get(t);return n||(n=e(),lv.set(t,n),cv.add(n)),n}const uv=(t,e,n)=>{const i=Gd(e,n);void 0!==i&&t.add(i)};class dv{constructor(t){this._config=function(t){return(t=t||{}).data=ov(t.data),av(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ov(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),av(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return hv(t,(()=>[["datasets.".concat(t),""]]))}datasetAnimationScopeKeys(t,e){return hv("".concat(t,".transition.").concat(e),(()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]]))}datasetElementScopeKeys(t,e){return hv("".concat(t,"-").concat(e),(()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]]))}pluginScopeKeys(t){const e=t.id,n=this.type;return hv("".concat(n,"-plugin-").concat(e),(()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:s}=this,r=this._cachedScopes(t,n),a=r.get(e);if(a)return a;const o=new Set;e.forEach((e=>{t&&(o.add(t),e.forEach((e=>uv(o,t,e)))),e.forEach((t=>uv(o,i,t))),e.forEach((t=>uv(o,Kf[s]||{},t))),e.forEach((t=>uv(o,$f,t))),e.forEach((t=>uv(o,Yf,t)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),cv.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Kf[e]||{},$f.datasets[e]||{},{type:e},$f,Yf]}resolveNamedOptions(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:r,subPrefixes:a}=fv(this._resolverCache,t,i);let o=r;if(function(t,e){const{isScriptable:n,isIndexable:i}=Cp(t);for(const s of e){const e=n(s),r=i(s),a=(r||e)&&t[s];if(e&&(Xd(a)||pv(a))||r&&Id(a))return!0}return!1}(r,e)){s.$shared=!1;o=Sp(r,n=Xd(n)?n():n,this.createResolver(t,n,a))}for(const l of e)s[l]=o[l];return s}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:s}=fv(this._resolverCache,t,n);return Rd(e)?Sp(s,e,void 0,i):s}}function fv(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);if(!r){r={resolver:kp(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(s,r)}return r}const pv=t=>Rd(t)&&Object.getOwnPropertyNames(t).some((e=>Xd(t[e])));const gv=["top","bottom","left","right","chartArea"];function mv(t,e){return"top"===t||"bottom"===t||-1===gv.indexOf(t)&&"x"===e}function vv(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function yv(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Od(n&&n.onComplete,[t],e)}function bv(t){const e=t.chart,n=e.options.animation;Od(n&&n.onProgress,[t],e)}function wv(t){return Gp()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const xv={},_v=t=>{const e=wv(t);return Object.values(xv).filter((t=>t.canvas===e)).pop()};function Av(t,e,n){const i=Object.keys(t);for(const s of i){const i=+s;if(i>=e){const r=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=r)}}}function Ev(t,e,n){return t.options.clip?t[n]:e[n]}class kv{static register(){Jm.add(...arguments),Sv()}static unregister(){Jm.remove(...arguments),Sv()}constructor(t,e){const n=this.config=new dv(e),i=wv(t),s=_v(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!Gp()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?_m:Fm}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Td(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $m,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}((t=>this.update(t)),r.resizeDelay||0),this._dataChanges=[],xv[this.id]=this,a&&o?(bg.listen(this,"complete",yv),bg.listen(this,"progress",bv),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:s}=this;return Md(t)?e&&s?s:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Jm}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ng(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return np(this.canvas,this.ctx),this}stop(){return bg.stop(this),this}resize(t,e){bg.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,e,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ng(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Od(n.onResize,[this,r],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Fd(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let s=[];e&&(s=s.concat(Object.keys(e).map((t=>{const n=e[t],i=iv(t,n),s="r"===i,r="x"===i;return{options:n,dposition:s?"chartArea":r?"bottom":"left",dtype:s?"radialLinear":r?"category":"linear"}})))),Fd(s,(e=>{const s=e.options,r=s.id,a=iv(r,s),o=Nd(s.type,e.dtype);void 0!==s.position&&mv(s.position,a)===mv(e.dposition)||(s.position=e.dposition),i[r]=!0;let l=null;if(r in n&&n[r].type===o)l=n[r];else{l=new(Jm.getScale(o))({id:r,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,t)})),Fd(i,((t,e)=>{t||delete n[e]})),Fd(n,(t=>{wm.configure(this,t,t.options),wm.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(vv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let s=this.getDatasetMeta(n);const r=i.type||this.config.type;if(s.type&&s.type!==r&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=r,s.indexAxis=i.indexAxis||ev(r,this.options),s.order=i.order||0,s.index=n,s.label=""+i.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const e=Jm.getController(r),{datasetElementType:i,dataElementType:a}=$f.datasets[r];Object.assign(e,{dataElementType:Jm.getElement(a),datasetElementType:i&&Jm.getElement(i)}),s.controller=new e(this,n),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){Fd(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===s.indexOf(t);t.buildOrUpdateElements(e),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Fd(s,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(vv("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Fd(this.scales,(t=>{wm.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);Qd(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of e){Av(t,i,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let s=1;s<e;s++)if(!Qd(i,n(s)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;wm.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Fd(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Xd(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bg.has(this)?this.attached&&!bg.running(this)&&bg.start(this):(this.draw(),yv({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,s;for(i=0,s=e.length;i<s;++i){const s=e[i];t&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,s=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Ev(n,e,"left"),right:Ev(n,e,"right"),top:Ev(i,e,"top"),bottom:Ev(i,e,"bottom")}:e}(t,this.chartArea),r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(i&&ap(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),i&&op(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return rp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const s=om.modes[e];return"function"===typeof s?s(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ep(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",s=this.getDatasetMeta(t),r=s.controller._resolveAnimations(void 0,i);Yd(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(s,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),bg.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),np(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete xv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};Fd(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},s=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",r)};r=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){Fd(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},Fd(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let s,r,a,o;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=t.length;a<o;++a){r=t[a];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((t=>{let{datasetIndex:e,index:n}=t;const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[n],index:n}}));!jd(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const i=this.options.hover,s=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),r=s(e,t),a=n?t:s(t,e);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:s}=this,r=e,a=this._getActiveElements(t,i,n,r),o=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,o);n&&(this._lastEvent=null,Od(s.onHover,[t,a,this],this),o&&Od(s.onClick,[t,a,this],this));const c=!jd(a,i);return(c||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}}function Sv(){return Fd(kv.instances,(t=>t._plugins.invalidate()))}function Cv(t,e,n,i){const s=yp(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const r=(n-e)/2,a=Math.min(r,i*e/2),o=t=>{const e=(n-Math.min(r,t))*i/2;return wf(t,0,Math.min(r,e))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:wf(s.innerStart,0,a),innerEnd:wf(s.innerEnd,0,a)}}function Tv(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Mv(t,e,n,i,s,r){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:h}=e,u=Math.max(e.outerRadius+i+n-c,0),d=h>0?h+i+n+c:0;let f=0;const p=s-l;if(i){const t=((h>0?h-i:0)+(u>0?u-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*u-n/Jd)/u)/2,m=l+g+f,v=s-g-f,{outerStart:y,outerEnd:b,innerStart:w,innerEnd:x}=Cv(e,d,u,v-m),_=u-y,A=u-b,E=m+y/_,k=v-b/A,S=d+w,C=d+x,T=m+w/S,M=v-x/C;if(t.beginPath(),r){const e=(E+k)/2;if(t.arc(a,o,u,E,e),t.arc(a,o,u,e,k),b>0){const e=Tv(A,k,a,o);t.arc(e.x,e.y,b,k,v+nf)}const n=Tv(C,v,a,o);if(t.lineTo(n.x,n.y),x>0){const e=Tv(C,M,a,o);t.arc(e.x,e.y,x,v+nf,M+Math.PI)}const i=(v-x/d+(m+w/d))/2;if(t.arc(a,o,d,v-x/d,i,!0),t.arc(a,o,d,i,m+w/d,!0),w>0){const e=Tv(S,T,a,o);t.arc(e.x,e.y,w,T+Math.PI,m-nf)}const s=Tv(_,m,a,o);if(t.lineTo(s.x,s.y),y>0){const e=Tv(_,E,a,o);t.arc(e.x,e.y,y,m-nf,E)}}else{t.moveTo(a,o);const e=Math.cos(E)*u+a,n=Math.sin(E)*u+o;t.lineTo(e,n);const i=Math.cos(k)*u+a,s=Math.sin(k)*u+o;t.lineTo(i,s)}t.closePath()}function Iv(t,e,n,i,s){const{fullCircles:r,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(u||[]),t.lineDashOffset=d,f?(t.lineWidth=2*c,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let p=e.endAngle;if(r){Mv(t,e,n,i,p,s);for(let e=0;e<r;++e)t.stroke();isNaN(o)||(p=a+(o%$d||$d))}f&&function(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:a,outerRadius:o,innerRadius:l}=e;let c=s/o;t.beginPath(),t.arc(r,a,o,i-c,n+c),l>s?(c=s/l,t.arc(r,a,l,n+c,i-c,!0)):t.arc(r,a,s,n+nf,i-nf),t.closePath(),t.clip()}(t,e,p),r||(Mv(t,e,n,i,p,s),t.stroke())}(0,Ku.A)(kv,"defaults",$f),(0,Ku.A)(kv,"instances",xv),(0,Ku.A)(kv,"overrides",Kf),(0,Ku.A)(kv,"registry",Jm),(0,Ku.A)(kv,"version","4.4.7"),(0,Ku.A)(kv,"getChart",_v);class Rv extends jm{constructor(t){super(),(0,Ku.A)(this,"circumference",void 0),(0,Ku.A)(this,"endAngle",void 0),(0,Ku.A)(this,"fullCircles",void 0),(0,Ku.A)(this,"innerRadius",void 0),(0,Ku.A)(this,"outerRadius",void 0),(0,Ku.A)(this,"pixelMargin",void 0),(0,Ku.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:s,distance:r}=gf(i,{x:t,y:e}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,d=Nd(h,o-a),f=bf(s,a,o)&&a!==o,p=d>=$d||f,g=xf(r,l+u,c+u);return p&&g}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:s,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:o,spacing:l}=this.options,c=(i+s)/2,h=(r+a+l+o)/2;return{x:e+Math.cos(c)*h,y:n+Math.sin(c)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,s=(e.spacing||0)/2,r=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>$d?Math.floor(n/$d):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(Jd,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,s){const{fullCircles:r,startAngle:a,circumference:o}=e;let l=e.endAngle;if(r){Mv(t,e,n,i,l,s);for(let e=0;e<r;++e)t.fill();isNaN(o)||(l=a+(o%$d||$d))}Mv(t,e,n,i,l,s),t.fill()}(t,this,o,s,r),Iv(t,this,o,s,r),t.restore()}}function Pv(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=Nd(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Nd(n.borderDash,e.borderDash)),t.lineDashOffset=Nd(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Nd(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Nd(n.borderWidth,e.borderWidth),t.strokeStyle=Nd(n.borderColor,e.borderColor)}function Dv(t,e,n){t.lineTo(n.x,n.y)}function Nv(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.length,{start:s=0,end:r=i-1}=n,{start:a,end:o}=e,l=Math.max(s,a),c=Math.min(r,o),h=s<a&&r<a||s>o&&r>o;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function Lv(t,e,n,i){const{points:s,options:r}=e,{count:a,start:o,loop:l,ilen:c}=Nv(s,n,i),h=function(t){return t.stepped?lp:t.tension||"monotone"===t.cubicInterpolationMode?cp:Dv}(r);let u,d,f,{move:p=!0,reverse:g}=i||{};for(u=0;u<=c;++u)d=s[(o+(g?c-u:u))%a],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):h(t,f,d,g,r.stepped),f=d);return l&&(d=s[(o+(g?c:0))%a],h(t,f,d,g,r.stepped)),!!l}function Ov(t,e,n,i){const s=e.points,{count:r,start:a,ilen:o}=Nv(s,n,i),{move:l=!0,reverse:c}=i||{};let h,u,d,f,p,g,m=0,v=0;const y=t=>(a+(c?o-t:t))%r,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(u=s[y(0)],t.moveTo(u.x,u.y)),h=0;h<=o;++h){if(u=s[y(h)],u.skip)continue;const e=u.x,n=u.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),d=i,v=0,f=p=n),g=n}b()}function Fv(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?Ov:Lv}(0,Ku.A)(Rv,"id","arc"),(0,Ku.A)(Rv,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,Ku.A)(Rv,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Ku.A)(Rv,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const jv="function"===typeof Path2D;function Bv(t,e,n,i){jv&&!e.options.segment?function(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),Pv(t,e.options),t.stroke(s)}(t,e,n,i):function(t,e,n,i){const{segments:s,options:r}=e,a=Fv(e);for(const o of s)Pv(t,r,o.style),t.beginPath(),a(t,e,o,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class zv extends jm{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;qp(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:a,end:o}=function(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}(n,s,r,i);return gg(t,!0===i?[{start:a,end:o,loop:r}]:function(t,e,n,i){const s=t.length,r=[];let a,o=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%s];n.skip||n.stop?l.skip||(i=!1,r.push({start:e%s,end:(a-1)%s,loop:i}),e=o=n.stop?a:null):(o=a,l.skip&&(e=a)),l=n}return null!==o&&r.push({start:e%s,end:o%s,loop:i}),r}(n,a,o<a?o+s:o,!!t._fullLoop&&0===a&&o===s-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],s=this.points,r=pg(this,{property:e,start:i,end:i});if(!r.length)return;const a=[],o=function(t){return t.stepped?ag:t.tension||"monotone"===t.cubicInterpolationMode?og:rg}(n);let l,c;for(l=0,c=r.length;l<c;++l){const{start:c,end:h}=r[l],u=s[c],d=s[h];if(u===d){a.push(u);continue}const f=o(u,d,Math.abs((i-u[e])/(d[e]-u[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return Fv(this)(t,this,e,n)}path(t,e,n){const i=this.segments,s=Fv(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)r&=s(t,this,a,{start:e,end:e+n-1});return!!r}draw(t,e,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),Bv(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Vv(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}(0,Ku.A)(zv,"id","line"),(0,Ku.A)(zv,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Ku.A)(zv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Ku.A)(zv,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class Uv extends jm{constructor(t){super(),(0,Ku.A)(this,"parsed",void 0),(0,Ku.A)(this,"skip",void 0),(0,Ku.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:s,y:r}=this.getProps(["x","y"],n);return Math.pow(t-s,2)+Math.pow(e-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Vv(this,t,"x",e)}inYRange(t,e){return Vv(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!rp(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,ip(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Wv(t,e){const{x:n,y:i,base:s,width:r,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,c,h,u;return t.horizontal?(u=a/2,o=Math.min(n,s),l=Math.max(n,s),c=i-u,h=i+u):(u=r/2,o=n-u,l=n+u,c=Math.min(i,s),h=Math.max(i,s)),{left:o,top:c,right:l,bottom:h}}function Hv(t,e,n,i){return t?0:wf(e,n,i)}function qv(t){const e=Wv(t),n=e.right-e.left,i=e.bottom-e.top,s=function(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=bp(i);return{t:Hv(s.top,r.top,0,n),r:Hv(s.right,r.right,0,e),b:Hv(s.bottom,r.bottom,0,n),l:Hv(s.left,r.left,0,e)}}(t,n/2,i/2),r=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=wp(s),a=Math.min(e,n),o=t.borderSkipped,l=i||Rd(s);return{topLeft:Hv(!l||o.top||o.left,r.topLeft,0,a),topRight:Hv(!l||o.top||o.right,r.topRight,0,a),bottomLeft:Hv(!l||o.bottom||o.left,r.bottomLeft,0,a),bottomRight:Hv(!l||o.bottom||o.right,r.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Gv(t,e,n,i){const s=null===e,r=null===n,a=t&&!(s&&r)&&Wv(t,i);return a&&(s||xf(e,a.left,a.right))&&(r||xf(n,a.top,a.bottom))}function Kv(t,e){t.rect(e.x,e.y,e.w,e.h)}function Yv(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+a,radius:t.radius}}(0,Ku.A)(Uv,"id","point"),(0,Ku.A)(Uv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Ku.A)(Uv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Xv extends jm{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:r}=qv(this),a=(o=r.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?fp:Kv;var o;t.save(),r.w===s.w&&r.h===s.h||(t.beginPath(),a(t,Yv(r,e,s)),t.clip(),a(t,Yv(s,-e,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Yv(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Gv(this,t,e,n)}inXRange(t,e){return Gv(this,t,null,e)}inYRange(t,e){return Gv(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}(0,Ku.A)(Xv,"id","bar"),(0,Ku.A)(Xv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Ku.A)(Xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Qv=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Jv extends jm{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Od(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=_p(n.font),s=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Qv(n,s);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(r,s,a,o)+10):(c=this.maxHeight,l=this._fitCols(r,i,a,o)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:s,maxWidth:r,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let h=t;s.textAlign="left",s.textBaseline="middle";let u=-1,d=-c;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+s.measureText(t.text).width;(0===f||l[l.length-1]+p+2*a>r)&&(h+=c,l[l.length-(f>0?0:1)]=0,d+=c,u++),o[f]={left:0,top:d,row:u,width:p,height:i},l[l.length-1]+=p+a})),h}_fitCols(t,e,n,i){const{ctx:s,maxHeight:r,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-t;let h=a,u=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,r)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,s){const r=function(t,e,n,i){let s=t.text;s&&"string"!==typeof s&&(s=s.reduce(((t,e)=>t.length>e.length?t:e)));return e+n.size/2+i.measureText(s).width}(i,t,e,n),a=function(t,e,n){let i=t;"string"!==typeof e.text&&(i=$v(e,n));return i}(s,i,e.lineHeight);return{itemWidth:r,itemHeight:a}}(n,e,s,t,i);r>0&&d+m+2*a>c&&(h+=u+a,l.push({width:u,height:d}),f+=u+a,p++,u=d=0),o[r]={left:f,top:d,col:p,width:g,height:m},u=Math.max(u,g),d+=m+a})),h+=u,l.push({width:u,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:s}}=this,r=lg(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=Rf(n,this.left+i,this.right-this.lineWidths[s]);for(const o of e)s!==o.row&&(s=o.row,a=Rf(n,this.left+i,this.right-this.lineWidths[s])),o.top+=this.top+t+i,o.left=r.leftForLtr(r.x(a),o.width),a+=o.width+i}else{let s=0,a=Rf(n,this.top+t+i,this.bottom-this.columnSizes[s].height);for(const o of e)o.col!==s&&(s=o.col,a=Rf(n,this.top+t+i,this.bottom-this.columnSizes[s].height)),o.top=a,o.left+=this.left+i,o.left=r.leftForLtr(r.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;ap(t,this),this._draw(),op(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:s,labels:r}=t,a=$f.color,o=lg(t.rtl,this.left,this.width),l=_p(r.font),{padding:c}=r,h=l.size,u=h/2;let d;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Qv(r,h),m=this.isHorizontal(),v=this._computeTitleHeight();d=m?{x:Rf(s,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:Rf(s,this.top+v+c,this.bottom-e[0].height),line:0},cg(this.ctx,t.textDirection);const y=g+c;this.legendItems.forEach(((b,w)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const x=i.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=r.textAlign)),A=f+u+x;let E=d.x,k=d.y;o.setWidth(this.width),m?w>0&&E+A+c>this.right&&(k=d.y+=y,d.line++,E=d.x=Rf(s,this.left+c,this.right-n[d.line])):w>0&&k+y>this.bottom&&(E=d.x=E+e[d.line].width+c,d.line++,k=d.y=Rf(s,this.top+v+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const s=Nd(n.lineWidth,1);if(i.fillStyle=Nd(n.fillStyle,a),i.lineCap=Nd(n.lineCap,"butt"),i.lineDashOffset=Nd(n.lineDashOffset,0),i.lineJoin=Nd(n.lineJoin,"miter"),i.lineWidth=s,i.strokeStyle=Nd(n.strokeStyle,a),i.setLineDash(Nd(n.lineDash,[])),r.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(t,f/2);sp(i,a,l,e+u,r.pointStyleWidth&&f)}else{const r=e+Math.max((h-p)/2,0),a=o.leftForLtr(t,f),l=wp(n.borderRadius);i.beginPath(),Object.values(l).some((t=>0!==t))?fp(i,{x:a,y:r,w:f,h:p,radius:l}):i.rect(a,r,f,p),i.fill(),0!==s&&i.stroke()}i.restore()}(o.x(E),k,b),E=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(_,E+f+u,m?E+A:this.right,t.rtl),function(t,e,n){dp(i,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(E),k,b),m)d.x+=A+c;else if("string"!==typeof b.text){const t=l.lineHeight;d.y+=$v(b,t)+c}else d.y+=y})),hg(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=_p(e.font),i=xp(e.padding);if(!e.display)return;const s=lg(t.rtl,this.left,this.width),r=this.ctx,a=e.position,o=n.size/2,l=i.top+o;let c,h=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,h=Rf(t.align,h,this.right-u);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);c=l+Rf(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=Rf(a,h,h+u);r.textAlign=s.textAlign(If(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,dp(r,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=_p(t.font),n=xp(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,s;if(xf(t,this.left,this.right)&&xf(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],xf(t,i.left,i.left+i.width)&&xf(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,s=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!s&&Od(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!s&&Od(e.onHover,[t,n,this],this)}else n&&Od(e.onClick,[t,n,this],this)}}function $v(t,e){return e*(t.text?t.text.length:0)}var Zv={id:"legend",_element:Jv,start(t,e,n){const i=t.legend=new Jv({ctx:t.ctx,options:n,chart:t});wm.configure(t,i,n),wm.addBox(t,i)},stop(t){wm.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;wm.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(n?0:void 0),c=xp(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ty extends jm{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=Id(n.text)?n.text.length:1;this._padding=xp(n.padding);const s=i*_p(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:s,options:r}=this,a=r.align;let o,l,c,h=0;return this.isHorizontal()?(l=Rf(a,n,s),c=e+t,o=s-n):("left"===r.position?(l=n+t,c=Rf(a,i,e),h=-.5*Jd):(l=s-t,c=Rf(a,e,i),h=.5*Jd),o=i-e),{titleX:l,titleY:c,maxWidth:o,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=_p(e.font),i=n.lineHeight/2+this._padding.top,{titleX:s,titleY:r,maxWidth:a,rotation:o}=this._drawArgs(i);dp(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:o,textAlign:If(e.align),textBaseline:"middle",translation:[s,r]})}}var ey={id:"title",_element:ty,start(t,e,n){!function(t,e){const n=new ty({ctx:t.ctx,options:e,chart:t});wm.configure(t,n,e),wm.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;wm.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;wm.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const ny={average(t){if(!t.length)return!1;let e,n,i=new Set,s=0,r=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),s+=t.y,++r}}if(0===r||0===i.size)return!1;const a=[...i].reduce(((t,e)=>t+e))/i.size;return{x:a,y:s/r}},nearest(t,e){if(!t.length)return!1;let n,i,s,r=e.x,a=e.y,o=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=mf(e,i.getCenterPoint());t<o&&(o=t,s=i)}}if(s){const t=s.tooltipPosition();r=t.x,a=t.y}return{x:r,y:a}}};function iy(t,e){return e&&(Id(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function sy(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ry(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:a,value:o}=r.getLabelAndValue(s);return{chart:t,label:a,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:o,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function ay(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:a,boxHeight:o}=e,l=_p(e.bodyFont),c=_p(e.titleFont),h=_p(e.footerFont),u=r.length,d=s.length,f=i.length,p=xp(e.padding);let g=p.height,m=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),v){g+=f*(e.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*h.lineHeight+(d-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,Fd(t.title,b),n.font=l.string,Fd(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?a+2+e.boxPadding:0,Fd(i,(t=>{Fd(t.before,b),Fd(t.lines,b),Fd(t.after,b)})),y=0,n.font=h.string,Fd(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function oy(t,e,n,i){const{x:s,width:r}=n,{width:a,chartArea:{left:o,right:l}}=t;let c="center";return"center"===i?c=s<=(o+l)/2?"left":"right":s<=r/2?c="left":s>=a-r/2&&(c="right"),function(t,e,n,i){const{x:s,width:r}=i,a=n.caretSize+n.caretPadding;return"left"===t&&s+r+a>e.width||"right"===t&&s-r-a<0||void 0}(c,t,e,n)&&(c="center"),c}function ly(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||oy(t,e,n,i),yAlign:i}}function cy(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:a}=t,{xAlign:o,yAlign:l}=n,c=s+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=wp(a);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,o);const g=function(t,e,n){let{y:i,height:s}=t;return"top"===e?i+=n:i-="bottom"===e?s+n:s/2,i}(e,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(h,d)+s:"right"===o&&(p+=Math.max(u,f)+s),{x:wf(p,0,i.width-e.width),y:wf(g,0,i.height-e.height)}}function hy(t,e,n){const i=xp(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function uy(t){return iy([],sy(t))}function dy(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const fy={beforeTitle:Cd,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Cd,beforeBody:Cd,beforeLabel:Cd,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Md(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Cd,afterBody:Cd,beforeFooter:Cd,footer:Cd,afterFooter:Cd};function py(t,e,n,i){const s=t[e].call(n,i);return"undefined"===typeof s?fy[e].call(n,i):s}class gy extends jm{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,s=new Ag(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Ep(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=py(n,"beforeTitle",this,t),s=py(n,"title",this,t),r=py(n,"afterTitle",this,t);let a=[];return a=iy(a,sy(i)),a=iy(a,sy(s)),a=iy(a,sy(r)),a}getBeforeBody(t,e){return uy(py(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return Fd(t,(t=>{const e={before:[],lines:[],after:[]},s=dy(n,t);iy(e.before,sy(py(s,"beforeLabel",this,t))),iy(e.lines,py(s,"label",this,t)),iy(e.after,sy(py(s,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return uy(py(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=py(n,"beforeFooter",this,t),s=py(n,"footer",this,t),r=py(n,"afterFooter",this,t);let a=[];return a=iy(a,sy(i)),a=iy(a,sy(s)),a=iy(a,sy(r)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],s=[],r=[];let a,o,l=[];for(a=0,o=e.length;a<o;++a)l.push(ry(this.chart,e[a]));return t.filter&&(l=l.filter(((e,i,s)=>t.filter(e,i,s,n)))),t.itemSort&&(l=l.sort(((e,i)=>t.itemSort(e,i,n)))),Fd(l,(e=>{const n=dy(t.callbacks,e);i.push(py(n,"labelColor",this,e)),s.push(py(n,"labelPointStyle",this,e)),r.push(py(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=r,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let s,r=[];if(i.length){const t=ny[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const e=this._size=ay(this,n),a=Object.assign({},t,e),o=ly(this.chart,n,a),l=cy(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=r,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const s=this.getCaretPosition(t,n,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:s}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:h}=wp(a),{x:u,y:d}=t,{width:f,height:p}=e;let g,m,v,y,b,w;return"center"===s?(b=d+p/2,"left"===i?(g=u,m=g-r,y=b+r,w=b-r):(g=u+f,m=g+r,y=b-r,w=b+r),v=g):(m="left"===i?u+Math.max(o,c)+r:"right"===i?u+f-Math.max(l,h)-r:this.caretX,"top"===s?(y=d,b=y-r,g=m-r,v=m+r):(y=d+p,b=y+r,g=m+r,v=m-r),w=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:w}}drawTitle(t,e,n){const i=this.title,s=i.length;let r,a,o;if(s){const l=lg(n.rtl,this.x,this.width);for(t.x=hy(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",r=_p(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,o=0;o<s;++o)e.fillText(i[o],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,o+1===s&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,s){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=_p(s.bodyFont),h=hy(this,"left",s),u=i.x(h),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=e.y+d;if(s.usePointStyle){const e={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(u,l)+l/2,c=f+o/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,ip(t,e,n,c),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,ip(t,e,n,c)}else{t.lineWidth=Rd(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=i.leftForLtr(u,l),n=i.leftForLtr(i.xPlus(u,1),l-2),a=wp(r.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=s.multiKeyBackground,fp(t,{x:e,y:f,w:l,h:o,radius:a}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),fp(t,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(e,f,l,o),t.strokeRect(e,f,l,o),t.fillStyle=r.backgroundColor,t.fillRect(n,f+1,l-2,o-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:s,bodyAlign:r,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,h=_p(n.bodyFont);let u=h.lineHeight,d=0;const f=lg(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+u/2),t.y+=u+s},g=f.textAlign(r);let m,v,y,b,w,x,_;for(e.textAlign=r,e.textBaseline="middle",e.font=h.string,t.x=hy(this,g,n),e.fillStyle=n.bodyColor,Fd(this.beforeBody,p),d=a&&"right"!==g?"center"===r?l/2+c:l+2+c:0,b=0,x=i.length;b<x;++b){for(m=i[b],v=this.labelTextColors[b],e.fillStyle=v,Fd(m.before,p),y=m.lines,a&&y.length&&(this._drawColorBox(e,t,b,f,n),u=Math.max(h.lineHeight,o)),w=0,_=y.length;w<_;++w)p(y[w]),u=h.lineHeight;Fd(m.after,p)}d=0,u=h.lineHeight,Fd(this.afterBody,p),t.y-=s}drawFooter(t,e,n){const i=this.footer,s=i.length;let r,a;if(s){const o=lg(n.rtl,this.x,this.width);for(t.x=hy(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=o.textAlign(n.footerAlign),e.textBaseline="middle",r=_p(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,a=0;a<s;++a)e.fillText(i[a],o.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:s,yAlign:r}=this,{x:a,y:o}=t,{width:l,height:c}=n,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=wp(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+h,o),"top"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+l-u,o),e.quadraticCurveTo(a+l,o,a+l,o+u),"center"===r&&"right"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+l,o+c-f),e.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+d,o+c),e.quadraticCurveTo(a,o+c,a,o+c-d),"center"===r&&"left"===s&&this.drawCaret(t,e,n,i),e.lineTo(a,o+h),e.quadraticCurveTo(a,o,a+h,o),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const n=ny[t.position].call(this,this._active,this._eventPosition);if(!n)return;const r=this._size=ay(this,t),a=Object.assign({},n,this._size),o=ly(e,t,a),l=cy(t,a,o,e);i._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=r.width,this.height=r.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=xp(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(s,t,i,e),cg(t,e.textDirection),s.y+=r.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),hg(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((t=>{let{datasetIndex:e,index:n}=t;const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[n],index:n}})),s=!jd(n,i),r=this._positionChanged(i,e);(s||r)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],r=this._getActiveElements(t,s,e,n),a=this._positionChanged(r,t),o=e||!jd(r,s)||a;return o&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),o}_getActiveElements(t,e,n,i){const s=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const r=this.chart.getElementsAtEventForMode(t,s.mode,s,n);return s.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:i,options:s}=this,r=ny[s.position].call(this,t,e);return!1!==r&&(n!==r.x||i!==r.y)}}(0,Ku.A)(gy,"positioners",ny);var my={id:"tooltip",_element:gy,positioners:ny,afterInit(t,e,n){n&&(t.tooltip=new gy({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function vy(t,e,n,i){const s=t.indexOf(e);if(-1===s)return((t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return s!==t.lastIndexOf(e)?n:s}function yy(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class by extends Ym{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Md(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:wf(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:vy(n,t,Nd(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=e;r++)i.push({value:r});return i}getLabelForValue(t){return yy.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function wy(t,e){const n=[],{bounds:i,step:s,min:r,max:a,precision:o,count:l,maxTicks:c,maxDigits:h,includeBounds:u}=t,d=s||1,f=c-1,{min:p,max:g}=e,m=!Md(r),v=!Md(a),y=!Md(l),b=(g-p)/(h+1);let w,x,_,A,E=cf((g-p)/f/d)*d;if(E<1e-14&&!m&&!v)return[{value:p},{value:g}];A=Math.ceil(g/E)-Math.floor(p/E),A>f&&(E=cf(A*E/f/d)*d),Md(o)||(w=Math.pow(10,o),E=Math.ceil(E*w)/w),"ticks"===i?(x=Math.floor(p/E)*E,_=Math.ceil(g/E)*E):(x=p,_=g),m&&v&&s&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-r)/s,E/1e3)?(A=Math.round(Math.min((a-r)/E,c)),E=(a-r)/A,x=r,_=a):y?(x=m?r:x,_=v?a:_,A=l-1,E=(_-x)/A):(A=(_-x)/E,A=lf(A,Math.round(A),E/1e3)?Math.round(A):Math.ceil(A));const k=Math.max(pf(E),pf(x));w=Math.pow(10,Md(o)?k:o),x=Math.round(x*w)/w,_=Math.round(_*w)/w;let S=0;for(m&&(u&&x!==r?(n.push({value:r}),x<r&&S++,lf(Math.round((x+S*E)*w)/w,r,xy(r,b,t))&&S++):x<r&&S++);S<A;++S){const t=Math.round((x+S*E)*w)/w;if(v&&t>a)break;n.push({value:t})}return v&&u&&_!==a?n.length&&lf(n[n.length-1].value,a,xy(a,b,t))?n[n.length-1].value=a:n.push({value:a}):v&&_!==a||n.push({value:_}),n}function xy(t,e,n){let{horizontal:i,minRotation:s}=n;const r=df(s),a=(i?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}(0,Ku.A)(by,"id","category"),(0,Ku.A)(by,"defaults",{ticks:{callback:yy}});class _y extends Ym{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Md(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const r=t=>i=e?i:t,a=t=>s=n?s:t;if(t){const t=of(i),e=of(s);t<0&&e<0?a(0):t>0&&e>0&&r(0)}if(i===s){let e=0===s?1:Math.abs(.05*s);a(s+e),t||r(i-e)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=wy({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&uf(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Hf(t,this.chart.options.locale,this.options.ticks.format)}}class Ay extends _y{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Pd(t)?t:0,this.max=Pd(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=df(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}(0,Ku.A)(Ay,"id","linear"),(0,Ku.A)(Ay,"defaults",{ticks:{callback:Gf.formatters.numeric}});const Ey=t=>Math.floor(af(t)),ky=(t,e)=>Math.pow(10,Ey(t)+e);function Sy(t){return 1===t/Math.pow(10,Ey(t))}function Cy(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function Ty(t,e){let{min:n,max:i}=e;n=Dd(t.min,n);const s=[],r=Ey(n);let a=function(t,e){let n=Ey(e-t);for(;Cy(t,e,n)>10;)n++;for(;Cy(t,e,n)<10;)n--;return Math.min(n,Ey(t))}(n,i),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=r>a?Math.pow(10,r):0,h=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((h-u)/Math.pow(10,a)),f=Dd(t.min,Math.round((c+u+d*Math.pow(10,a))*o)/o);for(;f<i;)s.push({value:f,major:Sy(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+u+d*Math.pow(10,a))*o)/o;const p=Dd(t.max,f);return s.push({value:p,major:Sy(p),significand:d}),s}class My extends Ym{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=_y.prototype.parse.apply(this,[t,e]);if(0!==n)return Pd(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Pd(t)?Math.max(0,t):null,this.max=Pd(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Pd(this._userMin)&&(this.min=t===ky(this.min,0)?ky(this.min,-1):ky(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const s=e=>n=t?n:e,r=t=>i=e?i:t;n===i&&(n<=0?(s(1),r(10)):(s(ky(n,-1)),r(ky(i,1)))),n<=0&&s(ky(i,-1)),i<=0&&r(ky(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=Ty({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&uf(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Hf(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=af(t),this._valueRange=af(this.max)-af(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(af(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Iy(t){const e=t.ticks;if(e.display&&t.display){const t=xp(e.backdropPadding);return Nd(e.font&&e.font.size,$f.font.size)+t.height}return 0}function Ry(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function Py(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,a=t.options.pointLabels,o=a.centerPointLabels?Jd/r:0;for(let u=0;u<r;u++){const r=a.setContext(t.getPointLabelContext(u));s[u]=r.padding;const d=t.getPointPosition(u,t.drawingArea+s[u],o),f=_p(r.font),p=(l=t.ctx,c=f,h=Id(h=t._pointLabels[u])?h:[h],{w:tp(l,c.string,h),h:h.length*c.lineHeight});i[u]=p;const g=yf(t.getIndexAngle(u)+o),m=Math.round(ff(g));Dy(n,e,g,Ry(m,d.x,p.w,0,180),Ry(m,d.y,p.h,90,270))}var l,c,h;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,{centerPointLabels:a,display:o}=r.pointLabels,l={extra:Iy(r)/2,additionalAngle:a?Jd/s:0};let c;for(let h=0;h<s;h++){l.padding=n[h],l.size=e[h];const s=Ny(t,h,l);i.push(s),"auto"===o&&(s.visible=Ly(s,c),s.visible&&(c=s))}return i}(t,i,s)}function Dy(t,e,n,i,s){const r=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<e.l?(o=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+o)),s.start<e.t?(l=(e.t-s.start)/a,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function Ny(t,e,n){const i=t.drawingArea,{extra:s,additionalAngle:r,padding:a,size:o}=n,l=t.getPointPosition(e,i+s+a,r),c=Math.round(ff(yf(l.angle+nf))),h=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,o.h,c),u=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,o.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+o.w,bottom:h+o.h}}function Ly(t,e){if(!e)return!0;const{left:n,top:i,right:s,bottom:r}=t;return!(rp({x:n,y:i},e)||rp({x:n,y:r},e)||rp({x:s,y:i},e)||rp({x:s,y:r},e))}function Oy(t,e,n){const{left:i,top:s,right:r,bottom:a}=n,{backdropColor:o}=e;if(!Md(o)){const n=wp(e.borderRadius),l=xp(e.backdropPadding);t.fillStyle=o;const c=i-l.left,h=s-l.top,u=r-i+l.width,d=a-s+l.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),fp(t,{x:c,y:h,w:u,h:d,radius:n}),t.fill()):t.fillRect(c,h,u,d)}}function Fy(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,$d);else{let n=t.getPointPosition(0,e);s.moveTo(n.x,n.y);for(let r=1;r<i;r++)n=t.getPointPosition(r,e),s.lineTo(n.x,n.y)}}(0,Ku.A)(My,"id","logarithmic"),(0,Ku.A)(My,"defaults",{ticks:{callback:Gf.formatters.logarithmic,major:{enabled:!0}}});class jy extends _y{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=xp(Iy(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Pd(t)&&!isNaN(t)?t:0,this.max=Pd(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Iy(this.options))}generateTickLabels(t){_y.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=Od(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?Py(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return yf(t*($d/(this._pointLabels.length||1))+df(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Md(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Md(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Ep(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(t)-nf+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Fy(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:s}=e,r=this._pointLabels.length;let a,o,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const e=t._pointLabelItems[s];if(!e.visible)continue;const r=i.setContext(t.getPointLabelContext(s));Oy(n,r,e);const a=_p(r.font),{x:o,y:l,textAlign:c}=e;dp(n,t._pointLabels[s],o,l+a.lineHeight/2,a,{color:r.color,textAlign:c,textBaseline:"middle"})}}(this,r),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){o=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=i.setContext(n),l=s.setContext(n);!function(t,e,n,i,s){const r=t.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!i||!o||!l||n<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),Fy(t,n,a,i),r.closePath(),r.stroke(),r.restore())}(this,a,o,r,l)}})),n.display){for(t.save(),a=r-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:s,lineWidth:r}=i;r&&s&&(t.lineWidth=r,t.strokeStyle=s,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,o),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let s,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const o=n.setContext(this.getContext(a)),l=_p(o.font);if(s=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){t.font=l.string,r=t.measureText(i.label).width,t.fillStyle=o.backdropColor;const e=xp(o.backdropPadding);t.fillRect(-r/2-e.left,-s-l.size/2-e.top,r+e.width,l.size+e.height)}dp(t,i.label,0,-s,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),t.restore()}drawTitle(){}}(0,Ku.A)(jy,"id","radialLinear"),(0,Ku.A)(jy,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Gf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}),(0,Ku.A)(jy,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Ku.A)(jy,"descriptors",{angleLines:{_fallback:"grid"}});const By={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zy=Object.keys(By);function Vy(t,e){return t-e}function Uy(t,e){if(Md(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let a=e;return"function"===typeof i&&(a=i(a)),Pd(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(s&&(a="week"!==s||!hf(r)&&!0!==r?n.startOf(a,s):n.startOf(a,"isoWeek",r)),+a)}function Wy(t,e,n,i){const s=zy.length;for(let r=zy.indexOf(t);r<s-1;++r){const t=By[zy[r]],s=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(s*t.size))<=i)return zy[r]}return zy[s-1]}function Hy(t,e,n){if(n){if(n.length){const{lo:i,hi:s}=_f(n,e);t[n[i]>=e?n[i]:n[s]]=!0}}else t[e]=!0}function qy(t,e,n){const i=[],s={},r=e.length;let a,o;for(a=0;a<r;++a)o=e[a],s[o]=a,i.push({value:o,major:!1});return 0!==r&&n?function(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),a=e[e.length-1].value;let o,l;for(o=r;o<=a;o=+s.add(o,1,i))l=n[o],l>=0&&(e[l].major=!0);return e}(t,i,s,n):i}class Gy extends Ym{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.time||(t.time={}),i=this._adapter=new tm(t.adapters.date);i.init(e),Wd(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Uy(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:s,minDefined:r,maxDefined:a}=this.getUserBounds();function o(t){r||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(s=Math.max(s,t.max))}r&&a||(o(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||o(this.getMinMax(!1))),i=Pd(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),s=Pd(s)&&!isNaN(s)?s:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,r=function(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}(i,s,this.max);return this._unit=e.unit||(n.autoSkip?Wy(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(t,e,n,i,s){for(let r=zy.length-1;r>=zy.indexOf(n);r--){const n=zy[r];if(By[n].common&&t._adapter.diff(s,i,n)>=e-1)return n}return zy[n?zy.indexOf(n):0]}(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=zy.indexOf(t)+1,n=zy.length;e<n;++e)if(By[zy[e]].common)return zy[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&r.reverse(),qy(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,s=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),i=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),s=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);const r=n.length<3?.5:.25;i=wf(i,0,r),s=wf(s,0,r),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,s=i.time,r=s.unit||Wy(s.minUnit,e,n,this._getLabelCapacity(e)),a=Nd(i.ticks.stepSize,1),o="week"===r&&s.isoWeekday,l=hf(o)||!0===o,c={};let h,u,d=e;if(l&&(d=+t.startOf(d,"isoWeek",o)),d=+t.startOf(d,l?"day":r),t.diff(n,e,r)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+r);const f="data"===i.ticks.source&&this.getDataTimestamps();for(h=d,u=0;h<n;h=+t.add(h,a,r),u++)Hy(c,h,f);return h!==n&&"ticks"!==i.bounds&&1!==u||Hy(c,h,f),Object.keys(c).sort(Vy).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,s=e||n[i];return this._adapter.format(t,s)}_tickFormatFunction(t,e,n,i){const s=this.options,r=s.ticks.callback;if(r)return Od(r,[t,e,n],this);const a=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],h=l&&a[l],u=n[e],d=l&&h&&u&&u.major;return this._adapter.format(t,i||(d?h:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=df(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*r,h:n*r+a*s}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,s=this._tickFormatFunction(t,0,qy(this,[t],this._majorUnit),i),r=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Uy(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Cf(t.sort(Vy))}}function Ky(t,e,n){let i,s,r,a,o=0,l=t.length-1;n?(e>=t[o].pos&&e<=t[l].pos&&({lo:o,hi:l}=Af(t,"pos",e)),({pos:i,time:r}=t[o]),({pos:s,time:a}=t[l])):(e>=t[o].time&&e<=t[l].time&&({lo:o,hi:l}=Af(t,"time",e)),({time:i,pos:r}=t[o]),({time:s,pos:a}=t[l]));const c=s-i;return c?r+(a-r)*(e-i)/c:r}(0,Ku.A)(Gy,"id","time"),(0,Ku.A)(Gy,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Yy extends Gy{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ky(e,this.min),this._tableRange=Ky(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],s=[];let r,a,o,l,c;for(r=0,a=t.length;r<a;++r)l=t[r],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)c=i[r+1],o=i[r-1],l=i[r],Math.round((c+o)/2)!==l&&s.push({time:l,pos:r/(a-1)});return s}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ky(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ky(this._table,n*this._tableRange+this._minPos,!0)}}(0,Ku.A)(Yy,"id","timeseries"),(0,Ku.A)(Yy,"defaults",Gy.defaults);const Xy="label";function Qy(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function Jy(t,e){t.labels=e}function $y(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xy;const i=[];t.datasets=e.map((e=>{const s=t.datasets.find((t=>t[n]===e[n]));return s&&e.data&&!i.includes(s)?(i.push(s),Object.assign(s,e),s):{...e}}))}function Zy(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xy;const n={labels:[],datasets:[]};return Jy(n,t.labels),$y(n,t.datasets,e),n}function tb(t,n){const{height:i=150,width:s=300,redraw:r=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:h=[],fallbackContent:u,updateMode:d,...f}=t,p=(0,e.useRef)(null),g=(0,e.useRef)(null),m=()=>{p.current&&(g.current=new kv(p.current,{type:o,data:Zy(l,a),options:c&&{...c},plugins:h}),Qy(n,g.current))},v=()=>{Qy(n,null),g.current&&(g.current.destroy(),g.current=null)};return(0,e.useEffect)((()=>{!r&&g.current&&c&&function(t,e){const n=t.options;n&&e&&Object.assign(n,e)}(g.current,c)}),[r,c]),(0,e.useEffect)((()=>{!r&&g.current&&Jy(g.current.config.data,l.labels)}),[r,l.labels]),(0,e.useEffect)((()=>{!r&&g.current&&l.datasets&&$y(g.current.config.data,l.datasets,a)}),[r,l.datasets]),(0,e.useEffect)((()=>{g.current&&(r?(v(),setTimeout(m)):g.current.update(d))}),[r,c,l.labels,l.datasets,d]),(0,e.useEffect)((()=>{g.current&&(v(),setTimeout(m))}),[o]),(0,e.useEffect)((()=>(m(),()=>v())),[]),e.createElement("canvas",{ref:p,role:"img",height:i,width:s,...f},u)}const eb=(0,e.forwardRef)(tb);function nb(t,n){return kv.register(n),(0,e.forwardRef)(((n,i)=>e.createElement(eb,{...n,ref:i,type:t})))}const ib=nb("bar",Hg),sb=nb("pie",Xg);kv.register(by,Ay,Xv,ey,my,Zv,Rv);const rb=Gu((()=>{var t;const[n,i]=(0,e.useState)([]),[s,r]=(0,e.useState)([]),[a,o]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),[h,u]=(0,e.useState)([]),[d,f]=(0,e.useState)(null),[p,g]=(0,e.useState)(null),[m,v]=(0,e.useState)(null),[y,b]=(0,e.useState)(""),[w,x]=(0,e.useState)(""),[_,A]=(0,e.useState)("asc"),[E,k]=(0,e.useState)(""),[S,C]=(0,e.useState)(""),[T,M]=(0,e.useState)("asc"),I=Tt.get("employerId");(0,e.useEffect)((()=>{if(!I)return void c("You must be logged in as an employer to view the backend panel.");o(!0);const t=jh(Zc(Ru,"postings"),zh("employerId","==",I)),e=jh(Zc(Ru,"applications")),n=eu(t,(t=>{let e=[],n=[];t.docs.forEach((t=>{e.push({id:t.id,...t.data()}),n.push(t.id)})),i(e),u(n),o(!1)}),(t=>{console.error("Error fetching postings:",t),c(t.message),o(!1)})),s=eu(e,(t=>{let e=[];t.docs.forEach((t=>{e.push({id:t.id,...t.data()})})),r(e),o(!1)}),(t=>{console.error("Error fetching applications:",t),c(t.message),o(!1)}));return()=>{n(),s()}}),[I]);const R=async(t,e)=>{try{await Zh(th(Ru,"applications",t),{status:e}),r(s.map((n=>n.id===t?{...n,status:e}:n))),(null===d||void 0===d?void 0:d.id)===t&&f({...d,status:e}),g({type:"success",message:"Application status updated to ".concat(e)})}catch(n){g({type:"error",message:"Failed to update application status"})}},P=()=>{f(null),g(null)},D=t=>{const{name:e,value:n}=t.target;v({...m,[e]:n})};(0,e.useEffect)((()=>{const t=t=>{"Escape"===t.key&&P()},e=t=>{t.target.classList.contains("modal-overlay")&&P()};return document.addEventListener("keydown",t),document.addEventListener("click",e),()=>{document.removeEventListener("keydown",t),document.removeEventListener("click",e)}}),[]);const N=n.filter((t=>t.title.toLowerCase().includes(y.toLowerCase())||t.description.toLowerCase().includes(y.toLowerCase())||t.location.toLowerCase().includes(y.toLowerCase()))).sort(((t,e)=>"title"===w?"asc"===_?t.title.localeCompare(e.title):e.title.localeCompare(t.title):"salaryRange"===w?"asc"===_?t.salaryRange.localeCompare(e.salaryRange):e.salaryRange.localeCompare(t.salaryRange):"location"===w?"asc"===_?t.location.localeCompare(e.location):e.location.localeCompare(t.location):0)),L=s.filter((t=>t.studentName.toLowerCase().includes(E.toLowerCase())||t.grade.toLowerCase().includes(E.toLowerCase())||t.status.toLowerCase().includes(E.toLowerCase()))).filter((t=>h.includes(t.postingId))).sort(((t,e)=>"studentName"===S?"asc"===T?t.studentName.localeCompare(e.studentName):e.studentName.localeCompare(t.studentName):"grade"===S?"asc"===T?t.grade.localeCompare(e.grade):e.grade.localeCompare(t.grade):"status"===S?"asc"===T?t.status.localeCompare(e.status):e.status.localeCompare(t.status):0)),O={labels:["Grade 11","Grade 12","Grade 13","Grade 14"],datasets:[{label:"Grade Distribution",data:["Grade 11","Grade 12","Grade 13","Grade 14"].map((t=>s.filter((e=>e.grade===t)).length)),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"]}]},F={labels:["Accepted","Pending","Rejected"],datasets:[{label:"Status Distribution",data:["accepted","pending","rejected"].map((t=>s.filter((e=>e.status===t)).length)),backgroundColor:["#36A2EB","#FFCE56","#FF6384"]}]},j={labels:["Postings"],datasets:[{label:"Number of Postings",data:[n.length],backgroundColor:["#FF6384"]}]};return a?(0,Mt.jsx)(zu,{}):l?(0,Mt.jsxs)("div",{children:["Error: ",l]}):(0,Mt.jsxs)("div",{className:"p-4",children:[(0,Mt.jsx)("h1",{className:"text-5xl mb-4 font-bold text-center",children:"Backend Panel"}),(0,Mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 my-8 mx-12",children:[(0,Mt.jsxs)("div",{className:"p-6 bg-white rounded-2xl shadow-md",children:[(0,Mt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Number of Postings"}),(0,Mt.jsx)(ib,{data:j})]}),(0,Mt.jsxs)("div",{className:"p-6 bg-white rounded-2xl shadow-md",children:[(0,Mt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Grade Distribution"}),(0,Mt.jsx)(sb,{data:O})]}),(0,Mt.jsxs)("div",{className:"p-6 bg-white rounded-2xl shadow-md",children:[(0,Mt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Status Distribution"}),(0,Mt.jsx)(sb,{data:F})]})]}),(0,Mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[(0,Mt.jsxs)("div",{className:"px-8 py-2 border-r border-gray-100",children:[(0,Mt.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Your Postings"}),(0,Mt.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,Mt.jsx)("input",{type:"text",placeholder:"Search postings...",value:y,onChange:t=>b(t.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-4"}),(0,Mt.jsxs)("div",{className:"flex items-center",children:[(0,Mt.jsxs)("select",{value:w,onChange:t=>x(t.target.value),className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-4",children:[(0,Mt.jsx)("option",{value:"",children:"Select"}),(0,Mt.jsx)("option",{value:"title",children:"Title"}),(0,Mt.jsx)("option",{value:"salaryRange",children:"Salary Range"}),(0,Mt.jsx)("option",{value:"location",children:"Location"})]}),(0,Mt.jsxs)("select",{value:_,onChange:t=>A(t.target.value),className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-4",children:[(0,Mt.jsx)("option",{value:"asc",children:"Ascending"}),(0,Mt.jsx)("option",{value:"desc",children:"Descending"})]})]})]}),(0,Mt.jsx)("div",{className:"grid grid-cols-1 gap-4",children:N.length>0?N.map((t=>(0,Mt.jsxs)("div",{className:"p-6 bg-white rounded-2xl",children:[(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Title:"})," ",t.title||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Location:"})," ",t.location||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Description:"})," ",t.description||"N/A"]}),(0,Mt.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,Mt.jsx)("button",{className:"btn btn-info",onClick:()=>(t=>{v(t)})(t),children:"Edit"}),(0,Mt.jsx)("button",{className:"btn btn-error",onClick:()=>{var e;window.confirm("Are you sure you want to delete this posting?")&&nu(Kc((e=th(Ru,"postings",t.id)).firestore,ih),[new ra(e._key,Gr.none())])},children:"Delete"})]})]},t.id))):(0,Mt.jsx)("div",{className:"p-4 border rounded-lg shadow-md",children:(0,Mt.jsx)("h2",{className:"text-2xl font-semibold",children:"No postings found"})})})]}),(0,Mt.jsxs)("div",{className:"px-8 py-2",children:[(0,Mt.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Submitted Applications"}),(0,Mt.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,Mt.jsx)("input",{type:"text",placeholder:"Search applications...",value:E,onChange:t=>k(t.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-4"}),(0,Mt.jsxs)("div",{className:"flex items-center",children:[(0,Mt.jsxs)("select",{value:S,onChange:t=>C(t.target.value),className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-4",children:[(0,Mt.jsx)("option",{value:"",children:"Select"}),(0,Mt.jsx)("option",{value:"studentName",children:"Student Name"}),(0,Mt.jsx)("option",{value:"grade",children:"Grade"}),(0,Mt.jsx)("option",{value:"status",children:"Status"})]}),(0,Mt.jsxs)("select",{value:T,onChange:t=>M(t.target.value),className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-4",children:[(0,Mt.jsx)("option",{value:"asc",children:"Ascending"}),(0,Mt.jsx)("option",{value:"desc",children:"Descending"})]})]})]}),(0,Mt.jsx)("div",{className:"grid grid-cols-1 gap-4 ",children:L.length>0?L.map((t=>(0,Mt.jsxs)("div",{className:"p-6 bg-white rounded-2xl",children:[(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Student Name:"})," ",t.studentName||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Grade:"})," ",t.grade||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Status:"})," ",t.status||"Pending"]}),(0,Mt.jsx)("button",{className:"btn btn-primary",onClick:()=>f(t),children:"View Fullscreen"})]},t.id))):(0,Mt.jsx)("div",{className:"p-4 border rounded-lg shadow-md",children:(0,Mt.jsx)("h2",{className:"text-2xl font-semibold",children:"No applications found"})})})]})]}),p&&(0,Mt.jsx)("div",{className:"alert alert-".concat(p.type," shadow-lg my-4"),children:(0,Mt.jsx)("div",{children:(0,Mt.jsx)("span",{children:p.message})})}),d&&(0,Mt.jsx)("div",{className:"modal modal-open modal-overlay",children:(0,Mt.jsxs)("div",{className:"modal-box",children:[(0,Mt.jsx)("h1",{className:"font-extrabold text-3xl",children:"Application Details"}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Student Name:"})," ",d.studentName||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Grade:"})," ",d.grade||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"GPA:"})," ",d.gpa||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Resume:"})," ",d.resume||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Cover Letter:"})," ",d.coverLetter||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Posting Title:"})," ",(null===(t=d.postingDetail)||void 0===t?void 0:t.title)||"N/A"]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Status:"})," ",d.status||"Pending"]}),(0,Mt.jsxs)("div",{className:"modal-action",children:["accepted"!==d.status&&(0,Mt.jsx)("button",{className:"btn btn-success",onClick:()=>R(d.id,"accepted"),children:"Accept"}),"rejected"!==d.status&&(0,Mt.jsx)("button",{className:"btn btn-error",onClick:()=>R(d.id,"rejected"),children:"Reject"}),"pending"!==d.status&&(0,Mt.jsx)("button",{className:"btn btn-warning",onClick:()=>R(d.id,"pending"),children:"Reset Status"}),(0,Mt.jsx)("button",{className:"btn",onClick:P,children:"Close"})]})]})}),m&&(0,Mt.jsx)("div",{className:"modal modal-open modal-overlay",children:(0,Mt.jsxs)("div",{className:"modal-box",children:[(0,Mt.jsx)("h1",{className:"font-extrabold text-3xl",children:"Edit Posting"}),(0,Mt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await Zh(th(Ru,"postings",m.id),{title:m.title,description:m.description,salaryRange:m.salaryRange,location:m.location,field:m.field,deadline:m.deadline}),i(n.map((t=>t.id===m.id?m:t))),v(null),g({type:"success",message:"Posting updated successfully"})}catch(e){g({type:"error",message:"Failed to update posting"})}},children:[(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"Job Title"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"title",name:"title",type:"text",value:m.title,onChange:D,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"description",children:"Job Description"}),(0,Mt.jsx)("textarea",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"description",name:"description",value:m.description,onChange:D,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"salaryRange",children:"Salary Range"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"salaryRange",name:"salaryRange",type:"text",value:m.salaryRange,onChange:D,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"location",children:"Location"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"location",name:"location",type:"text",value:m.location,onChange:D,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"field",children:"Field"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"field",name:"field",type:"text",value:m.field,onChange:D,required:!0})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"deadline",children:"Deadline"}),(0,Mt.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"deadline",name:"deadline",type:"date",value:m.deadline,onChange:D,required:!0})]}),(0,Mt.jsxs)("div",{className:"modal-action",children:[(0,Mt.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update Posting"}),(0,Mt.jsx)("button",{className:"btn",onClick:()=>v(null),children:"Cancel"})]})]})]})})]})}));var ab;!function(t){t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"}(ab||(ab={}));const ob=["user","model","function","system"];var lb,cb,hb,ub,db,fb,pb;!function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(lb||(lb={})),function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"}(cb||(cb={})),function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"}(hb||(hb={})),function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"}(ub||(ub={})),function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER"}(db||(db={})),function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"}(fb||(fb={})),function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"}(pb||(pb={}));class gb extends Error{constructor(t){super("[GoogleGenerativeAI Error]: ".concat(t))}}class mb extends gb{constructor(t,e){super(t),this.response=e}}class vb extends gb{constructor(t,e,n,i){super(t),this.status=e,this.statusText=n,this.errorDetails=i}}class yb extends gb{}const bb="0.13.0",wb="genai-js";var xb;!function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"}(xb||(xb={}));class _b{constructor(t,e,n,i,s){this.model=t,this.task=e,this.apiKey=n,this.stream=i,this.requestOptions=s}toString(){var t,e;const n=(null===(t=this.requestOptions)||void 0===t?void 0:t.apiVersion)||"v1beta",i=(null===(e=this.requestOptions)||void 0===e?void 0:e.baseUrl)||"https://generativelanguage.googleapis.com";let s="".concat(i,"/").concat(n,"/").concat(this.model,":").concat(this.task);return this.stream&&(s+="?alt=sse"),s}}async function Ab(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(t){const e=[];return(null===t||void 0===t?void 0:t.apiClient)&&e.push(t.apiClient),e.push("".concat(wb,"/").concat(bb)),e.join(" ")}(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let i=null===(e=t.requestOptions)||void 0===e?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(sw){throw new yb("unable to convert customHeaders value ".concat(JSON.stringify(i)," to Headers: ").concat(sw.message))}for(const[t,e]of i.entries()){if("x-goog-api-key"===t)throw new yb("Cannot set reserved header name ".concat(t));if("x-goog-api-client"===t)throw new yb("Header name ".concat(t," can only be set using the apiClient field"));n.append(t,e)}}return n}async function Eb(t,e,n,i,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const{url:o,fetchOptions:l}=await async function(t,e,n,i,s,r){const a=new _b(t,e,n,i,r);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},kb(r)),{method:"POST",headers:await Ab(a),body:s})}}(t,e,n,i,s,r);return async function(t,e){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await i(t,e)}catch(sw){!function(t,e){let n=t;t instanceof vb||t instanceof yb||(n=new gb("Error fetching from ".concat(e.toString(),": ").concat(t.message)),n.stack=t.stack);throw n}(sw,t)}n.ok||await async function(t,e){let n,i="";try{const e=await t.json();i=e.error.message,e.error.details&&(i+=" ".concat(JSON.stringify(e.error.details)),n=e.error.details)}catch(sw){}throw new vb("Error fetching from ".concat(e.toString(),": [").concat(t.status," ").concat(t.statusText,"] ").concat(i),t.status,t.statusText,n)}(n,t);return n}(o,l,a)}function kb(t){const e={};if((null===t||void 0===t?void 0:t.timeout)>=0){const n=new AbortController,i=n.signal;setTimeout((()=>n.abort()),t.timeout),e.signal=i}return e}function Sb(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn("This response had ".concat(t.candidates.length," ")+"candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates."),Mb(t.candidates[0]))throw new mb("".concat(Ib(t)),t);return function(t){var e,n,i,s;const r=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(const a of null===(s=null===(i=t.candidates)||void 0===i?void 0:i[0].content)||void 0===s?void 0:s.parts)a.text&&r.push(a.text);return r.length>0?r.join(""):""}(t)}if(t.promptFeedback)throw new mb("Text not available. ".concat(Ib(t)),t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn("This response had ".concat(t.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),Mb(t.candidates[0]))throw new mb("".concat(Ib(t)),t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Cb(t)[0]}if(t.promptFeedback)throw new mb("Function call not available. ".concat(Ib(t)),t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn("This response had ".concat(t.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),Mb(t.candidates[0]))throw new mb("".concat(Ib(t)),t);return Cb(t)}if(t.promptFeedback)throw new mb("Function call not available. ".concat(Ib(t)),t)},t}function Cb(t){var e,n,i,s;const r=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(const a of null===(s=null===(i=t.candidates)||void 0===i?void 0:i[0].content)||void 0===s?void 0:s.parts)a.functionCall&&r.push(a.functionCall);return r.length>0?r:void 0}const Tb=[db.RECITATION,db.SAFETY];function Mb(t){return!!t.finishReason&&Tb.includes(t.finishReason)}function Ib(t){var e,n,i;let s="";if(t.candidates&&0!==t.candidates.length||!t.promptFeedback){if(null===(i=t.candidates)||void 0===i?void 0:i[0]){const e=t.candidates[0];Mb(e)&&(s+="Candidate was blocked due to ".concat(e.finishReason),e.finishMessage&&(s+=": ".concat(e.finishMessage)))}}else s+="Response was blocked",(null===(e=t.promptFeedback)||void 0===e?void 0:e.blockReason)&&(s+=" due to ".concat(t.promptFeedback.blockReason)),(null===(n=t.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(s+=": ".concat(t.promptFeedback.blockReasonMessage));return s}function Rb(t){return this instanceof Rb?(this.v=t,this):new Rb(t)}function Pb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,s=n.apply(t,e||[]),r=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){s[t]&&(i[t]=function(e){return new Promise((function(n,i){r.push([t,e,n,i])>1||o(t,e)}))})}function o(t,e){try{!function(t){t.value instanceof Rb?Promise.resolve(t.value.v).then(l,c):h(r[0][2],t)}(s[t](e))}catch(sw){h(r[0][3],sw)}}function l(t){o("next",t)}function c(t){o("throw",t)}function h(t,e){t(e),r.shift(),r.length&&o(r[0][0],r[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const Db=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Nb(t){const e=function(t){const e=t.getReader();return new ReadableStream({start(t){let n="";return i();function i(){return e.read().then((e=>{let{value:s,done:r}=e;if(r)return n.trim()?void t.error(new gb("Failed to parse stream")):void t.close();n+=s;let a,o=n.match(Db);for(;o;){try{a=JSON.parse(o[1])}catch(sw){return void t.error(new gb('Error parsing JSON response: "'.concat(o[1],'"')))}t.enqueue(a),n=n.substring(o[0].length),o=n.match(Db)}return i()}))}}})}(t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,i]=e.tee();return{stream:Ob(n),response:Lb(i)}}async function Lb(t){const e=[],n=t.getReader();for(;;){const{done:t,value:i}=await n.read();if(t)return Sb(Fb(e));e.push(i)}}function Ob(t){return Pb(this,arguments,(function*(){const e=t.getReader();for(;;){const{value:t,done:n}=yield Rb(e.read());if(n)break;yield yield Rb(Sb(t))}}))}function Fb(t){const e=t[t.length-1],n={promptFeedback:null===e||void 0===e?void 0:e.promptFeedback};for(const i of t){if(i.candidates)for(const t of i.candidates){const e=t.index;if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:t.index}),n.candidates[e].citationMetadata=t.citationMetadata,n.candidates[e].finishReason=t.finishReason,n.candidates[e].finishMessage=t.finishMessage,n.candidates[e].safetyRatings=t.safetyRatings,t.content&&t.content.parts){n.candidates[e].content||(n.candidates[e].content={role:t.content.role||"user",parts:[]});const i={};for(const s of t.content.parts)s.text&&(i.text=s.text),s.functionCall&&(i.functionCall=s.functionCall),0===Object.keys(i).length&&(i.text=""),n.candidates[e].content.parts.push(i)}}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}async function jb(t,e,n,i){return Nb(await Eb(e,xb.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),i))}async function Bb(t,e,n,i){const s=await Eb(e,xb.GENERATE_CONTENT,t,!1,JSON.stringify(n),i);return{response:Sb(await s.json())}}function zb(t){if(null!=t)return"string"===typeof t?{role:"system",parts:[{text:t}]}:t.text?{role:"system",parts:[t]}:t.parts?t.role?t:{role:"system",parts:t.parts}:void 0}function Vb(t){let e=[];if("string"===typeof t)e=[{text:t}];else for(const n of t)"string"===typeof n?e.push({text:n}):e.push(n);return function(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,s=!1;for(const r of t)"functionResponse"in r?(n.parts.push(r),s=!0):(e.parts.push(r),i=!0);if(i&&s)throw new gb("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new gb("No content is provided for sending chat message.");if(i)return e;return n}(e)}function Ub(t){let e;if(t.contents)e=t;else{e={contents:[Vb(t)]}}return t.systemInstruction&&(e.systemInstruction=zb(t.systemInstruction)),e}const Wb=["text","inlineData","functionCall","functionResponse"],Hb={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]};const qb="SILENT_ERROR";class Gb{constructor(t,e,n,i){this.model=e,this.params=n,this.requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,(null===n||void 0===n?void 0:n.history)&&(!function(t){let e=!1;for(const n of t){const{role:t,parts:i}=n;if(!e&&"user"!==t)throw new gb("First content should be with role 'user', got ".concat(t));if(!ob.includes(t))throw new gb("Each item should include role field. Got ".concat(t," but valid roles are: ").concat(JSON.stringify(ob)));if(!Array.isArray(i))throw new gb("Content should have 'parts' property with an array of Parts");if(0===i.length)throw new gb("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0};for(const e of i)for(const t of Wb)t in e&&(s[t]+=1);const r=Hb[t];for(const e of Wb)if(!r.includes(e)&&s[e]>0)throw new gb("Content with role '".concat(t,"' can't contain '").concat(e,"' part"));e=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t){var e,n,i,s,r,a;await this._sendPromise;const o=Vb(t),l={safetySettings:null===(e=this.params)||void 0===e?void 0:e.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(r=this.params)||void 0===r?void 0:r.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,o]};let c;return this._sendPromise=this._sendPromise.then((()=>Bb(this._apiKey,this.model,l,this.requestOptions))).then((t=>{var e;if(t.response.candidates&&t.response.candidates.length>0){this._history.push(o);const n=Object.assign({parts:[],role:"model"},null===(e=t.response.candidates)||void 0===e?void 0:e[0].content);this._history.push(n)}else{const e=Ib(t.response);e&&console.warn("sendMessage() was unsuccessful. ".concat(e,". Inspect response object for details."))}c=t})),await this._sendPromise,c}async sendMessageStream(t){var e,n,i,s,r,a;await this._sendPromise;const o=Vb(t),l={safetySettings:null===(e=this.params)||void 0===e?void 0:e.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(r=this.params)||void 0===r?void 0:r.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,o]},c=jb(this._apiKey,this.model,l,this.requestOptions);return this._sendPromise=this._sendPromise.then((()=>c)).catch((t=>{throw new Error(qb)})).then((t=>t.response)).then((t=>{if(t.candidates&&t.candidates.length>0){this._history.push(o);const e=Object.assign({},t.candidates[0].content);e.role||(e.role="model"),this._history.push(e)}else{const e=Ib(t);e&&console.warn("sendMessageStream() was unsuccessful. ".concat(e,". Inspect response object for details."))}})).catch((t=>{t.message!==qb&&console.error(t)})),c}}class Kb{constructor(t,e,n){this.apiKey=t,e.model.includes("/")?this.model=e.model:this.model="models/".concat(e.model),this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=zb(e.systemInstruction),this.cachedContent=e.cachedContent,this.requestOptions=n||{}}async generateContent(t){var e;const n=Ub(t);return Bb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(e=this.cachedContent)||void 0===e?void 0:e.name},n),this.requestOptions)}async generateContentStream(t){var e;const n=Ub(t);return jb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(e=this.cachedContent)||void 0===e?void 0:e.name},n),this.requestOptions)}startChat(t){var e;return new Gb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(e=this.cachedContent)||void 0===e?void 0:e.name},t),this.requestOptions)}async countTokens(t){const e=function(t,e){let n={};const i=null!=t.generateContentRequest;if(t.contents){if(i)throw new yb("CountTokensRequest must have one of contents or generateContentRequest, not both.");n=Object.assign({},t)}else if(i)n=Object.assign({},t),n.generateContentRequest.model=e;else{const e=Vb(t);n.contents=[e]}return n}(t,this.model);return async function(t,e,n,i){return(await Eb(e,xb.COUNT_TOKENS,t,!1,JSON.stringify(n),i)).json()}(this.apiKey,this.model,e,this.requestOptions)}async embedContent(t){const e=function(t){if("string"===typeof t||Array.isArray(t))return{content:Vb(t)};return t}(t);return async function(t,e,n,i){return(await Eb(e,xb.EMBED_CONTENT,t,!1,JSON.stringify(n),i)).json()}(this.apiKey,this.model,e,this.requestOptions)}async batchEmbedContents(t){return async function(t,e,n,i){const s=n.requests.map((t=>Object.assign(Object.assign({},t),{model:e})));return(await Eb(e,xb.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),i)).json()}(this.apiKey,this.model,t,this.requestOptions)}}class Yb{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new gb("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Kb(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e){if(!t.name)throw new yb("Cached content must contain a `name` field.");if(!t.model)throw new yb("Cached content must contain a `model` field.");const n={model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t};return new Kb(this.apiKey,n,e)}}const Xb=t=>{let{application:n,onClose:i}=t;const[s,r]=(0,e.useState)(""),[a,o]=(0,e.useState)(!1),[l,c]=(0,e.useState)([]),h=()=>{const t=new Date,e=t.getHours(),n=t.getMinutes();return"".concat(e,":").concat(n)};return(0,Mt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,Mt.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl",children:[(0,Mt.jsx)("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,Mt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,Mt.jsxs)("h2",{className:"text-2xl font-semibold mb-4",children:["Interview Preparation for ",n.postingDetail.title]}),(0,Mt.jsxs)("div",{className:"relative",children:[(0,Mt.jsx)("input",{value:s,onChange:t=>r(t.target.value),type:"text",className:"p-4 w-full border-2 border-slate-200 rounded-full text-sm focus:border-blue-200",placeholder:"Ask me anything..."}),(0,Mt.jsx)("div",{className:"absolute top-1/2 end-2 -translate-y-1/2",children:(0,Mt.jsx)("button",{onClick:async()=>{o(!0);const t=new Yb("AIzaSyBrFLwWvr-WPscoHu7O-shXHSIZnlP4FNs").getGenerativeModel({model:"gemini-pro"}),e={temperature:.9,topK:1,topP:1,maxOutputTokens:2048},i=[{category:lb.HARM_CATEGORY_HARASSMENT,threshold:cb.BLOCK_MEDIUM_AND_ABOVE}],r=[{text:"As an AI developed specifically to assist students in preparing for job interviews, my primary function is to provide accurate and relevant interview preparation questions based on the job role you have applied for. Please select a job application to begin."},{text:"Job Title: ".concat(n.postingDetail.title,"\nJob Description: ").concat(n.postingDetail.description)},{text:s}];try{const n=await t.generateContent({contents:[{role:"user",parts:r}],generationConfig:e,safetySettings:i}),a=n.response.text().replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");c((t=>[...t,{id:Date.now(),role:"user",time:h(),text:s},{id:Date.now()+1,role:"bot",time:h(),text:a.replace(/\n/g,"<br>")}]))}finally{o(!1)}},type:"button",className:"w-10 h-10 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-full border border-transparent text-gray-500 hover:text-gray-800 bg-gray-100 disabled:opacity-50 disabled:pointer-events-none",disabled:a,children:(0,Mt.jsx)("svg",{className:"w-5 h-5 text-slate-600 hover:text-slate-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H8m12 0-4 4m4-4-4-4M9 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h2"})})})})]}),a&&(0,Mt.jsxs)("div",{className:"max-w-sm animate-pulse mt-4",children:[(0,Mt.jsx)("div",{role:"status",className:"h-2.5 bg-gray-200 rounded-full w-48 mb-4"}),(0,Mt.jsx)("div",{className:"h-2 bg-gray-200 rounded-full max-w-[360px] mb-2.5"}),(0,Mt.jsx)("div",{className:"h-2 bg-gray-200 rounded-full mb-2.5"}),(0,Mt.jsx)("div",{className:"h-2 bg-gray-200 rounded-full max-w-[330px] mb-2.5"}),(0,Mt.jsx)("div",{className:"h-2 bg-gray-200 rounded-full max-w-[300px] mb-2.5"}),(0,Mt.jsx)("div",{className:"h-2 bg-gray-200 rounded-full max-w-[360px]"}),(0,Mt.jsx)("span",{className:"sr-only",children:"Loading..."})]}),l.length>0&&(0,Mt.jsx)("div",{className:"space-y-4 mt-4",children:l.map((t=>(0,Mt.jsxs)("div",{className:"chat-item ".concat("bot"===t.role?"chat-start":"chat-end"),children:[(0,Mt.jsx)("div",{className:"chat-image avatar",children:(0,Mt.jsx)("div",{className:"w-10 rounded-full",children:(0,Mt.jsx)("img",{width:"30",height:"30",className:"bg-slate-100",alt:"bot"===t.role?"Bot Avatar":"User Avatar",src:"bot"===t.role?"https://img.freepik.com/premium-photo/3d-style-chat-bot-robot-ai-app-icon-isolated-color-background-generative-ai_159242-25913.jpg":"https://cdn1.iconfinder.com/data/icons/facely-metapeople-3d-avatar-set/512/17._Designer.png"})})}),(0,Mt.jsxs)("div",{className:"chat-header",children:["bot"===t.role?"Kyle":"User",(0,Mt.jsx)("time",{className:"text-xs opacity-50",children:t.time})]}),(0,Mt.jsx)("div",{className:"bg-slate-100 border border-gray-200 rounded-2xl p-3 space-y-2",dangerouslySetInnerHTML:{__html:t.text}})]},t.id)))})]})})},Qb=()=>{const[t,n]=(0,e.useState)([]),[i,s]=(0,e.useState)({name:"",grade:"",gpa:"",resume:null,coverLetter:null}),[r,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(!1),[c,h]=(0,e.useState)(null),[u,d]=(0,e.useState)(null),[f,p]=(0,e.useState)(""),g=Tt.get("studentId");(0,e.useEffect)((()=>{if(!g)return void h("You must be logged in as a student to view your applications.");l(!0);const t=eu(jh(Zc(Ru,"applications"),zh("studentId","==",g)),(async t=>{let e=[];const i=[];t.docs.forEach((t=>{e.push({id:t.id,...t.data()}),i.push(t.data().postingId)}));const s=await Promise.all(i.map((async t=>{const e=await function(t){t=Kc(t,Jc);const e=Kc(t.firestore,ih);return zc(sh(e),t._key).then((n=>iu(e,t,n)))}(th(Ru,"postings",t));return e.exists?{id:t,...e.data()}:null})));e.forEach((t=>{const e=s.find((e=>e.id===t.postingId));e&&(t.postingDetail=e)})),n(e),l(!1)}),(t=>{console.error("Error fetching applications:",t),h(t.message),l(!1)}));return()=>{t()}}),[g]);const m=t.filter((t=>t.postingDetail&&(t.postingDetail.title&&t.postingDetail.title.toLowerCase().includes(f.toLowerCase())||t.postingDetail.description&&t.postingDetail.description.toLowerCase().includes(f.toLowerCase())||t.postingDetail.location&&t.postingDetail.location.toLowerCase().includes(f.toLowerCase())||t.studentName&&t.studentName.toLowerCase().includes(f.toLowerCase()))));return o?(0,Mt.jsx)(zu,{}):c?(0,Mt.jsxs)("div",{children:["Error: ",c]}):(0,Mt.jsxs)("div",{className:"p-4",children:[(0,Mt.jsx)("h1",{className:"text-5xl mb-4 font-bold text-center",children:"My Applications"}),(0,Mt.jsx)("div",{className:"mb-4",children:(0,Mt.jsx)("input",{type:"text",placeholder:"Search applications...",value:f,onChange:t=>p(t.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})}),(0,Mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 m-8 rounded-2xl",children:m.length>0?m.map((t=>(0,Mt.jsx)("div",{className:"p-4 rounded-2xl shadow-lg ".concat("accepted"===t.status?"bg-emerald-50":"rejected"===t.status?"bg-rose-50":"bg-amber-50"),children:t.postingDetail&&(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("h2",{className:"text-2xl font-semibold ".concat("accepted"===t.status?"text-green-500":"rejected"===t.status?"text-red-500":"text-yellow-500"),children:t.postingDetail.title}),"accepted"===t.status&&(0,Mt.jsxs)("p",{className:"bg-green-200 text-green-800 text-lg font-bold px-3 py-2 rounded-xl",children:["Congratulations! You have been accepted to ",t.postingDetail.title,"."]}),"rejected"===t.status&&(0,Mt.jsxs)("p",{className:"bg-red-200 text-rose-800 text-lg font-bold px-3 py-2 rounded-xl",children:["We are sorry to inform you that your application to ",t.postingDetail.title," has been rejected."]}),(0,Mt.jsx)("heading",{className:"font-extrabold text-center text-xl bg-blue-300 px-3 py-1 rounded-3xl",children:"Your Information"}),(0,Mt.jsx)("br",{}),(0,Mt.jsx)("br",{}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Student Name:"})," ",t.studentName]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Grade:"})," ",t.grade]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"GPA:"})," ",t.gpa]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Resume:"})," ",(0,Mt.jsx)("a",{href:t.resume,target:"_blank",children:"Preview"})]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Cover Letter:"})," ",(0,Mt.jsx)("a",{href:t.coverLetter,target:"_blank",children:"Preview"})]}),(0,Mt.jsx)("br",{}),(0,Mt.jsx)("heading",{className:"font-extrabold text-center text-xl bg-blue-300 px-3 py-1 rounded-3xl",children:"Job Information"}),(0,Mt.jsx)("br",{}),(0,Mt.jsx)("br",{}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Salary Range:"})," ",t.postingDetail.salaryRange]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Location:"})," ",t.postingDetail.location]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Description:"})," ",t.postingDetail.description]}),(0,Mt.jsxs)("p",{children:[(0,Mt.jsx)("strong",{children:"Status:"})," ","pending"===t.status?"Pending":"accepted"===t.status?"Accepted":"rejected"===t.status?"Rejected":"N/A"]}),"pending"===t.status&&(0,Mt.jsx)("button",{onClick:()=>d(t),className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600",children:"Prepare for Interview"})]})},t.id))):(0,Mt.jsx)("div",{className:"p-4 border rounded-lg shadow-md",children:(0,Mt.jsx)("h2",{className:"text-2xl font-semibold",children:"No applications found"})})}),u&&(0,Mt.jsx)(Xb,{application:u,onClose:()=>d(null)})]})};var Jb=n(343),$b=n.n(Jb);const Zb=function(){const[t,n]=(0,e.useState)(!1),[i,s]=(0,e.useState)([]),[r,a]=(0,e.useState)("");return(0,Mt.jsxs)("div",{className:"App",style:{display:"flex",flexDirection:"row",padding:"20px"},children:[(0,Mt.jsxs)("div",{style:{flex:1,marginRight:"20px"},children:[(0,Mt.jsxs)("header",{className:"App-header",children:[(0,Mt.jsx)("h1",{children:"Upload Your Resume for AI Feedback"}),(0,Mt.jsx)("input",{type:"file",accept:"application/pdf",onChange:t=>{const e=t.target.files[0];e&&$b()(e).then((t=>{a(t),(async t=>{n(!0);const e=new Yb("AIzaSyBrFLwWvr-WPscoHu7O-shXHSIZnlP4FNs").getGenerativeModel({model:"gemini-pro"}),i={temperature:.7,topK:10,topP:.9,maxOutputTokens:1024},r=[{category:lb.HARM_CATEGORY_HARASSMENT,threshold:cb.BLOCK_MEDIUM_AND_ABOVE}];try{const n=(await e.generateContent({contents:[{role:"user",parts:[{text:"\n      You are an AI resume reviewer. Please analyze the following resume and provide feedback. Focus on the following aspects:\n      1. Structure and readability\n      2. Key skills and qualifications\n      3. Relevance and clarity of work experience\n      4. Overall presentation and professionalism\n      5. Any areas for improvement or potential omissions\n\n      **DO NOT INCLUDE ORIGINAL RESUME IN YOUR RESPONSE**\n    "}]},{role:"user",parts:[{text:t}]}],generationConfig:i,safetySettings:r})).response.text();s((t=>[...t,{id:Date.now()+1,role:"bot",text:n}]))}finally{n(!1)}})(t)})).catch((t=>{console.error("Failed to extract text from pdf:",t),alert("An error occurred while extracting the text.")}))}})]}),t&&(0,Mt.jsx)("div",{className:"loading-indicator",children:(0,Mt.jsx)("p",{children:"Loading..."})}),(0,Mt.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Mt.jsx)("h2",{children:"Resume Keyword Preview"}),(0,Mt.jsx)("textarea",{className:"rounded-2xl hover:shadow-lg",value:r,readOnly:!0,rows:15,style:{width:"100%",height:"300px",padding:"10px",borderRadius:"5px",border:"1px solid #ddd",fontFamily:"Arial, sans-serif"}})]})]}),(0,Mt.jsx)("div",{style:{flex:1},children:i.length>0&&(0,Mt.jsxs)("div",{className:"chat-history bg-indigo-100 rounded-2xl p-6",children:[(0,Mt.jsx)("h2",{className:"text-xl text-indigo-900 font-bold mb-4",children:"AI Feedback"}),i.map((t=>(0,Mt.jsx)("div",{className:"chat-item ".concat("bot"===t.role?"chat-start":"chat-end"),style:{marginBottom:"15px"},children:(0,Mt.jsx)("div",{className:"chat-text text-indigo-800",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:t.text})},t.id)))]})})]})},tw=()=>{const[t,n]=(0,e.useState)(!1);return(0,Mt.jsxs)("div",{class:"relative",children:[(0,Mt.jsx)("header",{class:"absolute inset-x-0 top-0 z-10 w-full bg-white shadow-md",children:(0,Mt.jsx)("div",{class:"px-4 mx-auto sm:px-6 lg:px-8",children:(0,Mt.jsxs)("div",{class:"flex items-center justify-between h-16 lg:h-20",children:[(0,Mt.jsx)("div",{class:"flex-shrink-0",children:(0,Mt.jsx)(Et,{to:"/",class:"flex",children:(0,Mt.jsx)("span",{className:"text-indigo-600 font-extrabold text-2xl",children:"AlphaJob"})})}),(0,Mt.jsxs)("div",{class:"hidden ml-auto lg:flex lg:items-center lg:justify-center lg:space-x-10",children:[(0,Mt.jsx)(Et,{to:"/postings",class:"text-base font-semibold text-black transition-all duration-200 hover:text-indigo-600",children:"Postings"}),(0,Mt.jsx)(Et,{to:"/student-login",class:"text-base font-semibold text-black transition-all duration-200 hover:text-indigo-600",children:"Student Login"}),(0,Mt.jsx)(Et,{to:"/employer-login",class:"text-base font-semibold text-black transition-all duration-200 hover:text-indigo-600",children:"Employer Login"})]})]})})}),(0,Mt.jsx)("section",{class:"bg-indigo-100 overflow-hidden",children:(0,Mt.jsxs)("div",{class:"flex flex-col lg:flex-row lg:items-stretch lg:min-h-[800px]",children:[(0,Mt.jsxs)("div",{class:"relative flex items-center justify-center w-full lg:order-2 lg:w-7/12",children:[(0,Mt.jsx)("div",{class:"absolute bottom-0 right-0 hidden lg:block",children:(0,Mt.jsx)("img",{class:"object-contain w-auto h-48",src:"https://cdn.rareblocks.xyz/collection/celebration/images/hero/3/curved-lines.png",alt:""})}),(0,Mt.jsxs)("div",{class:"relative px-4 pt-24 pb-16 text-center sm:px-6 md:px-24 2xl:px-32 lg:py-24 lg:text-left",children:[(0,Mt.jsxs)("h1",{class:"text-4xl font-bold text-black sm:text-6xl xl:text-8xl",children:["Get it done.",(0,Mt.jsx)("br",{}),"Fast, Easy."]}),(0,Mt.jsx)("p",{class:"mt-8 text-xl text-black",children:"We help you to make your remote work life easier. Build a distruction free working experience."}),(0,Mt.jsx)("button",{type:"submit",class:"inline-flex items-center justify-center w-full px-4 py-4 mt-4 font-semibold text-white transition-all duration-200 bg-indigo-500 border border-transparent rounded-full sm:w-auto sm:ml-4 sm:mt-0 hover:bg-orange-600 focus:bg-orange-600",children:"Try 14 days free"}),(0,Mt.jsx)("p",{class:"mt-5 text-base text-black",children:"Instant access . No credit card required"})]}),(0,Mt.jsx)("div",{class:"absolute right-0 z-10 -bottom-16 lg:top-24 lg:-left-20",children:(0,Mt.jsx)("img",{class:"w-32 h-32 md:w-40 md:h-40",src:"https://cdn.rareblocks.xyz/collection/celebration/images/hero/3/circular-text.png",alt:""})})]}),(0,Mt.jsxs)("div",{class:"relative w-full overflow-hidden lg:order-1 h-96 lg:h-auto lg:w-5/12",children:[(0,Mt.jsx)("div",{class:"absolute inset-0",children:(0,Mt.jsx)("img",{class:"object-cover w-full h-full scale-150",src:"https://cdn.rareblocks.xyz/collection/celebration/images/hero/3/man-working-on-laptop.jpg",alt:""})}),(0,Mt.jsx)("div",{class:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"}),(0,Mt.jsx)("div",{class:"absolute bottom-0 left-0",children:(0,Mt.jsxs)("div",{class:"p-4 sm:p-6 lg:p-8",children:[(0,Mt.jsxs)("div",{class:"flex items-center",children:[(0,Mt.jsx)("svg",{class:"w-10 h-10 text-orange-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Mt.jsx)("path",{"fill-rule":"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z","clip-rule":"evenodd"})}),(0,Mt.jsx)("h2",{class:"font-bold text-white text-7xl ml-2.5",children:"395"})]}),(0,Mt.jsx)("p",{class:"max-w-xs mt-1.5 text-xl text-white",children:"Professionals have organized their desk via PostCra"})]})})]})]})})]})},ew=()=>{const t=X();return(0,Mt.jsxs)(Mt.Fragment,{children:["/help"!==t.pathname&&(0,Mt.jsx)(It,{}),(0,Mt.jsxs)(ft,{children:[(0,Mt.jsx)(ut,{path:"/",element:(0,Mt.jsx)(Vu,{})}),(0,Mt.jsx)(ut,{path:"/postings",element:(0,Mt.jsx)(Vu,{})}),(0,Mt.jsx)(ut,{path:"/create",element:(0,Mt.jsx)(Uu,{})}),(0,Mt.jsx)(ut,{path:"/employer-login",element:(0,Mt.jsx)(qu,{isEmployer:!0})}),(0,Mt.jsx)(ut,{path:"/student-login",element:(0,Mt.jsx)(qu,{isEmployer:!1})}),(0,Mt.jsx)(ut,{path:"/backend",element:(0,Mt.jsx)(rb,{})}),(0,Mt.jsx)(ut,{path:"/applications",element:(0,Mt.jsx)(Qb,{})}),(0,Mt.jsx)(ut,{path:"/ai_analysis",element:(0,Mt.jsx)(Zb,{})}),(0,Mt.jsx)(ut,{path:"/AI",element:(0,Mt.jsx)(Xb,{})}),(0,Mt.jsx)(ut,{path:"/help",element:(0,Mt.jsx)(tw,{})})]})]})},nw=()=>(0,Mt.jsx)(xt,{children:(0,Mt.jsx)(ew,{})}),iw=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,453)).then((e=>{let{getCLS:n,getFID:i,getFCP:s,getLCP:r,getTTFB:a}=e;n(t),i(t),s(t),r(t),a(t)}))};s.createRoot(document.getElementById("root")).render((0,Mt.jsx)(e.StrictMode,{children:(0,Mt.jsx)(nw,{})})),iw()})()})();
//# sourceMappingURL=main.38739550.js.map